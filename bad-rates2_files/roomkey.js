webpackJsonp([4],[,,,,function(e,t,n){!function(t,n){e.exports=function(){"use strict";function e(e,t){t&&(e.prototype=Object.create(t.prototype)),e.prototype.constructor=e}function t(e){return o(e)?e:O(e)}function n(e){return a(e)?e:A(e)}function r(e){return s(e)?e:P(e)}function i(e){return o(e)&&!u(e)?e:R(e)}function o(e){return!(!e||!e[ln])}function a(e){return!(!e||!e[cn])}function s(e){return!(!e||!e[pn])}function u(e){return a(e)||s(e)}function l(e){return!(!e||!e[dn])}function c(e){return e.value=!1,e}function p(e){e&&(e.value=!0)}function d(){}function f(e,t){t=t||0;for(var n=Math.max(0,e.length-t),r=new Array(n),i=0;i<n;i++)r[i]=e[i+t];return r}function h(e){return void 0===e.size&&(e.size=e.__iterate(g)),e.size}function m(e,t){if("number"!=typeof t){var n=t>>>0;if(""+n!==t||4294967295===n)return NaN;t=n}return t<0?h(e)+t:t}function g(){return!0}function y(e,t,n){return(0===e||void 0!==n&&e<=-n)&&(void 0===t||void 0!==n&&t>=n)}function v(e,t){return b(e,t,0)}function _(e,t){return b(e,t,t)}function b(e,t,n){return void 0===e?n:e<0?Math.max(0,t+e):void 0===t?e:Math.min(t,e)}function x(e){this.next=e}function w(e,t,n,r){var i=0===e?t:1===e?n:[t,n];return r?r.value=i:r={value:i,done:!1},r}function S(){return{value:void 0,done:!0}}function k(e){return!!M(e)}function E(e){return e&&"function"==typeof e.next}function T(e){var t=M(e);return t&&t.call(e)}function M(e){var t=e&&(wn&&e[wn]||e[Sn]);if("function"==typeof t)return t}function C(e){return e&&"number"==typeof e.length}function O(e){return null===e||void 0===e?j():o(e)?e.toSeq():F(e)}function A(e){return null===e||void 0===e?j().toKeyedSeq():o(e)?a(e)?e.toSeq():e.fromEntrySeq():H(e)}function P(e){return null===e||void 0===e?j():o(e)?a(e)?e.entrySeq():e.toIndexedSeq():B(e)}function R(e){return(null===e||void 0===e?j():o(e)?a(e)?e.entrySeq():e:B(e)).toSetSeq()}function D(e){this._array=e,this.size=e.length}function I(e){var t=Object.keys(e);this._object=e,this._keys=t,this.size=t.length}function N(e){this._iterable=e,this.size=e.length||e.size}function L(e){this._iterator=e,this._iteratorCache=[]}function z(e){return!(!e||!e[En])}function j(){return Tn||(Tn=new D([]))}function H(e){var t=Array.isArray(e)?new D(e).fromEntrySeq():E(e)?new L(e).fromEntrySeq():k(e)?new N(e).fromEntrySeq():"object"==typeof e?new I(e):void 0;if(!t)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+e);return t}function B(e){var t=U(e);if(!t)throw new TypeError("Expected Array or iterable object of values: "+e);return t}function F(e){var t=U(e)||"object"==typeof e&&new I(e);if(!t)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+e);return t}function U(e){return C(e)?new D(e):E(e)?new L(e):k(e)?new N(e):void 0}function V(e,t,n,r){var i=e._cache;if(i){for(var o=i.length-1,a=0;a<=o;a++){var s=i[n?o-a:a];if(!1===t(s[1],r?s[0]:a,e))return a+1}return a}return e.__iterateUncached(t,n)}function Y(e,t,n,r){var i=e._cache;if(i){var o=i.length-1,a=0;return new x(function(){var e=i[n?o-a:a];return a++>o?S():w(t,r?e[0]:a-1,e[1])})}return e.__iteratorUncached(t,n)}function W(e,t){return t?q(t,e,"",{"":e}):G(e)}function q(e,t,n,r){return Array.isArray(t)?e.call(r,n,P(t).map(function(n,r){return q(e,n,r,t)})):Z(t)?e.call(r,n,A(t).map(function(n,r){return q(e,n,r,t)})):t}function G(e){return Array.isArray(e)?P(e).map(G).toList():Z(e)?A(e).map(G).toMap():e}function Z(e){return e&&(e.constructor===Object||void 0===e.constructor)}function K(e,t){if(e===t||e!==e&&t!==t)return!0;if(!e||!t)return!1;if("function"==typeof e.valueOf&&"function"==typeof t.valueOf){if(e=e.valueOf(),t=t.valueOf(),e===t||e!==e&&t!==t)return!0;if(!e||!t)return!1}return!("function"!=typeof e.equals||"function"!=typeof t.equals||!e.equals(t))}function J(e,t){if(e===t)return!0;if(!o(t)||void 0!==e.size&&void 0!==t.size&&e.size!==t.size||void 0!==e.__hash&&void 0!==t.__hash&&e.__hash!==t.__hash||a(e)!==a(t)||s(e)!==s(t)||l(e)!==l(t))return!1;if(0===e.size&&0===t.size)return!0;var n=!u(e);if(l(e)){var r=e.entries();return t.every(function(e,t){var i=r.next().value;return i&&K(i[1],e)&&(n||K(i[0],t))})&&r.next().done}var i=!1;if(void 0===e.size)if(void 0===t.size)"function"==typeof e.cacheResult&&e.cacheResult();else{i=!0;var c=e;e=t,t=c}var p=!0,d=t.__iterate(function(t,r){if(n?!e.has(t):i?!K(t,e.get(r,gn)):!K(e.get(r,gn),t))return p=!1,!1});return p&&e.size===d}function X(e,t){if(!(this instanceof X))return new X(e,t);if(this._value=e,this.size=void 0===t?1/0:Math.max(0,t),0===this.size){if(Mn)return Mn;Mn=this}}function $(e,t){if(!e)throw new Error(t)}function Q(e,t,n){if(!(this instanceof Q))return new Q(e,t,n);if($(0!==n,"Cannot step a Range by 0"),e=e||0,void 0===t&&(t=1/0),n=void 0===n?1:Math.abs(n),t<e&&(n=-n),this._start=e,this._end=t,this._step=n,this.size=Math.max(0,Math.ceil((t-e)/n-1)+1),0===this.size){if(Cn)return Cn;Cn=this}}function ee(){throw TypeError("Abstract")}function te(){}function ne(){}function re(){}function ie(e){return e>>>1&1073741824|3221225471&e}function oe(e){if(!1===e||null===e||void 0===e)return 0;if("function"==typeof e.valueOf&&(!1===(e=e.valueOf())||null===e||void 0===e))return 0;if(!0===e)return 1;var t=typeof e;if("number"===t){if(e!==e||e===1/0)return 0;var n=0|e;for(n!==e&&(n^=4294967295*e);e>4294967295;)e/=4294967295,n^=e;return ie(n)}if("string"===t)return e.length>Ln?ae(e):se(e);if("function"==typeof e.hashCode)return e.hashCode();if("object"===t)return ue(e);if("function"==typeof e.toString)return se(e.toString());throw new Error("Value type "+t+" cannot be hashed.")}function ae(e){var t=Hn[e];return void 0===t&&(t=se(e),jn===zn&&(jn=0,Hn={}),jn++,Hn[e]=t),t}function se(e){for(var t=0,n=0;n<e.length;n++)t=31*t+e.charCodeAt(n)|0;return ie(t)}function ue(e){var t;if(Dn&&void 0!==(t=On.get(e)))return t;if(void 0!==(t=e[Nn]))return t;if(!Rn){if(void 0!==(t=e.propertyIsEnumerable&&e.propertyIsEnumerable[Nn]))return t;if(void 0!==(t=le(e)))return t}if(t=++In,1073741824&In&&(In=0),Dn)On.set(e,t);else{if(void 0!==Pn&&!1===Pn(e))throw new Error("Non-extensible objects are not allowed as keys.");if(Rn)Object.defineProperty(e,Nn,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(void 0!==e.propertyIsEnumerable&&e.propertyIsEnumerable===e.constructor.prototype.propertyIsEnumerable)e.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},e.propertyIsEnumerable[Nn]=t;else{if(void 0===e.nodeType)throw new Error("Unable to set a non-enumerable property on object.");e[Nn]=t}}return t}function le(e){if(e&&e.nodeType>0)switch(e.nodeType){case 1:return e.uniqueID;case 9:return e.documentElement&&e.documentElement.uniqueID}}function ce(e){$(e!==1/0,"Cannot perform this action with an infinite size.")}function pe(e){return null===e||void 0===e?we():de(e)&&!l(e)?e:we().withMutations(function(t){var r=n(e);ce(r.size),r.forEach(function(e,n){return t.set(n,e)})})}function de(e){return!(!e||!e[Bn])}function fe(e,t){this.ownerID=e,this.entries=t}function he(e,t,n){this.ownerID=e,this.bitmap=t,this.nodes=n}function me(e,t,n){this.ownerID=e,this.count=t,this.nodes=n}function ge(e,t,n){this.ownerID=e,this.keyHash=t,this.entries=n}function ye(e,t,n){this.ownerID=e,this.keyHash=t,this.entry=n}function ve(e,t,n){this._type=t,this._reverse=n,this._stack=e._root&&be(e._root)}function _e(e,t){return w(e,t[0],t[1])}function be(e,t){return{node:e,index:0,__prev:t}}function xe(e,t,n,r){var i=Object.create(Fn);return i.size=e,i._root=t,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function we(){return Un||(Un=xe(0))}function Se(e,t,n){var r,i;if(e._root){var o=c(yn),a=c(vn);if(r=ke(e._root,e.__ownerID,0,void 0,t,n,o,a),!a.value)return e;i=e.size+(o.value?n===gn?-1:1:0)}else{if(n===gn)return e;i=1,r=new fe(e.__ownerID,[[t,n]])}return e.__ownerID?(e.size=i,e._root=r,e.__hash=void 0,e.__altered=!0,e):r?xe(i,r):we()}function ke(e,t,n,r,i,o,a,s){return e?e.update(t,n,r,i,o,a,s):o===gn?e:(p(s),p(a),new ye(t,r,[i,o]))}function Ee(e){return e.constructor===ye||e.constructor===ge}function Te(e,t,n,r,i){if(e.keyHash===r)return new ge(t,r,[e.entry,i]);var o,a=(0===n?e.keyHash:e.keyHash>>>n)&mn,s=(0===n?r:r>>>n)&mn;return new he(t,1<<a|1<<s,a===s?[Te(e,t,n+fn,r,i)]:(o=new ye(t,r,i),a<s?[e,o]:[o,e]))}function Me(e,t,n,r){e||(e=new d);for(var i=new ye(e,oe(n),[n,r]),o=0;o<t.length;o++){var a=t[o];i=i.update(e,0,void 0,a[0],a[1])}return i}function Ce(e,t,n,r){for(var i=0,o=0,a=new Array(n),s=0,u=1,l=t.length;s<l;s++,u<<=1){var c=t[s];void 0!==c&&s!==r&&(i|=u,a[o++]=c)}return new he(e,i,a)}function Oe(e,t,n,r,i){for(var o=0,a=new Array(hn),s=0;0!==n;s++,n>>>=1)a[s]=1&n?t[o++]:void 0;return a[r]=i,new me(e,o+1,a)}function Ae(e,t,r){for(var i=[],a=0;a<r.length;a++){var s=r[a],u=n(s);o(s)||(u=u.map(function(e){return W(e)})),i.push(u)}return De(e,t,i)}function Pe(e,t,n){return e&&e.mergeDeep&&o(t)?e.mergeDeep(t):K(e,t)?e:t}function Re(e){return function(t,n,r){if(t&&t.mergeDeepWith&&o(n))return t.mergeDeepWith(e,n);var i=e(t,n,r);return K(t,i)?t:i}}function De(e,t,n){return n=n.filter(function(e){return 0!==e.size}),0===n.length?e:0!==e.size||e.__ownerID||1!==n.length?e.withMutations(function(e){for(var r=t?function(n,r){e.update(r,gn,function(e){return e===gn?n:t(e,n,r)})}:function(t,n){e.set(n,t)},i=0;i<n.length;i++)n[i].forEach(r)}):e.constructor(n[0])}function Ie(e,t,n,r){var i=e===gn,o=t.next();if(o.done){var a=i?n:e,s=r(a);return s===a?e:s}$(i||e&&e.set,"invalid keyPath");var u=o.value,l=i?gn:e.get(u,gn),c=Ie(l,t,n,r);return c===l?e:c===gn?e.remove(u):(i?we():e).set(u,c)}function Ne(e){return e-=e>>1&1431655765,e=(858993459&e)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,127&(e+=e>>16)}function Le(e,t,n,r){var i=r?e:f(e);return i[t]=n,i}function ze(e,t,n,r){var i=e.length+1;if(r&&t+1===i)return e[t]=n,e;for(var o=new Array(i),a=0,s=0;s<i;s++)s===t?(o[s]=n,a=-1):o[s]=e[s+a];return o}function je(e,t,n){var r=e.length-1;if(n&&t===r)return e.pop(),e;for(var i=new Array(r),o=0,a=0;a<r;a++)a===t&&(o=1),i[a]=e[a+o];return i}function He(e){var t=Ye();if(null===e||void 0===e)return t;if(Be(e))return e;var n=r(e),i=n.size;return 0===i?t:(ce(i),i>0&&i<hn?Ve(0,i,fn,null,new Fe(n.toArray())):t.withMutations(function(e){e.setSize(i),n.forEach(function(t,n){return e.set(n,t)})}))}function Be(e){return!(!e||!e[qn])}function Fe(e,t){this.array=e,this.ownerID=t}function Ue(e,t){function n(e,t,n){return 0===t?r(e,n):i(e,t,n)}function r(e,n){var r=n===s?u&&u.array:e&&e.array,i=n>o?0:o-n,l=a-n;return l>hn&&(l=hn),function(){if(i===l)return Kn;var e=t?--l:i++;return r&&r[e]}}function i(e,r,i){var s,u=e&&e.array,l=i>o?0:o-i>>r,c=1+(a-i>>r);return c>hn&&(c=hn),function(){for(;;){if(s){var e=s();if(e!==Kn)return e;s=null}if(l===c)return Kn;var o=t?--c:l++;s=n(u&&u[o],r-fn,i+(o<<r))}}}var o=e._origin,a=e._capacity,s=Xe(a),u=e._tail;return n(e._root,e._level,0)}function Ve(e,t,n,r,i,o,a){var s=Object.create(Gn);return s.size=t-e,s._origin=e,s._capacity=t,s._level=n,s._root=r,s._tail=i,s.__ownerID=o,s.__hash=a,s.__altered=!1,s}function Ye(){return Zn||(Zn=Ve(0,0,fn))}function We(e,t,n){if((t=m(e,t))!==t)return e;if(t>=e.size||t<0)return e.withMutations(function(e){t<0?Ke(e,t).set(0,n):Ke(e,0,t+1).set(t,n)});t+=e._origin;var r=e._tail,i=e._root,o=c(vn);return t>=Xe(e._capacity)?r=qe(r,e.__ownerID,0,t,n,o):i=qe(i,e.__ownerID,e._level,t,n,o),o.value?e.__ownerID?(e._root=i,e._tail=r,e.__hash=void 0,e.__altered=!0,e):Ve(e._origin,e._capacity,e._level,i,r):e}function qe(e,t,n,r,i,o){var a=r>>>n&mn,s=e&&a<e.array.length;if(!s&&void 0===i)return e;var u;if(n>0){var l=e&&e.array[a],c=qe(l,t,n-fn,r,i,o);return c===l?e:(u=Ge(e,t),u.array[a]=c,u)}return s&&e.array[a]===i?e:(p(o),u=Ge(e,t),void 0===i&&a===u.array.length-1?u.array.pop():u.array[a]=i,u)}function Ge(e,t){return t&&e&&t===e.ownerID?e:new Fe(e?e.array.slice():[],t)}function Ze(e,t){if(t>=Xe(e._capacity))return e._tail;if(t<1<<e._level+fn){for(var n=e._root,r=e._level;n&&r>0;)n=n.array[t>>>r&mn],r-=fn;return n}}function Ke(e,t,n){void 0!==t&&(t|=0),void 0!==n&&(n|=0);var r=e.__ownerID||new d,i=e._origin,o=e._capacity,a=i+t,s=void 0===n?o:n<0?o+n:i+n;if(a===i&&s===o)return e;if(a>=s)return e.clear();for(var u=e._level,l=e._root,c=0;a+c<0;)l=new Fe(l&&l.array.length?[void 0,l]:[],r),u+=fn,c+=1<<u;c&&(a+=c,i+=c,s+=c,o+=c);for(var p=Xe(o),f=Xe(s);f>=1<<u+fn;)l=new Fe(l&&l.array.length?[l]:[],r),u+=fn;var h=e._tail,m=f<p?Ze(e,s-1):f>p?new Fe([],r):h;if(h&&f>p&&a<o&&h.array.length){l=Ge(l,r);for(var g=l,y=u;y>fn;y-=fn){var v=p>>>y&mn;g=g.array[v]=Ge(g.array[v],r)}g.array[p>>>fn&mn]=h}if(s<o&&(m=m&&m.removeAfter(r,0,s)),a>=f)a-=f,s-=f,u=fn,l=null,m=m&&m.removeBefore(r,0,a);else if(a>i||f<p){for(c=0;l;){var _=a>>>u&mn;if(_!==f>>>u&mn)break;_&&(c+=(1<<u)*_),u-=fn,l=l.array[_]}l&&a>i&&(l=l.removeBefore(r,u,a-c)),l&&f<p&&(l=l.removeAfter(r,u,f-c)),c&&(a-=c,s-=c)}return e.__ownerID?(e.size=s-a,e._origin=a,e._capacity=s,e._level=u,e._root=l,e._tail=m,e.__hash=void 0,e.__altered=!0,e):Ve(a,s,u,l,m)}function Je(e,t,n){for(var i=[],a=0,s=0;s<n.length;s++){var u=n[s],l=r(u);l.size>a&&(a=l.size),o(u)||(l=l.map(function(e){return W(e)})),i.push(l)}return a>e.size&&(e=e.setSize(a)),De(e,t,i)}function Xe(e){return e<hn?0:e-1>>>fn<<fn}function $e(e){return null===e||void 0===e?tt():Qe(e)?e:tt().withMutations(function(t){var r=n(e);ce(r.size),r.forEach(function(e,n){return t.set(n,e)})})}function Qe(e){return de(e)&&l(e)}function et(e,t,n,r){var i=Object.create($e.prototype);return i.size=e?e.size:0,i._map=e,i._list=t,i.__ownerID=n,i.__hash=r,i}function tt(){return Jn||(Jn=et(we(),Ye()))}function nt(e,t,n){var r,i,o=e._map,a=e._list,s=o.get(t),u=void 0!==s;if(n===gn){if(!u)return e;a.size>=hn&&a.size>=2*o.size?(i=a.filter(function(e,t){return void 0!==e&&s!==t}),r=i.toKeyedSeq().map(function(e){return e[0]}).flip().toMap(),e.__ownerID&&(r.__ownerID=i.__ownerID=e.__ownerID)):(r=o.remove(t),i=s===a.size-1?a.pop():a.set(s,void 0))}else if(u){if(n===a.get(s)[1])return e;r=o,i=a.set(s,[t,n])}else r=o.set(t,a.size),i=a.set(a.size,[t,n]);return e.__ownerID?(e.size=r.size,e._map=r,e._list=i,e.__hash=void 0,e):et(r,i)}function rt(e,t){this._iter=e,this._useKeys=t,this.size=e.size}function it(e){this._iter=e,this.size=e.size}function ot(e){this._iter=e,this.size=e.size}function at(e){this._iter=e,this.size=e.size}function st(e){var t=Ct(e);return t._iter=e,t.size=e.size,t.flip=function(){return e},t.reverse=function(){var t=e.reverse.apply(this);return t.flip=function(){return e.reverse()},t},t.has=function(t){return e.includes(t)},t.includes=function(t){return e.has(t)},t.cacheResult=Ot,t.__iterateUncached=function(t,n){var r=this;return e.__iterate(function(e,n){return!1!==t(n,e,r)},n)},t.__iteratorUncached=function(t,n){if(t===xn){var r=e.__iterator(t,n);return new x(function(){var e=r.next();if(!e.done){var t=e.value[0];e.value[0]=e.value[1],e.value[1]=t}return e})}return e.__iterator(t===bn?_n:bn,n)},t}function ut(e,t,n){var r=Ct(e);return r.size=e.size,r.has=function(t){return e.has(t)},r.get=function(r,i){var o=e.get(r,gn);return o===gn?i:t.call(n,o,r,e)},r.__iterateUncached=function(r,i){var o=this;return e.__iterate(function(e,i,a){return!1!==r(t.call(n,e,i,a),i,o)},i)},r.__iteratorUncached=function(r,i){var o=e.__iterator(xn,i);return new x(function(){var i=o.next();if(i.done)return i;var a=i.value,s=a[0];return w(r,s,t.call(n,a[1],s,e),i)})},r}function lt(e,t){var n=Ct(e);return n._iter=e,n.size=e.size,n.reverse=function(){return e},e.flip&&(n.flip=function(){var t=st(e);return t.reverse=function(){return e.flip()},t}),n.get=function(n,r){return e.get(t?n:-1-n,r)},n.has=function(n){return e.has(t?n:-1-n)},n.includes=function(t){return e.includes(t)},n.cacheResult=Ot,n.__iterate=function(t,n){var r=this;return e.__iterate(function(e,n){return t(e,n,r)},!n)},n.__iterator=function(t,n){return e.__iterator(t,!n)},n}function ct(e,t,n,r){var i=Ct(e);return r&&(i.has=function(r){var i=e.get(r,gn);return i!==gn&&!!t.call(n,i,r,e)},i.get=function(r,i){var o=e.get(r,gn);return o!==gn&&t.call(n,o,r,e)?o:i}),i.__iterateUncached=function(i,o){var a=this,s=0;return e.__iterate(function(e,o,u){if(t.call(n,e,o,u))return s++,i(e,r?o:s-1,a)},o),s},i.__iteratorUncached=function(i,o){var a=e.__iterator(xn,o),s=0;return new x(function(){for(;;){var o=a.next();if(o.done)return o;var u=o.value,l=u[0],c=u[1];if(t.call(n,c,l,e))return w(i,r?l:s++,c,o)}})},i}function pt(e,t,n){var r=pe().asMutable();return e.__iterate(function(i,o){r.update(t.call(n,i,o,e),0,function(e){return e+1})}),r.asImmutable()}function dt(e,t,n){var r=a(e),i=(l(e)?$e():pe()).asMutable();e.__iterate(function(o,a){i.update(t.call(n,o,a,e),function(e){return e=e||[],e.push(r?[a,o]:o),e})});var o=Mt(e);return i.map(function(t){return kt(e,o(t))})}function ft(e,t,n,r){var i=e.size;if(void 0!==t&&(t|=0),void 0!==n&&(n===1/0?n=i:n|=0),y(t,n,i))return e;var o=v(t,i),a=_(n,i);if(o!==o||a!==a)return ft(e.toSeq().cacheResult(),t,n,r);var s,u=a-o;u===u&&(s=u<0?0:u);var l=Ct(e);return l.size=0===s?s:e.size&&s||void 0,!r&&z(e)&&s>=0&&(l.get=function(t,n){return t=m(this,t),t>=0&&t<s?e.get(t+o,n):n}),l.__iterateUncached=function(t,n){var i=this;if(0===s)return 0;if(n)return this.cacheResult().__iterate(t,n);var a=0,u=!0,l=0;return e.__iterate(function(e,n){if(!u||!(u=a++<o))return l++,!1!==t(e,r?n:l-1,i)&&l!==s}),l},l.__iteratorUncached=function(t,n){if(0!==s&&n)return this.cacheResult().__iterator(t,n);var i=0!==s&&e.__iterator(t,n),a=0,u=0;return new x(function(){for(;a++<o;)i.next();if(++u>s)return S();var e=i.next();return r||t===bn?e:t===_n?w(t,u-1,void 0,e):w(t,u-1,e.value[1],e)})},l}function ht(e,t,n){var r=Ct(e);return r.__iterateUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterate(r,i);var a=0;return e.__iterate(function(e,i,s){return t.call(n,e,i,s)&&++a&&r(e,i,o)}),a},r.__iteratorUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterator(r,i);var a=e.__iterator(xn,i),s=!0;return new x(function(){if(!s)return S();var e=a.next();if(e.done)return e;var i=e.value,u=i[0],l=i[1];return t.call(n,l,u,o)?r===xn?e:w(r,u,l,e):(s=!1,S())})},r}function mt(e,t,n,r){var i=Ct(e);return i.__iterateUncached=function(i,o){var a=this;if(o)return this.cacheResult().__iterate(i,o);var s=!0,u=0;return e.__iterate(function(e,o,l){if(!s||!(s=t.call(n,e,o,l)))return u++,i(e,r?o:u-1,a)}),u},i.__iteratorUncached=function(i,o){var a=this;if(o)return this.cacheResult().__iterator(i,o);var s=e.__iterator(xn,o),u=!0,l=0;return new x(function(){var e,o,c;do{if(e=s.next(),e.done)return r||i===bn?e:i===_n?w(i,l++,void 0,e):w(i,l++,e.value[1],e);var p=e.value;o=p[0],c=p[1],u&&(u=t.call(n,c,o,a))}while(u);return i===xn?e:w(i,o,c,e)})},i}function gt(e,t){var r=a(e),i=[e].concat(t).map(function(e){return o(e)?r&&(e=n(e)):e=r?H(e):B(Array.isArray(e)?e:[e]),e}).filter(function(e){return 0!==e.size});if(0===i.length)return e;if(1===i.length){var u=i[0];if(u===e||r&&a(u)||s(e)&&s(u))return u}var l=new D(i);return r?l=l.toKeyedSeq():s(e)||(l=l.toSetSeq()),l=l.flatten(!0),l.size=i.reduce(function(e,t){if(void 0!==e){var n=t.size;if(void 0!==n)return e+n}},0),l}function yt(e,t,n){var r=Ct(e);return r.__iterateUncached=function(r,i){function a(e,l){var c=this;e.__iterate(function(e,i){return(!t||l<t)&&o(e)?a(e,l+1):!1===r(e,n?i:s++,c)&&(u=!0),!u},i)}var s=0,u=!1;return a(e,0),s},r.__iteratorUncached=function(r,i){var a=e.__iterator(r,i),s=[],u=0;return new x(function(){for(;a;){var e=a.next();if(!1===e.done){var l=e.value;if(r===xn&&(l=l[1]),t&&!(s.length<t)||!o(l))return n?e:w(r,u++,l,e);s.push(a),a=l.__iterator(r,i)}else a=s.pop()}return S()})},r}function vt(e,t,n){var r=Mt(e);return e.toSeq().map(function(i,o){return r(t.call(n,i,o,e))}).flatten(!0)}function _t(e,t){var n=Ct(e);return n.size=e.size&&2*e.size-1,n.__iterateUncached=function(n,r){var i=this,o=0;return e.__iterate(function(e,r){return(!o||!1!==n(t,o++,i))&&!1!==n(e,o++,i)},r),o},n.__iteratorUncached=function(n,r){var i,o=e.__iterator(bn,r),a=0;return new x(function(){return(!i||a%2)&&(i=o.next(),i.done)?i:a%2?w(n,a++,t):w(n,a++,i.value,i)})},n}function bt(e,t,n){t||(t=At);var r=a(e),i=0,o=e.toSeq().map(function(t,r){return[r,t,i++,n?n(t,r,e):t]}).toArray();return o.sort(function(e,n){return t(e[3],n[3])||e[2]-n[2]}).forEach(r?function(e,t){o[t].length=2}:function(e,t){o[t]=e[1]}),r?A(o):s(e)?P(o):R(o)}function xt(e,t,n){if(t||(t=At),n){var r=e.toSeq().map(function(t,r){return[t,n(t,r,e)]}).reduce(function(e,n){return wt(t,e[1],n[1])?n:e});return r&&r[0]}return e.reduce(function(e,n){return wt(t,e,n)?n:e})}function wt(e,t,n){var r=e(n,t);return 0===r&&n!==t&&(void 0===n||null===n||n!==n)||r>0}function St(e,n,r){var i=Ct(e);return i.size=new D(r).map(function(e){return e.size}).min(),i.__iterate=function(e,t){for(var n,r=this.__iterator(bn,t),i=0;!(n=r.next()).done&&!1!==e(n.value,i++,this););return i},i.__iteratorUncached=function(e,i){var o=r.map(function(e){return e=t(e),T(i?e.reverse():e)}),a=0,s=!1;return new x(function(){var t;return s||(t=o.map(function(e){return e.next()}),s=t.some(function(e){return e.done})),s?S():w(e,a++,n.apply(null,t.map(function(e){return e.value})))})},i}function kt(e,t){return z(e)?t:e.constructor(t)}function Et(e){if(e!==Object(e))throw new TypeError("Expected [K, V] tuple: "+e)}function Tt(e){return ce(e.size),h(e)}function Mt(e){return a(e)?n:s(e)?r:i}function Ct(e){return Object.create((a(e)?A:s(e)?P:R).prototype)}function Ot(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):O.prototype.cacheResult.call(this)}function At(e,t){return e>t?1:e<t?-1:0}function Pt(e){var n=T(e);if(!n){if(!C(e))throw new TypeError("Expected iterable or array-like: "+e);n=T(t(e))}return n}function Rt(e,t){var n,r=function(o){if(o instanceof r)return o;if(!(this instanceof r))return new r(o);if(!n){n=!0;var a=Object.keys(e);Nt(i,a),i.size=a.length,i._name=t,i._keys=a,i._defaultValues=e}this._map=pe(o)},i=r.prototype=Object.create(Xn);return i.constructor=r,r}function Dt(e,t,n){var r=Object.create(Object.getPrototypeOf(e));return r._map=t,r.__ownerID=n,r}function It(e){return e._name||e.constructor.name||"Record"}function Nt(e,t){try{t.forEach(Lt.bind(void 0,e))}catch(e){}}function Lt(e,t){Object.defineProperty(e,t,{get:function(){return this.get(t)},set:function(e){$(this.__ownerID,"Cannot set on an immutable record."),this.set(t,e)}})}function zt(e){return null===e||void 0===e?Ft():jt(e)&&!l(e)?e:Ft().withMutations(function(t){var n=i(e);ce(n.size),n.forEach(function(e){return t.add(e)})})}function jt(e){return!(!e||!e[$n])}function Ht(e,t){return e.__ownerID?(e.size=t.size,e._map=t,e):t===e._map?e:0===t.size?e.__empty():e.__make(t)}function Bt(e,t){var n=Object.create(Qn);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}function Ft(){return er||(er=Bt(we()))}function Ut(e){return null===e||void 0===e?Wt():Vt(e)?e:Wt().withMutations(function(t){var n=i(e);ce(n.size),n.forEach(function(e){return t.add(e)})})}function Vt(e){return jt(e)&&l(e)}function Yt(e,t){var n=Object.create(tr);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}function Wt(){return nr||(nr=Yt(tt()))}function qt(e){return null===e||void 0===e?Kt():Gt(e)?e:Kt().unshiftAll(e)}function Gt(e){return!(!e||!e[rr])}function Zt(e,t,n,r){var i=Object.create(ir);return i.size=e,i._head=t,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function Kt(){return or||(or=Zt(0))}function Jt(e,t){var n=function(n){e.prototype[n]=t[n]};return Object.keys(t).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(n),e}function Xt(e,t){return t}function $t(e,t){return[t,e]}function Qt(e){return function(){return!e.apply(this,arguments)}}function en(e){return function(){return-e.apply(this,arguments)}}function tn(e){return"string"==typeof e?JSON.stringify(e):String(e)}function nn(){return f(arguments)}function rn(e,t){return e<t?1:e>t?-1:0}function on(e){if(e.size===1/0)return 0;var t=l(e),n=a(e),r=t?1:0;return an(e.__iterate(n?t?function(e,t){r=31*r+sn(oe(e),oe(t))|0}:function(e,t){r=r+sn(oe(e),oe(t))|0}:t?function(e){r=31*r+oe(e)|0}:function(e){r=r+oe(e)|0}),r)}function an(e,t){return t=An(t,3432918353),t=An(t<<15|t>>>-15,461845907),t=An(t<<13|t>>>-13,5),t=(t+3864292196|0)^e,t=An(t^t>>>16,2246822507),t=An(t^t>>>13,3266489909),t=ie(t^t>>>16)}function sn(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}var un=Array.prototype.slice;e(n,t),e(r,t),e(i,t),t.isIterable=o,t.isKeyed=a,t.isIndexed=s,t.isAssociative=u,t.isOrdered=l,t.Keyed=n,t.Indexed=r,t.Set=i;var ln="@@__IMMUTABLE_ITERABLE__@@",cn="@@__IMMUTABLE_KEYED__@@",pn="@@__IMMUTABLE_INDEXED__@@",dn="@@__IMMUTABLE_ORDERED__@@",fn=5,hn=1<<fn,mn=hn-1,gn={},yn={value:!1},vn={value:!1},_n=0,bn=1,xn=2,wn="function"==typeof Symbol&&Symbol.iterator,Sn="@@iterator",kn=wn||Sn;x.prototype.toString=function(){return"[Iterator]"},x.KEYS=_n,x.VALUES=bn,x.ENTRIES=xn,x.prototype.inspect=x.prototype.toSource=function(){return this.toString()},x.prototype[kn]=function(){return this},e(O,t),O.of=function(){return O(arguments)},O.prototype.toSeq=function(){return this},O.prototype.toString=function(){return this.__toString("Seq {","}")},O.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},O.prototype.__iterate=function(e,t){return V(this,e,t,!0)},O.prototype.__iterator=function(e,t){return Y(this,e,t,!0)},e(A,O),A.prototype.toKeyedSeq=function(){return this},e(P,O),P.of=function(){return P(arguments)},P.prototype.toIndexedSeq=function(){return this},P.prototype.toString=function(){return this.__toString("Seq [","]")},P.prototype.__iterate=function(e,t){return V(this,e,t,!1)},P.prototype.__iterator=function(e,t){return Y(this,e,t,!1)},e(R,O),R.of=function(){return R(arguments)},R.prototype.toSetSeq=function(){return this},O.isSeq=z,O.Keyed=A,O.Set=R,O.Indexed=P;var En="@@__IMMUTABLE_SEQ__@@";O.prototype[En]=!0,e(D,P),D.prototype.get=function(e,t){return this.has(e)?this._array[m(this,e)]:t},D.prototype.__iterate=function(e,t){for(var n=this._array,r=n.length-1,i=0;i<=r;i++)if(!1===e(n[t?r-i:i],i,this))return i+1;return i},D.prototype.__iterator=function(e,t){var n=this._array,r=n.length-1,i=0;return new x(function(){return i>r?S():w(e,i,n[t?r-i++:i++])})},e(I,A),I.prototype.get=function(e,t){return void 0===t||this.has(e)?this._object[e]:t},I.prototype.has=function(e){return this._object.hasOwnProperty(e)},I.prototype.__iterate=function(e,t){for(var n=this._object,r=this._keys,i=r.length-1,o=0;o<=i;o++){var a=r[t?i-o:o];if(!1===e(n[a],a,this))return o+1}return o},I.prototype.__iterator=function(e,t){var n=this._object,r=this._keys,i=r.length-1,o=0;return new x(function(){var a=r[t?i-o:o];return o++>i?S():w(e,a,n[a])})},I.prototype[dn]=!0,e(N,P),N.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);var n=this._iterable,r=T(n),i=0;if(E(r))for(var o;!(o=r.next()).done&&!1!==e(o.value,i++,this););return i},N.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var n=this._iterable,r=T(n);if(!E(r))return new x(S);var i=0;return new x(function(){var t=r.next();return t.done?t:w(e,i++,t.value)})},e(L,P),L.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);for(var n=this._iterator,r=this._iteratorCache,i=0;i<r.length;)if(!1===e(r[i],i++,this))return i;for(var o;!(o=n.next()).done;){var a=o.value;if(r[i]=a,!1===e(a,i++,this))break}return i},L.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var n=this._iterator,r=this._iteratorCache,i=0;return new x(function(){if(i>=r.length){var t=n.next();if(t.done)return t;r[i]=t.value}return w(e,i,r[i++])})};var Tn;e(X,P),X.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},X.prototype.get=function(e,t){return this.has(e)?this._value:t},X.prototype.includes=function(e){return K(this._value,e)},X.prototype.slice=function(e,t){var n=this.size;return y(e,t,n)?this:new X(this._value,_(t,n)-v(e,n))},X.prototype.reverse=function(){return this},X.prototype.indexOf=function(e){return K(this._value,e)?0:-1},X.prototype.lastIndexOf=function(e){return K(this._value,e)?this.size:-1},X.prototype.__iterate=function(e,t){for(var n=0;n<this.size;n++)if(!1===e(this._value,n,this))return n+1;return n},X.prototype.__iterator=function(e,t){var n=this,r=0;return new x(function(){return r<n.size?w(e,r++,n._value):S()})},X.prototype.equals=function(e){return e instanceof X?K(this._value,e._value):J(e)};var Mn;e(Q,P),Q.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},Q.prototype.get=function(e,t){return this.has(e)?this._start+m(this,e)*this._step:t},Q.prototype.includes=function(e){var t=(e-this._start)/this._step;return t>=0&&t<this.size&&t===Math.floor(t)},Q.prototype.slice=function(e,t){return y(e,t,this.size)?this:(e=v(e,this.size),t=_(t,this.size),t<=e?new Q(0,0):new Q(this.get(e,this._end),this.get(t,this._end),this._step))},Q.prototype.indexOf=function(e){var t=e-this._start;if(t%this._step==0){var n=t/this._step;if(n>=0&&n<this.size)return n}return-1},Q.prototype.lastIndexOf=function(e){return this.indexOf(e)},Q.prototype.__iterate=function(e,t){for(var n=this.size-1,r=this._step,i=t?this._start+n*r:this._start,o=0;o<=n;o++){if(!1===e(i,o,this))return o+1;i+=t?-r:r}return o},Q.prototype.__iterator=function(e,t){var n=this.size-1,r=this._step,i=t?this._start+n*r:this._start,o=0;return new x(function(){var a=i;return i+=t?-r:r,o>n?S():w(e,o++,a)})},Q.prototype.equals=function(e){return e instanceof Q?this._start===e._start&&this._end===e._end&&this._step===e._step:J(this,e)};var Cn;e(ee,t),e(te,ee),e(ne,ee),e(re,ee),ee.Keyed=te,ee.Indexed=ne,ee.Set=re;var On,An="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(e,t){e|=0,t|=0;var n=65535&e,r=65535&t;return n*r+((e>>>16)*r+n*(t>>>16)<<16>>>0)|0},Pn=Object.isExtensible,Rn=function(){try{return Object.defineProperty({},"@",{}),!0}catch(e){return!1}}(),Dn="function"==typeof WeakMap;Dn&&(On=new WeakMap);var In=0,Nn="__immutablehash__";"function"==typeof Symbol&&(Nn=Symbol(Nn));var Ln=16,zn=255,jn=0,Hn={};e(pe,te),pe.of=function(){var e=un.call(arguments,0);return we().withMutations(function(t){for(var n=0;n<e.length;n+=2){if(n+1>=e.length)throw new Error("Missing value for key: "+e[n]);t.set(e[n],e[n+1])}})},pe.prototype.toString=function(){return this.__toString("Map {","}")},pe.prototype.get=function(e,t){return this._root?this._root.get(0,void 0,e,t):t},pe.prototype.set=function(e,t){return Se(this,e,t)},pe.prototype.setIn=function(e,t){return this.updateIn(e,gn,function(){return t})},pe.prototype.remove=function(e){return Se(this,e,gn)},pe.prototype.deleteIn=function(e){return this.updateIn(e,function(){return gn})},pe.prototype.update=function(e,t,n){return 1===arguments.length?e(this):this.updateIn([e],t,n)},pe.prototype.updateIn=function(e,t,n){n||(n=t,t=void 0);var r=Ie(this,Pt(e),t,n);return r===gn?void 0:r},pe.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):we()},pe.prototype.merge=function(){return Ae(this,void 0,arguments)},pe.prototype.mergeWith=function(e){return Ae(this,e,un.call(arguments,1))},pe.prototype.mergeIn=function(e){var t=un.call(arguments,1);return this.updateIn(e,we(),function(e){return"function"==typeof e.merge?e.merge.apply(e,t):t[t.length-1]})},pe.prototype.mergeDeep=function(){return Ae(this,Pe,arguments)},pe.prototype.mergeDeepWith=function(e){var t=un.call(arguments,1);return Ae(this,Re(e),t)},pe.prototype.mergeDeepIn=function(e){var t=un.call(arguments,1);return this.updateIn(e,we(),function(e){return"function"==typeof e.mergeDeep?e.mergeDeep.apply(e,t):t[t.length-1]})},pe.prototype.sort=function(e){return $e(bt(this,e))},pe.prototype.sortBy=function(e,t){return $e(bt(this,t,e))},pe.prototype.withMutations=function(e){var t=this.asMutable();return e(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this},pe.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new d)},pe.prototype.asImmutable=function(){return this.__ensureOwner()},pe.prototype.wasAltered=function(){return this.__altered},pe.prototype.__iterator=function(e,t){return new ve(this,e,t)},pe.prototype.__iterate=function(e,t){var n=this,r=0;return this._root&&this._root.iterate(function(t){return r++,e(t[1],t[0],n)},t),r},pe.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?xe(this.size,this._root,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)},pe.isMap=de;var Bn="@@__IMMUTABLE_MAP__@@",Fn=pe.prototype;Fn[Bn]=!0,Fn.delete=Fn.remove,Fn.removeIn=Fn.deleteIn,fe.prototype.get=function(e,t,n,r){for(var i=this.entries,o=0,a=i.length;o<a;o++)if(K(n,i[o][0]))return i[o][1];return r},fe.prototype.update=function(e,t,n,r,i,o,a){for(var s=i===gn,u=this.entries,l=0,c=u.length;l<c&&!K(r,u[l][0]);l++);var d=l<c;if(d?u[l][1]===i:s)return this;if(p(a),(s||!d)&&p(o),!s||1!==u.length){if(!d&&!s&&u.length>=Vn)return Me(e,u,r,i);var h=e&&e===this.ownerID,m=h?u:f(u);return d?s?l===c-1?m.pop():m[l]=m.pop():m[l]=[r,i]:m.push([r,i]),h?(this.entries=m,this):new fe(e,m)}},he.prototype.get=function(e,t,n,r){void 0===t&&(t=oe(n));var i=1<<((0===e?t:t>>>e)&mn),o=this.bitmap;return 0==(o&i)?r:this.nodes[Ne(o&i-1)].get(e+fn,t,n,r)},he.prototype.update=function(e,t,n,r,i,o,a){void 0===n&&(n=oe(r));var s=(0===t?n:n>>>t)&mn,u=1<<s,l=this.bitmap,c=0!=(l&u);if(!c&&i===gn)return this;var p=Ne(l&u-1),d=this.nodes,f=c?d[p]:void 0,h=ke(f,e,t+fn,n,r,i,o,a);if(h===f)return this;if(!c&&h&&d.length>=Yn)return Oe(e,d,l,s,h);if(c&&!h&&2===d.length&&Ee(d[1^p]))return d[1^p];if(c&&h&&1===d.length&&Ee(h))return h;var m=e&&e===this.ownerID,g=c?h?l:l^u:l|u,y=c?h?Le(d,p,h,m):je(d,p,m):ze(d,p,h,m);return m?(this.bitmap=g,this.nodes=y,this):new he(e,g,y)},me.prototype.get=function(e,t,n,r){void 0===t&&(t=oe(n));var i=(0===e?t:t>>>e)&mn,o=this.nodes[i];return o?o.get(e+fn,t,n,r):r},me.prototype.update=function(e,t,n,r,i,o,a){void 0===n&&(n=oe(r));var s=(0===t?n:n>>>t)&mn,u=i===gn,l=this.nodes,c=l[s];if(u&&!c)return this;var p=ke(c,e,t+fn,n,r,i,o,a);if(p===c)return this;var d=this.count;if(c){if(!p&&--d<Wn)return Ce(e,l,d,s)}else d++;var f=e&&e===this.ownerID,h=Le(l,s,p,f);return f?(this.count=d,this.nodes=h,this):new me(e,d,h)},ge.prototype.get=function(e,t,n,r){for(var i=this.entries,o=0,a=i.length;o<a;o++)if(K(n,i[o][0]))return i[o][1];return r},ge.prototype.update=function(e,t,n,r,i,o,a){void 0===n&&(n=oe(r));var s=i===gn;if(n!==this.keyHash)return s?this:(p(a),p(o),Te(this,e,t,n,[r,i]));for(var u=this.entries,l=0,c=u.length;l<c&&!K(r,u[l][0]);l++);var d=l<c;if(d?u[l][1]===i:s)return this;if(p(a),(s||!d)&&p(o),s&&2===c)return new ye(e,this.keyHash,u[1^l]);var h=e&&e===this.ownerID,m=h?u:f(u);return d?s?l===c-1?m.pop():m[l]=m.pop():m[l]=[r,i]:m.push([r,i]),h?(this.entries=m,this):new ge(e,this.keyHash,m)},ye.prototype.get=function(e,t,n,r){return K(n,this.entry[0])?this.entry[1]:r},ye.prototype.update=function(e,t,n,r,i,o,a){var s=i===gn,u=K(r,this.entry[0]);return(u?i===this.entry[1]:s)?this:(p(a),s?void p(o):u?e&&e===this.ownerID?(this.entry[1]=i,this):new ye(e,this.keyHash,[r,i]):(p(o),Te(this,e,t,oe(r),[r,i])))},fe.prototype.iterate=ge.prototype.iterate=function(e,t){for(var n=this.entries,r=0,i=n.length-1;r<=i;r++)if(!1===e(n[t?i-r:r]))return!1},he.prototype.iterate=me.prototype.iterate=function(e,t){for(var n=this.nodes,r=0,i=n.length-1;r<=i;r++){var o=n[t?i-r:r];if(o&&!1===o.iterate(e,t))return!1}},ye.prototype.iterate=function(e,t){return e(this.entry)},e(ve,x),ve.prototype.next=function(){for(var e=this._type,t=this._stack;t;){var n,r=t.node,i=t.index++;if(r.entry){if(0===i)return _e(e,r.entry)}else if(r.entries){if(n=r.entries.length-1,i<=n)return _e(e,r.entries[this._reverse?n-i:i])}else if(n=r.nodes.length-1,i<=n){var o=r.nodes[this._reverse?n-i:i];if(o){if(o.entry)return _e(e,o.entry);t=this._stack=be(o,t)}continue}t=this._stack=this._stack.__prev}return S()};var Un,Vn=hn/4,Yn=hn/2,Wn=hn/4;e(He,ne),He.of=function(){return this(arguments)},He.prototype.toString=function(){return this.__toString("List [","]")},He.prototype.get=function(e,t){if((e=m(this,e))>=0&&e<this.size){e+=this._origin;var n=Ze(this,e);return n&&n.array[e&mn]}return t},He.prototype.set=function(e,t){return We(this,e,t)},He.prototype.remove=function(e){return this.has(e)?0===e?this.shift():e===this.size-1?this.pop():this.splice(e,1):this},He.prototype.insert=function(e,t){return this.splice(e,0,t)},He.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=fn,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):Ye()},He.prototype.push=function(){var e=arguments,t=this.size;return this.withMutations(function(n){Ke(n,0,t+e.length);for(var r=0;r<e.length;r++)n.set(t+r,e[r])})},He.prototype.pop=function(){return Ke(this,0,-1)},He.prototype.unshift=function(){var e=arguments;return this.withMutations(function(t){Ke(t,-e.length);for(var n=0;n<e.length;n++)t.set(n,e[n])})},He.prototype.shift=function(){return Ke(this,1)},He.prototype.merge=function(){return Je(this,void 0,arguments)},He.prototype.mergeWith=function(e){return Je(this,e,un.call(arguments,1))},He.prototype.mergeDeep=function(){return Je(this,Pe,arguments)},He.prototype.mergeDeepWith=function(e){var t=un.call(arguments,1);return Je(this,Re(e),t)},He.prototype.setSize=function(e){return Ke(this,0,e)},He.prototype.slice=function(e,t){var n=this.size;return y(e,t,n)?this:Ke(this,v(e,n),_(t,n))},He.prototype.__iterator=function(e,t){var n=0,r=Ue(this,t);return new x(function(){var t=r();return t===Kn?S():w(e,n++,t)})},He.prototype.__iterate=function(e,t){for(var n,r=0,i=Ue(this,t);(n=i())!==Kn&&!1!==e(n,r++,this););return r},He.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Ve(this._origin,this._capacity,this._level,this._root,this._tail,e,this.__hash):(this.__ownerID=e,this)},He.isList=Be;var qn="@@__IMMUTABLE_LIST__@@",Gn=He.prototype;Gn[qn]=!0,Gn.delete=Gn.remove,Gn.setIn=Fn.setIn,Gn.deleteIn=Gn.removeIn=Fn.removeIn,Gn.update=Fn.update,Gn.updateIn=Fn.updateIn,Gn.mergeIn=Fn.mergeIn,Gn.mergeDeepIn=Fn.mergeDeepIn,Gn.withMutations=Fn.withMutations,Gn.asMutable=Fn.asMutable,Gn.asImmutable=Fn.asImmutable,Gn.wasAltered=Fn.wasAltered,Fe.prototype.removeBefore=function(e,t,n){if(n===t?1<<t:0===this.array.length)return this;var r=n>>>t&mn;if(r>=this.array.length)return new Fe([],e);var i,o=0===r;if(t>0){var a=this.array[r];if((i=a&&a.removeBefore(e,t-fn,n))===a&&o)return this}if(o&&!i)return this;var s=Ge(this,e);if(!o)for(var u=0;u<r;u++)s.array[u]=void 0;return i&&(s.array[r]=i),s},Fe.prototype.removeAfter=function(e,t,n){if(n===(t?1<<t:0)||0===this.array.length)return this;var r=n-1>>>t&mn;if(r>=this.array.length)return this;var i;if(t>0){var o=this.array[r];if((i=o&&o.removeAfter(e,t-fn,n))===o&&r===this.array.length-1)return this}var a=Ge(this,e);return a.array.splice(r+1),i&&(a.array[r]=i),a};var Zn,Kn={};e($e,pe),$e.of=function(){return this(arguments)},$e.prototype.toString=function(){return this.__toString("OrderedMap {","}")},$e.prototype.get=function(e,t){var n=this._map.get(e);return void 0!==n?this._list.get(n)[1]:t},$e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):tt()},$e.prototype.set=function(e,t){return nt(this,e,t)},$e.prototype.remove=function(e){return nt(this,e,gn)},$e.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},$e.prototype.__iterate=function(e,t){var n=this;return this._list.__iterate(function(t){return t&&e(t[1],t[0],n)},t)},$e.prototype.__iterator=function(e,t){return this._list.fromEntrySeq().__iterator(e,t)},$e.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e),n=this._list.__ensureOwner(e);return e?et(t,n,e,this.__hash):(this.__ownerID=e,this._map=t,this._list=n,this)},$e.isOrderedMap=Qe,$e.prototype[dn]=!0,$e.prototype.delete=$e.prototype.remove;var Jn;e(rt,A),rt.prototype.get=function(e,t){return this._iter.get(e,t)},rt.prototype.has=function(e){return this._iter.has(e)},rt.prototype.valueSeq=function(){return this._iter.valueSeq()},rt.prototype.reverse=function(){var e=this,t=lt(this,!0);return this._useKeys||(t.valueSeq=function(){return e._iter.toSeq().reverse()}),t},rt.prototype.map=function(e,t){var n=this,r=ut(this,e,t);return this._useKeys||(r.valueSeq=function(){return n._iter.toSeq().map(e,t)}),r},rt.prototype.__iterate=function(e,t){var n,r=this;return this._iter.__iterate(this._useKeys?function(t,n){return e(t,n,r)}:(n=t?Tt(this):0,function(i){return e(i,t?--n:n++,r)}),t)},rt.prototype.__iterator=function(e,t){if(this._useKeys)return this._iter.__iterator(e,t);var n=this._iter.__iterator(bn,t),r=t?Tt(this):0;return new x(function(){var i=n.next();return i.done?i:w(e,t?--r:r++,i.value,i)})},rt.prototype[dn]=!0,e(it,P),it.prototype.includes=function(e){return this._iter.includes(e)},it.prototype.__iterate=function(e,t){var n=this,r=0;return this._iter.__iterate(function(t){return e(t,r++,n)},t)},it.prototype.__iterator=function(e,t){var n=this._iter.__iterator(bn,t),r=0;return new x(function(){var t=n.next();return t.done?t:w(e,r++,t.value,t)})},e(ot,R),ot.prototype.has=function(e){return this._iter.includes(e)},ot.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate(function(t){return e(t,t,n)},t)},ot.prototype.__iterator=function(e,t){var n=this._iter.__iterator(bn,t);return new x(function(){var t=n.next();return t.done?t:w(e,t.value,t.value,t)})},e(at,A),at.prototype.entrySeq=function(){return this._iter.toSeq()},at.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate(function(t){if(t){Et(t);var r=o(t);return e(r?t.get(1):t[1],r?t.get(0):t[0],n)}},t)},at.prototype.__iterator=function(e,t){var n=this._iter.__iterator(bn,t);return new x(function(){for(;;){var t=n.next();if(t.done)return t;var r=t.value;if(r){Et(r);var i=o(r);return w(e,i?r.get(0):r[0],i?r.get(1):r[1],t)}}})},it.prototype.cacheResult=rt.prototype.cacheResult=ot.prototype.cacheResult=at.prototype.cacheResult=Ot,e(Rt,te),Rt.prototype.toString=function(){return this.__toString(It(this)+" {","}")},Rt.prototype.has=function(e){return this._defaultValues.hasOwnProperty(e)},Rt.prototype.get=function(e,t){if(!this.has(e))return t;var n=this._defaultValues[e];return this._map?this._map.get(e,n):n},Rt.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var e=this.constructor;return e._empty||(e._empty=Dt(this,we()))},Rt.prototype.set=function(e,t){if(!this.has(e))throw new Error('Cannot set unknown key "'+e+'" on '+It(this));if(this._map&&!this._map.has(e)&&t===this._defaultValues[e])return this;var n=this._map&&this._map.set(e,t);return this.__ownerID||n===this._map?this:Dt(this,n)},Rt.prototype.remove=function(e){if(!this.has(e))return this;var t=this._map&&this._map.remove(e);return this.__ownerID||t===this._map?this:Dt(this,t)},Rt.prototype.wasAltered=function(){return this._map.wasAltered()},Rt.prototype.__iterator=function(e,t){var r=this;return n(this._defaultValues).map(function(e,t){return r.get(t)}).__iterator(e,t)},Rt.prototype.__iterate=function(e,t){var r=this;return n(this._defaultValues).map(function(e,t){return r.get(t)}).__iterate(e,t)},Rt.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map&&this._map.__ensureOwner(e);return e?Dt(this,t,e):(this.__ownerID=e,this._map=t,this)};var Xn=Rt.prototype;Xn.delete=Xn.remove,Xn.deleteIn=Xn.removeIn=Fn.removeIn,Xn.merge=Fn.merge,Xn.mergeWith=Fn.mergeWith,Xn.mergeIn=Fn.mergeIn,Xn.mergeDeep=Fn.mergeDeep,Xn.mergeDeepWith=Fn.mergeDeepWith,Xn.mergeDeepIn=Fn.mergeDeepIn,Xn.setIn=Fn.setIn,Xn.update=Fn.update,Xn.updateIn=Fn.updateIn,Xn.withMutations=Fn.withMutations,Xn.asMutable=Fn.asMutable,Xn.asImmutable=Fn.asImmutable,e(zt,re),zt.of=function(){return this(arguments)},zt.fromKeys=function(e){return this(n(e).keySeq())},zt.prototype.toString=function(){return this.__toString("Set {","}")},zt.prototype.has=function(e){return this._map.has(e)},zt.prototype.add=function(e){return Ht(this,this._map.set(e,!0))},zt.prototype.remove=function(e){return Ht(this,this._map.remove(e))},zt.prototype.clear=function(){return Ht(this,this._map.clear())},zt.prototype.union=function(){var e=un.call(arguments,0);return e=e.filter(function(e){return 0!==e.size}),0===e.length?this:0!==this.size||this.__ownerID||1!==e.length?this.withMutations(function(t){for(var n=0;n<e.length;n++)i(e[n]).forEach(function(e){return t.add(e)})}):this.constructor(e[0])},zt.prototype.intersect=function(){var e=un.call(arguments,0);if(0===e.length)return this;e=e.map(function(e){return i(e)});var t=this;return this.withMutations(function(n){t.forEach(function(t){e.every(function(e){return e.includes(t)})||n.remove(t)})})},zt.prototype.subtract=function(){var e=un.call(arguments,0);if(0===e.length)return this;e=e.map(function(e){return i(e)});var t=this;return this.withMutations(function(n){t.forEach(function(t){e.some(function(e){return e.includes(t)})&&n.remove(t)})})},zt.prototype.merge=function(){return this.union.apply(this,arguments)},zt.prototype.mergeWith=function(e){var t=un.call(arguments,1);return this.union.apply(this,t)},zt.prototype.sort=function(e){return Ut(bt(this,e))},zt.prototype.sortBy=function(e,t){return Ut(bt(this,t,e))},zt.prototype.wasAltered=function(){return this._map.wasAltered()},zt.prototype.__iterate=function(e,t){var n=this;return this._map.__iterate(function(t,r){return e(r,r,n)},t)},zt.prototype.__iterator=function(e,t){return this._map.map(function(e,t){return t}).__iterator(e,t)},zt.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e);return e?this.__make(t,e):(this.__ownerID=e,this._map=t,this)},zt.isSet=jt;var $n="@@__IMMUTABLE_SET__@@",Qn=zt.prototype;Qn[$n]=!0,Qn.delete=Qn.remove,Qn.mergeDeep=Qn.merge,Qn.mergeDeepWith=Qn.mergeWith,Qn.withMutations=Fn.withMutations,Qn.asMutable=Fn.asMutable,Qn.asImmutable=Fn.asImmutable,Qn.__empty=Ft,Qn.__make=Bt;var er;e(Ut,zt),Ut.of=function(){return this(arguments)},Ut.fromKeys=function(e){return this(n(e).keySeq())},Ut.prototype.toString=function(){return this.__toString("OrderedSet {","}")},Ut.isOrderedSet=Vt;var tr=Ut.prototype;tr[dn]=!0,tr.__empty=Wt,tr.__make=Yt;var nr;e(qt,ne),qt.of=function(){return this(arguments)},qt.prototype.toString=function(){return this.__toString("Stack [","]")},qt.prototype.get=function(e,t){var n=this._head;for(e=m(this,e);n&&e--;)n=n.next;return n?n.value:t},qt.prototype.peek=function(){return this._head&&this._head.value},qt.prototype.push=function(){if(0===arguments.length)return this;for(var e=this.size+arguments.length,t=this._head,n=arguments.length-1;n>=0;n--)t={value:arguments[n],next:t};return this.__ownerID?(this.size=e,this._head=t,this.__hash=void 0,this.__altered=!0,this):Zt(e,t)},qt.prototype.pushAll=function(e){if(e=r(e),0===e.size)return this;ce(e.size);var t=this.size,n=this._head;return e.reverse().forEach(function(e){t++,n={value:e,next:n}}),this.__ownerID?(this.size=t,this._head=n,this.__hash=void 0,this.__altered=!0,this):Zt(t,n)},qt.prototype.pop=function(){return this.slice(1)},qt.prototype.unshift=function(){return this.push.apply(this,arguments)},qt.prototype.unshiftAll=function(e){return this.pushAll(e)},qt.prototype.shift=function(){return this.pop.apply(this,arguments)},qt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Kt()},qt.prototype.slice=function(e,t){if(y(e,t,this.size))return this;var n=v(e,this.size);if(_(t,this.size)!==this.size)return ne.prototype.slice.call(this,e,t);for(var r=this.size-n,i=this._head;n--;)i=i.next;return this.__ownerID?(this.size=r,this._head=i,this.__hash=void 0,this.__altered=!0,this):Zt(r,i)},qt.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Zt(this.size,this._head,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)},qt.prototype.__iterate=function(e,t){if(t)return this.reverse().__iterate(e);for(var n=0,r=this._head;r&&!1!==e(r.value,n++,this);)r=r.next;return n},qt.prototype.__iterator=function(e,t){if(t)return this.reverse().__iterator(e);var n=0,r=this._head;return new x(function(){if(r){var t=r.value;return r=r.next,w(e,n++,t)}return S()})},qt.isStack=Gt;var rr="@@__IMMUTABLE_STACK__@@",ir=qt.prototype;ir[rr]=!0,ir.withMutations=Fn.withMutations,ir.asMutable=Fn.asMutable,ir.asImmutable=Fn.asImmutable,ir.wasAltered=Fn.wasAltered;var or;t.Iterator=x,Jt(t,{toArray:function(){ce(this.size);var e=new Array(this.size||0);return this.valueSeq().__iterate(function(t,n){e[n]=t}),e},toIndexedSeq:function(){return new it(this)},toJS:function(){return this.toSeq().map(function(e){return e&&"function"==typeof e.toJS?e.toJS():e}).__toJS()},toJSON:function(){return this.toSeq().map(function(e){return e&&"function"==typeof e.toJSON?e.toJSON():e}).__toJS()},toKeyedSeq:function(){return new rt(this,!0)},toMap:function(){return pe(this.toKeyedSeq())},toObject:function(){ce(this.size);var e={};return this.__iterate(function(t,n){e[n]=t}),e},toOrderedMap:function(){return $e(this.toKeyedSeq())},toOrderedSet:function(){return Ut(a(this)?this.valueSeq():this)},toSet:function(){return zt(a(this)?this.valueSeq():this)},toSetSeq:function(){return new ot(this)},toSeq:function(){return s(this)?this.toIndexedSeq():a(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return qt(a(this)?this.valueSeq():this)},toList:function(){return He(a(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(e,t){return 0===this.size?e+t:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+t},concat:function(){return kt(this,gt(this,un.call(arguments,0)))},includes:function(e){return this.some(function(t){return K(t,e)})},entries:function(){return this.__iterator(xn)},every:function(e,t){ce(this.size);var n=!0;return this.__iterate(function(r,i,o){if(!e.call(t,r,i,o))return n=!1,!1}),n},filter:function(e,t){return kt(this,ct(this,e,t,!0))},find:function(e,t,n){var r=this.findEntry(e,t);return r?r[1]:n},forEach:function(e,t){return ce(this.size),this.__iterate(t?e.bind(t):e)},join:function(e){ce(this.size),e=void 0!==e?""+e:",";var t="",n=!0;return this.__iterate(function(r){n?n=!1:t+=e,t+=null!==r&&void 0!==r?r.toString():""}),t},keys:function(){return this.__iterator(_n)},map:function(e,t){return kt(this,ut(this,e,t))},reduce:function(e,t,n){ce(this.size);var r,i;return arguments.length<2?i=!0:r=t,this.__iterate(function(t,o,a){i?(i=!1,r=t):r=e.call(n,r,t,o,a)}),r},reduceRight:function(e,t,n){var r=this.toKeyedSeq().reverse();return r.reduce.apply(r,arguments)},reverse:function(){return kt(this,lt(this,!0))},slice:function(e,t){return kt(this,ft(this,e,t,!0))},some:function(e,t){return!this.every(Qt(e),t)},sort:function(e){return kt(this,bt(this,e))},values:function(){return this.__iterator(bn)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(e,t){return h(e?this.toSeq().filter(e,t):this)},countBy:function(e,t){return pt(this,e,t)},equals:function(e){return J(this,e)},entrySeq:function(){var e=this;if(e._cache)return new D(e._cache);var t=e.toSeq().map($t).toIndexedSeq();return t.fromEntrySeq=function(){return e.toSeq()},t},filterNot:function(e,t){return this.filter(Qt(e),t)},findEntry:function(e,t,n){var r=n;return this.__iterate(function(n,i,o){if(e.call(t,n,i,o))return r=[i,n],!1}),r},findKey:function(e,t){var n=this.findEntry(e,t);return n&&n[0]},findLast:function(e,t,n){return this.toKeyedSeq().reverse().find(e,t,n)},findLastEntry:function(e,t,n){return this.toKeyedSeq().reverse().findEntry(e,t,n)},findLastKey:function(e,t){return this.toKeyedSeq().reverse().findKey(e,t)},first:function(){return this.find(g)},flatMap:function(e,t){return kt(this,vt(this,e,t))},flatten:function(e){return kt(this,yt(this,e,!0))},fromEntrySeq:function(){return new at(this)},get:function(e,t){return this.find(function(t,n){return K(n,e)},void 0,t)},getIn:function(e,t){for(var n,r=this,i=Pt(e);!(n=i.next()).done;){var o=n.value;if((r=r&&r.get?r.get(o,gn):gn)===gn)return t}return r},groupBy:function(e,t){return dt(this,e,t)},has:function(e){return this.get(e,gn)!==gn},hasIn:function(e){return this.getIn(e,gn)!==gn},isSubset:function(e){return e="function"==typeof e.includes?e:t(e),this.every(function(t){return e.includes(t)})},isSuperset:function(e){return e="function"==typeof e.isSubset?e:t(e),e.isSubset(this)},keyOf:function(e){return this.findKey(function(t){return K(t,e)})},keySeq:function(){return this.toSeq().map(Xt).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(e){return this.toKeyedSeq().reverse().keyOf(e)},max:function(e){return xt(this,e)},maxBy:function(e,t){return xt(this,t,e)},min:function(e){return xt(this,e?en(e):rn)},minBy:function(e,t){return xt(this,t?en(t):rn,e)},rest:function(){return this.slice(1)},skip:function(e){return this.slice(Math.max(0,e))},skipLast:function(e){return kt(this,this.toSeq().reverse().skip(e).reverse())},skipWhile:function(e,t){return kt(this,mt(this,e,t,!0))},skipUntil:function(e,t){return this.skipWhile(Qt(e),t)},sortBy:function(e,t){return kt(this,bt(this,t,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return kt(this,this.toSeq().reverse().take(e).reverse())},takeWhile:function(e,t){return kt(this,ht(this,e,t))},takeUntil:function(e,t){return this.takeWhile(Qt(e),t)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=on(this))}});var ar=t.prototype;ar[ln]=!0,ar[kn]=ar.values,ar.__toJS=ar.toArray,ar.__toStringMapper=tn,ar.inspect=ar.toSource=function(){return this.toString()},ar.chain=ar.flatMap,ar.contains=ar.includes,Jt(n,{flip:function(){return kt(this,st(this))},mapEntries:function(e,t){var n=this,r=0;return kt(this,this.toSeq().map(function(i,o){return e.call(t,[o,i],r++,n)}).fromEntrySeq())},mapKeys:function(e,t){var n=this;return kt(this,this.toSeq().flip().map(function(r,i){return e.call(t,r,i,n)}).flip())}});var sr=n.prototype;return sr[cn]=!0,sr[kn]=ar.entries,sr.__toJS=ar.toObject,sr.__toStringMapper=function(e,t){return JSON.stringify(t)+": "+tn(e)},Jt(r,{toKeyedSeq:function(){return new rt(this,!1)},filter:function(e,t){return kt(this,ct(this,e,t,!1))},findIndex:function(e,t){var n=this.findEntry(e,t);return n?n[0]:-1},indexOf:function(e){var t=this.keyOf(e);return void 0===t?-1:t},lastIndexOf:function(e){var t=this.lastKeyOf(e);return void 0===t?-1:t},reverse:function(){return kt(this,lt(this,!1))},slice:function(e,t){return kt(this,ft(this,e,t,!1))},splice:function(e,t){var n=arguments.length;if(t=Math.max(0|t,0),0===n||2===n&&!t)return this;e=v(e,e<0?this.count():this.size);var r=this.slice(0,e);return kt(this,1===n?r:r.concat(f(arguments,2),this.slice(e+t)))},findLastIndex:function(e,t){var n=this.findLastEntry(e,t);return n?n[0]:-1},first:function(){return this.get(0)},flatten:function(e){return kt(this,yt(this,e,!1))},get:function(e,t){return e=m(this,e),e<0||this.size===1/0||void 0!==this.size&&e>this.size?t:this.find(function(t,n){return n===e},void 0,t)},has:function(e){return(e=m(this,e))>=0&&(void 0!==this.size?this.size===1/0||e<this.size:-1!==this.indexOf(e))},interpose:function(e){return kt(this,_t(this,e))},interleave:function(){var e=[this].concat(f(arguments)),t=St(this.toSeq(),P.of,e),n=t.flatten(!0);return t.size&&(n.size=t.size*e.length),kt(this,n)},keySeq:function(){return Q(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(e,t){return kt(this,mt(this,e,t,!1))},zip:function(){return kt(this,St(this,nn,[this].concat(f(arguments))))},zipWith:function(e){var t=f(arguments);return t[0]=this,kt(this,St(this,e,t))}}),r.prototype[pn]=!0,r.prototype[dn]=!0,Jt(i,{get:function(e,t){return this.has(e)?e:t},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}}),i.prototype.has=ar.includes,i.prototype.contains=i.prototype.includes,Jt(A,n.prototype),Jt(P,r.prototype),Jt(R,i.prototype),Jt(te,n.prototype),Jt(ne,r.prototype),Jt(re,i.prototype),{Iterable:t,Seq:O,Collection:ee,Map:pe,OrderedMap:$e,List:He,Stack:qt,Set:zt,OrderedSet:Ut,Record:Rt,Range:Q,Repeat:X,is:K,fromJS:W}}()}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){function r(){return null}function i(e){var t=e.nodeName,n=e.attributes;e.attributes={},t.defaultProps&&x(e.attributes,t.defaultProps),n&&x(e.attributes,n)}function o(e,t){var n,r,i;if(t){for(i in t)if(n=W.test(i))break;if(n){r=e.attributes={};for(i in t)t.hasOwnProperty(i)&&(r[W.test(i)?i.replace(/([A-Z0-9])/,"-$1").toLowerCase():i]=t[i])}}}function a(e,t,n){var r=t&&t._preactCompatRendered&&t._preactCompatRendered.base;r&&r.parentNode!==t&&(r=null),!r&&t&&(r=t.firstElementChild);for(var i=t.childNodes.length;i--;)t.childNodes[i]!==r&&t.removeChild(t.childNodes[i]);var o=Object(H.render)(e,t,r);return t&&(t._preactCompatRendered=o&&(o._component||{base:o})),"function"==typeof n&&n(),o&&o._component||o}function s(e,t,n,r){var i=Object(H.h)(X,{context:e.context},t),o=a(i,n),s=o._component||o.base;return r&&r.call(s,o),s}function u(e){var t=e._preactCompatRendered&&e._preactCompatRendered.base;return!(!t||t.parentNode!==e||(Object(H.render)(Object(H.h)(r),e,t),0))}function l(e){return h.bind(null,e)}function c(e,t){for(var n=t||0;n<e.length;n++){var r=e[n];Array.isArray(r)?c(r):r&&"object"==typeof r&&!y(r)&&(r.props&&r.type||r.attributes&&r.nodeName||r.children)&&(e[n]=h(r.type||r.nodeName,r.props||r.attributes,r.children))}}function p(e){return"function"==typeof e&&!(e.prototype&&e.prototype.render)}function d(e){return E({displayName:e.displayName||e.name,render:function(){return e(this.props,this.context)}})}function f(e){var t=e[V];return t?!0===t?e:t:(t=d(e),Object.defineProperty(t,V,{configurable:!0,value:!0}),t.displayName=e.displayName,t.propTypes=e.propTypes,t.defaultProps=e.defaultProps,Object.defineProperty(e,V,{configurable:!0,value:t}),t)}function h(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return c(e,2),m(H.h.apply(void 0,e))}function m(e){e.preactCompatNormalized=!0,b(e),p(e.nodeName)&&(e.nodeName=f(e.nodeName));var t=e.attributes.ref,n=t&&typeof t;return!$||"string"!==n&&"number"!==n||(e.attributes.ref=v(t,$)),_(e),e}function g(e,t){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];if(!y(e))return e;var i=e.attributes||e.props,o=Object(H.h)(e.nodeName||e.type,x({},i),e.children||i&&i.children),a=[o,t];return n&&n.length?a.push(n):t&&t.children&&a.push(t.children),m(H.cloneElement.apply(void 0,a))}function y(e){return e&&(e instanceof Z||e.$$typeof===U)}function v(e,t){return t._refProxies[e]||(t._refProxies[e]=function(n){t&&t.refs&&(t.refs[e]=n,null===n&&(delete t._refProxies[e],t=null))})}function _(e){var t=e.nodeName,n=e.attributes;if(n&&"string"==typeof t){var r={};for(var i in n)r[i.toLowerCase()]=i;if(r.ondoubleclick&&(n.ondblclick=n[r.ondoubleclick],delete n[r.ondoubleclick]),r.onchange&&("textarea"===t||"input"===t.toLowerCase()&&!/^fil|che|rad/i.test(n.type))){var o=r.oninput||"oninput";n[o]||(n[o]=A([n[o],n[r.onchange]]),delete n[r.onchange])}}}function b(e){var t=e.attributes||(e.attributes={});re.enumerable="className"in t,t.className&&(t.class=t.className),Object.defineProperty(t,"className",re)}function x(e,t){for(var n=arguments,r=1,i=void 0;r<arguments.length;r++)if(i=n[r])for(var o in i)i.hasOwnProperty(o)&&(e[o]=i[o]);return e}function w(e,t){for(var n in e)if(!(n in t))return!0;for(var r in t)if(e[r]!==t[r])return!0;return!1}function S(e){return e&&e.base||e}function k(){}function E(e){function t(e,t){C(this),N.call(this,e,t,q),P.call(this,e,t)}return e=x({constructor:t},e),e.mixins&&M(e,T(e.mixins)),e.statics&&x(t,e.statics),e.propTypes&&(t.propTypes=e.propTypes),e.defaultProps&&(t.defaultProps=e.defaultProps),e.getDefaultProps&&(t.defaultProps=e.getDefaultProps.call(t)),k.prototype=N.prototype,t.prototype=x(new k,e),t.displayName=e.displayName||"Component",t}function T(e){for(var t={},n=0;n<e.length;n++){var r=e[n];for(var i in r)r.hasOwnProperty(i)&&"function"==typeof r[i]&&(t[i]||(t[i]=[])).push(r[i])}return t}function M(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=A(t[n].concat(e[n]||Q),"getDefaultProps"===n||"getInitialState"===n||"getChildContext"===n))}function C(e){for(var t in e){var n=e[t];"function"!=typeof n||n.__bound||Y.hasOwnProperty(t)||((e[t]=n.bind(e)).__bound=!0)}}function O(e,t,n){if("string"==typeof t&&(t=e.constructor.prototype[t]),"function"==typeof t)return t.apply(e,n)}function A(e,t){return function(){for(var n,r=arguments,i=this,o=0;o<e.length;o++){var a=O(i,e[o],r);if(t&&null!=a){n||(n={});for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])}else void 0!==a&&(n=a)}return n}}function P(e,t){R.call(this,e,t),this.componentWillReceiveProps=A([R,this.componentWillReceiveProps||"componentWillReceiveProps"]),this.render=A([R,D,this.render||"render",I])}function R(e,t){if(e){var n=e.children;if(n&&Array.isArray(n)&&1===n.length&&("string"==typeof n[0]||"function"==typeof n[0]||n[0]instanceof Z)&&(e.children=n[0],e.children&&"object"==typeof e.children&&(e.children.length=1,e.children[0]=e.children)),G){var r="function"==typeof this?this:this.constructor,i=this.propTypes||r.propTypes,o=this.displayName||r.name;i&&j.a.checkPropTypes(i,e,"prop",o)}}}function D(e){$=this}function I(){$===this&&($=null)}function N(e,t,n){H.Component.call(this,e,t),this.state=this.getInitialState?this.getInitialState():{},this.refs={},this._refProxies={},n!==q&&P.call(this,e,t)}function L(e,t){N.call(this,e,t)}n.d(t,"version",function(){return B}),n.d(t,"DOM",function(){return te}),n.d(t,"Children",function(){return ee}),n.d(t,"render",function(){return a}),n.d(t,"createClass",function(){return E}),n.d(t,"createFactory",function(){return l}),n.d(t,"createElement",function(){return h}),n.d(t,"cloneElement",function(){return g}),n.d(t,"isValidElement",function(){return y}),n.d(t,"findDOMNode",function(){return S}),n.d(t,"unmountComponentAtNode",function(){return u}),n.d(t,"Component",function(){return N}),n.d(t,"PureComponent",function(){return L}),n.d(t,"unstable_renderSubtreeIntoContainer",function(){return s}),n.d(t,"__spread",function(){return x});var z=n(24),j=n.n(z),H=n(0);n.d(t,"PropTypes",function(){return j.a});var B="15.1.0",F="a abbr address area article aside audio b base bdi bdo big blockquote body br button canvas caption cite code col colgroup data datalist dd del details dfn dialog div dl dt em embed fieldset figcaption figure footer form h1 h2 h3 h4 h5 h6 head header hgroup hr html i iframe img input ins kbd keygen label legend li link main map mark menu menuitem meta meter nav noscript object ol optgroup option output p param picture pre progress q rp rt ruby s samp script section select small source span strong style sub summary sup table tbody td textarea tfoot th thead time title tr track u ul var video wbr circle clipPath defs ellipse g image line linearGradient mask path pattern polygon polyline radialGradient rect stop svg text tspan".split(" "),U="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,V="undefined"!=typeof Symbol&&Symbol.for?Symbol.for("__preactCompatWrapper"):"__preactCompatWrapper",Y={constructor:1,render:1,shouldComponentUpdate:1,componentWillReceiveProps:1,componentWillUpdate:1,componentDidUpdate:1,componentWillMount:1,componentDidMount:1,componentWillUnmount:1,componentDidUnmount:1},W=/^(?:accent|alignment|arabic|baseline|cap|clip|color|fill|flood|font|glyph|horiz|marker|overline|paint|stop|strikethrough|stroke|text|underline|unicode|units|v|vector|vert|word|writing|x)[A-Z]/,q={},G=void 0===e||!Object({NODE_ENV:"production"})||!1,Z=Object(H.h)("a",null).constructor;Z.prototype.$$typeof=U,Z.prototype.preactCompatUpgraded=!1,Z.prototype.preactCompatNormalized=!1,Object.defineProperty(Z.prototype,"type",{get:function(){return this.nodeName},set:function(e){this.nodeName=e},configurable:!0}),Object.defineProperty(Z.prototype,"props",{get:function(){return this.attributes},set:function(e){this.attributes=e},configurable:!0});var K=H.options.event;H.options.event=function(e){return K&&(e=K(e)),e.persist=Object,e.nativeEvent=e,e};var J=H.options.vnode;H.options.vnode=function(e){if(!e.preactCompatUpgraded){e.preactCompatUpgraded=!0;var t=e.nodeName,n=e.attributes=x({},e.attributes);"function"==typeof t?(!0===t[V]||t.prototype&&"isReactComponent"in t.prototype)&&(e.children&&""===String(e.children)&&(e.children=void 0),e.children&&(n.children=e.children),e.preactCompatNormalized||m(e),i(e)):(e.children&&""===String(e.children)&&(e.children=void 0),e.children&&(n.children=e.children),n.defaultValue&&(n.value||0===n.value||(n.value=n.defaultValue),delete n.defaultValue),o(e,n))}J&&J(e)};var X=function(){};X.prototype.getChildContext=function(){return this.props.context},X.prototype.render=function(e){return e.children[0]};for(var $,Q=[],ee={map:function(e,t,n){return null==e?null:(e=ee.toArray(e),n&&n!==e&&(t=t.bind(n)),e.map(t))},forEach:function(e,t,n){if(null==e)return null;e=ee.toArray(e),n&&n!==e&&(t=t.bind(n)),e.forEach(t)},count:function(e){return e&&e.length||0},only:function(e){if(e=ee.toArray(e),1!==e.length)throw new Error("Children.only() expects only one child.");return e[0]},toArray:function(e){return null==e?[]:Q.concat(e)}},te={},ne=F.length;ne--;)te[F[ne]]=l(F[ne]);var re={configurable:!0,get:function(){return this.class},set:function(e){this.class=e}};x(N.prototype=new H.Component,{constructor:N,isReactComponent:{},replaceState:function(e,t){var n=this;this.setState(e,t);for(var r in n.state)r in e||delete n.state[r]},getDOMNode:function(){return this.base},isMounted:function(){return!!this.base}}),k.prototype=N.prototype,L.prototype=new k,L.prototype.isPureReactComponent=!0,L.prototype.shouldComponentUpdate=function(e,t){return w(this.props,e)||w(this.state,t)};var ie={version:B,DOM:te,PropTypes:j.a,Children:ee,render:a,createClass:E,createFactory:l,createElement:h,cloneElement:g,isValidElement:y,findDOMNode:S,unmountComponentAtNode:u,Component:N,PureComponent:L,unstable_renderSubtreeIntoContainer:s,__spread:x};t.default=ie}.call(t,n(190))},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(97),i=n(45),o=n(100);n.d(t,"Provider",function(){return r.b}),n.d(t,"createProvider",function(){return r.a}),n.d(t,"connectAdvanced",function(){return i.a}),n.d(t,"connect",function(){return o.a})},function(e,t,n){e.exports=n(127)()},function(e,t,n){"use strict";var r=function(e,t,n,r,i,o,a,s){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,o,a,s],c=0;u=new Error(t.replace(/%s/g,function(){return l[c++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}};e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(122);n.d(t,"createBrowserHistory",function(){return r.a});var i=n(125);n.d(t,"createHashHistory",function(){return i.a});var o=n(126);n.d(t,"createMemoryHistory",function(){return o.a});var a=n(20);n.d(t,"createLocation",function(){return a.a}),n.d(t,"locationsAreEqual",function(){return a.b});var s=n(15);n.d(t,"parsePath",function(){return s.d}),n.d(t,"createPath",function(){return s.b})},function(e,t,n){var r,i;!function(t,n){"object"==typeof e&&"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,function(n,o){function a(e){var t="length"in e&&e.length,n=se.type(e);return"function"!==n&&!se.isWindow(e)&&(!(1!==e.nodeType||!t)||"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function s(e,t,n){if(se.isFunction(t))return se.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return se.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(me.test(t))return se.filter(t,e,n);t=se.filter(t,e)}return se.grep(e,function(e){return se.inArray(e,t)>=0!==n})}function u(e,t){do{e=e[t]}while(e&&1!==e.nodeType);return e}function l(e){var t=we[e]={};return se.each(e.match(xe)||[],function(e,n){t[n]=!0}),t}function c(){ye.addEventListener?(ye.removeEventListener("DOMContentLoaded",p,!1),n.removeEventListener("load",p,!1)):(ye.detachEvent("onreadystatechange",p),n.detachEvent("onload",p))}function p(){(ye.addEventListener||"load"===event.type||"complete"===ye.readyState)&&(c(),se.ready())}function d(e,t,n){if(void 0===n&&1===e.nodeType){var r="data-"+t.replace(Me,"-$1").toLowerCase();if("string"==typeof(n=e.getAttribute(r))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:Te.test(n)?se.parseJSON(n):n)}catch(e){}se.data(e,t,n)}else n=void 0}return n}function f(e){var t;for(t in e)if(("data"!==t||!se.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function h(e,t,n,r){if(se.acceptData(e)){var i,o,a=se.expando,s=e.nodeType,u=s?se.cache:e,l=s?e[a]:e[a]&&a;if(l&&u[l]&&(r||u[l].data)||void 0!==n||"string"!=typeof t)return l||(l=s?e[a]=$.pop()||se.guid++:a),u[l]||(u[l]=s?{}:{toJSON:se.noop}),"object"!=typeof t&&"function"!=typeof t||(r?u[l]=se.extend(u[l],t):u[l].data=se.extend(u[l].data,t)),o=u[l],r||(o.data||(o.data={}),o=o.data),void 0!==n&&(o[se.camelCase(t)]=n),"string"==typeof t?null==(i=o[t])&&(i=o[se.camelCase(t)]):i=o,i}}function m(e,t,n){if(se.acceptData(e)){var r,i,o=e.nodeType,a=o?se.cache:e,s=o?e[se.expando]:se.expando;if(a[s]){if(t&&(r=n?a[s]:a[s].data)){se.isArray(t)?t=t.concat(se.map(t,se.camelCase)):t in r?t=[t]:(t=se.camelCase(t),t=t in r?[t]:t.split(" ")),i=t.length;for(;i--;)delete r[t[i]];if(n?!f(r):!se.isEmptyObject(r))return}(n||(delete a[s].data,f(a[s])))&&(o?se.cleanData([e],!0):ae.deleteExpando||a!=a.window?delete a[s]:a[s]=null)}}}function g(){return!0}function y(){return!1}function v(){try{return ye.activeElement}catch(e){}}function _(e){var t=je.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function b(e,t){var n,r,i=0,o=typeof e.getElementsByTagName!==Ee?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==Ee?e.querySelectorAll(t||"*"):void 0;if(!o)for(o=[],n=e.childNodes||e;null!=(r=n[i]);i++)!t||se.nodeName(r,t)?o.push(r):se.merge(o,b(r,t));return void 0===t||t&&se.nodeName(e,t)?se.merge([e],o):o}function x(e){Re.test(e.type)&&(e.defaultChecked=e.checked)}function w(e,t){return se.nodeName(e,"table")&&se.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function S(e){return e.type=(null!==se.find.attr(e,"type"))+"/"+e.type,e}function k(e){var t=Ke.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function E(e,t){for(var n,r=0;null!=(n=e[r]);r++)se._data(n,"globalEval",!t||se._data(t[r],"globalEval"))}function T(e,t){if(1===t.nodeType&&se.hasData(e)){var n,r,i,o=se._data(e),a=se._data(t,o),s=o.events;if(s){delete a.handle,a.events={};for(n in s)for(r=0,i=s[n].length;r<i;r++)se.event.add(t,n,s[n][r])}a.data&&(a.data=se.extend({},a.data))}}function M(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!ae.noCloneEvent&&t[se.expando]){i=se._data(t);for(r in i.events)se.removeEvent(t,r,i.handle);t.removeAttribute(se.expando)}"script"===n&&t.text!==e.text?(S(t).text=e.text,k(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),ae.html5Clone&&e.innerHTML&&!se.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Re.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}}function C(e,t){var r,i=se(t.createElement(e)).appendTo(t.body),o=n.getDefaultComputedStyle&&(r=n.getDefaultComputedStyle(i[0]))?r.display:se.css(i[0],"display");return i.detach(),o}function O(e){var t=ye,n=tt[e];return n||(n=C(e,t),"none"!==n&&n||(et=(et||se("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=(et[0].contentWindow||et[0].contentDocument).document,t.write(),t.close(),n=C(e,t),et.detach()),tt[e]=n),n}function A(e,t){return{get:function(){var n=e();if(null!=n)return n?void delete this.get:(this.get=t).apply(this,arguments)}}}function P(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=ht.length;i--;)if((t=ht[i]+n)in e)return t;return r}function R(e,t){for(var n,r,i,o=[],a=0,s=e.length;a<s;a++)r=e[a],r.style&&(o[a]=se._data(r,"olddisplay"),n=r.style.display,t?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&Ae(r)&&(o[a]=se._data(r,"olddisplay",O(r.nodeName)))):(i=Ae(r),(n&&"none"!==n||!i)&&se._data(r,"olddisplay",i?n:se.css(r,"display"))));for(a=0;a<s;a++)r=e[a],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[a]||"":"none"));return e}function D(e,t,n){var r=ct.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function I(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,a=0;o<4;o+=2)"margin"===n&&(a+=se.css(e,n+Oe[o],!0,i)),r?("content"===n&&(a-=se.css(e,"padding"+Oe[o],!0,i)),"margin"!==n&&(a-=se.css(e,"border"+Oe[o]+"Width",!0,i))):(a+=se.css(e,"padding"+Oe[o],!0,i),"padding"!==n&&(a+=se.css(e,"border"+Oe[o]+"Width",!0,i)));return a}function N(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=nt(e),a=ae.boxSizing&&"border-box"===se.css(e,"boxSizing",!1,o);if(i<=0||null==i){if(i=rt(e,t,o),(i<0||null==i)&&(i=e.style[t]),ot.test(i))return i;r=a&&(ae.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+I(e,t,n||(a?"border":"content"),r,o)+"px"}function L(e,t,n,r,i){return new L.prototype.init(e,t,n,r,i)}function z(){return setTimeout(function(){mt=void 0}),mt=se.now()}function j(e,t){var n,r={height:e},i=0;for(t=t?1:0;i<4;i+=2-t)n=Oe[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function H(e,t,n){for(var r,i=(xt[t]||[]).concat(xt["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function B(e,t,n){var r,i,o,a,s,u,l,c=this,p={},d=e.style,f=e.nodeType&&Ae(e),h=se._data(e,"fxshow");n.queue||(s=se._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,u=s.empty.fire,s.empty.fire=function(){s.unqueued||u()}),s.unqueued++,c.always(function(){c.always(function(){s.unqueued--,se.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],l=se.css(e,"display"),"inline"===("none"===l?se._data(e,"olddisplay")||O(e.nodeName):l)&&"none"===se.css(e,"float")&&(ae.inlineBlockNeedsLayout&&"inline"!==O(e.nodeName)?d.zoom=1:d.display="inline-block")),n.overflow&&(d.overflow="hidden",ae.shrinkWrapBlocks()||c.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],yt.exec(i)){if(delete t[r],o=o||"toggle"===i,i===(f?"hide":"show")){if("show"!==i||!h||void 0===h[r])continue;f=!0}p[r]=h&&h[r]||se.style(e,r)}else l=void 0;if(se.isEmptyObject(p))"inline"===("none"===l?O(e.nodeName):l)&&(d.display=l);else{h?"hidden"in h&&(f=h.hidden):h=se._data(e,"fxshow",{}),o&&(h.hidden=!f),f?se(e).show():c.done(function(){se(e).hide()}),c.done(function(){var t;se._removeData(e,"fxshow");for(t in p)se.style(e,t,p[t])});for(r in p)a=H(f?h[r]:0,r,c),r in h||(h[r]=a.start,f&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}}function F(e,t){var n,r,i,o,a;for(n in e)if(r=se.camelCase(n),i=t[r],o=e[n],se.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=se.cssHooks[r])&&"expand"in a){o=a.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function U(e,t,n){var r,i,o=0,a=bt.length,s=se.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=mt||z(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,o=1-r,a=0,u=l.tweens.length;a<u;a++)l.tweens[a].run(o);return s.notifyWith(e,[l,o,n]),o<1&&u?n:(s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:se.extend({},t),opts:se.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:mt||z(),duration:n.duration,tweens:[],createTween:function(t,n){var r=se.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)l.tweens[n].run(1);return t?s.resolveWith(e,[l,t]):s.rejectWith(e,[l,t]),this}}),c=l.props;for(F(c,l.opts.specialEasing);o<a;o++)if(r=bt[o].call(l,e,c,l.opts))return r;return se.map(c,H,l),se.isFunction(l.opts.start)&&l.opts.start.call(e,l),se.fx.timer(se.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function V(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(xe)||[];if(se.isFunction(n))for(;r=o[i++];)"+"===r.charAt(0)?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Y(e,t,n,r){function i(s){var u;return o[s]=!0,se.each(e[s]||[],function(e,s){var l=s(t,n,r);return"string"!=typeof l||a||o[l]?a?!(u=l):void 0:(t.dataTypes.unshift(l),i(l),!1)}),u}var o={},a=e===Wt;return i(t.dataTypes[0])||!o["*"]&&i("*")}function W(e,t){var n,r,i=se.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((i[r]?e:n||(n={}))[r]=t[r]);return n&&se.extend(!0,e,n),e}function q(e,t,n){for(var r,i,o,a,s=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(a in s)if(s[a]&&s[a].test(i)){u.unshift(a);break}if(u[0]in n)o=u[0];else{for(a in n){if(!u[0]||e.converters[a+" "+u[0]]){o=a;break}r||(r=a)}o=o||r}if(o)return o!==u[0]&&u.unshift(o),n[o]}function G(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if(s=i.split(" "),s[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}function Z(e,t,n,r){var i;if(se.isArray(t))se.each(t,function(t,i){n||Zt.test(e)?r(e,i):Z(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==se.type(t))r(e,t);else for(i in t)Z(e+"["+i+"]",t[i],n,r)}function K(){try{return new n.XMLHttpRequest}catch(e){}}function J(){try{return new n.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function X(e){return se.isWindow(e)?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}var $=[],Q=$.slice,ee=$.concat,te=$.push,ne=$.indexOf,re={},ie=re.toString,oe=re.hasOwnProperty,ae={},se=function(e,t){return new se.fn.init(e,t)},ue=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,le=/^-ms-/,ce=/-([\da-z])/gi,pe=function(e,t){return t.toUpperCase()};se.fn=se.prototype={jquery:"1.11.3",constructor:se,selector:"",length:0,toArray:function(){return Q.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:Q.call(this)},pushStack:function(e){var t=se.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return se.each(this,e,t)},map:function(e){return this.pushStack(se.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(Q.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:te,sort:$.sort,splice:$.splice},se.extend=se.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||se.isFunction(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(i=arguments[s]))for(r in i)e=a[r],n=i[r],a!==n&&(l&&n&&(se.isPlainObject(n)||(t=se.isArray(n)))?(t?(t=!1,o=e&&se.isArray(e)?e:[]):o=e&&se.isPlainObject(e)?e:{},a[r]=se.extend(l,o,n)):void 0!==n&&(a[r]=n));return a},se.extend({expando:"jQuery"+("1.11.3"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===se.type(e)},isArray:Array.isArray||function(e){return"array"===se.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!se.isArray(e)&&e-parseFloat(e)+1>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==se.type(e)||e.nodeType||se.isWindow(e))return!1;try{if(e.constructor&&!oe.call(e,"constructor")&&!oe.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}if(ae.ownLast)for(t in e)return oe.call(e,t);for(t in e);return void 0===t||oe.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?re[ie.call(e)]||"object":typeof e},globalEval:function(e){e&&se.trim(e)&&(n.execScript||function(e){n.eval.call(n,e)})(e)},camelCase:function(e){return e.replace(le,"ms-").replace(ce,pe)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r=0,i=e.length,o=a(e);if(n){if(o)for(;r<i&&!1!==t.apply(e[r],n);r++);else for(r in e)if(!1===t.apply(e[r],n))break}else if(o)for(;r<i&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(ue,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(a(Object(e))?se.merge(n,"string"==typeof e?[e]:e):te.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(ne)return ne.call(t,e,n);for(r=t.length,n=n?n<0?Math.max(0,r+n):n:0;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;)e[i++]=t[r++];if(n!==n)for(;void 0!==t[r];)e[i++]=t[r++];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i=0,o=e.length,s=a(e),u=[];if(s)for(;i<o;i++)null!=(r=t(e[i],i,n))&&u.push(r);else for(i in e)null!=(r=t(e[i],i,n))&&u.push(r);return ee.apply([],u)},guid:1,proxy:function(e,t){var n,r,i;if("string"==typeof t&&(i=e[t],t=e,e=i),se.isFunction(e))return n=Q.call(arguments,2),r=function(){return e.apply(t||this,n.concat(Q.call(arguments)))},r.guid=e.guid=e.guid||se.guid++,r},now:function(){return+new Date},support:ae}),se.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){re["[object "+t+"]"]=t.toLowerCase()});var de=function(e){function t(e,t,n,r){var i,o,a,s,l,p,d,f,h,m;if((t?t.ownerDocument||t:j)!==A&&O(t),t=t||A,n=n||[],s=t.nodeType,"string"!=typeof e||!e||1!==s&&9!==s&&11!==s)return n;if(!r&&R){if(11!==s&&(i=ge.exec(e)))if(a=i[1]){if(9===s){if(!(o=t.getElementById(a))||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&L(t,o)&&o.id===a)return n.push(o),n}else{if(i[2])return J.apply(n,t.getElementsByTagName(e)),n;if((a=i[3])&&_.getElementsByClassName)return J.apply(n,t.getElementsByClassName(a)),n}if(_.qsa&&(!D||!D.test(e))){if(f=d=z,h=t,m=1!==s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(p=S(e),(d=t.getAttribute("id"))?f=d.replace(ve,"\\$&"):t.setAttribute("id",f),f="[id='"+f+"'] ",l=p.length;l--;)p[l]=f+c(p[l]);h=ye.test(e)&&u(t.parentNode)||t,m=p.join(",")}if(m)try{return J.apply(n,h.querySelectorAll(m)),n}catch(e){}finally{d||t.removeAttribute("id")}}}return E(e.replace(ae,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>b.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[z]=!0,e}function i(e){var t=A.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),r=e.length;r--;)b.attrHandle[n[r]]=t}function a(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||W)-(~e.sourceIndex||W);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return r(function(t){return t=+t,r(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function u(e){return e&&void 0!==e.getElementsByTagName&&e}function l(){}function c(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function p(e,t,n){var r=t.dir,i=n&&"parentNode"===r,o=B++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,o)}:function(t,n,a){var s,u,l=[H,o];if(a){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,a))return!0}else for(;t=t[r];)if(1===t.nodeType||i){if(u=t[z]||(t[z]={}),(s=u[r])&&s[0]===H&&s[1]===o)return l[2]=s[2];if(u[r]=l,l[2]=e(t,n,a))return!0}}}function d(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function f(e,n,r){for(var i=0,o=n.length;i<o;i++)t(e,n[i],r);return r}function h(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function m(e,t,n,i,o,a){return i&&!i[z]&&(i=m(i)),o&&!o[z]&&(o=m(o,a)),r(function(r,a,s,u){var l,c,p,d=[],m=[],g=a.length,y=r||f(t||"*",s.nodeType?[s]:s,[]),v=!e||!r&&t?y:h(y,d,e,s,u),_=n?o||(r?e:g||i)?[]:a:v;if(n&&n(v,_,s,u),i)for(l=h(_,m),i(l,[],s,u),c=l.length;c--;)(p=l[c])&&(_[m[c]]=!(v[m[c]]=p));if(r){if(o||e){if(o){for(l=[],c=_.length;c--;)(p=_[c])&&l.push(v[c]=p);o(null,_=[],l,u)}for(c=_.length;c--;)(p=_[c])&&(l=o?$(r,p):d[c])>-1&&(r[l]=!(a[l]=p))}}else _=h(_===a?_.splice(g,_.length):_),o?o(null,a,_,u):J.apply(a,_)})}function g(e){for(var t,n,r,i=e.length,o=b.relative[e[0].type],a=o||b.relative[" "],s=o?1:0,u=p(function(e){return e===t},a,!0),l=p(function(e){return $(t,e)>-1},a,!0),f=[function(e,n,r){var i=!o&&(r||n!==T)||((t=n).nodeType?u(e,n,r):l(e,n,r));return t=null,i}];s<i;s++)if(n=b.relative[e[s].type])f=[p(d(f),n)];else{if(n=b.filter[e[s].type].apply(null,e[s].matches),n[z]){for(r=++s;r<i&&!b.relative[e[r].type];r++);return m(s>1&&d(f),s>1&&c(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(ae,"$1"),n,s<r&&g(e.slice(s,r)),r<i&&g(e=e.slice(r)),r<i&&c(e))}f.push(n)}return d(f)}function y(e,n){var i=n.length>0,o=e.length>0,a=function(r,a,s,u,l){var c,p,d,f=0,m="0",g=r&&[],y=[],v=T,_=r||o&&b.find.TAG("*",l),x=H+=null==v?1:Math.random()||.1,w=_.length;for(l&&(T=a!==A&&a);m!==w&&null!=(c=_[m]);m++){if(o&&c){for(p=0;d=e[p++];)if(d(c,a,s)){u.push(c);break}l&&(H=x)}i&&((c=!d&&c)&&f--,r&&g.push(c))}if(f+=m,i&&m!==f){for(p=0;d=n[p++];)d(g,y,a,s);if(r){if(f>0)for(;m--;)g[m]||y[m]||(y[m]=Z.call(u));y=h(y)}J.apply(u,y),l&&!r&&y.length>0&&f+n.length>1&&t.uniqueSort(u)}return l&&(H=x,T=v),g};return i?r(a):a}var v,_,b,x,w,S,k,E,T,M,C,O,A,P,R,D,I,N,L,z="sizzle"+1*new Date,j=e.document,H=0,B=0,F=n(),U=n(),V=n(),Y=function(e,t){return e===t&&(C=!0),0},W=1<<31,q={}.hasOwnProperty,G=[],Z=G.pop,K=G.push,J=G.push,X=G.slice,$=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},Q="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ee="[\\x20\\t\\r\\n\\f]",te="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ne=te.replace("w","w#"),re="\\["+ee+"*("+te+")(?:"+ee+"*([*^$|!~]?=)"+ee+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ne+"))|)"+ee+"*\\]",ie=":("+te+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+re+")*)|.*)\\)|)",oe=new RegExp(ee+"+","g"),ae=new RegExp("^"+ee+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ee+"+$","g"),se=new RegExp("^"+ee+"*,"+ee+"*"),ue=new RegExp("^"+ee+"*([>+~]|"+ee+")"+ee+"*"),le=new RegExp("="+ee+"*([^\\]'\"]*?)"+ee+"*\\]","g"),ce=new RegExp(ie),pe=new RegExp("^"+ne+"$"),de={ID:new RegExp("^#("+te+")"),CLASS:new RegExp("^\\.("+te+")"),TAG:new RegExp("^("+te.replace("w","w*")+")"),ATTR:new RegExp("^"+re),PSEUDO:new RegExp("^"+ie),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ee+"*(even|odd|(([+-]|)(\\d*)n|)"+ee+"*(?:([+-]|)"+ee+"*(\\d+)|))"+ee+"*\\)|)","i"),bool:new RegExp("^(?:"+Q+")$","i"),needsContext:new RegExp("^"+ee+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ee+"*((?:-\\d)?\\d*)"+ee+"*\\)|)(?=[^-]|$)","i")},fe=/^(?:input|select|textarea|button)$/i,he=/^h\d$/i,me=/^[^{]+\{\s*\[native \w/,ge=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,ve=/'|\\/g,_e=new RegExp("\\\\([\\da-f]{1,6}"+ee+"?|("+ee+")|.)","ig"),be=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},xe=function(){O()};try{J.apply(G=X.call(j.childNodes),j.childNodes),G[j.childNodes.length].nodeType}catch(e){J={apply:G.length?function(e,t){K.apply(e,X.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}_=t.support={},w=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},O=t.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:j;return r!==A&&9===r.nodeType&&r.documentElement?(A=r,P=r.documentElement,n=r.defaultView,n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",xe,!1):n.attachEvent&&n.attachEvent("onunload",xe)),R=!w(r),_.attributes=i(function(e){return e.className="i",!e.getAttribute("className")}),_.getElementsByTagName=i(function(e){return e.appendChild(r.createComment("")),!e.getElementsByTagName("*").length}),_.getElementsByClassName=me.test(r.getElementsByClassName),_.getById=i(function(e){return P.appendChild(e).id=z,!r.getElementsByName||!r.getElementsByName(z).length}),_.getById?(b.find.ID=function(e,t){if(void 0!==t.getElementById&&R){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},b.filter.ID=function(e){var t=e.replace(_e,be);return function(e){return e.getAttribute("id")===t}}):(delete b.find.ID,b.filter.ID=function(e){var t=e.replace(_e,be);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),b.find.TAG=_.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):_.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},b.find.CLASS=_.getElementsByClassName&&function(e,t){if(R)return t.getElementsByClassName(e)},I=[],D=[],(_.qsa=me.test(r.querySelectorAll))&&(i(function(e){P.appendChild(e).innerHTML="<a id='"+z+"'></a><select id='"+z+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&D.push("[*^$]="+ee+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||D.push("\\["+ee+"*(?:value|"+Q+")"),e.querySelectorAll("[id~="+z+"-]").length||D.push("~="),e.querySelectorAll(":checked").length||D.push(":checked"),e.querySelectorAll("a#"+z+"+*").length||D.push(".#.+[+~]")}),i(function(e){var t=r.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&D.push("name"+ee+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||D.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),D.push(",.*:")})),(_.matchesSelector=me.test(N=P.matches||P.webkitMatchesSelector||P.mozMatchesSelector||P.oMatchesSelector||P.msMatchesSelector))&&i(function(e){_.disconnectedMatch=N.call(e,"div"),N.call(e,"[s!='']:x"),I.push("!=",ie)}),D=D.length&&new RegExp(D.join("|")),I=I.length&&new RegExp(I.join("|")),t=me.test(P.compareDocumentPosition),L=t||me.test(P.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},Y=t?function(e,t){if(e===t)return C=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!_.sortDetached&&t.compareDocumentPosition(e)===n?e===r||e.ownerDocument===j&&L(j,e)?-1:t===r||t.ownerDocument===j&&L(j,t)?1:M?$(M,e)-$(M,t):0:4&n?-1:1)}:function(e,t){if(e===t)return C=!0,0;var n,i=0,o=e.parentNode,s=t.parentNode,u=[e],l=[t];if(!o||!s)return e===r?-1:t===r?1:o?-1:s?1:M?$(M,e)-$(M,t):0;if(o===s)return a(e,t);for(n=e;n=n.parentNode;)u.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;u[i]===l[i];)i++;return i?a(u[i],l[i]):u[i]===j?-1:l[i]===j?1:0},r):A},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==A&&O(e),n=n.replace(le,"='$1']"),_.matchesSelector&&R&&(!I||!I.test(n))&&(!D||!D.test(n)))try{var r=N.call(e,n);if(r||_.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return t(n,A,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==A&&O(e),L(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==A&&O(e);var n=b.attrHandle[t.toLowerCase()],r=n&&q.call(b.attrHandle,t.toLowerCase())?n(e,t,!R):void 0;return void 0!==r?r:_.attributes||!R?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,i=0;if(C=!_.detectDuplicates,M=!_.sortStable&&e.slice(0),e.sort(Y),C){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return M=null,e},x=t.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=x(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=x(t);return n},b=t.selectors={cacheLength:50,createPseudo:r,match:de,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(_e,be),e[3]=(e[3]||e[4]||e[5]||"").replace(_e,be),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return de.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&ce.test(n)&&(t=S(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(_e,be).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=F[e+" "];return t||(t=new RegExp("(^|"+ee+")"+e+"("+ee+"|$)"))&&F(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(i){var o=t.attr(i,e);return null==o?"!="===n:!n||(o+="","="===n?o===r:"!="===n?o!==r:"^="===n?r&&0===o.indexOf(r):"*="===n?r&&o.indexOf(r)>-1:"$="===n?r&&o.slice(-r.length)===r:"~="===n?(" "+o.replace(oe," ")+" ").indexOf(r)>-1:"|="===n&&(o===r||o.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,p,d,f,h,m=o!==a?"nextSibling":"previousSibling",g=t.parentNode,y=s&&t.nodeName.toLowerCase(),v=!u&&!s;if(g){if(o){for(;m;){for(p=t;p=p[m];)if(s?p.nodeName.toLowerCase()===y:1===p.nodeType)return!1;h=m="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?g.firstChild:g.lastChild],a&&v){for(c=g[z]||(g[z]={}),l=c[e]||[],f=l[0]===H&&l[1],d=l[0]===H&&l[2],p=f&&g.childNodes[f];p=++f&&p&&p[m]||(d=f=0)||h.pop();)if(1===p.nodeType&&++d&&p===t){c[e]=[H,f,d];break}}else if(v&&(l=(t[z]||(t[z]={}))[e])&&l[0]===H)d=l[1];else for(;(p=++f&&p&&p[m]||(d=f=0)||h.pop())&&((s?p.nodeName.toLowerCase()!==y:1!==p.nodeType)||!++d||(v&&((p[z]||(p[z]={}))[e]=[H,d]),p!==t)););return(d-=i)===r||d%r==0&&d/r>=0}}},PSEUDO:function(e,n){var i,o=b.pseudos[e]||b.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[z]?o(n):o.length>1?(i=[e,e,"",n],b.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,i=o(e,n),a=i.length;a--;)r=$(e,i[a]),e[r]=!(t[r]=i[a])}):function(e){return o(e,0,i)}):o}},pseudos:{not:r(function(e){var t=[],n=[],i=k(e.replace(ae,"$1"));return i[z]?r(function(e,t,n,r){for(var o,a=i(e,null,r,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,r,o){return t[0]=e,i(t,null,o,n),t[0]=null,!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return e=e.replace(_e,be),function(t){return(t.textContent||t.innerText||x(t)).indexOf(e)>-1}}),lang:r(function(e){return pe.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(_e,be).toLowerCase(),function(t){var n;do{if(n=R?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===P},focus:function(e){return e===A.activeElement&&(!A.hasFocus||A.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return he.test(e.nodeName)},input:function(e){return fe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:s(function(){return[0]}),last:s(function(e,t){return[t-1]}),eq:s(function(e,t,n){return[n<0?n+t:n]}),even:s(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:s(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:s(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:s(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}},b.pseudos.nth=b.pseudos.eq;for(v in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[v]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(v);for(v in{submit:!0,reset:!0})b.pseudos[v]=function(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}(v);return l.prototype=b.filters=b.pseudos,b.setFilters=new l,S=t.tokenize=function(e,n){var r,i,o,a,s,u,l,c=U[e+" "];if(c)return n?0:c.slice(0);for(s=e,u=[],l=b.preFilter;s;){r&&!(i=se.exec(s))||(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),r=!1,(i=ue.exec(s))&&(r=i.shift(),o.push({value:r,type:i[0].replace(ae," ")}),s=s.slice(r.length));for(a in b.filter)!(i=de[a].exec(s))||l[a]&&!(i=l[a](i))||(r=i.shift(),o.push({value:r,type:a,matches:i}),s=s.slice(r.length));if(!r)break}return n?s.length:s?t.error(e):U(e,u).slice(0)},k=t.compile=function(e,t){var n,r=[],i=[],o=V[e+" "];if(!o){for(t||(t=S(e)),n=t.length;n--;)o=g(t[n]),o[z]?r.push(o):i.push(o);o=V(e,y(i,r)),o.selector=e}return o},E=t.select=function(e,t,n,r){var i,o,a,s,l,p="function"==typeof e&&e,d=!r&&S(e=p.selector||e);if(n=n||[],1===d.length){if(o=d[0]=d[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&_.getById&&9===t.nodeType&&R&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(_e,be),t)||[])[0]))return n;p&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=de.needsContext.test(e)?0:o.length;i--&&(a=o[i],!b.relative[s=a.type]);)if((l=b.find[s])&&(r=l(a.matches[0].replace(_e,be),ye.test(o[0].type)&&u(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&c(o)))return J.apply(n,r),n;break}}return(p||k(e,d))(r,t,!R,n,ye.test(e)&&u(t.parentNode)||t),n},_.sortStable=z.split("").sort(Y).join("")===z,_.detectDuplicates=!!C,O(),_.sortDetached=i(function(e){return 1&e.compareDocumentPosition(A.createElement("div"))}),i(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),_.attributes&&i(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),i(function(e){return null==e.getAttribute("disabled")})||o(Q,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(n);se.find=de,se.expr=de.selectors,se.expr[":"]=se.expr.pseudos,se.unique=de.uniqueSort,se.text=de.getText,se.isXMLDoc=de.isXML,se.contains=de.contains;var fe=se.expr.match.needsContext,he=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,me=/^.[^:#\[\.,]*$/;se.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?se.find.matchesSelector(r,e)?[r]:[]:se.find.matches(e,se.grep(t,function(e){return 1===e.nodeType}))},se.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if("string"!=typeof e)return this.pushStack(se(e).filter(function(){for(t=0;t<i;t++)if(se.contains(r[t],this))return!0}));for(t=0;t<i;t++)se.find(e,r[t],n);return n=this.pushStack(i>1?se.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(s(this,e||[],!1))},not:function(e){return this.pushStack(s(this,e||[],!0))},is:function(e){return!!s(this,"string"==typeof e&&fe.test(e)?se(e):e||[],!1).length}});var ge,ye=n.document,ve=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(se.fn.init=function(e,t){var n,r;if(!e)return this;if("string"==typeof e){if(!(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:ve.exec(e))||!n[1]&&t)return!t||t.jquery?(t||ge).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof se?t[0]:t,se.merge(this,se.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:ye,!0)),he.test(n[1])&&se.isPlainObject(t))for(n in t)se.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}if((r=ye.getElementById(n[2]))&&r.parentNode){if(r.id!==n[2])return ge.find(e);this.length=1,this[0]=r}return this.context=ye,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):se.isFunction(e)?void 0!==ge.ready?ge.ready(e):e(se):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),se.makeArray(e,this))}).prototype=se.fn,ge=se(ye);var _e=/^(?:parents|prev(?:Until|All))/,be={children:!0,contents:!0,next:!0,prev:!0};se.extend({dir:function(e,t,n){for(var r=[],i=e[t];i&&9!==i.nodeType&&(void 0===n||1!==i.nodeType||!se(i).is(n));)1===i.nodeType&&r.push(i),i=i[t];return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),se.fn.extend({has:function(e){var t,n=se(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(se.contains(this,n[t]))return!0})},closest:function(e,t){for(var n,r=0,i=this.length,o=[],a=fe.test(e)||"string"!=typeof e?se(e,t||this.context):0;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&se.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?se.unique(o):o)},index:function(e){return e?"string"==typeof e?se.inArray(this[0],se(e)):se.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(se.unique(se.merge(this.get(),se(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),se.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return se.dir(e,"parentNode")},parentsUntil:function(e,t,n){return se.dir(e,"parentNode",n)},next:function(e){return u(e,"nextSibling")},prev:function(e){return u(e,"previousSibling")},nextAll:function(e){return se.dir(e,"nextSibling")},prevAll:function(e){return se.dir(e,"previousSibling")},nextUntil:function(e,t,n){return se.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return se.dir(e,"previousSibling",n)},siblings:function(e){return se.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return se.sibling(e.firstChild)},contents:function(e){return se.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:se.merge([],e.childNodes)}},function(e,t){se.fn[e]=function(n,r){var i=se.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=se.filter(r,i)),this.length>1&&(be[e]||(i=se.unique(i)),_e.test(e)&&(i=i.reverse())),this.pushStack(i)}});var xe=/\S+/g,we={};se.Callbacks=function(e){e="string"==typeof e?we[e]||l(e):se.extend({},e);var t,n,r,i,o,a,s=[],u=!e.once&&[],c=function(l){for(n=e.memory&&l,r=!0,o=a||0,a=0,i=s.length,t=!0;s&&o<i;o++)if(!1===s[o].apply(l[0],l[1])&&e.stopOnFalse){n=!1;break}t=!1,s&&(u?u.length&&c(u.shift()):n?s=[]:p.disable())},p={add:function(){if(s){var r=s.length;!function t(n){se.each(n,function(n,r){var i=se.type(r);"function"===i?e.unique&&p.has(r)||s.push(r):r&&r.length&&"string"!==i&&t(r)})}(arguments),t?i=s.length:n&&(a=r,c(n))}return this},remove:function(){return s&&se.each(arguments,function(e,n){for(var r;(r=se.inArray(n,s,r))>-1;)s.splice(r,1),t&&(r<=i&&i--,r<=o&&o--)}),this},has:function(e){return e?se.inArray(e,s)>-1:!(!s||!s.length)},empty:function(){return s=[],i=0,this},disable:function(){return s=u=n=void 0,this},disabled:function(){return!s},lock:function(){return u=void 0,n||p.disable(),this},locked:function(){return!u},fireWith:function(e,n){return!s||r&&!u||(n=n||[],n=[e,n.slice?n.slice():n],t?u.push(n):c(n)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!r}};return p},se.extend({Deferred:function(e){var t=[["resolve","done",se.Callbacks("once memory"),"resolved"],["reject","fail",se.Callbacks("once memory"),"rejected"],["notify","progress",se.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return se.Deferred(function(n){se.each(t,function(t,o){var a=se.isFunction(e[t])&&e[t];i[o[1]](function(){var e=a&&a.apply(this,arguments);e&&se.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===r?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?se.extend(e,r):r}},i={};return r.pipe=r.then,se.each(t,function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t,n,r,i=0,o=Q.call(arguments),a=o.length,s=1!==a||e&&se.isFunction(e.promise)?a:0,u=1===s?e:se.Deferred(),l=function(e,n,r){return function(i){n[e]=this,r[e]=arguments.length>1?Q.call(arguments):i,r===t?u.notifyWith(n,r):--s||u.resolveWith(n,r)}};if(a>1)for(t=new Array(a),n=new Array(a),r=new Array(a);i<a;i++)o[i]&&se.isFunction(o[i].promise)?o[i].promise().done(l(i,r,o)).fail(u.reject).progress(l(i,n,t)):--s;return s||u.resolveWith(r,o),u.promise()}});var Se;se.fn.ready=function(e){return se.ready.promise().done(e),this},se.extend({isReady:!1,readyWait:1,holdReady:function(e){e?se.readyWait++:se.ready(!0)},ready:function(e){if(!0===e?!--se.readyWait:!se.isReady){if(!ye.body)return setTimeout(se.ready);se.isReady=!0,!0!==e&&--se.readyWait>0||(Se.resolveWith(ye,[se]),se.fn.triggerHandler&&(se(ye).triggerHandler("ready"),se(ye).off("ready")))}}}),se.ready.promise=function(e){if(!Se)if(Se=se.Deferred(),"complete"===ye.readyState)setTimeout(se.ready);else if(ye.addEventListener)ye.addEventListener("DOMContentLoaded",p,!1),n.addEventListener("load",p,!1);else{ye.attachEvent("onreadystatechange",p),n.attachEvent("onload",p);var t=!1;try{t=null==n.frameElement&&ye.documentElement}catch(e){}t&&t.doScroll&&function e(){if(!se.isReady){try{t.doScroll("left")}catch(t){return setTimeout(e,50)}c(),se.ready()}}()}return Se.promise(e)};var ke,Ee="undefined";for(ke in se(ae))break;ae.ownLast="0"!==ke,ae.inlineBlockNeedsLayout=!1,se(function(){var e,t,n,r;(n=ye.getElementsByTagName("body")[0])&&n.style&&(t=ye.createElement("div"),r=ye.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),typeof t.style.zoom!==Ee&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",ae.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(n.style.zoom=1)),n.removeChild(r))}),function(){var e=ye.createElement("div");if(null==ae.deleteExpando){ae.deleteExpando=!0;try{delete e.test}catch(e){ae.deleteExpando=!1}}e=null}(),se.acceptData=function(e){var t=se.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return(1===n||9===n)&&(!t||!0!==t&&e.getAttribute("classid")===t)};var Te=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Me=/([A-Z])/g;se.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return!!(e=e.nodeType?se.cache[e[se.expando]]:e[se.expando])&&!f(e)},data:function(e,t,n){return h(e,t,n)},removeData:function(e,t){return m(e,t)},_data:function(e,t,n){return h(e,t,n,!0)},_removeData:function(e,t){return m(e,t,!0)}}),se.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=se.data(o),1===o.nodeType&&!se._data(o,"parsedAttrs"))){for(n=a.length;n--;)a[n]&&(r=a[n].name,0===r.indexOf("data-")&&(r=se.camelCase(r.slice(5)),d(o,r,i[r])));se._data(o,"parsedAttrs",!0)}return i}return"object"==typeof e?this.each(function(){se.data(this,e)}):arguments.length>1?this.each(function(){se.data(this,e,t)}):o?d(o,e,se.data(o,e)):void 0},removeData:function(e){return this.each(function(){se.removeData(this,e)})}}),se.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=se._data(e,t),n&&(!r||se.isArray(n)?r=se._data(e,t,se.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=se.queue(e,t),r=n.length,i=n.shift(),o=se._queueHooks(e,t),a=function(){se.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return se._data(e,n)||se._data(e,n,{empty:se.Callbacks("once memory").add(function(){se._removeData(e,t+"queue"),se._removeData(e,n)})})}}),se.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?se.queue(this[0],e):void 0===t?this:this.each(function(){var n=se.queue(this,e,t);se._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&se.dequeue(this,e)})},dequeue:function(e){return this.each(function(){se.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=se.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=se._data(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var Ce=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Oe=["Top","Right","Bottom","Left"],Ae=function(e,t){return e=t||e,"none"===se.css(e,"display")||!se.contains(e.ownerDocument,e)},Pe=se.access=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===se.type(n)){i=!0;for(s in n)se.access(e,t,s,n[s],!0,o,a)}else if(void 0!==r&&(i=!0,se.isFunction(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(se(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},Re=/^(?:checkbox|radio)$/i;!function(){var e=ye.createElement("input"),t=ye.createElement("div"),n=ye.createDocumentFragment();if(t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ae.leadingWhitespace=3===t.firstChild.nodeType,ae.tbody=!t.getElementsByTagName("tbody").length,ae.htmlSerialize=!!t.getElementsByTagName("link").length,ae.html5Clone="<:nav></:nav>"!==ye.createElement("nav").cloneNode(!0).outerHTML,e.type="checkbox",e.checked=!0,n.appendChild(e),ae.appendChecked=e.checked,t.innerHTML="<textarea>x</textarea>",ae.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,n.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",ae.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,ae.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",function(){ae.noCloneEvent=!1}),t.cloneNode(!0).click()),null==ae.deleteExpando){ae.deleteExpando=!0;try{delete t.test}catch(e){ae.deleteExpando=!1}}}(),function(){var e,t,r=ye.createElement("div");for(e in{submit:!0,change:!0,focusin:!0})t="on"+e,(ae[e+"Bubbles"]=t in n)||(r.setAttribute(t,"t"),ae[e+"Bubbles"]=!1===r.attributes[t].expando);r=null}();var De=/^(?:input|select|textarea)$/i,Ie=/^key/,Ne=/^(?:mouse|pointer|contextmenu)|click/,Le=/^(?:focusinfocus|focusoutblur)$/,ze=/^([^.]*)(?:\.(.+)|)$/;se.event={global:{},add:function(e,t,n,r,i){var o,a,s,u,l,c,p,d,f,h,m,g=se._data(e);if(g){for(n.handler&&(u=n,n=u.handler,i=u.selector),n.guid||(n.guid=se.guid++),(a=g.events)||(a=g.events={}),(c=g.handle)||(c=g.handle=function(e){return typeof se===Ee||e&&se.event.triggered===e.type?void 0:se.event.dispatch.apply(c.elem,arguments)},c.elem=e),t=(t||"").match(xe)||[""],s=t.length;s--;)o=ze.exec(t[s])||[],f=m=o[1],h=(o[2]||"").split(".").sort(),f&&(l=se.event.special[f]||{},f=(i?l.delegateType:l.bindType)||f,l=se.event.special[f]||{},p=se.extend({type:f,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&se.expr.match.needsContext.test(i),namespace:h.join(".")},u),(d=a[f])||(d=a[f]=[],d.delegateCount=0,l.setup&&!1!==l.setup.call(e,r,h,c)||(e.addEventListener?e.addEventListener(f,c,!1):e.attachEvent&&e.attachEvent("on"+f,c))),l.add&&(l.add.call(e,p),p.handler.guid||(p.handler.guid=n.guid)),i?d.splice(d.delegateCount++,0,p):d.push(p),se.event.global[f]=!0);e=null}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,p,d,f,h,m,g=se.hasData(e)&&se._data(e);if(g&&(c=g.events)){for(t=(t||"").match(xe)||[""],l=t.length;l--;)if(s=ze.exec(t[l])||[],f=m=s[1],h=(s[2]||"").split(".").sort(),f){for(p=se.event.special[f]||{},f=(r?p.delegateType:p.bindType)||f,d=c[f]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),u=o=d.length;o--;)a=d[o],!i&&m!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||r&&r!==a.selector&&("**"!==r||!a.selector)||(d.splice(o,1),a.selector&&d.delegateCount--,p.remove&&p.remove.call(e,a));u&&!d.length&&(p.teardown&&!1!==p.teardown.call(e,h,g.handle)||se.removeEvent(e,f,g.handle),delete c[f])}else for(f in c)se.event.remove(e,f+t[l],n,r,!0);se.isEmptyObject(c)&&(delete g.handle,se._removeData(e,"events"))}},trigger:function(e,t,r,i){var o,a,s,u,l,c,p,d=[r||ye],f=oe.call(e,"type")?e.type:e,h=oe.call(e,"namespace")?e.namespace.split("."):[];if(s=c=r=r||ye,3!==r.nodeType&&8!==r.nodeType&&!Le.test(f+se.event.triggered)&&(f.indexOf(".")>=0&&(h=f.split("."),f=h.shift(),h.sort()),a=f.indexOf(":")<0&&"on"+f,e=e[se.expando]?e:new se.Event(f,"object"==typeof e&&e),e.isTrigger=i?2:3,e.namespace=h.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:se.makeArray(t,[e]),l=se.event.special[f]||{},i||!l.trigger||!1!==l.trigger.apply(r,t))){if(!i&&!l.noBubble&&!se.isWindow(r)){for(u=l.delegateType||f,Le.test(u+f)||(s=s.parentNode);s;s=s.parentNode)d.push(s),c=s;c===(r.ownerDocument||ye)&&d.push(c.defaultView||c.parentWindow||n)}for(p=0;(s=d[p++])&&!e.isPropagationStopped();)e.type=p>1?u:l.bindType||f,o=(se._data(s,"events")||{})[e.type]&&se._data(s,"handle"),o&&o.apply(s,t),(o=a&&s[a])&&o.apply&&se.acceptData(s)&&(e.result=o.apply(s,t),!1===e.result&&e.preventDefault());if(e.type=f,!i&&!e.isDefaultPrevented()&&(!l._default||!1===l._default.apply(d.pop(),t))&&se.acceptData(r)&&a&&r[f]&&!se.isWindow(r)){c=r[a],c&&(r[a]=null),se.event.triggered=f;try{r[f]()}catch(e){}se.event.triggered=void 0,c&&(r[a]=c)}return e.result}},dispatch:function(e){e=se.event.fix(e);var t,n,r,i,o,a=[],s=Q.call(arguments),u=(se._data(this,"events")||{})[e.type]||[],l=se.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,e)){for(a=se.event.handlers.call(this,e,u),t=0;(i=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,o=0;(r=i.handlers[o++])&&!e.isImmediatePropagationStopped();)e.namespace_re&&!e.namespace_re.test(r.namespace)||(e.handleObj=r,e.data=r.data,void 0!==(n=((se.event.special[r.origType]||{}).handle||r.handler).apply(i.elem,s))&&!1===(e.result=n)&&(e.preventDefault(),e.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,o,a=[],s=t.delegateCount,u=e.target;if(s&&u.nodeType&&(!e.button||"click"!==e.type))for(;u!=this;u=u.parentNode||this)if(1===u.nodeType&&(!0!==u.disabled||"click"!==e.type)){for(i=[],o=0;o<s;o++)r=t[o],n=r.selector+" ",void 0===i[n]&&(i[n]=r.needsContext?se(n,this).index(u)>=0:se.find(n,this,null,[u]).length),i[n]&&i.push(r);i.length&&a.push({elem:u,handlers:i})}return s<t.length&&a.push({elem:this,handlers:t.slice(s)}),a},fix:function(e){if(e[se.expando])return e;var t,n,r,i=e.type,o=e,a=this.fixHooks[i];for(a||(this.fixHooks[i]=a=Ne.test(i)?this.mouseHooks:Ie.test(i)?this.keyHooks:{}),r=a.props?this.props.concat(a.props):this.props,e=new se.Event(o),t=r.length;t--;)n=r[t],e[n]=o[n];return e.target||(e.target=o.srcElement||ye),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,a.filter?a.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,o=t.button,a=t.fromElement;return null==e.pageX&&null!=t.clientX&&(r=e.target.ownerDocument||ye,i=r.documentElement,n=r.body,e.pageX=t.clientX+(i&&i.scrollLeft||n&&n.scrollLeft||0)-(i&&i.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||n&&n.scrollTop||0)-(i&&i.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?t.toElement:a),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==v()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===v()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(se.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(e){return se.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=se.extend(new se.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?se.event.trigger(i,null,t):se.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},se.removeEvent=ye.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===Ee&&(e[r]=null),e.detachEvent(r,n))},se.Event=function(e,t){if(!(this instanceof se.Event))return new se.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?g:y):this.type=e,t&&se.extend(this,t),this.timeStamp=e&&e.timeStamp||se.now(),this[se.expando]=!0},se.Event.prototype={isDefaultPrevented:y,isPropagationStopped:y,isImmediatePropagationStopped:y,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=g,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=g,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=g,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},se.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){se.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return i&&(i===r||se.contains(r,i))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),ae.submitBubbles||(se.event.special.submit={setup:function(){if(se.nodeName(this,"form"))return!1;se.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=se.nodeName(t,"input")||se.nodeName(t,"button")?t.form:void 0;n&&!se._data(n,"submitBubbles")&&(se.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),se._data(n,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&se.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(se.nodeName(this,"form"))return!1;se.event.remove(this,"._submit")}}),ae.changeBubbles||(se.event.special.change={setup:function(){if(De.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(se.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),se.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),se.event.simulate("change",this,e,!0)})),!1;se.event.add(this,"beforeactivate._change",function(e){var t=e.target;De.test(t.nodeName)&&!se._data(t,"changeBubbles")&&(se.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||se.event.simulate("change",this.parentNode,e,!0)}),se._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type)return e.handleObj.handler.apply(this,arguments)},teardown:function(){return se.event.remove(this,"._change"),!De.test(this.nodeName)}}),ae.focusinBubbles||se.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){se.event.simulate(t,e.target,se.event.fix(e),!0)};se.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=se._data(r,t);i||r.addEventListener(e,n,!0),se._data(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=se._data(r,t)-1;i?se._data(r,t,i):(r.removeEventListener(e,n,!0),se._removeData(r,t))}}}),se.fn.extend({on:function(e,t,n,r,i){var o,a;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(o in e)this.on(o,t,n,e[o],i);return this}if(null==n&&null==r?(r=t,n=t=void 0):null==r&&("string"==typeof t?(r=n,n=void 0):(r=n,n=t,t=void 0)),!1===r)r=y;else if(!r)return this;return 1===i&&(a=r,r=function(e){return se().off(e),a.apply(this,arguments)},r.guid=a.guid||(a.guid=se.guid++)),this.each(function(){se.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,se(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=y),this.each(function(){se.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){se.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return se.event.trigger(e,t,n,!0)}});var je="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",He=/ jQuery\d+="(?:null|\d+)"/g,Be=new RegExp("<(?:"+je+")[\\s/>]","i"),Fe=/^\s+/,Ue=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ve=/<([\w:]+)/,Ye=/<tbody/i,We=/<|&#?\w+;/,qe=/<(?:script|style|link)/i,Ge=/checked\s*(?:[^=]|=\s*.checked.)/i,Ze=/^$|\/(?:java|ecma)script/i,Ke=/^true\/(.*)/,Je=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Xe={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ae.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},$e=_(ye),Qe=$e.appendChild(ye.createElement("div"));Xe.optgroup=Xe.option,Xe.tbody=Xe.tfoot=Xe.colgroup=Xe.caption=Xe.thead,Xe.th=Xe.td,se.extend({clone:function(e,t,n){var r,i,o,a,s,u=se.contains(e.ownerDocument,e);if(ae.html5Clone||se.isXMLDoc(e)||!Be.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(Qe.innerHTML=e.outerHTML,Qe.removeChild(o=Qe.firstChild)),!(ae.noCloneEvent&&ae.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||se.isXMLDoc(e)))for(r=b(o),s=b(e),a=0;null!=(i=s[a]);++a)r[a]&&M(i,r[a]);if(t)if(n)for(s=s||b(e),r=r||b(o),a=0;null!=(i=s[a]);a++)T(i,r[a]);else T(e,o);return r=b(o,"script"),r.length>0&&E(r,!u&&b(e,"script")),r=s=i=null,o},buildFragment:function(e,t,n,r){for(var i,o,a,s,u,l,c,p=e.length,d=_(t),f=[],h=0;h<p;h++)if((o=e[h])||0===o)if("object"===se.type(o))se.merge(f,o.nodeType?[o]:o);else if(We.test(o)){for(s=s||d.appendChild(t.createElement("div")),u=(Ve.exec(o)||["",""])[1].toLowerCase(),c=Xe[u]||Xe._default,s.innerHTML=c[1]+o.replace(Ue,"<$1></$2>")+c[2],i=c[0];i--;)s=s.lastChild;if(!ae.leadingWhitespace&&Fe.test(o)&&f.push(t.createTextNode(Fe.exec(o)[0])),!ae.tbody)for(o="table"!==u||Ye.test(o)?"<table>"!==c[1]||Ye.test(o)?0:s:s.firstChild,i=o&&o.childNodes.length;i--;)se.nodeName(l=o.childNodes[i],"tbody")&&!l.childNodes.length&&o.removeChild(l);for(se.merge(f,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=d.lastChild}else f.push(t.createTextNode(o));for(s&&d.removeChild(s),ae.appendChecked||se.grep(b(f,"input"),x),h=0;o=f[h++];)if((!r||-1===se.inArray(o,r))&&(a=se.contains(o.ownerDocument,o),s=b(d.appendChild(o),"script"),a&&E(s),n))for(i=0;o=s[i++];)Ze.test(o.type||"")&&n.push(o);return s=null,d},cleanData:function(e,t){for(var n,r,i,o,a=0,s=se.expando,u=se.cache,l=ae.deleteExpando,c=se.event.special;null!=(n=e[a]);a++)if((t||se.acceptData(n))&&(i=n[s],o=i&&u[i])){if(o.events)for(r in o.events)c[r]?se.event.remove(n,r):se.removeEvent(n,r,o.handle);u[i]&&(delete u[i],l?delete n[s]:typeof n.removeAttribute!==Ee?n.removeAttribute(s):n[s]=null,$.push(i))}}}),se.fn.extend({text:function(e){return Pe(this,function(e){return void 0===e?se.text(this):this.empty().append((this[0]&&this[0].ownerDocument||ye).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||w(this,e).appendChild(e)})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=w(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=e?se.filter(e,this):this,i=0;null!=(n=r[i]);i++)t||1!==n.nodeType||se.cleanData(b(n)),n.parentNode&&(t&&se.contains(n.ownerDocument,n)&&E(b(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&se.cleanData(b(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&se.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return se.clone(this,e,t)})},html:function(e){return Pe(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(He,""):void 0;if("string"==typeof e&&!qe.test(e)&&(ae.htmlSerialize||!Be.test(e))&&(ae.leadingWhitespace||!Fe.test(e))&&!Xe[(Ve.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Ue,"<$1></$2>");try{for(;n<r;n++)t=this[n]||{},1===t.nodeType&&(se.cleanData(b(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,se.cleanData(b(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=ee.apply([],e);var n,r,i,o,a,s,u=0,l=this.length,c=this,p=l-1,d=e[0],f=se.isFunction(d);if(f||l>1&&"string"==typeof d&&!ae.checkClone&&Ge.test(d))return this.each(function(n){var r=c.eq(n);f&&(e[0]=d.call(this,n,r.html())),r.domManip(e,t)});if(l&&(s=se.buildFragment(e,this[0].ownerDocument,!1,this),n=s.firstChild,1===s.childNodes.length&&(s=n),n)){for(o=se.map(b(s,"script"),S),i=o.length;u<l;u++)r=s,u!==p&&(r=se.clone(r,!0,!0),i&&se.merge(o,b(r,"script"))),t.call(this[u],r,u);if(i)for(a=o[o.length-1].ownerDocument,se.map(o,k),u=0;u<i;u++)r=o[u],Ze.test(r.type||"")&&!se._data(r,"globalEval")&&se.contains(a,r)&&(r.src?se._evalUrl&&se._evalUrl(r.src):se.globalEval((r.text||r.textContent||r.innerHTML||"").replace(Je,"")));s=n=null}return this}}),se.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){se.fn[e]=function(e){for(var n,r=0,i=[],o=se(e),a=o.length-1;r<=a;r++)n=r===a?this:this.clone(!0),se(o[r])[t](n),te.apply(i,n.get());return this.pushStack(i)}});var et,tt={};!function(){var e;ae.shrinkWrapBlocks=function(){if(null!=e)return e;e=!1;var t,n,r;return(n=ye.getElementsByTagName("body")[0])&&n.style?(t=ye.createElement("div"),r=ye.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),typeof t.style.zoom!==Ee&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(ye.createElement("div")).style.width="5px",e=3!==t.offsetWidth),n.removeChild(r),e):void 0}}();var nt,rt,it=/^margin/,ot=new RegExp("^("+Ce+")(?!px)[a-z%]+$","i"),at=/^(top|right|bottom|left)$/;n.getComputedStyle?(nt=function(e){return e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):n.getComputedStyle(e,null)},rt=function(e,t,n){var r,i,o,a,s=e.style;return n=n||nt(e),a=n?n.getPropertyValue(t)||n[t]:void 0,n&&(""!==a||se.contains(e.ownerDocument,e)||(a=se.style(e,t)),ot.test(a)&&it.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0===a?a:a+""}):ye.documentElement.currentStyle&&(nt=function(e){return e.currentStyle},rt=function(e,t,n){var r,i,o,a,s=e.style;return n=n||nt(e),a=n?n[t]:void 0,null==a&&s&&s[t]&&(a=s[t]),ot.test(a)&&!at.test(t)&&(r=s.left,i=e.runtimeStyle,o=i&&i.left,o&&(i.left=e.currentStyle.left),s.left="fontSize"===t?"1em":a,a=s.pixelLeft+"px",s.left=r,o&&(i.left=o)),void 0===a?a:a+""||"auto"}),function(){function e(){var e,t,r,i;(t=ye.getElementsByTagName("body")[0])&&t.style&&(e=ye.createElement("div"),r=ye.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",t.appendChild(r).appendChild(e),e.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",o=a=!1,u=!0,n.getComputedStyle&&(o="1%"!==(n.getComputedStyle(e,null)||{}).top,a="4px"===(n.getComputedStyle(e,null)||{width:"4px"}).width,i=e.appendChild(ye.createElement("div")),i.style.cssText=e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",e.style.width="1px",u=!parseFloat((n.getComputedStyle(i,null)||{}).marginRight),e.removeChild(i)),e.innerHTML="<table><tr><td></td><td>t</td></tr></table>",i=e.getElementsByTagName("td"),i[0].style.cssText="margin:0;border:0;padding:0;display:none",s=0===i[0].offsetHeight,s&&(i[0].style.display="",i[1].style.display="none",s=0===i[0].offsetHeight),t.removeChild(r))}var t,r,i,o,a,s,u;t=ye.createElement("div"),t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=t.getElementsByTagName("a")[0],(r=i&&i.style)&&(r.cssText="float:left;opacity:.5",ae.opacity="0.5"===r.opacity,ae.cssFloat=!!r.cssFloat,t.style.backgroundClip="content-box",t.cloneNode(!0).style.backgroundClip="",ae.clearCloneStyle="content-box"===t.style.backgroundClip,ae.boxSizing=""===r.boxSizing||""===r.MozBoxSizing||""===r.WebkitBoxSizing,se.extend(ae,{reliableHiddenOffsets:function(){return null==s&&e(),s},boxSizingReliable:function(){return null==a&&e(),a},pixelPosition:function(){return null==o&&e(),o},reliableMarginRight:function(){return null==u&&e(),u}}))}(),se.swap=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i};var st=/alpha\([^)]*\)/i,ut=/opacity\s*=\s*([^)]*)/,lt=/^(none|table(?!-c[ea]).+)/,ct=new RegExp("^("+Ce+")(.*)$","i"),pt=new RegExp("^([+-])=("+Ce+")","i"),dt={position:"absolute",visibility:"hidden",display:"block"},ft={letterSpacing:"0",fontWeight:"400"},ht=["Webkit","O","Moz","ms"];se.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=rt(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:ae.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=se.camelCase(t),u=e.style;if(t=se.cssProps[s]||(se.cssProps[s]=P(u,s)),a=se.cssHooks[t]||se.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:u[t];if(o=typeof n,"string"===o&&(i=pt.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(se.css(e,t)),o="number"),null!=n&&n===n&&("number"!==o||se.cssNumber[s]||(n+="px"),ae.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),!(a&&"set"in a&&void 0===(n=a.set(e,n,r)))))try{u[t]=n}catch(e){}}},css:function(e,t,n,r){var i,o,a,s=se.camelCase(t);return t=se.cssProps[s]||(se.cssProps[s]=P(e.style,s)),a=se.cssHooks[t]||se.cssHooks[s],a&&"get"in a&&(o=a.get(e,!0,n)),void 0===o&&(o=rt(e,t,r)),"normal"===o&&t in ft&&(o=ft[t]),""===n||n?(i=parseFloat(o),!0===n||se.isNumeric(i)?i||0:o):o}}),se.each(["height","width"],function(e,t){se.cssHooks[t]={get:function(e,n,r){if(n)return lt.test(se.css(e,"display"))&&0===e.offsetWidth?se.swap(e,dt,function(){return N(e,t,r)}):N(e,t,r)},set:function(e,n,r){var i=r&&nt(e);return D(e,n,r?I(e,t,r,ae.boxSizing&&"border-box"===se.css(e,"boxSizing",!1,i),i):0)}}}),ae.opacity||(se.cssHooks.opacity={get:function(e,t){return ut.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=se.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===se.trim(o.replace(st,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=st.test(o)?o.replace(st,i):o+" "+i)}}),se.cssHooks.marginRight=A(ae.reliableMarginRight,function(e,t){if(t)return se.swap(e,{display:"inline-block"},rt,[e,"marginRight"])}),se.each({margin:"",padding:"",border:"Width"},function(e,t){se.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+Oe[r]+t]=o[r]||o[r-2]||o[0];return i}},it.test(e)||(se.cssHooks[e+t].set=D)}),se.fn.extend({css:function(e,t){return Pe(this,function(e,t,n){var r,i,o={},a=0;if(se.isArray(t)){for(r=nt(e),i=t.length;a<i;a++)o[t[a]]=se.css(e,t[a],!1,r);return o}return void 0!==n?se.style(e,t,n):se.css(e,t)},e,t,arguments.length>1)},show:function(){return R(this,!0)},hide:function(){return R(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Ae(this)?se(this).show():se(this).hide()})}}),se.Tween=L,L.prototype={constructor:L,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(se.cssNumber[n]?"":"px")},cur:function(){var e=L.propHooks[this.prop];return e&&e.get?e.get(this):L.propHooks._default.get(this)},run:function(e){var t,n=L.propHooks[this.prop];return this.options.duration?this.pos=t=se.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):L.propHooks._default.set(this),this}},L.prototype.init.prototype=L.prototype,L.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=se.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){se.fx.step[e.prop]?se.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[se.cssProps[e.prop]]||se.cssHooks[e.prop])?se.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},L.propHooks.scrollTop=L.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},se.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},se.fx=L.prototype.init,se.fx.step={};var mt,gt,yt=/^(?:toggle|show|hide)$/,vt=new RegExp("^(?:([+-])=|)("+Ce+")([a-z%]*)$","i"),_t=/queueHooks$/,bt=[B],xt={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=vt.exec(t),o=i&&i[3]||(se.cssNumber[e]?"":"px"),a=(se.cssNumber[e]||"px"!==o&&+r)&&vt.exec(se.css(n.elem,e)),s=1,u=20;if(a&&a[3]!==o){o=o||a[3],i=i||[],a=+r||1;do{s=s||".5",a/=s,se.style(n.elem,e,a+o)}while(s!==(s=n.cur()/r)&&1!==s&&--u)}return i&&(a=n.start=+a||+r||0,n.unit=o,n.end=i[1]?a+(i[1]+1)*i[2]:+i[2]),n}]};se.Animation=se.extend(U,{tweener:function(e,t){se.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,i=e.length;r<i;r++)n=e[r],xt[n]=xt[n]||[],xt[n].unshift(t)},prefilter:function(e,t){t?bt.unshift(e):bt.push(e)}}),se.speed=function(e,t,n){var r=e&&"object"==typeof e?se.extend({},e):{complete:n||!n&&t||se.isFunction(e)&&e,duration:e,easing:n&&t||t&&!se.isFunction(t)&&t};return r.duration=se.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in se.fx.speeds?se.fx.speeds[r.duration]:se.fx.speeds._default,null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){se.isFunction(r.old)&&r.old.call(this),r.queue&&se.dequeue(this,r.queue)},r},se.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Ae).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=se.isEmptyObject(e),o=se.speed(t,n,r),a=function(){var t=U(this,se.extend({},e),o);(i||se._data(this,"finish"))&&t.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=se.timers,a=se._data(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&_t.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||se.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=se._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=se.timers,a=r?r.length:0;for(n.finish=!0,se.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),se.each(["toggle","show","hide"],function(e,t){var n=se.fn[t];se.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(j(t,!0),e,r,i)}}),se.each({slideDown:j("show"),slideUp:j("hide"),slideToggle:j("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){se.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),se.timers=[],se.fx.tick=function(){var e,t=se.timers,n=0;for(mt=se.now();n<t.length;n++)(e=t[n])()||t[n]!==e||t.splice(n--,1);t.length||se.fx.stop(),mt=void 0},se.fx.timer=function(e){se.timers.push(e),e()?se.fx.start():se.timers.pop()},se.fx.interval=13,se.fx.start=function(){gt||(gt=setInterval(se.fx.tick,se.fx.interval))},se.fx.stop=function(){clearInterval(gt),gt=null},se.fx.speeds={slow:600,fast:200,_default:400},se.fn.delay=function(e,t){return e=se.fx?se.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e,t,n,r,i;t=ye.createElement("div"),t.setAttribute("className","t"),t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",r=t.getElementsByTagName("a")[0],n=ye.createElement("select"),i=n.appendChild(ye.createElement("option")),e=t.getElementsByTagName("input")[0],r.style.cssText="top:1px",ae.getSetAttribute="t"!==t.className,ae.style=/top/.test(r.getAttribute("style")),ae.hrefNormalized="/a"===r.getAttribute("href"),ae.checkOn=!!e.value,ae.optSelected=i.selected,ae.enctype=!!ye.createElement("form").enctype,n.disabled=!0,ae.optDisabled=!i.disabled,e=ye.createElement("input"),e.setAttribute("value",""),ae.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),ae.radioValue="t"===e.value}();var wt=/\r/g;se.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=se.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,se(this).val()):e,null==i?i="":"number"==typeof i?i+="":se.isArray(i)&&(i=se.map(i,function(e){return null==e?"":e+""})),(t=se.valHooks[this.type]||se.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))})):i?(t=se.valHooks[i.type]||se.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(wt,""):null==n?"":n):void 0}}),se.extend({valHooks:{option:{get:function(e){var t=se.find.attr(e,"value");return null!=t?t:se.trim(se.text(e))}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||i<0,a=o?null:[],s=o?i+1:r.length,u=i<0?s:o?i:0;u<s;u++)if(n=r[u],(n.selected||u===i)&&(ae.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!se.nodeName(n.parentNode,"optgroup"))){if(t=se(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,r,i=e.options,o=se.makeArray(t),a=i.length;a--;)if(r=i[a],se.inArray(se.valHooks.option.get(r),o)>=0)try{r.selected=n=!0}catch(e){r.scrollHeight}else r.selected=!1;return n||(e.selectedIndex=-1),i}}}}),se.each(["radio","checkbox"],function(){se.valHooks[this]={set:function(e,t){if(se.isArray(t))return e.checked=se.inArray(se(e).val(),t)>=0}},ae.checkOn||(se.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var St,kt,Et=se.expr.attrHandle,Tt=/^(?:checked|selected)$/i,Mt=ae.getSetAttribute,Ct=ae.input;se.fn.extend({attr:function(e,t){return Pe(this,se.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){se.removeAttr(this,e)})}}),se.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===Ee?se.prop(e,t,n):(1===o&&se.isXMLDoc(e)||(t=t.toLowerCase(),r=se.attrHooks[t]||(se.expr.match.bool.test(t)?kt:St)),void 0===n?r&&"get"in r&&null!==(i=r.get(e,t))?i:(i=se.find.attr(e,t),null==i?void 0:i):null!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):void se.removeAttr(e,t))},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(xe);if(o&&1===e.nodeType)for(;n=o[i++];)r=se.propFix[n]||n,se.expr.match.bool.test(n)?Ct&&Mt||!Tt.test(n)?e[r]=!1:e[se.camelCase("default-"+n)]=e[r]=!1:se.attr(e,n,""),e.removeAttribute(Mt?n:r)},attrHooks:{type:{set:function(e,t){if(!ae.radioValue&&"radio"===t&&se.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),kt={set:function(e,t,n){return!1===t?se.removeAttr(e,n):Ct&&Mt||!Tt.test(n)?e.setAttribute(!Mt&&se.propFix[n]||n,n):e[se.camelCase("default-"+n)]=e[n]=!0,n}},se.each(se.expr.match.bool.source.match(/\w+/g),function(e,t){var n=Et[t]||se.find.attr;Et[t]=Ct&&Mt||!Tt.test(t)?function(e,t,r){var i,o;return r||(o=Et[t],Et[t]=i,i=null!=n(e,t,r)?t.toLowerCase():null,Et[t]=o),i}:function(e,t,n){if(!n)return e[se.camelCase("default-"+t)]?t.toLowerCase():null}}),Ct&&Mt||(se.attrHooks.value={set:function(e,t,n){if(!se.nodeName(e,"input"))return St&&St.set(e,t,n);e.defaultValue=t}}),Mt||(St={set:function(e,t,n){var r=e.getAttributeNode(n);if(r||e.setAttributeNode(r=e.ownerDocument.createAttribute(n)),r.value=t+="","value"===n||t===e.getAttribute(n))return t}},Et.id=Et.name=Et.coords=function(e,t,n){var r;if(!n)return(r=e.getAttributeNode(t))&&""!==r.value?r.value:null},se.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);if(n&&n.specified)return n.value},set:St.set},se.attrHooks.contenteditable={set:function(e,t,n){St.set(e,""!==t&&t,n)}},se.each(["width","height"],function(e,t){se.attrHooks[t]={set:function(e,n){if(""===n)return e.setAttribute(t,"auto"),n}}})),ae.style||(se.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var Ot=/^(?:input|select|textarea|button|object)$/i,At=/^(?:a|area)$/i;se.fn.extend({prop:function(e,t){return Pe(this,se.prop,e,t,arguments.length>1)},removeProp:function(e){return e=se.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(e){}})}}),se.extend({propFix:{for:"htmlFor",class:"className"},prop:function(e,t,n){var r,i,o,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return o=1!==a||!se.isXMLDoc(e),o&&(t=se.propFix[t]||t,i=se.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=se.find.attr(e,"tabindex");return t?parseInt(t,10):Ot.test(e.nodeName)||At.test(e.nodeName)&&e.href?0:-1}}}}),ae.hrefNormalized||se.each(["href","src"],function(e,t){se.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),ae.optSelected||(se.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),se.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){se.propFix[this.toLowerCase()]=this}),ae.enctype||(se.propFix.enctype="encoding");var Pt=/[\t\r\n\f]/g;se.fn.extend({addClass:function(e){var t,n,r,i,o,a,s=0,u=this.length,l="string"==typeof e&&e;if(se.isFunction(e))return this.each(function(t){se(this).addClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(xe)||[];s<u;s++)if(n=this[s],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Pt," "):" ")){for(o=0;i=t[o++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");a=se.trim(r),n.className!==a&&(n.className=a)}return this},removeClass:function(e){var t,n,r,i,o,a,s=0,u=this.length,l=0===arguments.length||"string"==typeof e&&e;if(se.isFunction(e))return this.each(function(t){se(this).removeClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(xe)||[];s<u;s++)if(n=this[s],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Pt," "):"")){for(o=0;i=t[o++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");a=e?se.trim(r):"",n.className!==a&&(n.className=a)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):se.isFunction(e)?this.each(function(n){se(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var t,r=0,i=se(this),o=e.match(xe)||[];t=o[r++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else n!==Ee&&"boolean"!==n||(this.className&&se._data(this,"__className__",this.className),this.className=this.className||!1===e?"":se._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;n<r;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Pt," ").indexOf(t)>=0)return!0;return!1}}),se.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){se.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),se.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var Rt=se.now(),Dt=/\?/,It=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;se.parseJSON=function(e){if(n.JSON&&n.JSON.parse)return n.JSON.parse(e+"");var t,r=null,i=se.trim(e+"");return i&&!se.trim(i.replace(It,function(e,n,i,o){return t&&n&&(r=0),0===r?e:(t=i||n,r+=!o-!i,"")}))?Function("return "+i)():se.error("Invalid JSON: "+e)},se.parseXML=function(e){var t,r;if(!e||"string"!=typeof e)return null;try{n.DOMParser?(r=new DOMParser,t=r.parseFromString(e,"text/xml")):(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e))}catch(e){t=void 0}return t&&t.documentElement&&!t.getElementsByTagName("parsererror").length||se.error("Invalid XML: "+e),t};var Nt,Lt,zt=/#.*$/,jt=/([?&])_=[^&]*/,Ht=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Bt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ft=/^(?:GET|HEAD)$/,Ut=/^\/\//,Vt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Yt={},Wt={},qt="*/".concat("*");try{Lt=location.href}catch(e){Lt=ye.createElement("a"),Lt.href="",Lt=Lt.href}Nt=Vt.exec(Lt.toLowerCase())||[],se.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Lt,type:"GET",isLocal:Bt.test(Nt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":qt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":se.parseJSON,"text xml":se.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?W(W(e,se.ajaxSettings),t):W(se.ajaxSettings,e)},ajaxPrefilter:V(Yt),ajaxTransport:V(Wt),ajax:function(e,t){function n(e,t,n,r){var i,c,y,v,b,w=t;2!==_&&(_=2,s&&clearTimeout(s),l=void 0,a=r||"",x.readyState=e>0?4:0,i=e>=200&&e<300||304===e,n&&(v=q(p,x,n)),v=G(p,v,x,i),i?(p.ifModified&&(b=x.getResponseHeader("Last-Modified"),b&&(se.lastModified[o]=b),(b=x.getResponseHeader("etag"))&&(se.etag[o]=b)),204===e||"HEAD"===p.type?w="nocontent":304===e?w="notmodified":(w=v.state,c=v.data,y=v.error,i=!y)):(y=w,!e&&w||(w="error",e<0&&(e=0))),x.status=e,x.statusText=(t||w)+"",i?h.resolveWith(d,[c,w,x]):h.rejectWith(d,[x,w,y]),x.statusCode(g),g=void 0,u&&f.trigger(i?"ajaxSuccess":"ajaxError",[x,p,i?c:y]),m.fireWith(d,[x,w]),u&&(f.trigger("ajaxComplete",[x,p]),--se.active||se.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,i,o,a,s,u,l,c,p=se.ajaxSetup({},t),d=p.context||p,f=p.context&&(d.nodeType||d.jquery)?se(d):se.event,h=se.Deferred(),m=se.Callbacks("once memory"),g=p.statusCode||{},y={},v={},_=0,b="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===_){if(!c)for(c={};t=Ht.exec(a);)c[t[1].toLowerCase()]=t[2];t=c[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===_?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return _||(e=v[n]=v[n]||e,y[e]=t),this},overrideMimeType:function(e){return _||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(_<2)for(t in e)g[t]=[g[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||b;return l&&l.abort(t),n(0,t),this}};if(h.promise(x).complete=m.add,x.success=x.done,x.error=x.fail,p.url=((e||p.url||Lt)+"").replace(zt,"").replace(Ut,Nt[1]+"//"),p.type=t.method||t.type||p.method||p.type,p.dataTypes=se.trim(p.dataType||"*").toLowerCase().match(xe)||[""],null==p.crossDomain&&(r=Vt.exec(p.url.toLowerCase()),p.crossDomain=!(!r||r[1]===Nt[1]&&r[2]===Nt[2]&&(r[3]||("http:"===r[1]?"80":"443"))===(Nt[3]||("http:"===Nt[1]?"80":"443")))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=se.param(p.data,p.traditional)),Y(Yt,p,t,x),2===_)return x;u=se.event&&p.global,u&&0==se.active++&&se.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Ft.test(p.type),o=p.url,p.hasContent||(p.data&&(o=p.url+=(Dt.test(o)?"&":"?")+p.data,delete p.data),!1===p.cache&&(p.url=jt.test(o)?o.replace(jt,"$1_="+Rt++):o+(Dt.test(o)?"&":"?")+"_="+Rt++)),p.ifModified&&(se.lastModified[o]&&x.setRequestHeader("If-Modified-Since",se.lastModified[o]),se.etag[o]&&x.setRequestHeader("If-None-Match",se.etag[o])),(p.data&&p.hasContent&&!1!==p.contentType||t.contentType)&&x.setRequestHeader("Content-Type",p.contentType),x.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+qt+"; q=0.01":""):p.accepts["*"]);for(i in p.headers)x.setRequestHeader(i,p.headers[i]);if(p.beforeSend&&(!1===p.beforeSend.call(d,x,p)||2===_))return x.abort();b="abort";for(i in{success:1,error:1,complete:1})x[i](p[i]);if(l=Y(Wt,p,t,x)){x.readyState=1,u&&f.trigger("ajaxSend",[x,p]),p.async&&p.timeout>0&&(s=setTimeout(function(){x.abort("timeout")},p.timeout));try{_=1,l.send(y,n)}catch(e){if(!(_<2))throw e;n(-1,e)}}else n(-1,"No Transport");return x},getJSON:function(e,t,n){return se.get(e,t,n,"json")},getScript:function(e,t){return se.get(e,void 0,t,"script")}}),se.each(["get","post"],function(e,t){se[t]=function(e,n,r,i){return se.isFunction(n)&&(i=i||r,r=n,n=void 0),se.ajax({url:e,type:t,dataType:i,data:n,success:r})}}),se._evalUrl=function(e){return se.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},se.fn.extend({wrapAll:function(e){if(se.isFunction(e))return this.each(function(t){se(this).wrapAll(e.call(this,t))});if(this[0]){var t=se(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return se.isFunction(e)?this.each(function(t){se(this).wrapInner(e.call(this,t))}):this.each(function(){var t=se(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=se.isFunction(e);return this.each(function(n){se(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){se.nodeName(this,"body")||se(this).replaceWith(this.childNodes)}).end()}}),se.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!ae.reliableHiddenOffsets()&&"none"===(e.style&&e.style.display||se.css(e,"display"))},se.expr.filters.visible=function(e){return!se.expr.filters.hidden(e)};var Gt=/%20/g,Zt=/\[\]$/,Kt=/\r?\n/g,Jt=/^(?:submit|button|image|reset|file)$/i,Xt=/^(?:input|select|textarea|keygen)/i;se.param=function(e,t){var n,r=[],i=function(e,t){t=se.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=se.ajaxSettings&&se.ajaxSettings.traditional),se.isArray(e)||e.jquery&&!se.isPlainObject(e))se.each(e,function(){i(this.name,this.value)});else for(n in e)Z(n,e[n],t,i);return r.join("&").replace(Gt,"+")},se.fn.extend({serialize:function(){return se.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=se.prop(this,"elements");return e?se.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!se(this).is(":disabled")&&Xt.test(this.nodeName)&&!Jt.test(e)&&(this.checked||!Re.test(e))}).map(function(e,t){var n=se(this).val();return null==n?null:se.isArray(n)?se.map(n,function(e){return{name:t.name,value:e.replace(Kt,"\r\n")}}):{name:t.name,value:n.replace(Kt,"\r\n")}}).get()}}),se.ajaxSettings.xhr=void 0!==n.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&K()||J()}:K;var $t=0,Qt={},en=se.ajaxSettings.xhr();n.attachEvent&&n.attachEvent("onunload",function(){for(var e in Qt)Qt[e](void 0,!0)}),ae.cors=!!en&&"withCredentials"in en,en=ae.ajax=!!en,en&&se.ajaxTransport(function(e){if(!e.crossDomain||ae.cors){var t;return{send:function(n,r){var i,o=e.xhr(),a=++$t;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)o[i]=e.xhrFields[i];e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)void 0!==n[i]&&o.setRequestHeader(i,n[i]+"");o.send(e.hasContent&&e.data||null),t=function(n,i){var s,u,l;if(t&&(i||4===o.readyState))if(delete Qt[a],t=void 0,o.onreadystatechange=se.noop,i)4!==o.readyState&&o.abort();else{l={},s=o.status,"string"==typeof o.responseText&&(l.text=o.responseText);try{u=o.statusText}catch(e){u=""}s||!e.isLocal||e.crossDomain?1223===s&&(s=204):s=l.text?200:404}l&&r(s,u,l,o.getAllResponseHeaders())},e.async?4===o.readyState?setTimeout(t):o.onreadystatechange=Qt[a]=t:t()},abort:function(){t&&t(void 0,!0)}}}}),se.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return se.globalEval(e),e}}}),se.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),se.ajaxTransport("script",function(e){if(e.crossDomain){var t,n=ye.head||se("head")[0]||ye.documentElement;return{send:function(r,i){t=ye.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,n){(n||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,n||i(200,"success"))},n.insertBefore(t,n.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var tn=[],nn=/(=)\?(?=&|$)|\?\?/;se.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=tn.pop()||se.expando+"_"+Rt++;return this[e]=!0,e}}),se.ajaxPrefilter("json jsonp",function(e,t,r){var i,o,a,s=!1!==e.jsonp&&(nn.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&nn.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=se.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(nn,"$1"+i):!1!==e.jsonp&&(e.url+=(Dt.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return a||se.error(i+" was not called"),a[0]},e.dataTypes[0]="json",o=n[i],n[i]=function(){a=arguments},r.always(function(){n[i]=o,e[i]&&(e.jsonpCallback=t.jsonpCallback,tn.push(i)),a&&se.isFunction(o)&&o(a[0]),a=o=void 0}),"script"}),se.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||ye;var r=he.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=se.buildFragment([e],t,i),i&&i.length&&se(i).remove(),se.merge([],r.childNodes))};var rn=se.fn.load;se.fn.load=function(e,t,n){if("string"!=typeof e&&rn)return rn.apply(this,arguments);var r,i,o,a=this,s=e.indexOf(" ");return s>=0&&(r=se.trim(e.slice(s,e.length)),e=e.slice(0,s)),se.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),a.length>0&&se.ajax({url:e,type:o,dataType:"html",data:t}).done(function(e){i=arguments,a.html(r?se("<div>").append(se.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){a.each(n,i||[e.responseText,t,e])}),this},se.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){se.fn[t]=function(e){return this.on(t,e)}}),se.expr.filters.animated=function(e){return se.grep(se.timers,function(t){return e===t.elem}).length};var on=n.document.documentElement;se.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l,c=se.css(e,"position"),p=se(e),d={};"static"===c&&(e.style.position="relative"),s=p.offset(),o=se.css(e,"top"),u=se.css(e,"left"),l=("absolute"===c||"fixed"===c)&&se.inArray("auto",[o,u])>-1,l?(r=p.position(),a=r.top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),se.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(d.top=t.top-s.top+a),null!=t.left&&(d.left=t.left-s.left+i),"using"in t?t.using.call(e,d):p.css(d)}},se.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){se.offset.setOffset(this,e,t)});var t,n,r={top:0,left:0},i=this[0],o=i&&i.ownerDocument;return o?(t=o.documentElement,se.contains(t,i)?(typeof i.getBoundingClientRect!==Ee&&(r=i.getBoundingClientRect()),n=X(o),{top:r.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:r.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):r):void 0},position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===se.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),se.nodeName(e[0],"html")||(n=e.offset()),n.top+=se.css(e[0],"borderTopWidth",!0),n.left+=se.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-se.css(r,"marginTop",!0),left:t.left-n.left-se.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||on;e&&!se.nodeName(e,"html")&&"static"===se.css(e,"position");)e=e.offsetParent;return e||on})}}),se.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n=/Y/.test(t);se.fn[e]=function(r){return Pe(this,function(e,r,i){var o=X(e);if(void 0===i)return o?t in o?o[t]:o.document.documentElement[r]:e[r];o?o.scrollTo(n?se(o).scrollLeft():i,n?i:se(o).scrollTop()):e[r]=i},e,r,arguments.length,null)}}),se.each(["top","left"],function(e,t){se.cssHooks[t]=A(ae.pixelPosition,function(e,n){if(n)return n=rt(e,t),ot.test(n)?se(e).position()[t]+"px":n})}),se.each({Height:"height",Width:"width"},function(e,t){se.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){se.fn[r]=function(r,i){var o=arguments.length&&(n||"boolean"!=typeof r),a=n||(!0===r||!0===i?"margin":"border");return Pe(this,function(t,n,r){var i;return se.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===r?se.css(t,n,a):se.style(t,n,r,a)},t,o?r:void 0,o,null)}})}),se.fn.size=function(){return this.length},se.fn.andSelf=se.fn.addBack,r=[],void 0!==(i=function(){return se}.apply(t,r))&&(e.exports=i);var an=n.jQuery,sn=n.$;return se.noConflict=function(e){return n.$===se&&(n.$=sn),e&&n.jQuery===se&&(n.jQuery=an),se},typeof o===Ee&&(n.jQuery=n.$=se),se})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(119);n.d(t,"BrowserRouter",function(){return r.a});var i=n(129);n.d(t,"HashRouter",function(){return i.a});var o=n(57);n.d(t,"Link",function(){return o.a});var a=n(130);n.d(t,"MemoryRouter",function(){return a.a});var s=n(132);n.d(t,"NavLink",function(){return s.a});var u=n(134);n.d(t,"Prompt",function(){return u.a});var l=n(136);n.d(t,"Redirect",function(){return l.a});var c=n(58);n.d(t,"Route",function(){return c.a});var p=n(34);n.d(t,"Router",function(){return p.a});var d=n(138);n.d(t,"StaticRouter",function(){return d.a});var f=n(140);n.d(t,"Switch",function(){return f.a});var h=n(142);n.d(t,"generatePath",function(){return h.a});var m=n(143);n.d(t,"matchPath",function(){return m.a});var g=n(144);n.d(t,"withRouter",function(){return g.a})},function(e,t,n){"use strict";var r=function(){};e.exports=r},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(16),a=i(o).default,s=n(22),u=i(s).default,l=n(1),c=i(l).default,p=n(2),d=i(p).default,f=n(3),h=i(f).default,m=n(6),g=i(m).default,y=n(5),v=y.Component,_=n(26),b=_.setRenderParent,x=_.reservedKeys,w=n(117),S=w.goTo,k=n(76),E=i(k).default,T=n(196),M=i(T).default,C=void 0;C=n(12).Redirect;var O=function(e){var t=e.parentEvent,n=e.redirect,r=void 0!==n&&n,i=e.reason,o=void 0!==i&&i,a=e.element,s=e.eventData;return t[r&&o?"createChildRedirect":"createChildClickEvent"](r&&o?o:a,E(g({},s,t.data),x))},A=function(e,t){var n=t.getId();return(e.match(/^\/($|[^\/])/)||e.indexOf(location.hostname)>-1&&n&&n.length)&&(e=e+(e.indexOf("?")<0?"?":"&")+"eventParentId="+n),e},P=0,R=function(e){function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.router;c(this,t);var o=n.useRouter,a=void 0===o||o,s=n.redirect,u=void 0!==s&&s,l=n.href,p=n.target;delete n.useRouter,n.key=n.key||"link-index-"+P++;var f=d(this,e.call(this,n)),h=O(f.props),m=A(l,h),g=Boolean(i&&a&&l!=m),y=Boolean(u&&(g||p&&"_self"!=p));if(f.state={useRouter:g,event:h,href:m,redirect:y,target:p},u){var v=h.record();y||v.then(function(){f.state.redirect=!0,f.forceUpdate()})}else f.handleClick=f.handleClick.bind(f);return f}return h(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.children,i=t.className,o=t.element,s=t.events,l=t.style,c=t.id,p=t.push,d=void 0===p||p,f=this.state,h=f.useRouter,m=f.event,g=f.href,y=f.navigateTo,v=f.redirect,_=f.target,b=v&&h&&(!_||"_self"==_);v&&!b&&S(y||g,_);var x={className:i,"data-element":o,"data-event":s,id:c,style:l,target:_,"data-click-id":m.getId(),onClick:this.handleClick};return u(this.props).forEach(function(t){t.match(/^data-/)&&(x[t]=e.props[t])}),r("a",a({href:g},x),b&&r(C,{to:y||g,push:d}),n)},t.prototype.handleClick=function(e){var t=this;e.preventDefault();var n=this.props,r=n.onClick,i=n.parentOfRender,o=n.eventData,a=n.element,s=n.href,u=this.state,l=u.event,c=u.href,p=u.useRouter,d=this.props.target;"function"==typeof r&&r(e,l.getId()),i&&b(i,l),o&&l.updateData(o);var f=l.record(),h=O(this.props);if(this.setState({event:h,href:A(s,h)}),M(e)){if(d=d||"_blank",S(c,d))return;window.trackJs&&window.trackJs.track&&window.trackJs.track(new Error(a+" link failed to open new window. Falling back to document.location = href.")),d="_self"}var m={navigateTo:c,redirect:!0,target:d};p?this.setState(m):f.then(function(){return t.setState(m)})},t}(v);t.default=R,e.exports=t.default}).call(t,n(0).h)},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"f",function(){return i}),n.d(t,"c",function(){return o}),n.d(t,"e",function(){return a}),n.d(t,"g",function(){return s}),n.d(t,"d",function(){return u}),n.d(t,"b",function(){return l});var r=function(e){return"/"===e.charAt(0)?e:"/"+e},i=function(e){return"/"===e.charAt(0)?e.substr(1):e},o=function(e,t){return new RegExp("^"+t+"(\\/|\\?|#|$)","i").test(e)},a=function(e,t){return o(e,t)?e.substr(t.length):e},s=function(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e},u=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var o=t.indexOf("?");return-1!==o&&(n=t.substr(o),t=t.substr(0,o)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}},l=function(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(6),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=i.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=n(169),h=i(f).default,m=function(e){function t(){return a(this,t),u(this,e.apply(this,arguments))}return c(t,e),t.prototype.render=function(e){var t=e.children;return r("div",{className:h.container},r("div",{className:h.gutter},t))},t}(d);t.default=m,e.exports=t.default}).call(t,n(0).h)},function(e,t,n){"use strict";var r=function(){};e.exports=r},function(e,t,n){e.exports=n(120)()},function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return u});var r=n(123),i=n(124),o=n(15),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(e,t,n,i){var s=void 0;"string"==typeof e?(s=Object(o.d)(e),s.state=t):(s=a({},e),void 0===s.pathname&&(s.pathname=""),s.search?"?"!==s.search.charAt(0)&&(s.search="?"+s.search):s.search="",s.hash?"#"!==s.hash.charAt(0)&&(s.hash="#"+s.hash):s.hash="",void 0!==t&&void 0===s.state&&(s.state=t));try{s.pathname=decodeURI(s.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+s.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return n&&(s.key=n),i?s.pathname?"/"!==s.pathname.charAt(0)&&(s.pathname=Object(r.a)(s.pathname,i.pathname)):s.pathname=i.pathname:s.pathname||(s.pathname="/"),s},u=function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&Object(i.a)(e.state,t.state)}},function(e,t,n){"use strict";function r(e){return Object.keys(e).map(function(t){return e[t]})}function i(e){var t=null==e?e:(0,a.default)(e,function(e,t){var n=[];return Array.isArray(t)?(t.forEach(function(e){s(e)&&!Array.isArray(e)?n.push(i(e)):n.push(e)}),[u(e),n]):t?t instanceof Date?[u(e),t]:s(t)?[u(e),i(t)]:[u(e),t]:[u(e),t]});return Array.isArray(e)?r(t):t}Object.defineProperty(t,"__esModule",{value:!0});var o=n(93),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(e){return"object"==typeof e},u=function(e){return e.replace(/[_.-](\w|$)/g,function(e,t){return t.toUpperCase()})};t.default=i,e.exports=t.default},,,function(e,t,n){e.exports=n(77)()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.clearWorkflow=t.clearError=t.logout=t.load=t.login=t.SESSION_CLEAR_WORKFLOW=t.SESSION_CLEAR_ERROR=t.SESSION_END=t.SESSION_UPDATE=t.SESSION_START=t.SESSION_ERROR=t.SESSION_PROCESSING=void 0;var i=n(23),o=r(i).default,a=n(11),s=r(a).default,u=n(4),l=u.fromJS,c=n(27),p=r(c).default,d=t.SESSION_PROCESSING="SESSION_PROCESSING",f=t.SESSION_ERROR="SESSION_ERROR",h=t.SESSION_START="SESSION_START",m=t.SESSION_UPDATE="SESSION_UPDATE",g=t.SESSION_END="SESSION_END",y=t.SESSION_CLEAR_ERROR="SESSION_CLEAR_ERROR",v=t.SESSION_CLEAR_WORKFLOW="SESSION_CLEAR_WORKFLOW",_=(t.login=function(e,t,n){return function(r){return r(_()),r({type:d}),x({emailAddress:e,passphrase:t},Boolean(n)).then(function(e){var t=e.workflow,n=e.identity;r({type:h,workflow:t,identity:l(p(n))})},b.bind(null,r))}},t.load=function(){return function(e){return w().then(function(t){var n=t.identity;n=n||{};var r=Boolean(n.id);e({type:m,isLoggedIn:r,identity:l(p(n))})},b.bind(null,e))}},t.logout=function(){return function(e){return e({type:d}),S().then(function(){e({type:g,identity:l({})})},b.bind(null,e))}},t.clearError=function(){return function(e){return e({type:y})}},t.clearWorkflow=function(e){return function(t,n){var r=n().get("session").get("workflow");if(r&&(!e||e==r))return t({type:v})}}),b=function(e,t,n,r){var i=t.status,o=t.responseText,a=l({id:i,message:o||r});return e({type:f,error:a})},x=function(e,t){return s.ajax("/session",{type:"PUT",contentType:"application/json; charset=utf-8",headers:{Accept:"application/json"},cache:!1,data:o({user:e,permAuth:t})})},w=function(){return s.ajax("/session",{type:"GET",headers:{Accept:"application/json"},cache:!1})},S=function(){return s.ajax("/session",{type:"DELETE",headers:{Accept:"application/json"},cache:!1})}},,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),o=r(i).default,a=n(21),s=r(a).default;t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=s(o({id:null,isVerified:!1,isPassphraseLess:!1},e));return"verified?"in t&&(t.isVerified=t["verified?"],delete t["verified?"]),"subscribed?"in t&&(t.isSubscribed=t["subscribed?"],delete t["subscribed?"]),t.id&&(t.isPassphraseLess=!("passphraseFailedAttempts"in t)),t},e.exports=t.default},function(e,t,n){"use strict";function r(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}t.a=r},function(e,t,n){"use strict";function r(e){return function(){return e}}var i=function(){};i.thatReturns=r,i.thatReturnsFalse=r(!1),i.thatReturnsTrue=r(!0),i.thatReturnsNull=r(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(e){return e},e.exports=i},function(e,t,n){"use strict";function r(e,t,n,r,o,a,s,u){if(i(t),!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,o,a,s,u],p=0;l=new Error(t.replace(/%s/g,function(){return c[p++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}}var i=function(e){};e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setScrollTop=t.replaceRoute=t.pushRoute=t.popRoute=t.ROUTING_POP_ROUTE=t.ROUTING_PUSH_ROUTE=t.ROUTING_REPLACE_ROUTE=t.ROUTING_ROUTE_HAS_CHANGED=t.ROUTING_SET_SCROLL_TOP=void 0;var r=n(6),i=function(e){return e&&e.__esModule?e:{default:e}}(r).default,o=n(4),a=o.fromJS,s=n(37),u=s.register,l=s.login,c=s.logout,p=[u,l,c],d=t.ROUTING_SET_SCROLL_TOP="ROUTING_SET_SCROLL_TOP",f=t.ROUTING_ROUTE_HAS_CHANGED="ROUTING_ROUTE_HAS_CHANGED",h=t.ROUTING_REPLACE_ROUTE="ROUTING_REPLACE_ROUTE",m=t.ROUTING_PUSH_ROUTE="ROUTING_PUSH_ROUTE",g=t.ROUTING_POP_ROUTE="ROUTING_POP_ROUTE",y=(t.popRoute=function(e){return function(t,n){return y(t,n,g,e)}},t.pushRoute=function(e){return function(t,n){return y(t,n,m,e)}},t.replaceRoute=function(e){return function(t,n){return y(t,n,h,e)}},t.setScrollTop=function(e,t){return function(n){return n({type:d,action:e,scrollTop:t})}},function(e,t,n,r){r=a(i({},r,{isAuthRoute:p.indexOf(r.path)>=0})),e({type:n,route:r}),e({type:f,route:r,previous:t().get("routing").get("previous")})})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.updateHotels=t.fetchSimilarHotels=t.fetchHotels=t.fetchHotel=t.fetchPartnerHotel=t.searchHotelsByPolygon=t.searchHotelsByGeocircle=t.searchHotelsByAirport=t.searchHotelsByLocation=t.fetchHotelsInPlace=t.requiredFields=t.shapeHotel=t.HOTELS_PARTNER_HOTEL_NOT_FOUND=t.HOTELS_HAS_BEEN_UPDATED=t.HOTELS_UPDATE=void 0;var i=n(6),o=r(i).default;n(166);var a=n(11),s=r(a).default,u=n(4),l=u.fromJS,c=u.List,p=n(21),d=r(p).default,f=n(74),h=r(f).default,m=n(75),g=r(m).default,y=n(147),v=r(y).default,_=n(149),b=r(_).default,x=n(39),w=r(x).default,S=t.HOTELS_UPDATE="HOTELS_UPDATE",k=t.HOTELS_HAS_BEEN_UPDATED="HOTELS_HAS_BEEN_UPDATED",E=t.HOTELS_PARTNER_HOTEL_NOT_FOUND="HOTELS_PARTNER_HOTEL_NOT_FOUND",T=t.shapeHotel=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default",r=t.get(e.udicode);return e=d(e),e.keysFetched=n.toString(),e.brand&&e.brand.code&&(e.brandLogo=v(e.brand.code)?"//d75rs6siber1y.cloudfront.net/0e3f2ebe05/images/brands/svg/"+e.brand.code+".svg":"//d75rs6siber1y.cloudfront.net/0e3f2ebe05/images/brands/65x45/"+e.brand.code+".png"),e=M(e),!r||void 0!==e.isLoadingRates&&!1!==e.isLoadingRates||(e.isLoadingRates=r.get("isLoadingRates")),e.displayInclusiveRate=w("uk")&&-1!==b.indexOf(e.countryCode),e},M=function(e){if(e.brand&&e.brand.str){var t={luxury:"Luxury","upper-upscale":"Upper Upscale",upscale:"Upscale","upper-midscale":"Upper Midscale",midscale:"Midscale",economy:"Economy"};e.brand.scale=t[e.brand.str]}return e},C=t.requiredFields=["udicode","countryCode"],O=function(e){return o({},e,{metadata:e.metadata,fields:g(e.fields||[],C).sort()})},A=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments[3];return function(i,o){n=O(n),fetch("/"+e+"/"+t+"/hotels?"+h(n),{method:"GET",credentials:"same-origin",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}}).then(function(e){return e.json()}).then(function(e){var t=e.data,a=e.metadata;a&&(a.amenities=a.amenities.reduce(function(e,t){return e[t.code]=t,e},{}));var s=c(t.map(function(e){return l(T(e,o().get("hotels"),n.fields))}));i(R(s)),r&&i(r(s,l(d(a)),n))})}},P=(t.fetchHotelsInPlace=function(e,t,n){return A(e.get("endpoint"),e.get("id"),t,n)},t.searchHotelsByLocation=function(e,t,n){return A("locations","string"==typeof e?e:e.id||e.get("id"),t,n)},t.searchHotelsByAirport=function(e,t,n){return A("locations","string"==typeof e?e:e.id||e.get("id"),t,n)},t.searchHotelsByGeocircle=function(e,t,n){return A("geocircles","string"==typeof e?e:"function"==typeof e.get?e.get("lat")+","+e.get("lng")+","+e.get("radius"):e.lat+","+e.lng+","+e.radius,t,n)}),R=(t.searchHotelsByPolygon=function(e,t,n){return A("polygons","string"==typeof e?e:e.join(","),t,n)},t.fetchPartnerHotel=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments[3];return function(i,o){n=O(n),fetch("/partners/"+e+"/hotels/"+t+"?"+h(n),{method:"GET",credentials:"same-origin",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}}).then(function(e){return e.json()}).then(function(e){e=l(T(e,o().get("hotels"),n.fields)),i(R(c([e]))),r&&i(r(e,n))},function(){i({type:E,partnerCode:e,partnerHotelId:t})})}},t.fetchHotel=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];return function(r,i){var o="string"==typeof e?e:e.udicode||e.get("udicode");t=O(t),fetch("/hotels/"+o+"?"+h(t),{method:"GET",credentials:"same-origin",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}}).then(function(e){return e.json()}).then(function(e){e=l(T(e,i().get("hotels"),t.fields)),r(R(c([e]))),n&&r(n(e,t))})}},t.fetchHotels=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];return function(r,i){var a=e.map(function(e){return"function"==typeof e.get?e.get("udicode"):e.udicode}).toJS();t=O(o({},t,{udicode:a})),s.get("/hotels",t,function(e){var o=e.data,a=c(o.map(function(e){return l(T(e,i().get("hotels"),t.fields))}));r(R(a)),n&&r(n(a,t))},"json")}},t.fetchSimilarHotels=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];return function(r,i){if(!e)throw Error();e=i().get("hotels").get(e.get("udicode"));var o="function"==typeof e.toJS?e.toJS():e,a=o.lat,s=o.lng;r(P(a+","+s+",10",t,function(t,r){return n(t.filterNot(function(t){return t.get("udicode")===e.get("udicode")}),r)}))}},t.updateHotels=function(e){return function(t,n){t({type:S,hotels:e}),t({type:k,hotels:n().get("hotels")})}})},function(e,t,n){"use strict";var r=n(18),i=n.n(r),o=function(){var e=null,t=function(t){return i()(null==e,"A history supports only one prompt at a time"),e=t,function(){e===t&&(e=null)}},n=function(t,n,r,o){if(null!=e){var a="function"==typeof e?e(t,n):e;"string"==typeof a?"function"==typeof r?r(a,o):(i()(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),o(!0)):o(!1!==a)}else o(!0)},r=[];return{setPrompt:t,confirmTransitionTo:n,appendListener:function(e){var t=!0,n=function(){t&&e.apply(void 0,arguments)};return r.push(n),function(){t=!1,r=r.filter(function(e){return e!==n})}},notifyListeners:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];r.forEach(function(e){return e.apply(void 0,t)})}}};t.a=o},function(e,t,n){"use strict";var r=n(35);t.a=r.a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(13),s=n.n(a),u=n(9),l=n.n(u),c=n(5),p=n(8),d=n.n(p),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h=function(e){function t(){var n,o,a;r(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=o=i(this,e.call.apply(e,[this].concat(u))),o.state={match:o.computeMatch(o.props.history.location.pathname)},a=n,i(o,a)}return o(t,e),t.prototype.getChildContext=function(){return{router:f({},this.context.router,{history:this.props.history,route:{location:this.props.history.location,match:this.state.match}})}},t.prototype.computeMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}},t.prototype.componentWillMount=function(){var e=this,t=this.props,n=t.children,r=t.history;l()(null==n||1===c.default.Children.count(n),"A <Router> may have only one child element"),this.unlisten=r.listen(function(){e.setState({match:e.computeMatch(r.location.pathname)})})},t.prototype.componentWillReceiveProps=function(e){s()(this.props.history===e.history,"You cannot change <Router history>")},t.prototype.componentWillUnmount=function(){this.unlisten()},t.prototype.render=function(){var e=this.props.children;return e?c.default.Children.only(e):null},t}(c.default.Component);h.propTypes={history:d.a.object.isRequired,children:d.a.node},h.contextTypes={router:d.a.object},h.childContextTypes={router:d.a.object.isRequired},t.a=h},function(e,t,n){"use strict";var r=n(60),i=n.n(r),o={},a=0,s=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=o[n]||(o[n]={});if(r[e])return r[e];var s=[],u=i()(e,s,t),l={re:u,keys:s};return a<1e4&&(r[e]=l,a++),l},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];"string"==typeof t&&(t={path:t});var r=t,i=r.path,o=r.exact,a=void 0!==o&&o,u=r.strict,l=void 0!==u&&u,c=r.sensitive,p=void 0!==c&&c;if(null==i)return n;var d=s(i,{end:a,strict:l,sensitive:p}),f=d.re,h=d.keys,m=f.exec(e);if(!m)return null;var g=m[0],y=m.slice(1),v=e===g;return a&&!v?null:{path:i,url:"/"===i&&""===g?"/":g,isExact:v,params:h.reduce(function(e,t,n){return e[t.name]=y[n],e},{})}};t.a=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={home:"/",hotelDetails:"/hotels/:udicode",register:"/register",registered:"/registered",profile:"/profile",manageAlerts:"/manage-alerts",user:"/users/:id",login:"/login",logout:"/logout",forgotPassword:"/forgot-password",searchGeocircles:"/geocircles/:id/hotels",searchAirports:"/airports/:id/hotels",searchLocations:"/locations/:id/hotels",searchPolygons:"/polygons/:id/hotels"},e.exports=t.default},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={us:/\.com$/,au:/\.com\.au$/,ca:/\.ca$/,uk:/\.co\.uk$/,nz:/\.co\.nz$/};t.default=function(e){return"undefined"!=typeof location&&r[e]&&null!==location.hostname.match(r[e])},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.clearError=t.updateProfile=t.updatePassphrase=t.updateEmailAddress=t.sendVerification=t.clearPassphrase=t.load=t.register=t.USER_CLEAR_ERROR=t.USER_PASSPHRASE_CLEARED=t.USER_VERIFICATION_SENT=t.USER_ERROR=t.USER_CHANGED=t.USER_CREATED=t.USER_PROCESSING=void 0;var i=n(23),o=r(i).default,a=n(11),s=r(a).default,u=n(4),l=u.fromJS,c=n(27),p=r(c).default,d=n(25),f=d.clearWorkflow,h=t.USER_PROCESSING="USER_PROCESSING",m=t.USER_CREATED="USER_CREATED",g=t.USER_CHANGED="USER_CHANGED",y=t.USER_ERROR="USER_ERROR",v=t.USER_VERIFICATION_SENT="USER_VERIFICATION_SENT",_=t.USER_PASSPHRASE_CLEARED="USER_PASSPHRASE_CLEARED",b=t.USER_CLEAR_ERROR="USER_CLEAR_ERROR",x=function(e){return e().get("session").get("identity").get("id")},w=(t.register=function(e,t,n,r){return function(i){i({type:h});var o={emailAddress:e,passphrase:t,"subscribed?":n,eventParentId:r.getId()};return k(o).then(function(e){i({type:m,identity:l(p(e))})},S.bind(null,i))}},t.load=function(){return function(e,t){e({type:h});var n=x(t);return E(n).then(function(n){var r=t().get("session").get("identity").mergeDeep(l(p(n)));e({type:g,identity:r})},S.bind(null,e))}},t.clearPassphrase=function(e){return function(t){return t(f("forgot-password")),t({type:h}),M(e,"forgot-password").then(function(){t({type:_})},S.bind(null,t))}},t.sendVerification=function(){return function(e,t){e(f("verify-email")),e({type:h});var n=x(t);return M(n,"verify-email").then(function(){e({type:v})},S.bind(null,e))}},t.updateEmailAddress=function(e,t){return function(n){return n(w({emailAddress:e,currentPassphrase:t}))}},t.updatePassphrase=function(e,t){return function(n,r){return n(f("forgot-password")),n(w(r().get("session").get("identity").get("isPassphraseLess")?{passphrase:e}:{passphrase:e,currentPassphrase:t}))}},t.updateProfile=function(e){var t=e.isSubscribed;return function(e){return e(w({"subscribed?":t}))}},function(e){return function(t,n){t(f("verify-email")),t({type:h});var r=x(n);return T(r,e).then(function(e){var r=n().get("session").get("identity").mergeDeep(l(p(e)));t({type:g,identity:r})},S.bind(null,t))}}),S=(t.clearError=function(){return function(e){return e({type:b})}},function(e,t,n,r){var i=t.status,o=t.responseText,a=l({id:i,message:o||r});return e({type:y,error:a})}),k=function(e){return s.ajax("/users",{type:"POST",contentType:"application/json; charset=utf-8",headers:{Accept:"application/json"},cache:!1,data:o(e)})},E=function(e){return s.ajax("/users/"+encodeURIComponent(e),{type:"GET",headers:{Accept:"application/json"},cache:!1})},T=function(e,t){return s.ajax("/users/"+encodeURIComponent(e),{type:"PUT",contentType:"application/json; charset=utf-8",headers:{Accept:"application/json"},cache:!1,data:o(t)})},M=function(e,t){return s.ajax("/users/"+encodeURIComponent(e)+"/tokens",{type:"POST",contentType:"application/json; charset=utf-8",headers:{Accept:"application/json"},cache:!1,data:o({workflow:t})})}},function(e,t){e.exports={ALL:{name:"Albanian Lek",code:"ALL",symbol:"L"},DZD:{name:"Algerian Dinar",code:"DZD",symbol:"دج"},ARS:{name:"Argentine Peso",code:"ARS",symbol:"$"},AMD:{name:"Armenian Dram",code:"AMD",symbol:"AMD"},AWG:{name:"Aruban Florin",code:"AWG",symbol:"Afl."},AUD:{name:"Australian Dollar",code:"AUD",symbol:"$"},AZN:{name:"Azerbaijanian Manat",code:"AZN",symbol:"ман"},BSD:{name:"Bahamian Dollar",code:"BSD",symbol:"$"},BHD:{name:"Bahraini Dinar",code:"BHD",symbol:".د.ب"},BDT:{name:"Bangladeshi Taka",code:"BDT",symbol:"Tk"},BBD:{name:"Barbados Dollar",code:"BBD",symbol:"$"},BZD:{name:"Belize Dollar",code:"BZD",symbol:"BZ$"},BMD:{name:"Bermudian Dollar",code:"BMD",symbol:"$"},VEF:{name:"Bolilet Fuerte",code:"VEF",symbol:"Bs.F."},BOB:{name:"Bolivian Boliviano",code:"BOB",symbol:"Bs."},BAM:{name:"Bosnia and Herzegovina Marka",code:"BAM",symbol:"KM"},BWP:{name:"Botswanan Pula",code:"BWP",symbol:"P"},BRL:{name:"Brazilian Real",code:"BRL",symbol:"R$"},BND:{name:"Brunei Dollar",code:"BND",symbol:"$"},BGN:{name:"Bulgarian Lev",code:"BGN",symbol:"лв"},MMK:{name:"Burmese Kyat",code:"MMK",symbol:"K"},BIF:{name:"Burundi Franc",code:"BIF",symbol:"Fbu"},KHR:{name:"Cambodian Riel",code:"KHR",symbol:"៛"},CAD:{name:"Canadian Dollar",code:"CAD",symbol:"$",featured:!0},KYD:{name:"Cayman Islands Dollar",code:"KYD",symbol:"$"},XAF:{name:"Central African CFA Franc",code:"XAF",symbol:"FCFA"},CLP:{name:"Chilean Peso",code:"CLP",symbol:"$"},CNY:{name:"Chinese Yuan Renminbi",code:"CNY",symbol:"¥"},COP:{name:"Colombian Peso",code:"COP",symbol:"$"},CDF:{name:"Congolese Franc",code:"CDF",symbol:"FC"},CRC:{name:"Costa Rican Colon",code:"CRC",symbol:"₡"},HRK:{name:"Croatian Kuna",code:"HRK",symbol:"kn"},CUC:{name:"Cuban Convertible Peso",code:"CUC",symbol:"$"},CUP:{name:"Cuban Peso",code:"CUP",symbol:"₱"},CZK:{name:"Czech Koruna",code:"CZK",symbol:"Kč"},DKK:{name:"Danish Krone",code:"DKK",symbol:"kr"},DOP:{name:"Dominican Peso",code:"DOP",symbol:"RD$"},XCD:{name:"East Caribbean Dollar",code:"XCD",symbol:"$"},EGP:{name:"Egyptian Pound",code:"EGP",symbol:"£"},SVC:{name:"El Salvador Colon",code:"SVC",symbol:"$"},ETB:{name:"Ethiopian Birr",code:"ETB",symbol:"Br"},EUR:{name:"Euro",code:"EUR",symbol:"€",featured:!0},FJD:{name:"Fiji Dollar",code:"FJD",symbol:"$"},XPF:{name:"French Pacific CFP Franc",code:"XPF",symbol:"F"},GMD:{name:"Gambian Dalasi",code:"GMD",symbol:"D"},GEL:{name:"Georgian Lari",code:"GEL",symbol:"ლ"},GHS:{name:"Ghana Cedi",code:"GHS",symbol:"GH₵"},GIP:{name:"Gibraltar Pound",code:"GIP",symbol:"£"},GTQ:{name:"Guatemalan Quetzal",code:"GTQ",symbol:"Q"},GNF:{name:"Guinea Franc",code:"GNF",symbol:"FG"},GYD:{name:"Guyana Dollar",code:"GYD",symbol:"$"},HTG:{name:"Haitian Gourde",code:"HTG",symbol:"G"},HNL:{name:"Hondyran Lempira",code:"HNL",symbol:"L"},HKD:{name:"Hong Kong Dollar",code:"HKD",symbol:"$"},HUF:{name:"Hungarian Forint",code:"HUF",symbol:"Ft"},ISK:{name:"Iceland Krona",code:"ISK",symbol:"kr"},INR:{name:"Indian Rupee",code:"INR",symbol:"Rs"},IDR:{name:"Indonesia Rupiah",code:"IDR",symbol:"Rp"},IQD:{name:"Iraqi Dinar",code:"IQD",symbol:"ع.د"},ILS:{name:"Israeli New Sheqel",code:"ILS",symbol:"₪"},JMD:{name:"Jamaican Dollar",code:"JMD",symbol:"J$"},JPY:{name:"Japanese Yen",code:"JPY",symbol:"¥"},JOD:{name:"Jordanian Dinar",code:"JOD",symbol:"D"},KZT:{name:"Kazakhstani Tenge",code:"KZT",symbol:"лв"},KES:{name:"Kenyan Shilling",code:"KES",symbol:"KSh"},KWD:{name:"Kuwaiti Dinar",code:"KWD",symbol:"د.ك"},LAK:{name:"Lao Kip",code:"LAK",symbol:"₭"},LVL:{name:"Latvian Lats",code:"LVL",symbol:"Ls"},LBP:{name:"Lebanese Pound",code:"LBP",symbol:"£"},LRD:{name:"Liberian Dollar",code:"LRD",symbol:"L$"},LYD:{name:"Libyan Dinar",code:"LYD",symbol:"ل.د"},LTL:{name:"Lithuanian Litas",code:"LTL",symbol:"Lt"},MOP:{name:"Macanese Pataca",code:"MOP",symbol:"MOP$"},MKD:{name:"Macedonian Denar",code:"MKD",symbol:"ден"},MGA:{name:"Malagasy Ariary",code:"MGA",symbol:"Ar"},MWK:{name:"Malawian Kwacha",code:"MWK",symbol:"MK"},MYR:{name:"Malaysian Ringgit",code:"MYR",symbol:"RM"},MVR:{name:"Maldivian Rufiyaa ",code:"MVR",symbol:"MRf"},MRO:{name:"Mauritanian Ouguiya",code:"MRO",symbol:"UM"},MUR:{name:"Mauritius Rupee",code:"MUR",symbol:"Rs"},MXN:{name:"Mexican Peso",code:"MXN",symbol:"$"},MDL:{name:"Moldovan Leu",code:"MDL",symbol:"L"},MNT:{name:"Mongolian Tögrög",code:"MNT",symbol:"₮"},MAD:{name:"Moroccan Dirham",code:"MAD",symbol:"د.م"},MZN:{name:"Mozambique Metical",code:"MZN",symbol:"MTn"},NAD:{name:"Namibia Dollar",code:"NAD",symbol:"N$"},NPR:{name:"Nepalese Rupee",code:"NPR",symbol:"Rs"},ANG:{name:"Netherlands Antillean Guilder",code:"ANG",symbol:"NAƒ"},TWD:{name:"New Taiwan Dollar",code:"TWD",symbol:"$"},NZD:{name:"New Zealand Dollar",code:"NZD",symbol:"$"},NIO:{name:"Nicaraguan Cordoba",code:"NIO",symbol:"C$"},NGN:{name:"Nigerian Naira",code:"NGN",symbol:"₦"},KPW:{name:"North Korean Won",code:"KPW",symbol:"₩"},NOK:{name:"Norwegian Krone",code:"NOK",symbol:"kr"},OMR:{name:"Omani Rial",code:"OMR",symbol:"ر.ع"},PKR:{name:"Pakistan Rupee",code:"PKR",symbol:"Rs"},PAB:{name:"Panamanian Balboa",code:"PAB",symbol:"B/."},PGK:{name:"Papua New Guinean Kina",code:"PGK",symbol:"K"},PYG:{name:"Paraguayan Guarani",code:"PYG",symbol:"₲"},PEN:{name:"Peruvian Nuevo Sol",code:"PEN",symbol:"S/."},PHP:{name:"Philippine Peso",code:"PHP",symbol:"₱"},PLN:{name:"Polish Zloty",code:"PLN",symbol:"zł"},QAR:{name:"Qatari Rial",code:"QAR",symbol:"ر.ق"},ZAR:{name:"Rand",code:"ZAR",symbol:"R"},RON:{name:"Romanian Leu",code:"RON",symbol:"L"},RUB:{name:"Russian Ruble",code:"RUB",symbol:"руб."},RWF:{name:"Rwanda Franc",code:"RWF",symbol:"RF"},SHP:{name:"Saint Helena Pound",code:"SHP",symbol:"£"},WST:{name:"Samoan Tala",code:"WST",symbol:"WS$"},STD:{name:"São Tomé and Príncipe Dobra",code:"STD",symbol:"Db"},SAR:{name:"Saudi Riyal",code:"SAR",symbol:"ر.س"},RSD:{name:"Serbian Dinar",code:"RSD",symbol:"РСД"},SCR:{name:"Seychelles Rupee",code:"SCR",symbol:"SR"},SLL:{name:"Sierra Leonean Leone ",code:"SLL",symbol:"Le"},SGD:{name:"Singapore Dollar",code:"SGD",symbol:"S$"},SBD:{name:"Solomon Islands Dollar",code:"SBD",symbol:"SI$"},SOS:{name:"Somali Shilling",code:"SOS",symbol:"So. Sh."},KRW:{name:"South Korean Won",code:"KRW",symbol:"₩"},LKR:{name:"Sri Lanka Rupee",code:"LKR",symbol:"Rs"},SDG:{name:"Sudanese Pound",code:"SDG",symbol:"£"},SRD:{name:"Surinamese Dollar",code:"SRD",symbol:"$"},SZL:{name:"Swazi Lilangeni",code:"SZL",symbol:"L"},SEK:{name:"Swedish Krona",code:"SEK",symbol:"kr"},CHF:{name:"Swiss Franc",code:"CHF",symbol:"CHF"},SYP:{name:"Syrian Pound",code:"SYP",symbol:"£"},TJS:{name:"Tajikistani Somoni",code:"TJS",symbol:"SM"},TZS:{name:"Tanzanian Shilling",code:"TZS",symbol:"x/y"},THB:{name:"Thai Baht",code:"THB",symbol:"฿"},TOP:{name:'Tongan Pa"anga',code:"TOP",symbol:"T$"},TTD:{name:"Trinidad and Tobago Dollar",code:"TTD",symbol:"$"},TND:{name:"Tunisian Dinar",code:"TND",symbol:"د.ت"},TRY:{name:"Turkish Lira",code:"TRY",symbol:"TL"},TMT:{name:"Turkmenistan New Manat",code:"TMT",symbol:"m"},AED:{name:"UAE Dirham",code:"AED",symbol:"د.إ"},UGX:{name:"Uganda Shilling",code:"UGX",symbol:"Ush"},GBP:{name:"UK Pound Sterling",code:"GBP",symbol:"£",featured:!0},UAH:{name:"Ukranian Hryvnia",code:"UAH",symbol:"₴"},UYU:{name:"Uruguayan peso",code:"UYU",symbol:"$"},USD:{name:"US Dollar",code:"USD",symbol:"$",featured:!0},UZS:{name:"Uzbekistan Sum",code:"UZS",symbol:"лв"},VND:{name:"Vietnamese Dong",code:"VND",symbol:"₫"},XOF:{name:"West African CFA Franc",code:"XOF",symbol:"CFA"},YER:{name:"Yemeni Rial",code:"YER",symbol:"﷼"},ZMK:{name:"Zambian Kwacha",code:"ZMK",symbol:"ZK"}}},function(e,t,n){"use strict";function r(e){if("object"!==(void 0===e?"undefined":h(e))||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function i(e,t,n){function o(){v===y&&(v=y.slice())}function a(){if(_)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return g}function s(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(_)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");var t=!0;return o(),v.push(e),function(){if(t){if(_)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");t=!1,o();var n=v.indexOf(e);v.splice(n,1)}}}function u(e){if(!r(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(_)throw new Error("Reducers may not dispatch actions.");try{_=!0,g=m(g,e)}finally{_=!1}for(var t=y=v,n=0;n<t.length;n++)(0,t[n])();return e}function l(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");m=e,u({type:f.REPLACE})}function c(){var e,t=s;return e={subscribe:function(e){function n(){e.next&&e.next(a())}if("object"!==(void 0===e?"undefined":h(e))||null===e)throw new TypeError("Expected the observer to be an object.");return n(),{unsubscribe:t(n)}}},e[d.a]=function(){return this},e}var p;if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(i)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var m=e,g=t,y=[],v=y,_=!1;return u({type:f.INIT}),p={dispatch:u,subscribe:s,getState:a,replaceReducer:l},p[d.a]=c,p}function o(e,t){var n=t&&t.type;return"Given "+(n&&'action "'+String(n)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function a(e){Object.keys(e).forEach(function(t){var n=e[t];if(void 0===n(void 0,{type:f.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+f.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}function s(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];"function"==typeof e[i]&&(n[i]=e[i])}var s=Object.keys(n),u=void 0;try{a(n)}catch(e){u=e}return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];if(u)throw u;for(var r=!1,i={},a=0;a<s.length;a++){var l=s[a],c=n[l],p=e[l],d=c(p,t);if(void 0===d){var f=o(l,t);throw new Error(f)}i[l]=d,r=r||d!==p}return r?i:e}}function u(e,t){return function(){return t(e.apply(this,arguments))}}function l(e,t){if("function"==typeof e)return u(e,t);if("object"!==(void 0===e?"undefined":h(e))||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":void 0===e?"undefined":h(e))+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(e),r={},i=0;i<n.length;i++){var o=n[i],a=e[o];"function"==typeof a&&(r[o]=u(a,t))}return r}function c(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}function p(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=e.apply(void 0,r),a=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},s={getState:o.getState,dispatch:function(){return a.apply(void 0,arguments)}},u=t.map(function(e){return e(s)});return a=c.apply(void 0,u)(o.dispatch),m({},o,{dispatch:a})}}}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"createStore",function(){return i}),n.d(t,"combineReducers",function(){return s}),n.d(t,"bindActionCreators",function(){return l}),n.d(t,"applyMiddleware",function(){return p}),n.d(t,"compose",function(){return c}),n.d(t,"__DO_NOT_USE__ActionTypes",function(){return f});var d=n(79),f={INIT:"@@redux/INIT"+Math.random().toString(36).substring(7).split("").join("."),REPLACE:"@@redux/REPLACE"+Math.random().toString(36).substring(7).split("").join(".")},h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e&&"@@redux/INIT"===e.type?"initialState argument passed to createStore":"previous state received by the reducer"},e.exports=t.default},function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return a});var r=n(24),i=n.n(r),o=i.a.shape({trySubscribe:i.a.func.isRequired,tryUnsubscribe:i.a.func.isRequired,notifyNestedSubs:i.a.func.isRequired,isSubscribed:i.a.func.isRequired}),a=i.a.shape({subscribe:i.a.func.isRequired,dispatch:i.a.func.isRequired,getState:i.a.func.isRequired})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function s(){}function u(e,t){var n={run:function(r){try{var i=e(t.getState(),r);(i!==n.props||n.error)&&(n.shouldComponentUpdate=!0,n.props=i,n.error=null)}catch(e){n.shouldComponentUpdate=!0,n.error=e}}};return n}function l(e){var t,n,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=l.getDisplayName,d=void 0===c?function(e){return"ConnectAdvanced("+e+")"}:c,b=l.methodName,x=void 0===b?"connectAdvanced":b,w=l.renderCountProp,S=void 0===w?void 0:w,k=l.shouldHandleStateChanges,E=void 0===k||k,T=l.storeKey,M=void 0===T?"store":T,C=l.withRef,O=void 0!==C&&C,A=a(l,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef"]),P=M+"Subscription",R=v++,D=(t={},t[M]=g.a,t[P]=g.b,t),I=(n={},n[P]=g.b,n);return function(t){f()("function"==typeof t,"You must pass a component to the function returned by "+x+". Instead received "+JSON.stringify(t));var n=t.displayName||t.name||"Component",a=d(n),l=y({},A,{getDisplayName:d,methodName:x,renderCountProp:S,shouldHandleStateChanges:E,storeKey:M,withRef:O,displayName:a,wrappedComponentName:n,WrappedComponent:t}),c=function(n){function c(e,t){r(this,c);var o=i(this,n.call(this,e,t));return o.version=R,o.state={},o.renderCount=0,o.store=e[M]||t[M],o.propsMode=Boolean(e[M]),o.setWrappedInstance=o.setWrappedInstance.bind(o),f()(o.store,'Could not find "'+M+'" in either the context or props of "'+a+'". Either wrap the root component in a <Provider>, or explicitly pass "'+M+'" as a prop to "'+a+'".'),o.initSelector(),o.initSubscription(),o}return o(c,n),c.prototype.getChildContext=function(){var e,t=this.propsMode?null:this.subscription;return e={},e[P]=t||this.context[P],e},c.prototype.componentDidMount=function(){E&&(this.subscription.trySubscribe(),this.selector.run(this.props),this.selector.shouldComponentUpdate&&this.forceUpdate())},c.prototype.componentWillReceiveProps=function(e){this.selector.run(e)},c.prototype.shouldComponentUpdate=function(){return this.selector.shouldComponentUpdate},c.prototype.componentWillUnmount=function(){this.subscription&&this.subscription.tryUnsubscribe(),this.subscription=null,this.notifyNestedSubs=s,this.store=null,this.selector.run=s,this.selector.shouldComponentUpdate=!1},c.prototype.getWrappedInstance=function(){return f()(O,"To access the wrapped instance, you need to specify { withRef: true } in the options argument of the "+x+"() call."),this.wrappedInstance},c.prototype.setWrappedInstance=function(e){this.wrappedInstance=e},c.prototype.initSelector=function(){var t=e(this.store.dispatch,l);this.selector=u(t,this.store),this.selector.run(this.props)},c.prototype.initSubscription=function(){if(E){var e=(this.propsMode?this.props:this.context)[P];this.subscription=new m.a(this.store,e,this.onStateChange.bind(this)),this.notifyNestedSubs=this.subscription.notifyNestedSubs.bind(this.subscription)}},c.prototype.onStateChange=function(){this.selector.run(this.props),this.selector.shouldComponentUpdate?(this.componentDidUpdate=this.notifyNestedSubsOnComponentDidUpdate,this.setState(_)):this.notifyNestedSubs()},c.prototype.notifyNestedSubsOnComponentDidUpdate=function(){this.componentDidUpdate=void 0,this.notifyNestedSubs()},c.prototype.isSubscribed=function(){return Boolean(this.subscription)&&this.subscription.isSubscribed()},c.prototype.addExtraProps=function(e){if(!(O||S||this.propsMode&&this.subscription))return e;var t=y({},e);return O&&(t.ref=this.setWrappedInstance),S&&(t[S]=this.renderCount++),this.propsMode&&this.subscription&&(t[P]=this.subscription),t},c.prototype.render=function(){var e=this.selector;if(e.shouldComponentUpdate=!1,e.error)throw e.error;return Object(h.createElement)(t,this.addExtraProps(e.props))},c}(h.Component);return c.WrappedComponent=t,c.displayName=a,c.childContextTypes=I,c.contextTypes=D,c.propTypes=D,p()(c,t)}}t.a=l;var c=n(50),p=n.n(c),d=n(98),f=n.n(d),h=n(5),m=n(99),g=n(44),y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v=0,_={}},function(e,t,n){"use strict";function r(e){return function(t,n){function r(){return i}var i=e(t,n);return r.dependsOnOwnProps=!1,r}}function i(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function o(e,t){return function(t,n){var r=(n.displayName,function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)});return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=i(e);var o=r(t,n);return"function"==typeof o&&(r.mapToProps=o,r.dependsOnOwnProps=i(o),o=r(t,n)),o},r}}t.a=r,t.b=o,n(47)},function(e,t,n){"use strict";n(103),n(28)},function(e,t,n){"use strict";var r=n(105),i=r.a.Symbol;t.a=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.assignExistingRatesToHotels=t.buildHotelRatesKey=t.shapeRateDataForDisplay=t.updateRates=t.fetchRates=t.fetchHotelRates=t.RATES_UPDATED=t.RATES_UPDATE=void 0;var i=n(185),o=r(i).default,a=n(6),s=r(a).default,u=n(11),l=r(u).default,c=n(4),p=c.List,d=c.fromJS,f=n(21),h=r(f).default,m=n(53),g=r(m).default,y=n(41),v=r(y).default,_=n(32),b=_.updateHotels,x=n(150),w=r(x).default,S=t.RATES_UPDATE="RATES_UPDATE",k=(t.RATES_UPDATED="RATES_UPDATED",["udicode","nightlyRate","bookingUrl","partnerCode","qualification","currency","nonQualifiedRateRange","strikethrough"]),E=["billing_currency","billing_nightly_rate","billing_strikethrough_rate","booking_url","cancellation_penalties","currency","guarantees_required","hide_amount?","hmac","id","is_direct","nightly_rate","non_qualified_rate_range","optional_attributes","partner_code","qualification","rate_description","room_description","room_type","strikethrough_rate","udicode"],T=[3e3,5e3],M=function(e){return e?g(e.concat(k)):E},C=function(e){return e===E||(e=g(e).sort(),e.length===E.length&&e.every(function(e){return E.indexOf(e)>=0}))},O=(t.fetchHotelRates=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];return function(r){var i=M(t.fields);return t=s({},t,{fields:i}),r(A(!0,"/hotels/"+e.get("udicode")+"/rates",[e],t,n))}},t.fetchRates=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2];return function(i,a){void 0!==t.length||p.isList(t)||(t=d([t]));var u=t.size,l=u-1;if(!(u>60)){var c=a().get("stay").toJS(),f=c.checkIn,h=c.checkOut,m=c.rooms,g=c.guests,y=a().get("currency"),v=M(n.fields),_=C(v)?null:v,b=n,x=b.onlyLowest,w=void 0===x||x,S=b.uncoverHiddenNightlyRates,k=void 0!==S&&S,E=a().get("rates"),T=t.reduce(function(e,t){var n=D(t.get("udicode"),{checkIn:f,checkOut:h,rooms:m,guests:g,currency:y});return t.get("isLoadingRates")!==n&&(O(E,n,_,w,k)||e.push(t)),e},[]);return 0===T.length?(i(I(v,w,k)),"function"==typeof r&&i(r()),new o(function(e){return e()})):(n=s({},n,{fields:v}),i(A(!1,"/rates",T,n,r)))}for(var P=0;P<u;P+=60)i(e(t.slice(P,P+60<l?P+60:l)))}},function(e,t,n,r,i){var o=e.get(t);if(o&&(r||!o.get("isOnlyLowest"))&&i==o.get("isHiddenRevealed")&&o.get("expire")>Date.now()){var a=o.get("fields");if(!a)return o;if(n&&(a=a.toJS(),n.every(function(e){return a.indexOf(e)>=0})))return o}return null}),A=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments[4];return function(a,u){return new o(function(o){var c=u().get("stay").toJS(),p=c.checkIn,d=c.checkOut,f=c.rooms,h=c.guests,m=u().get("currency"),y=r.onlyLowest,v=void 0===y||y,_=r.uncoverHiddenNightlyRates,x=void 0!==_&&_;a(b(n.map(function(e){return e.set("isLoadingRates",D(e.get("udicode"),{checkIn:p,checkOut:d,rooms:f,guests:h,currency:m}))})));var w=s({},r,{checkIn:p,checkOut:d,rooms:f,guests:h,currency:m}),S=w.fields,k=n.map(function(e){return e.get("udicode")});e||(w.udicode=k),function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=r>T.length-1;s&&(w.lastPoll=!0),w.udicode=n,l.get(t,w,function(t){var u=t.data,l=t.metadata.fulfilled,c=void 0!==l&&l,y=s||c,_=g(u.map(function(e){return e.udicode}));a(P(!0,y?n:_,u,p,d,f,h,m,S,v,c,s,x)),a(I(S,v,x,y?n:_)),y?("function"==typeof i&&a(i()),o()):(n=n.filter(function(e){return _.indexOf(e)<0}),setTimeout(function(){return e(n,r+1)},T[r]))},"json")}(k)})}},P=t.updateRates=function(e,t,n,r,i,o,a,s,u,l,c,p,d){return function(f,h){if(e){var m=h().get("hotels");n=n.map(function(e){return R(e,m)})}C(u)&&(u=null),f({type:S,udicodes:t,rates:n,checkIn:r,checkOut:i,rooms:o,guests:a,currency:s,fields:u,isOnlyLowest:l,isFulfilled:c,isLastPoll:p,isHiddenRevealed:d})}},R=t.shapeRateDataForDisplay=function(e,t){e=h(s({currency:"USD"},e));var n=e,r=n.partnerCode,i=n.udicode,o=n.currency,a=n.nightlyRate,u=n.nonQualifiedRateRange,l=n.strikethroughRate,c=v[o],p=c.featured?c.symbol:o,d="loyalty"===e.qualification,f=a&&a.length&&a[0]?Math.round(a[0]):null,m=a&&a.length&&a[1]?Math.round(a[1]):null,g=t.get(i)&&t.get(i).get("displayInclusiveRate")||m&&(m===f||!f),y=!a||0===a.length||e["hideAmount?"]||e.hideAmount,_=g||!f?m:f,b=!y&&_,x=u&&2===u.length&&2===u[0].length?u[0]:l&&2===l.length&&l,S=x&&x[0]&&Math.round(x[0]),k=x&&x[1]&&Math.round(x[1]),E=g||!S?k:S,T=b&&E&&E>b&&E-b,M=T&&b&&T/b>=.01&&T,C=d&&(M||!b)&&E,O=C&&k;if(["hideAmount?","hmac","nightlyRate","nonQualifiedRateRange","strikethroughRate"].forEach(function(t){return delete e[t]}),r){var A=w[r]?w[r].partnerName:null,P=w[r]?w[r].bookButtonLabel:null,R=w[r]?w[r].partnerRewardName:null,D=w[r]?w[r].partnerBenefits:null;s(e,{partnerName:A,partnerBookButtonLabel:P,partnerRewardName:R,partnerBenefits:D})}var I={currencySymbol:p,isLoyalty:d,displayInclusive:g,amount:b,inclusive:!y&&m,lowestNonQualified:E,lowestNonQualifiedInclusive:k,savings:M,strikethrough:C,strikethroughInclusive:O};return y&&(I.hiddenAmount=_),s(e,I)},D=t.buildHotelRatesKey=function(e,t){return[e,t.checkIn,t.checkOut,t.rooms,t.guests,t.currency].join("_")},I=t.assignExistingRatesToHotels=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return function(i,o){var a=o().get("currency"),s=o().get("stay").toJS(),u=s.checkIn,l=s.checkOut,c=s.rooms,p=s.guests,f=o().get("rates"),h=C(e)?null:e,m=o().get("hotels").reduce(function(e,i,o){var s=i,d=D(o,{checkIn:u,checkOut:l,rooms:c,guests:p,currency:a}),m=O(f,d,h,t,n),g=m&&m.get("rates");return g?s=s.set("rate",g&&g.size?g.first():null).set("rates",g||null):i.get("rate")&&i.get("rate").get("currency")!==a&&(s=s.set("rate",null).set("rates",null)),s.get("isLoadingRates")===d&&(g||r.indexOf(o)>-1)&&(s=s.merge({isLoadingRates:!1})),i.equals(s)?e:e.set(s.get("udicode"),s)},d({}));i(b(m))}}},function(e,t,n){!function(t,n){e.exports=function(){"use strict";var e={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n=Object.defineProperty,r=Object.getOwnPropertyNames,i=Object.getOwnPropertySymbols,o=Object.getOwnPropertyDescriptor,a=Object.getPrototypeOf,s=a&&a(Object);return function u(l,c,p){if("string"!=typeof c){if(s){var d=a(c);d&&d!==s&&u(l,d,p)}var f=r(c);i&&(f=f.concat(i(c)));for(var h=0;h<f.length;++h){var m=f[h];if(!(e[m]||t[m]||p&&p[m])){var g=o(c,m);try{n(l,m,g)}catch(e){}}}return l}return l}}()}()},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.UserAuthenticated=void 0;var i=n(1),o=r(i).default,a=n(2),s=r(a).default,u=n(3),l=r(u).default,c=n(0),p=c.Component,d=n(7),f=d.connect,h=void 0;h=n(12).Redirect;var m=t.UserAuthenticated=function(t){function n(){return o(this,n),s(this,t.apply(this,arguments))}return l(n,t),n.prototype.render=function(t){var n=t.isLoggedIn,r=t.children,i=t.push,o=void 0!==i&&i,a=t.redirect,s=void 0!==a&&a;return n?r[0]:s?e(h,{to:s,push:o}):void 0},n}(p);t.default=f(function(e){return{isLoggedIn:Boolean(e.get("session").get("isLoggedIn"))}})(m)}).call(t,n(0).h)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.listenToSessionIdentityChange=t.save=void 0;var i=n(23),o=r(i).default,a=n(167),s=r(a).default,u=n(95),l=r(u).default,c=void 0;s()&&(c=localStorage.getItem("RK-S-U")),t.save=function(e,t,n){if(!l&&s()){var r=o({userId:e,isVerified:t,isPassphraseLess:n});r!=c&&(c=r,localStorage.setItem("RK-S-U",r))}},t.listenToSessionIdentityChange=function(e){!l&&s()&&window.addEventListener("storage",function(t){var n=t.key,r=t.newValue;"RK-S-U"===n&&r!=c&&(c=r,e())},!1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(e||[]).reduce(function(e,t){return-1===e.indexOf(t)&&e.push(t),e},[])},e.exports=t.default},function(e,t,n){"use strict";var r=function(){};e.exports=r},function(e,t,n){"use strict";var r=function(e,t,n,r,i,o,a,s){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,o,a,s],c=0;u=new Error(t.replace(/%s/g,function(){return l[c++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}};e.exports=r},function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return i}),n.d(t,"e",function(){return o}),n.d(t,"c",function(){return a}),n.d(t,"g",function(){return s}),n.d(t,"h",function(){return u}),n.d(t,"f",function(){return l}),n.d(t,"d",function(){return c});var r=!("undefined"==typeof window||!window.document||!window.document.createElement),i=function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},o=function(e,t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},a=function(e,t){return t(window.confirm(e))},s=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history},u=function(){return-1===window.navigator.userAgent.indexOf("Trident")},l=function(){return-1===window.navigator.userAgent.indexOf("Firefox")},c=function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")}},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(5),u=n(19),l=n.n(u),c=n(9),p=n.n(c),d=n(10),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h=function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)},m=function(e){function t(){var n,r,a;i(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=r=o(this,e.call.apply(e,[this].concat(u))),r.handleClick=function(e){if(r.props.onClick&&r.props.onClick(e),!e.defaultPrevented&&0===e.button&&!r.props.target&&!h(e)){e.preventDefault();var t=r.context.router.history,n=r.props,i=n.replace,o=n.to;i?t.replace(o):t.push(o)}},a=n,o(r,a)}return a(t,e),t.prototype.render=function(){var e=this.props,t=(e.replace,e.to),n=e.innerRef,i=r(e,["replace","to","innerRef"]);p()(this.context.router,"You should not use <Link> outside a <Router>"),p()(void 0!==t,'You must specify the "to" property');var o=this.context.router.history,a="string"==typeof t?Object(d.createLocation)(t,null,null,o.location):t,u=o.createHref(a);return s.default.createElement("a",f({},i,{onClick:this.handleClick,href:u,ref:n}))},t}(s.default.Component);m.propTypes={onClick:l.a.func,target:l.a.string,replace:l.a.bool,to:l.a.oneOfType([l.a.string,l.a.object]).isRequired,innerRef:l.a.oneOfType([l.a.string,l.a.func])},m.defaultProps={replace:!1},m.contextTypes={router:l.a.shape({history:l.a.shape({push:l.a.func.isRequired,replace:l.a.func.isRequired,createHref:l.a.func.isRequired}).isRequired}).isRequired},t.a=m},function(e,t,n){"use strict";var r=n(59);t.a=r.a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(13),s=n.n(a),u=n(9),l=n.n(u),c=n(5),p=n(8),d=n.n(p),f=n(36),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m=function(e){return 0===c.default.Children.count(e)},g=function(e){function t(){var n,o,a;r(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=o=i(this,e.call.apply(e,[this].concat(u))),o.state={match:o.computeMatch(o.props,o.context.router)},a=n,i(o,a)}return o(t,e),t.prototype.getChildContext=function(){return{router:h({},this.context.router,{route:{location:this.props.location||this.context.router.route.location,match:this.state.match}})}},t.prototype.computeMatch=function(e,t){var n=e.computedMatch,r=e.location,i=e.path,o=e.strict,a=e.exact,s=e.sensitive;if(n)return n;l()(t,"You should not use <Route> or withRouter() outside a <Router>");var u=t.route,c=(r||u.location).pathname;return Object(f.a)(c,{path:i,strict:o,exact:a,sensitive:s},u.match)},t.prototype.componentWillMount=function(){s()(!(this.props.component&&this.props.render),"You should not use <Route component> and <Route render> in the same route; <Route render> will be ignored"),s()(!(this.props.component&&this.props.children&&!m(this.props.children)),"You should not use <Route component> and <Route children> in the same route; <Route children> will be ignored"),s()(!(this.props.render&&this.props.children&&!m(this.props.children)),"You should not use <Route render> and <Route children> in the same route; <Route children> will be ignored")},t.prototype.componentWillReceiveProps=function(e,t){s()(!(e.location&&!this.props.location),'<Route> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),s()(!(!e.location&&this.props.location),'<Route> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.'),this.setState({match:this.computeMatch(e,t.router)})},t.prototype.render=function(){var e=this.state.match,t=this.props,n=t.children,r=t.component,i=t.render,o=this.context.router,a=o.history,s=o.route,u=o.staticContext,l=this.props.location||s.location,p={match:e,location:l,history:a,staticContext:u};return r?e?c.default.createElement(r,p):null:i?e?i(p):null:"function"==typeof n?n(p):n&&!m(n)?c.default.Children.only(n):null},t}(c.default.Component);g.propTypes={computedMatch:d.a.object,path:d.a.string,exact:d.a.bool,strict:d.a.bool,sensitive:d.a.bool,component:d.a.func,render:d.a.func,children:d.a.oneOfType([d.a.func,d.a.node]),location:d.a.object},g.contextTypes={router:d.a.shape({history:d.a.object.isRequired,route:d.a.object.isRequired,staticContext:d.a.object})},g.childContextTypes={router:d.a.object.isRequired},t.a=g},function(e,t,n){function r(e,t){for(var n,r=[],i=0,o=0,a="",s=t&&t.delimiter||"/";null!=(n=v.exec(e));){var c=n[0],p=n[1],d=n.index;if(a+=e.slice(o,d),o=d+c.length,p)a+=p[1];else{var f=e[o],h=n[2],m=n[3],g=n[4],y=n[5],_=n[6],b=n[7];a&&(r.push(a),a="");var x=null!=h&&null!=f&&f!==h,w="+"===_||"*"===_,S="?"===_||"*"===_,k=n[2]||s,E=g||y;r.push({name:m||i++,prefix:h||"",delimiter:k,optional:S,repeat:w,partial:x,asterisk:!!b,pattern:E?l(E):b?".*":"[^"+u(k)+"]+?"})}}return o<e.length&&(a+=e.substr(o)),a&&r.push(a),r}function i(e,t){return s(r(e,t))}function o(e){return encodeURI(e).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function a(e){return encodeURI(e).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function s(e){for(var t=new Array(e.length),n=0;n<e.length;n++)"object"==typeof e[n]&&(t[n]=new RegExp("^(?:"+e[n].pattern+")$"));return function(n,r){for(var i="",s=n||{},u=r||{},l=u.pretty?o:encodeURIComponent,c=0;c<e.length;c++){var p=e[c];if("string"!=typeof p){var d,f=s[p.name];if(null==f){if(p.optional){p.partial&&(i+=p.prefix);continue}throw new TypeError('Expected "'+p.name+'" to be defined')}if(y(f)){if(!p.repeat)throw new TypeError('Expected "'+p.name+'" to not repeat, but received `'+JSON.stringify(f)+"`");if(0===f.length){if(p.optional)continue;throw new TypeError('Expected "'+p.name+'" to not be empty')}for(var h=0;h<f.length;h++){if(d=l(f[h]),!t[c].test(d))throw new TypeError('Expected all "'+p.name+'" to match "'+p.pattern+'", but received `'+JSON.stringify(d)+"`");i+=(0===h?p.prefix:p.delimiter)+d}}else{if(d=p.asterisk?a(f):l(f),!t[c].test(d))throw new TypeError('Expected "'+p.name+'" to match "'+p.pattern+'", but received "'+d+'"');i+=p.prefix+d}}else i+=p}return i}}function u(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function l(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function c(e,t){return e.keys=t,e}function p(e){return e.sensitive?"":"i"}function d(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return c(e,t)}function f(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(g(e[i],t,n).source);return c(new RegExp("(?:"+r.join("|")+")",p(n)),t)}function h(e,t,n){return m(r(e,n),t,n)}function m(e,t,n){y(t)||(n=t||n,t=[]),n=n||{};for(var r=n.strict,i=!1!==n.end,o="",a=0;a<e.length;a++){var s=e[a];if("string"==typeof s)o+=u(s);else{var l=u(s.prefix),d="(?:"+s.pattern+")";t.push(s),s.repeat&&(d+="(?:"+l+d+")*"),d=s.optional?s.partial?l+"("+d+")?":"(?:"+l+"("+d+"))?":l+"("+d+")",o+=d}}var f=u(n.delimiter||"/"),h=o.slice(-f.length)===f;return r||(o=(h?o.slice(0,-f.length):o)+"(?:"+f+"(?=$))?"),o+=i?"$":r&&h?"":"(?="+f+"|$)",c(new RegExp("^"+o,p(n)),t)}function g(e,t,n){return y(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?d(e,t):y(e)?f(e,t,n):h(e,t,n)}var y=n(133);e.exports=g,e.exports.parse=r,e.exports.compile=i,e.exports.tokensToFunction=s,e.exports.tokensToRegExp=m;var v=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g")},function(e,t,n){"use strict";var r=n(60),i=n.n(r),o={},a=0,s=function(e){var t=e,n=o[t]||(o[t]={});if(n[e])return n[e];var r=i.a.compile(e);return a<1e4&&(n[e]=r,a++),r},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"/"===e?e:s(e)(t,{pretty:!0})};t.a=u},,,function(e,t,n){var r,i;(function(){function n(e){function t(t,n,r,i,o,a){for(;o>=0&&o<a;o+=e){var s=i?i[o]:o;r=n(r,t[s],s,t)}return r}return function(n,r,i,o){r=S(r,o,4);var a=!A(n)&&w.keys(n),s=(a||n).length,u=e>0?0:s-1;return arguments.length<3&&(i=n[a?a[u]:u],u+=e),t(n,r,i,a,u,s)}}function o(e){return function(t,n,r){n=k(n,r);for(var i=O(t),o=e>0?0:i-1;o>=0&&o<i;o+=e)if(n(t[o],o,t))return o;return-1}}function a(e,t,n){return function(r,i,o){var a=0,s=O(r);if("number"==typeof o)e>0?a=o>=0?o:Math.max(o+s,a):s=o>=0?Math.min(o+1,s):o+s+1;else if(n&&o&&s)return o=n(r,i),r[o]===i?o:-1;if(i!==i)return o=t(h.call(r,a,s),w.isNaN),o>=0?o+a:-1;for(o=e>0?a:s-1;o>=0&&o<s;o+=e)if(r[o]===i)return o;return-1}}function s(e,t){var n=N.length,r=e.constructor,i=w.isFunction(r)&&r.prototype||p,o="constructor";for(w.has(e,o)&&!w.contains(t,o)&&t.push(o);n--;)(o=N[n])in e&&e[o]!==i[o]&&!w.contains(t,o)&&t.push(o)}var u=this,l=u._,c=Array.prototype,p=Object.prototype,d=Function.prototype,f=c.push,h=c.slice,m=p.toString,g=p.hasOwnProperty,y=Array.isArray,v=Object.keys,_=d.bind,b=Object.create,x=function(){},w=function(e){return e instanceof w?e:this instanceof w?void(this._wrapped=e):new w(e)};void 0!==e&&e.exports&&(t=e.exports=w),t._=w,w.VERSION="1.8.3";var S=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)}}return function(){return e.apply(t,arguments)}},k=function(e,t,n){return null==e?w.identity:w.isFunction(e)?S(e,t,n):w.isObject(e)?w.matcher(e):w.property(e)};w.iteratee=function(e,t){return k(e,t,1/0)};var E=function(e,t){return function(n){var r=arguments.length;if(r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],a=e(o),s=a.length,u=0;u<s;u++){var l=a[u];t&&void 0!==n[l]||(n[l]=o[l])}return n}},T=function(e){if(!w.isObject(e))return{};if(b)return b(e);x.prototype=e;var t=new x;return x.prototype=null,t},M=function(e){return function(t){return null==t?void 0:t[e]}},C=Math.pow(2,53)-1,O=M("length"),A=function(e){var t=O(e);return"number"==typeof t&&t>=0&&t<=C};w.each=w.forEach=function(e,t,n){t=S(t,n);var r,i;if(A(e))for(r=0,i=e.length;r<i;r++)t(e[r],r,e);else{var o=w.keys(e);for(r=0,i=o.length;r<i;r++)t(e[o[r]],o[r],e)}return e},w.map=w.collect=function(e,t,n){t=k(t,n);for(var r=!A(e)&&w.keys(e),i=(r||e).length,o=Array(i),a=0;a<i;a++){var s=r?r[a]:a;o[a]=t(e[s],s,e)}return o},w.reduce=w.foldl=w.inject=n(1),w.reduceRight=w.foldr=n(-1),w.find=w.detect=function(e,t,n){var r;if(void 0!==(r=A(e)?w.findIndex(e,t,n):w.findKey(e,t,n))&&-1!==r)return e[r]},w.filter=w.select=function(e,t,n){var r=[];return t=k(t,n),w.each(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r},w.reject=function(e,t,n){return w.filter(e,w.negate(k(t)),n)},w.every=w.all=function(e,t,n){t=k(t,n);for(var r=!A(e)&&w.keys(e),i=(r||e).length,o=0;o<i;o++){var a=r?r[o]:o;if(!t(e[a],a,e))return!1}return!0},w.some=w.any=function(e,t,n){t=k(t,n);for(var r=!A(e)&&w.keys(e),i=(r||e).length,o=0;o<i;o++){var a=r?r[o]:o;if(t(e[a],a,e))return!0}return!1},w.contains=w.includes=w.include=function(e,t,n,r){return A(e)||(e=w.values(e)),("number"!=typeof n||r)&&(n=0),w.indexOf(e,t,n)>=0},w.invoke=function(e,t){var n=h.call(arguments,2),r=w.isFunction(t);return w.map(e,function(e){var i=r?t:e[t];return null==i?i:i.apply(e,n)})},w.pluck=function(e,t){return w.map(e,w.property(t))},w.where=function(e,t){return w.filter(e,w.matcher(t))},w.findWhere=function(e,t){return w.find(e,w.matcher(t))},w.max=function(e,t,n){var r,i,o=-1/0,a=-1/0;if(null==t&&null!=e){e=A(e)?e:w.values(e);for(var s=0,u=e.length;s<u;s++)(r=e[s])>o&&(o=r)}else t=k(t,n),w.each(e,function(e,n,r){((i=t(e,n,r))>a||i===-1/0&&o===-1/0)&&(o=e,a=i)});return o},w.min=function(e,t,n){var r,i,o=1/0,a=1/0;if(null==t&&null!=e){e=A(e)?e:w.values(e);for(var s=0,u=e.length;s<u;s++)(r=e[s])<o&&(o=r)}else t=k(t,n),w.each(e,function(e,n,r){((i=t(e,n,r))<a||i===1/0&&o===1/0)&&(o=e,a=i)});return o},w.shuffle=function(e){for(var t,n=A(e)?e:w.values(e),r=n.length,i=Array(r),o=0;o<r;o++)t=w.random(0,o),t!==o&&(i[o]=i[t]),i[t]=n[o];return i},w.sample=function(e,t,n){return null==t||n?(A(e)||(e=w.values(e)),e[w.random(e.length-1)]):w.shuffle(e).slice(0,Math.max(0,t))},w.sortBy=function(e,t,n){return t=k(t,n),w.pluck(w.map(e,function(e,n,r){return{value:e,index:n,criteria:t(e,n,r)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index-t.index}),"value")};var P=function(e){return function(t,n,r){var i={};return n=k(n,r),w.each(t,function(r,o){var a=n(r,o,t);e(i,r,a)}),i}};w.groupBy=P(function(e,t,n){w.has(e,n)?e[n].push(t):e[n]=[t]}),w.indexBy=P(function(e,t,n){e[n]=t}),w.countBy=P(function(e,t,n){w.has(e,n)?e[n]++:e[n]=1}),w.toArray=function(e){return e?w.isArray(e)?h.call(e):A(e)?w.map(e,w.identity):w.values(e):[]},w.size=function(e){return null==e?0:A(e)?e.length:w.keys(e).length},w.partition=function(e,t,n){t=k(t,n);var r=[],i=[];return w.each(e,function(e,n,o){(t(e,n,o)?r:i).push(e)}),[r,i]},w.first=w.head=w.take=function(e,t,n){if(null!=e)return null==t||n?e[0]:w.initial(e,e.length-t)},w.initial=function(e,t,n){return h.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},w.last=function(e,t,n){if(null!=e)return null==t||n?e[e.length-1]:w.rest(e,Math.max(0,e.length-t))},w.rest=w.tail=w.drop=function(e,t,n){return h.call(e,null==t||n?1:t)},w.compact=function(e){return w.filter(e,w.identity)};var R=function(e,t,n,r){for(var i=[],o=0,a=r||0,s=O(e);a<s;a++){var u=e[a];if(A(u)&&(w.isArray(u)||w.isArguments(u))){t||(u=R(u,t,n));var l=0,c=u.length;for(i.length+=c;l<c;)i[o++]=u[l++]}else n||(i[o++]=u)}return i};w.flatten=function(e,t){return R(e,t,!1)},w.without=function(e){return w.difference(e,h.call(arguments,1))},w.uniq=w.unique=function(e,t,n,r){w.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=k(n,r));for(var i=[],o=[],a=0,s=O(e);a<s;a++){var u=e[a],l=n?n(u,a,e):u;t?(a&&o===l||i.push(u),o=l):n?w.contains(o,l)||(o.push(l),i.push(u)):w.contains(i,u)||i.push(u)}return i},w.union=function(){return w.uniq(R(arguments,!0,!0))},w.intersection=function(e){for(var t=[],n=arguments.length,r=0,i=O(e);r<i;r++){var o=e[r];if(!w.contains(t,o)){for(var a=1;a<n&&w.contains(arguments[a],o);a++);a===n&&t.push(o)}}return t},w.difference=function(e){var t=R(arguments,!0,!0,1);return w.filter(e,function(e){return!w.contains(t,e)})},w.zip=function(){return w.unzip(arguments)},w.unzip=function(e){for(var t=e&&w.max(e,O).length||0,n=Array(t),r=0;r<t;r++)n[r]=w.pluck(e,r);return n},w.object=function(e,t){for(var n={},r=0,i=O(e);r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},w.findIndex=o(1),w.findLastIndex=o(-1),w.sortedIndex=function(e,t,n,r){n=k(n,r,1);for(var i=n(t),o=0,a=O(e);o<a;){var s=Math.floor((o+a)/2);n(e[s])<i?o=s+1:a=s}return o},w.indexOf=a(1,w.findIndex,w.sortedIndex),w.lastIndexOf=a(-1,w.findLastIndex),w.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),o=0;o<r;o++,e+=n)i[o]=e;return i};var D=function(e,t,n,r,i){if(!(r instanceof t))return e.apply(n,i);var o=T(e.prototype),a=e.apply(o,i);return w.isObject(a)?a:o};w.bind=function(e,t){if(_&&e.bind===_)return _.apply(e,h.call(arguments,1));if(!w.isFunction(e))throw new TypeError("Bind must be called on a function");var n=h.call(arguments,2),r=function(){return D(e,r,t,this,n.concat(h.call(arguments)))};return r},w.partial=function(e){var t=h.call(arguments,1),n=function(){for(var r=0,i=t.length,o=Array(i),a=0;a<i;a++)o[a]=t[a]===w?arguments[r++]:t[a];for(;r<arguments.length;)o.push(arguments[r++]);return D(e,n,this,this,o)};return n},w.bindAll=function(e){var t,n,r=arguments.length;if(r<=1)throw new Error("bindAll must be passed function names");for(t=1;t<r;t++)n=arguments[t],e[n]=w.bind(e[n],e);return e},w.memoize=function(e,t){var n=function(r){var i=n.cache,o=""+(t?t.apply(this,arguments):r);return w.has(i,o)||(i[o]=e.apply(this,arguments)),i[o]};return n.cache={},n},w.delay=function(e,t){var n=h.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},w.defer=w.partial(w.delay,w,1),w.throttle=function(e,t,n){var r,i,o,a=null,s=0;n||(n={});var u=function(){s=!1===n.leading?0:w.now(),a=null,o=e.apply(r,i),a||(r=i=null)};return function(){var l=w.now();s||!1!==n.leading||(s=l);var c=t-(l-s);return r=this,i=arguments,c<=0||c>t?(a&&(clearTimeout(a),a=null),s=l,o=e.apply(r,i),a||(r=i=null)):a||!1===n.trailing||(a=setTimeout(u,c)),o}},w.debounce=function(e,t,n){var r,i,o,a,s,u=function(){var l=w.now()-a;l<t&&l>=0?r=setTimeout(u,t-l):(r=null,n||(s=e.apply(o,i),r||(o=i=null)))};return function(){o=this,i=arguments,a=w.now();var l=n&&!r;return r||(r=setTimeout(u,t)),l&&(s=e.apply(o,i),o=i=null),s}},w.wrap=function(e,t){return w.partial(t,e)},w.negate=function(e){return function(){return!e.apply(this,arguments)}},w.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}},w.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},w.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},w.once=w.partial(w.before,2);var I=!{toString:null}.propertyIsEnumerable("toString"),N=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];w.keys=function(e){if(!w.isObject(e))return[];if(v)return v(e);var t=[];for(var n in e)w.has(e,n)&&t.push(n);return I&&s(e,t),t},w.allKeys=function(e){if(!w.isObject(e))return[];var t=[];for(var n in e)t.push(n);return I&&s(e,t),t},w.values=function(e){for(var t=w.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=e[t[i]];return r},w.mapObject=function(e,t,n){t=k(t,n);for(var r,i=w.keys(e),o=i.length,a={},s=0;s<o;s++)r=i[s],a[r]=t(e[r],r,e);return a},w.pairs=function(e){for(var t=w.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},w.invert=function(e){for(var t={},n=w.keys(e),r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},w.functions=w.methods=function(e){var t=[];for(var n in e)w.isFunction(e[n])&&t.push(n);return t.sort()},w.extend=E(w.allKeys),w.extendOwn=w.assign=E(w.keys),w.findKey=function(e,t,n){t=k(t,n);for(var r,i=w.keys(e),o=0,a=i.length;o<a;o++)if(r=i[o],t(e[r],r,e))return r},w.pick=function(e,t,n){var r,i,o={},a=e;if(null==a)return o;w.isFunction(t)?(i=w.allKeys(a),r=S(t,n)):(i=R(arguments,!1,!1,1),r=function(e,t,n){return t in n},a=Object(a));for(var s=0,u=i.length;s<u;s++){var l=i[s],c=a[l];r(c,l,a)&&(o[l]=c)}return o},w.omit=function(e,t,n){if(w.isFunction(t))t=w.negate(t);else{var r=w.map(R(arguments,!1,!1,1),String);t=function(e,t){return!w.contains(r,t)}}return w.pick(e,t,n)},w.defaults=E(w.allKeys,!0),w.create=function(e,t){var n=T(e);return t&&w.extendOwn(n,t),n},w.clone=function(e){return w.isObject(e)?w.isArray(e)?e.slice():w.extend({},e):e},w.tap=function(e,t){return t(e),e},w.isMatch=function(e,t){var n=w.keys(t),r=n.length;if(null==e)return!r;for(var i=Object(e),o=0;o<r;o++){var a=n[o];if(t[a]!==i[a]||!(a in i))return!1}return!0};var L=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof w&&(e=e._wrapped),t instanceof w&&(t=t._wrapped);var i=m.call(e);if(i!==m.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t}var o="[object Array]"===i;if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var a=e.constructor,s=t.constructor;if(a!==s&&!(w.isFunction(a)&&a instanceof a&&w.isFunction(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],r=r||[];for(var u=n.length;u--;)if(n[u]===e)return r[u]===t;if(n.push(e),r.push(t),o){if((u=e.length)!==t.length)return!1;for(;u--;)if(!L(e[u],t[u],n,r))return!1}else{var l,c=w.keys(e);if(u=c.length,w.keys(t).length!==u)return!1;for(;u--;)if(l=c[u],!w.has(t,l)||!L(e[l],t[l],n,r))return!1}return n.pop(),r.pop(),!0};w.isEqual=function(e,t){return L(e,t)},w.isEmpty=function(e){return null==e||(A(e)&&(w.isArray(e)||w.isString(e)||w.isArguments(e))?0===e.length:0===w.keys(e).length)},w.isElement=function(e){return!(!e||1!==e.nodeType)},w.isArray=y||function(e){return"[object Array]"===m.call(e)},w.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},w.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){w["is"+e]=function(t){return m.call(t)==="[object "+e+"]"}}),w.isArguments(arguments)||(w.isArguments=function(e){return w.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(w.isFunction=function(e){return"function"==typeof e||!1}),w.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},w.isNaN=function(e){return w.isNumber(e)&&e!==+e},w.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===m.call(e)},w.isNull=function(e){return null===e},w.isUndefined=function(e){return void 0===e},w.has=function(e,t){return null!=e&&g.call(e,t)},w.noConflict=function(){return u._=l,this},w.identity=function(e){return e},w.constant=function(e){return function(){return e}},w.noop=function(){},w.property=M,w.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},w.matcher=w.matches=function(e){return e=w.extendOwn({},e),function(t){return w.isMatch(t,e)}},w.times=function(e,t,n){var r=Array(Math.max(0,e));t=S(t,n,1);for(var i=0;i<e;i++)r[i]=t(i);return r},w.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},w.now=Date.now||function(){return(new Date).getTime()};var z={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},j=w.invert(z),H=function(e){var t=function(t){return e[t]},n="(?:"+w.keys(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,t):e}};w.escape=H(z),w.unescape=H(j),w.result=function(e,t,n){var r=null==e?void 0:e[t];return void 0===r&&(r=n),w.isFunction(r)?r.call(e):r};var B=0;w.uniqueId=function(e){var t=++B+"";return e?e+t:t},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var F=/(.)^/,U={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},V=/\\|'|\r|\n|\u2028|\u2029/g,Y=function(e){return"\\"+U[e]};w.template=function(e,t,n){!t&&n&&(t=n),t=w.defaults({},t,w.templateSettings);var r=RegExp([(t.escape||F).source,(t.interpolate||F).source,(t.evaluate||F).source].join("|")+"|$","g"),i=0,o="__p+='";e.replace(r,function(t,n,r,a,s){return o+=e.slice(i,s).replace(V,Y),i=s+t.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),t}),o+="';\n",t.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var a=new Function(t.variable||"obj","_",o)}catch(e){throw e.source=o,e}var s=function(e){return a.call(this,e,w)};return s.source="function("+(t.variable||"obj")+"){\n"+o+"}",s},w.chain=function(e){var t=w(e);return t._chain=!0,t};var W=function(e,t){return e._chain?w(t).chain():t};w.mixin=function(e){w.each(w.functions(e),function(t){var n=w[t]=e[t];w.prototype[t]=function(){var e=[this._wrapped];return f.apply(e,arguments),W(this,n.apply(w,e))}})},w.mixin(w),w.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=c[e];w.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],W(this,n)}}),w.each(["concat","join","slice"],function(e){var t=c[e];w.prototype[e]=function(){return W(this,t.apply(this._wrapped,arguments))}}),w.prototype.value=function(){return this._wrapped},w.prototype.valueOf=w.prototype.toJSON=w.prototype.value,w.prototype.toString=function(){return""+this._wrapped},r=[],void 0!==(i=function(){return w}.apply(t,r))&&(e.exports=i)}).call(this)},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SYNC_ERROR="SYNC_ERROR",t.ERROR="ERROR",t.setError=function(e,t,n){return{type:e,source:t,message:n,data:arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}}}},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=n(17),h=i(f).default,m=n(159),g=i(m).default,y=n(160),v=i(y).default,_=n(161),b=i(_).default,x=n(162),w=i(x).default,S=n(163),k=i(S).default,E=n(164),T=i(E).default,M=n(184),C=M.footer,O=M.container,A=M.about,P=M.navigation,R=M.dropdown,D=function(e){function t(){return a(this,t),u(this,e.apply(this,arguments))}return c(t,e),t.prototype.render=function(e){var t=e.parentEvent;return r("div",{className:C},r(h,null,r("div",{id:"footer",className:O},r("div",{className:A},r(v,null),r(g,{parentEvent:t})),r("div",{className:P},r(b,{parentEvent:t}),r("div",{className:R},r(w,null)),r("div",{className:R},r(k,null))),r(T,null))))},t}(d);t.default=D,e.exports=t.default}).call(t,n(0).h)},,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),o=r(i).default,a=n(4),s=a.Map,u=a.fromJS,l=n(42),c=l.createStore,p=l.applyMiddleware,d=l.compose,f=n(82),h=f.combineReducers,m=n(87),g=r(m).default,y=n(88),v=r(y).default,_=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||d,b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s();return c(h(o({},v,e)),s.isMap(t)?t:u(t),_(p(g)))};t.default=b,e.exports=t.default},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Header=void 0;var i=n(1),o=r(i).default,a=n(2),s=r(a).default,u=n(3),l=r(u).default,c=n(0),p=c.Component,d=n(7),f=d.connect,h=n(118),m=r(h).default,g=n(17),y=r(g).default,v=n(153),_=r(v).default,b=n(72),x=r(b).default,w=n(158),S=r(w).default,k=t.Header=function(t){function n(){return o(this,n),s(this,t.apply(this,arguments))}return l(n,t),n.prototype.render=function(t){var n=t.parentEvent,r=t.useRouter,i=t.email,o=t.isAuthRoute;return e("div",null,e("div",{id:"branded-header",className:x.header},e(y,null,e(m,{parentEvent:n,useRouter:r,element:"header-logo",id:"homelink-logo",itemprop:"url",className:x.logo},e("img",{src:S,alt:"Room Key"})),e("div",{className:x.tagline},"Unlock a lower rate"),!o&&e(_,{email:i,parentEvent:n,useRouter:r}))))},n}(p);t.default=f(function(e){var t=e.get("routing").get("current");return{isAuthRoute:Boolean(t&&t.get("isAuthRoute")),email:e.get("session").get("identity").get("emailAddress")}})(k)}).call(t,n(0).h)},function(e,t){e.exports={header:"_7367f589",logo:"_4cb4e159",tagline:"_1ab811cf",dropdown:"_6789bc5f",email:"f6d1ca39",toggle:"_11b00a99",toggle_active:"_16a8e1e6",icon:"_9833f951",panel:"d38dad2f",panel_description:"d96ce193",verify:"_0bf86845",panel_links:"_244f61eb",panel_button:"c33b40f2"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),o=i.Map,a=n(91),s=r(a).default,u=n(38),l=r(u).default,c=["_check_in","_check_out","_guests","_lat","_lng","_rooms","check_in","check_out","checkIn","checkOut","eventParentId","guests","maxGuests","maxRooms","minGuests","rooms","referrer_hostname"],p={_amenities:"amenities",_brand_id:"brandId",_brand_name:"brandName",_brand_parent_name:"brandParentName",_city_name:"cityName",_country_name:"countryName",_location_id:"locationId",_location_city_name:"locationCityName",_location_country_name:"locationCountryName",_location_name:"locationName",_location_region_name:"locationRegionName",_partner_code:"partnerCode",_property_code:"propertyCode",_property_name:"propertyName",_postal_code:"postalCode",_referrer_domain:"domain",_region_name:"regionName",_stars:"stars",_str:"str",_udicode:"udicode",campaign_id:"campaign",impression_id:"impressionId",price_from:"priceFrom",price_to:"priceTo",referral_id:"id",referral_method:"method",star_from:"starFrom",star_to:"starTo"},d=l(),f=function(e,t,n){return"string"==typeof p[n]&&(n=p[n]),-1===c.indexOf(n)&&(void 0!==d[n]&&(t=d[n]),e[n]=t),"amenities"===n&&"string"==typeof t&&(e.amenities=t.split(",")),e},h=o(o(JSON.parse(s.get("copter-impression-id")||"{}")).map(function(e){return decodeURIComponent(e).replace(/\+/g," ")}).merge(d).reduce(f,{}));t.default=function(){return h},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(65),i=r.stringify;t.default=function(e){return i(e,{arrayFormat:"bracket"}).replace(/\[/g,"%5B").replace(/\]/g,"%5D")},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(53),i=function(e){return e&&e.__esModule?e:{default:e}}(r).default;t.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i(Array.prototype.concat.apply([],t))},e.exports=t.default},,function(e,t,n){"use strict";var r=n(29),i=n(30),o=n(78);e.exports=function(){function e(e,t,n,r,a,s){s!==o&&i(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";(function(e,r){var i,o=n(81);i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:r;var a=Object(o.a)(i);t.a=a}).call(t,n(66),n(80)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}t.a=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.combineReducers=void 0;var r=n(83),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.combineReducers=i.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=n(84);t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.default.Map,n=Object.keys(e);return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t(),i=arguments[1];return r.withMutations(function(t){n.forEach(function(n){var r=e[n],a=t.get(n),s=r(a,i);(0,o.validateNextState)(s,n,i),t.set(n,s)})})}},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.validateNextState=t.getUnexpectedInvocationParameterMessage=t.getStateName=void 0;var i=n(43),o=r(i),a=n(85),s=r(a),u=n(86),l=r(u);t.getStateName=o.default,t.getUnexpectedInvocationParameterMessage=s.default,t.validateNextState=l.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),o=r(i),a=n(43),s=r(a);t.default=function(e,t,n){var r=Object.keys(t);if(!r.length)return"Store does not have a valid reducer. Make sure the argument passed to combineReducers is an object whose values are reducers.";var i=(0,s.default)(n);if(o.default.isImmutable?!o.default.isImmutable(e):!o.default.Iterable.isIterable(e))return"The "+i+' is of unexpected type. Expected argument to be an instance of Immutable.Collection or Immutable.Record with the following properties: "'+r.join('", "')+'".';var a=e.toSeq().keySeq().toArray().filter(function(e){return!t.hasOwnProperty(e)});return a.length>0?"Unexpected "+(1===a.length?"property":"properties")+' "'+a.join('", "')+'" found in '+i+'. Expected to find one of the known reducer property names instead: "'+r.join('", "')+'". Unexpected properties will be ignored.':null},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(void 0===e)throw new Error('Reducer "'+t+'" returned undefined when handling "'+n.type+'" action. To ignore an action, you must explicitly return the previous state.')},e.exports=t.default},function(e,t,n){"use strict";function r(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"==typeof i?i(n,r,e):t(i)}}}}Object.defineProperty(t,"__esModule",{value:!0});var i=r();i.withExtraArgument=r,t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(89),o=r(i).default,a=n(90),s=r(a).default,u=n(73),l=r(u).default,c=n(92),p=r(c).default,d=n(96),f=r(d).default;t.default={error:o,imageUrlRoot:s,referral:l,session:p,routing:f},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=r.Map,o=n(67),a=o.SYNC_ERROR,s=o.ERROR;t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.type===a){var n=t.type,r=t.source,o=t.message,u=t.data,l=u.id,c=u.url,p=u.data,d=u.xhr,f=d.status,h=d.statusText,m=d.responseText;return i({type:n,source:r,message:o,data:{id:l,url:c,data:p,status:f,statusText:h,responseText:m}})}if(t.type===s){var g=t.type,y=t.source,v=t.message,_=t.data;return i({type:g,source:y,message:v,data:_})}return e},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(62),i=function(e){return e&&e.__esModule?e:{default:e}}(r).default;t.default=function(e){return e||("object"===i(window.rkConfig)?window.rkConfig.imageUrlRoot:"NO_IMG_ROOT")},e.exports=t.default},function(e,t,n){var r,i;!function(o){if(r=o,void 0!==(i="function"==typeof r?r.call(t,n,t,e):r)&&(e.exports=i),!0,e.exports=o(),!!0){var a=window.Cookies,s=window.Cookies=o();s.noConflict=function(){return window.Cookies=a,s}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(n){function r(t,i,o){var a;if("undefined"!=typeof document){if(arguments.length>1){if(o=e({path:"/"},r.defaults,o),"number"==typeof o.expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*o.expires),o.expires=s}o.expires=o.expires?o.expires.toUTCString():"";try{a=JSON.stringify(i),/^[\{\[]/.test(a)&&(i=a)}catch(e){}i=n.write?n.write(i,t):encodeURIComponent(String(i)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)),t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),t=t.replace(/[\(\)]/g,escape);var u="";for(var l in o)o[l]&&(u+="; "+l,!0!==o[l]&&(u+="="+o[l]));return document.cookie=t+"="+i+u}t||(a={});for(var c=document.cookie?document.cookie.split("; "):[],p=/(%[0-9A-Z]{2})+/g,d=0;d<c.length;d++){var f=c[d].split("="),h=f.slice(1).join("=");'"'===h.charAt(0)&&(h=h.slice(1,-1));try{var m=f[0].replace(p,decodeURIComponent);if(h=n.read?n.read(h,m):n(h,m)||h.replace(p,decodeURIComponent),this.json)try{h=JSON.parse(h)}catch(e){}if(t===m){a=h;break}t||(a[m]=h)}catch(e){}}return a}}return r.set=r,r.get=function(e){return r.call(r,e)},r.getJSON=function(){return r.apply({json:!0},[].slice.call(arguments))},r.defaults={},r.remove=function(t,n){r(t,"",e(n,{expires:-1}))},r.withConverter=t,r}return t(function(){})})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i,o=n(62),a=r(o).default,s=n(22),u=r(s).default,l=n(4),c=l.Map,p=l.fromJS,d=n(27),f=r(d).default,h=n(94),m=r(h).default,g=n(31),y=g.ROUTING_ROUTE_HAS_CHANGED,v=n(40),_=v.USER_PROCESSING,b=v.USER_ERROR,x=v.USER_CREATED,w=v.USER_CHANGED,S=v.USER_CLEAR_ERROR,k=v.USER_VERIFICATION_SENT,E=v.USER_PASSPHRASE_CLEARED,T=n(25),M=T.SESSION_PROCESSING,C=T.SESSION_ERROR,O=T.SESSION_START,A=T.SESSION_UPDATE,P=T.SESSION_END,R=T.SESSION_CLEAR_ERROR,D=T.SESSION_CLEAR_WORKFLOW,I=n(37),N=I.register,L=I.registered,z=I.profile,j=I.login,H=I.forgotPassword,B=I.logout,F=n(52),U=F.save,V=(i={},i[N]=[N,j,H,B],i[j]=[N,j,H,B],i[B]=[N,z,H,B],i[H]=[N,j,H,B],i[z]=[j,B,N,z,H],i[L]=[j,B,N,L,H],i),Y=u(V),W=f("object"===a(window.rkConfig)&&window.rkConfig.identity),q=W.id,G=W.isVerified,Z=W.isPassphraseLess;U(q,G,Z);var K=m(W,"object"===a(window.rkConfig)&&window.rkConfig.workflow,null),J="number"==typeof window.rkSessionErrorCode?window.rkSessionErrorCode:null,X="string"==typeof window.rkSessionErrorDetail?window.rkSessionErrorDetail:null,$=J?p({id:J,message:X}):null;delete window.rkSessionErrorCode,delete window.rkSessionErrorDetail;var Q=c({previousLocation:null,nextLocation:p({pathname:"/"}),processing:!1,error:$,workflow:K,identity:p(W),isLoggedIn:Boolean(q)});t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.type,r=t.error||null;if(n!==_&&n!==M||(e=e.merge({processing:!0,error:r})),n===b||n===C){var i=t.error;e=e.merge({error:i,processing:!1})}if(n===x){var o=t.identity;e=e.merge({isLoggedIn:!0,workflow:null,identity:o,error:r,processing:!1})}if(n===O){var a=t.workflow,s=t.identity;e=e.merge({isLoggedIn:!0,workflow:a,identity:s,error:r,processing:!1})}if(n===A){var u=t.identity,l=t.isLoggedIn;e=e.merge({isLoggedIn:l,workflow:null,identity:u,error:r,processing:!1})}if(n===w){var c=t.identity;e=e.merge({identity:c,error:r,processing:!1})}if(n===P){var d=t.identity;e=e.merge({isLoggedIn:!1,workflow:null,identity:d,error:r,processing:!1})}if([x,O,A,w,P].indexOf(n)>=0){var f=t.identity.toJS(),h=f.id,m=f.isVerified,g=f.isPassphraseLess;U(h,m,g)}if(n!==k&&n!==E||(e=e.merge({error:r,processing:!1})),n!==R&&n!==S||(e=e.merge({error:null})),n===D&&(e=e.merge({workflow:null})),n===y){var v=t.route,T=t.previous,I=v.get("path");if(Y.indexOf(I)>=0){var j=V[I],B=T?T.findIndex(function(e){return j.indexOf(e.get("path"))<0}):-1,F=B>-1?T.get(B):null,W=F&&F.get("location"),q=void 0;q=I==H?p({pathname:z}):I==N?p(e.get("isLoggedIn")?{pathname:z}:{pathname:L}):W||Q.get("nextLocation"),e=e.merge({previousLocation:W,nextLocation:q})}}return e},e.exports=t.default},function(e,t,n){"use strict";e.exports=function(e,t){for(var n={},r=Object.keys(e),i=0;i<r.length;i++){var o=r[i],a=t(o,e[o],e);n[a[0]]=a[1]}return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=t||n,i=e.id,o=e.isPassphraseLess;return i&&!o&&"forgot-password"==t&&(r=null),r},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default="undefined"!=typeof navigator&&Boolean(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&navigator.userAgent.match("CriOS")),e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=function(e){return e&&e.__esModule?e:{default:e}}(r).default,o=n(4),a=o.List,s=o.Map,u=n(31),l=u.ROUTING_REPLACE_ROUTE,c=u.ROUTING_PUSH_ROUTE,p=u.ROUTING_POP_ROUTE,d=u.ROUTING_SET_SCROLL_TOP,f=n(26),h=f.stripEventParentId,m=function(e){history.replaceState(e,"",location.href)},g=s({previousScrollTop:0,nextScrollTop:0,historyIndex:history.length||0,current:null,previous:a()});t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.type;if(n===d){var r=t.action,o=t.scrollTop;if("POP"===r){var a=history.state&&history.state.historyIndex;e=a&&a<e.get("historyIndex")?e.set("nextScrollTop",o):e.set("previousScrollTop",o)}else e=e.set("previousScrollTop",o);return e}var s=t.route;if(n===p){var u=s.toJS(),f=u.historyState,y=f&&"historyIndex"in f?f.historyIndex:e.get("historyIndex"),v=y<e.get("historyIndex"),_=void 0;if(v)e.get("previous").size&&(e=e.set("previous",e.get("previous").shift())),_=e.get("previousScrollTop");else{var b=e.get("current");b&&(e=e.set("previous",e.get("previous").unshift(b))),_=e.get("nextScrollTop")}e=e.merge({current:s,historyIndex:y}),!history.replaceState||"historyIndex"in f||m(i(f,{historyIndex:y})),setTimeout(function(){return window.scrollTo(0,_)},500)}if(n===c){var x=s.toJS(),w=x.historyState,S=e.get("historyIndex")+1,k=e.get("current");k&&(e=e.set("previous",e.get("previous").unshift(k))),e=e.merge({current:s,historyIndex:S}),history.replaceState&&m(i(w,{historyIndex:S})),window.scrollTo(0,0)}if(n===l&&(e=e.set("current",s)),n===l||n===c){var E=e.get("current");E&&h(E.toJS())}return e},e.exports=t.default},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"store",n=arguments[1],a=n||t+"Subscription",u=function(e){function n(o,a){r(this,n);var s=i(this,e.call(this,o,a));return s[t]=o.store,s}return o(n,e),n.prototype.getChildContext=function(){var e;return e={},e[t]=this[t],e[a]=null,e},n.prototype.render=function(){return s.Children.only(this.props.children)},n}(s.Component);return u.propTypes={store:c.a.isRequired,children:l.a.element.isRequired},u.childContextTypes=(e={},e[t]=c.a.isRequired,e[a]=c.b,e),u}t.a=a;var s=n(5),u=n(24),l=n.n(u),c=n(44);n(28),t.b=a()},function(e,t,n){"use strict";var r=function(e,t,n,r,i,o,a,s){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,o,a,s],c=0;u=new Error(t.replace(/%s/g,function(){return l[c++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}};e.exports=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){var e=[],t=[];return{clear:function(){t=o,e=o},notify:function(){for(var n=e=t,r=0;r<n.length;r++)n[r]()},get:function(){return t},subscribe:function(n){var r=!0;return t===e&&(t=e.slice()),t.push(n),function(){r&&e!==o&&(r=!1,t===e&&(t=e.slice()),t.splice(t.indexOf(n),1))}}}}n.d(t,"a",function(){return s});var o=null,a={notify:function(){}},s=function(){function e(t,n,i){r(this,e),this.store=t,this.parentSub=n,this.onStateChange=i,this.unsubscribe=null,this.listeners=a}return e.prototype.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},e.prototype.notifyNestedSubs=function(){this.listeners.notify()},e.prototype.isSubscribed=function(){return Boolean(this.unsubscribe)},e.prototype.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.onStateChange):this.store.subscribe(this.onStateChange),this.listeners=i())},e.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=a)},e}()},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function i(e,t,n){for(var r=t.length-1;r>=0;r--){var i=t[r](e);if(i)return i}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function o(e,t){return e===t}var a=n(45),s=n(101),u=n(102),l=n(112),c=n(113),p=n(114),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.connectHOC,n=void 0===t?a.a:t,f=e.mapStateToPropsFactories,h=void 0===f?l.a:f,m=e.mapDispatchToPropsFactories,g=void 0===m?u.a:m,y=e.mergePropsFactories,v=void 0===y?c.a:y,_=e.selectorFactory,b=void 0===_?p.a:_;return function(e,t,a){var u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=u.pure,c=void 0===l||l,p=u.areStatesEqual,f=void 0===p?o:p,m=u.areOwnPropsEqual,y=void 0===m?s.a:m,_=u.areStatePropsEqual,x=void 0===_?s.a:_,w=u.areMergedPropsEqual,S=void 0===w?s.a:w,k=r(u,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),E=i(e,h,"mapStateToProps"),T=i(t,g,"mapDispatchToProps"),M=i(a,v,"mergeProps");return n(b,d({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:E,initMapDispatchToProps:T,initMergeProps:M,pure:c,areStatesEqual:f,areOwnPropsEqual:y,areStatePropsEqual:x,areMergedPropsEqual:S},k))}}()},function(e,t,n){"use strict";function r(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!==e&&t!==t}function i(e,t){if(r(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(var a=0;a<n.length;a++)if(!o.call(t,n[a])||!r(e[n[a]],t[n[a]]))return!1;return!0}t.a=i;var o=Object.prototype.hasOwnProperty},function(e,t,n){"use strict";function r(e){return"function"==typeof e?Object(s.b)(e,"mapDispatchToProps"):void 0}function i(e){return e?void 0:Object(s.a)(function(e){return{dispatch:e}})}function o(e){return e&&"object"==typeof e?Object(s.a)(function(t){return Object(a.bindActionCreators)(e,t)}):void 0}var a=n(42),s=n(46);t.a=[r,i,o]},function(e,t,n){"use strict";function r(e){if(!Object(a.a)(e)||Object(i.a)(e)!=s)return!1;var t=Object(o.a)(e);if(null===t)return!0;var n=p.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==d}var i=n(104),o=n(109),a=n(111),s="[object Object]",u=Function.prototype,l=Object.prototype,c=u.toString,p=l.hasOwnProperty,d=c.call(Object);t.a=r},function(e,t,n){"use strict";function r(e){return null==e?void 0===e?u:s:l&&l in Object(e)?Object(o.a)(e):Object(a.a)(e)}var i=n(48),o=n(107),a=n(108),s="[object Null]",u="[object Undefined]",l=i.a?i.a.toStringTag:void 0;t.a=r},function(e,t,n){"use strict";var r=n(106),i="object"==typeof self&&self&&self.Object===Object&&self,o=r.a||i||Function("return this")();t.a=o},function(e,t,n){"use strict";(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.a=n}).call(t,n(66))},function(e,t,n){"use strict";function r(e){var t=a.call(e,u),n=e[u];try{e[u]=void 0;var r=!0}catch(e){}var i=s.call(e);return r&&(t?e[u]=n:delete e[u]),i}var i=n(48),o=Object.prototype,a=o.hasOwnProperty,s=o.toString,u=i.a?i.a.toStringTag:void 0;t.a=r},function(e,t,n){"use strict";function r(e){return o.call(e)}var i=Object.prototype,o=i.toString;t.a=r},function(e,t,n){"use strict";var r=n(110),i=Object(r.a)(Object.getPrototypeOf,Object);t.a=i},function(e,t,n){"use strict";function r(e,t){return function(n){return e(t(n))}}t.a=r},function(e,t,n){"use strict";function r(e){return null!=e&&"object"==typeof e}t.a=r},function(e,t,n){"use strict";function r(e){return"function"==typeof e?Object(o.b)(e,"mapStateToProps"):void 0}function i(e){return e?void 0:Object(o.a)(function(){return{}})}var o=n(46);t.a=[r,i]},function(e,t,n){"use strict";function r(e,t,n){return s({},n,e,t)}function i(e){return function(t,n){var r=(n.displayName,n.pure),i=n.areMergedPropsEqual,o=!1,a=void 0;return function(t,n,s){var u=e(t,n,s);return o?r&&i(u,a)||(a=u):(o=!0,a=u),a}}}function o(e){return"function"==typeof e?i(e):void 0}function a(e){return e?void 0:function(){return r}}var s=(n(47),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e});t.a=[o,a]},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function i(e,t,n,r){return function(i,o){return n(e(i,o),t(r,o),o)}}function o(e,t,n,r,i){function o(i,o){return h=i,m=o,g=e(h,m),y=t(r,m),v=n(g,y,m),f=!0,v}function a(){return g=e(h,m),t.dependsOnOwnProps&&(y=t(r,m)),v=n(g,y,m)}function s(){return e.dependsOnOwnProps&&(g=e(h,m)),t.dependsOnOwnProps&&(y=t(r,m)),v=n(g,y,m)}function u(){var t=e(h,m),r=!d(t,g);return g=t,r&&(v=n(g,y,m)),v}function l(e,t){var n=!p(t,m),r=!c(e,h);return h=e,m=t,n&&r?a():n?s():r?u():v}var c=i.areStatesEqual,p=i.areOwnPropsEqual,d=i.areStatePropsEqual,f=!1,h=void 0,m=void 0,g=void 0,y=void 0,v=void 0;return function(e,t){return f?l(e,t):o(e,t)}}function a(e,t){var n=t.initMapStateToProps,a=t.initMapDispatchToProps,s=t.initMergeProps,u=r(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),l=n(e,u),c=a(e,u),p=s(e,u);return(u.pure?o:i)(l,c,p,e,u)}t.a=a,n(115)},function(e,t,n){"use strict";n(28)},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.UserNotAuthenticated=void 0;var i=n(1),o=r(i).default,a=n(2),s=r(a).default,u=n(3),l=r(u).default,c=n(0),p=c.Component,d=n(7),f=d.connect,h=void 0;h=n(12).Redirect;var m=t.UserNotAuthenticated=function(t){function n(){return o(this,n),s(this,t.apply(this,arguments))}return l(n,t),n.prototype.render=function(t){var n=t.isLoggedIn,r=t.children,i=t.push,o=void 0!==i&&i,a=t.redirect,s=void 0!==a&&a;return n?s?e(h,{to:s,push:o}):void 0:r[0]},n}(p);t.default=f(function(e){return{isLoggedIn:Boolean(e.get("session").get("isLoggedIn"))}})(m)}).call(t,n(0).h)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.replace=function(e){return window.location.replace(e)},i=(t.getLocation=function(){return window.location},t.goTo=function(e,t){if(t&&"_self"!=t)return window.open(e,t);document.location=e},{replace:r});t.default=i},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(6),a=i(o).default,s=n(1),u=i(s).default,l=n(2),c=i(l).default,p=n(3),d=i(p).default,f=n(0),h=f.Component,m=n(14),g=i(m).default,y=function(e){function t(){return u(this,t),c(this,e.apply(this,arguments))}return d(t,e),t.prototype.render=function(e){return r(g,a({},e,{href:"/",parentOfRender:"home-page"}))},t}(h);t.default=y,e.exports=t.default}).call(t,n(0).h)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(54),s=n.n(a),u=n(5),l=n(19),c=n.n(l),p=n(10),d=n(34),f=function(e){function t(){var n,o,a;r(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=o=i(this,e.call.apply(e,[this].concat(u))),o.history=Object(p.createBrowserHistory)(o.props),a=n,i(o,a)}return o(t,e),t.prototype.componentWillMount=function(){s()(!this.props.history,"<BrowserRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { BrowserRouter as Router }`.")},t.prototype.render=function(){return u.default.createElement(d.a,{history:this.history,children:this.props.children})},t}(u.default.Component);f.propTypes={basename:c.a.string,forceRefresh:c.a.bool,getUserConfirmation:c.a.func,keyLength:c.a.number,children:c.a.node},t.a=f},function(e,t,n){"use strict";var r=n(29),i=n(30),o=n(121);e.exports=function(){function e(e,t,n,r,a,s){s!==o&&i(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";var r=n(18),i=n.n(r),o=n(55),a=n.n(o),s=n(20),u=n(15),l=n(33),c=n(56),p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){try{return window.history.state||{}}catch(e){return{}}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a()(c.b,"Browser history needs a DOM");var t=window.history,n=Object(c.g)(),r=!Object(c.h)(),o=e.forceRefresh,h=void 0!==o&&o,m=e.getUserConfirmation,g=void 0===m?c.c:m,y=e.keyLength,v=void 0===y?6:y,_=e.basename?Object(u.g)(Object(u.a)(e.basename)):"",b=function(e){var t=e||{},n=t.key,r=t.state,o=window.location,a=o.pathname,l=o.search,c=o.hash,p=a+l+c;return i()(!_||Object(u.c)(p,_),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+p+'" to begin with "'+_+'".'),_&&(p=Object(u.e)(p,_)),Object(s.a)(p,r,n)},x=function(){return Math.random().toString(36).substr(2,v)},w=Object(l.a)(),S=function(e){d(U,e),U.length=t.length,w.notifyListeners(U.location,U.action)},k=function(e){Object(c.d)(e)||M(b(e.state))},E=function(){M(b(f()))},T=!1,M=function(e){T?(T=!1,S()):w.confirmTransitionTo(e,"POP",g,function(t){t?S({action:"POP",location:e}):C(e)})},C=function(e){var t=U.location,n=A.indexOf(t.key);-1===n&&(n=0);var r=A.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(T=!0,I(i))},O=b(f()),A=[O.key],P=function(e){return _+Object(u.b)(e)},R=function(e,r){i()(!("object"===(void 0===e?"undefined":p(e))&&void 0!==e.state&&void 0!==r),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var o=Object(s.a)(e,r,x(),U.location);w.confirmTransitionTo(o,"PUSH",g,function(e){if(e){var r=P(o),a=o.key,s=o.state;if(n)if(t.pushState({key:a,state:s},null,r),h)window.location.href=r;else{var u=A.indexOf(U.location.key),l=A.slice(0,-1===u?0:u+1);l.push(o.key),A=l,S({action:"PUSH",location:o})}else i()(void 0===s,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=r}})},D=function(e,r){i()(!("object"===(void 0===e?"undefined":p(e))&&void 0!==e.state&&void 0!==r),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var o=Object(s.a)(e,r,x(),U.location);w.confirmTransitionTo(o,"REPLACE",g,function(e){if(e){var r=P(o),a=o.key,s=o.state;if(n)if(t.replaceState({key:a,state:s},null,r),h)window.location.replace(r);else{var u=A.indexOf(U.location.key);-1!==u&&(A[u]=o.key),S({action:"REPLACE",location:o})}else i()(void 0===s,"Browser history cannot replace state in browsers that do not support HTML5 history"),window.location.replace(r)}})},I=function(e){t.go(e)},N=function(){return I(-1)},L=function(){return I(1)},z=0,j=function(e){z+=e,1===z?(Object(c.a)(window,"popstate",k),r&&Object(c.a)(window,"hashchange",E)):0===z&&(Object(c.e)(window,"popstate",k),r&&Object(c.e)(window,"hashchange",E))},H=!1,B=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=w.setPrompt(e);return H||(j(1),H=!0),function(){return H&&(H=!1,j(-1)),t()}},F=function(e){var t=w.appendListener(e);return j(1),function(){j(-1),t()}},U={length:t.length,action:"POP",location:O,createHref:P,push:R,replace:D,go:I,goBack:N,goForward:L,block:B,listen:F};return U};t.a=h},function(e,t,n){"use strict";function r(e){return"/"===e.charAt(0)}function i(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e&&e.split("/")||[],o=t&&t.split("/")||[],a=e&&r(e),s=t&&r(t),u=a||s;if(e&&r(e)?o=n:n.length&&(o.pop(),o=o.concat(n)),!o.length)return"/";var l=void 0;if(o.length){var c=o[o.length-1];l="."===c||".."===c||""===c}else l=!1;for(var p=0,d=o.length;d>=0;d--){var f=o[d];"."===f?i(o,d):".."===f?(i(o,d),p++):p&&(i(o,d),p--)}if(!u)for(;p--;p)o.unshift("..");!u||""===o[0]||o[0]&&r(o[0])||o.unshift("");var h=o.join("/");return l&&"/"!==h.substr(-1)&&(h+="/"),h}t.a=o},function(e,t,n){"use strict";function r(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(Array.isArray(e))return Array.isArray(t)&&e.length===t.length&&e.every(function(e,n){return r(e,t[n])});var n=void 0===e?"undefined":i(e);if(n!==(void 0===t?"undefined":i(t)))return!1;if("object"===n){var o=e.valueOf(),a=t.valueOf();if(o!==e||a!==t)return r(o,a);var s=Object.keys(e),u=Object.keys(t);return s.length===u.length&&s.every(function(n){return r(e[n],t[n])})}return!1}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.a=r},function(e,t,n){"use strict";var r=n(18),i=n.n(r),o=n(55),a=n.n(o),s=n(20),u=n(15),l=n(33),c=n(56),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+Object(u.f)(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:u.f,decodePath:u.a},slash:{encodePath:u.a,decodePath:u.a}},f=function(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)},h=function(e){return window.location.hash=e},m=function(e){var t=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,t>=0?t:0)+"#"+e)},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a()(c.b,"Hash history needs a DOM");var t=window.history,n=Object(c.f)(),r=e.getUserConfirmation,o=void 0===r?c.c:r,g=e.hashType,y=void 0===g?"slash":g,v=e.basename?Object(u.g)(Object(u.a)(e.basename)):"",_=d[y],b=_.encodePath,x=_.decodePath,w=function(){var e=x(f());return i()(!v||Object(u.c)(e,v),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+e+'" to begin with "'+v+'".'),v&&(e=Object(u.e)(e,v)),Object(s.a)(e)},S=Object(l.a)(),k=function(e){p(W,e),W.length=t.length,S.notifyListeners(W.location,W.action)},E=!1,T=null,M=function(){var e=f(),t=b(e);if(e!==t)m(t);else{var n=w(),r=W.location;if(!E&&Object(s.b)(r,n))return;if(T===Object(u.b)(n))return;T=null,C(n)}},C=function(e){E?(E=!1,k()):S.confirmTransitionTo(e,"POP",o,function(t){t?k({action:"POP",location:e}):O(e)})},O=function(e){var t=W.location,n=D.lastIndexOf(Object(u.b)(t));-1===n&&(n=0);var r=D.lastIndexOf(Object(u.b)(e));-1===r&&(r=0);var i=n-r;i&&(E=!0,z(i))},A=f(),P=b(A);A!==P&&m(P);var R=w(),D=[Object(u.b)(R)],I=function(e){return"#"+b(v+Object(u.b)(e))},N=function(e,t){i()(void 0===t,"Hash history cannot push state; it is ignored");var n=Object(s.a)(e,void 0,void 0,W.location);S.confirmTransitionTo(n,"PUSH",o,function(e){if(e){var t=Object(u.b)(n),r=b(v+t);if(f()!==r){T=t,h(r);var o=D.lastIndexOf(Object(u.b)(W.location)),a=D.slice(0,-1===o?0:o+1);a.push(t),D=a,k({action:"PUSH",location:n})}else i()(!1,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack"),k()}})},L=function(e,t){i()(void 0===t,"Hash history cannot replace state; it is ignored");var n=Object(s.a)(e,void 0,void 0,W.location);S.confirmTransitionTo(n,"REPLACE",o,function(e){if(e){var t=Object(u.b)(n),r=b(v+t);f()!==r&&(T=t,m(r));var i=D.indexOf(Object(u.b)(W.location));-1!==i&&(D[i]=t),k({action:"REPLACE",location:n})}})},z=function(e){i()(n,"Hash history go(n) causes a full page reload in this browser"),t.go(e)},j=function(){return z(-1)},H=function(){return z(1)},B=0,F=function(e){B+=e,1===B?Object(c.a)(window,"hashchange",M):0===B&&Object(c.e)(window,"hashchange",M)},U=!1,V=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=S.setPrompt(e);return U||(F(1),U=!0),function(){return U&&(U=!1,F(-1)),t()}},Y=function(e){var t=S.appendListener(e);return F(1),function(){F(-1),t()}},W={length:t.length,action:"POP",location:R,createHref:I,push:N,replace:L,go:z,goBack:j,goForward:H,block:V,listen:Y};return W};t.a=g},function(e,t,n){"use strict";var r=n(18),i=n.n(r),o=n(15),a=n(20),s=n(33),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(e,t,n){return Math.min(Math.max(e,t),n)},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getUserConfirmation,n=e.initialEntries,r=void 0===n?["/"]:n,p=e.initialIndex,d=void 0===p?0:p,f=e.keyLength,h=void 0===f?6:f,m=Object(s.a)(),g=function(e){l(O,e),O.length=O.entries.length,m.notifyListeners(O.location,O.action)},y=function(){return Math.random().toString(36).substr(2,h)},v=c(d,0,r.length-1),_=r.map(function(e){return"string"==typeof e?Object(a.a)(e,void 0,y()):Object(a.a)(e,void 0,e.key||y())}),b=o.b,x=function(e,n){i()(!("object"===(void 0===e?"undefined":u(e))&&void 0!==e.state&&void 0!==n),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var r=Object(a.a)(e,n,y(),O.location);m.confirmTransitionTo(r,"PUSH",t,function(e){if(e){var t=O.index,n=t+1,i=O.entries.slice(0);i.length>n?i.splice(n,i.length-n,r):i.push(r),g({action:"PUSH",location:r,index:n,entries:i})}})},w=function(e,n){i()(!("object"===(void 0===e?"undefined":u(e))&&void 0!==e.state&&void 0!==n),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var r=Object(a.a)(e,n,y(),O.location);m.confirmTransitionTo(r,"REPLACE",t,function(e){e&&(O.entries[O.index]=r,g({action:"REPLACE",location:r}))})},S=function(e){var n=c(O.index+e,0,O.entries.length-1),r=O.entries[n];m.confirmTransitionTo(r,"POP",t,function(e){e?g({action:"POP",location:r,index:n}):g()})},k=function(){return S(-1)},E=function(){return S(1)},T=function(e){var t=O.index+e;return t>=0&&t<O.entries.length},M=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return m.setPrompt(e)},C=function(e){return m.appendListener(e)},O={length:_.length,action:"POP",location:_[v],index:v,entries:_,createHref:b,push:x,replace:w,go:S,goBack:k,goForward:E,canGo:T,block:M,listen:C};return O};t.a=p},function(e,t,n){"use strict";var r=n(29),i=n(30),o=n(128);e.exports=function(){function e(e,t,n,r,a,s){s!==o&&i(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(54),s=n.n(a),u=n(5),l=n(19),c=n.n(l),p=n(10),d=n(34),f=function(e){function t(){var n,o,a;r(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=o=i(this,e.call.apply(e,[this].concat(u))),o.history=Object(p.createHashHistory)(o.props),a=n,i(o,a)}return o(t,e),t.prototype.componentWillMount=function(){s()(!this.props.history,"<HashRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { HashRouter as Router }`.")},t.prototype.render=function(){return u.default.createElement(d.a,{history:this.history,children:this.props.children})},t}(u.default.Component);f.propTypes={basename:c.a.string,getUserConfirmation:c.a.func,hashType:c.a.oneOf(["hashbang","noslash","slash"]),children:c.a.node},t.a=f},function(e,t,n){"use strict";var r=n(131);t.a=r.a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(13),s=n.n(a),u=n(5),l=n(8),c=n.n(l),p=n(10),d=n(35),f=function(e){function t(){var n,o,a;r(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=o=i(this,e.call.apply(e,[this].concat(u))),o.history=Object(p.createMemoryHistory)(o.props),a=n,i(o,a)}return o(t,e),t.prototype.componentWillMount=function(){s()(!this.props.history,"<MemoryRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { MemoryRouter as Router }`.")},t.prototype.render=function(){return u.default.createElement(d.a,{history:this.history,children:this.props.children})},t}(u.default.Component);f.propTypes={initialEntries:c.a.array,initialIndex:c.a.number,getUserConfirmation:c.a.func,keyLength:c.a.number,children:c.a.node},t.a=f},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var i=n(5),o=n(19),a=n.n(o),s=n(58),u=n(57),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p=function(e){var t=e.to,n=e.exact,o=e.strict,a=e.location,p=e.activeClassName,d=e.className,f=e.activeStyle,h=e.style,m=e.isActive,g=e["aria-current"],y=r(e,["to","exact","strict","location","activeClassName","className","activeStyle","style","isActive","aria-current"]),v="object"===(void 0===t?"undefined":c(t))?t.pathname:t,_=v&&v.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1");return i.default.createElement(s.a,{path:_,exact:n,strict:o,location:a,children:function(e){var n=e.location,r=e.match,o=!!(m?m(r,n):r);return i.default.createElement(u.a,l({to:t,className:o?[d,p].filter(function(e){return e}).join(" "):d,style:o?l({},h,f):h,"aria-current":o&&g||null},y))}})};p.propTypes={to:u.a.propTypes.to,exact:a.a.bool,strict:a.a.bool,location:a.a.object,activeClassName:a.a.string,className:a.a.string,activeStyle:a.a.object,style:a.a.object,isActive:a.a.func,"aria-current":a.a.oneOf(["page","step","location","date","time","true"])},p.defaultProps={activeClassName:"active","aria-current":"page"},t.a=p},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,n){"use strict";var r=n(135);t.a=r.a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(5),s=n(8),u=n.n(s),l=n(9),c=n.n(l),p=function(e){function t(){return r(this,t),i(this,e.apply(this,arguments))}return o(t,e),t.prototype.enable=function(e){this.unblock&&this.unblock(),this.unblock=this.context.router.history.block(e)},t.prototype.disable=function(){this.unblock&&(this.unblock(),this.unblock=null)},t.prototype.componentWillMount=function(){c()(this.context.router,"You should not use <Prompt> outside a <Router>"),this.props.when&&this.enable(this.props.message)},t.prototype.componentWillReceiveProps=function(e){e.when?this.props.when&&this.props.message===e.message||this.enable(e.message):this.disable()},t.prototype.componentWillUnmount=function(){this.disable()},t.prototype.render=function(){return null},t}(a.default.Component);p.propTypes={when:u.a.bool,message:u.a.oneOfType([u.a.func,u.a.string]).isRequired},p.defaultProps={when:!0},p.contextTypes={router:u.a.shape({history:u.a.shape({block:u.a.func.isRequired}).isRequired}).isRequired},t.a=p},function(e,t,n){"use strict";var r=n(137);t.a=r.a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(5),s=n(8),u=n.n(s),l=n(13),c=n.n(l),p=n(9),d=n.n(p),f=n(10),h=n(61),m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g=function(e){function t(){return r(this,t),i(this,e.apply(this,arguments))}return o(t,e),t.prototype.isStatic=function(){return this.context.router&&this.context.router.staticContext},t.prototype.componentWillMount=function(){d()(this.context.router,"You should not use <Redirect> outside a <Router>"),this.isStatic()&&this.perform()},t.prototype.componentDidMount=function(){this.isStatic()||this.perform()},t.prototype.componentDidUpdate=function(e){var t=Object(f.createLocation)(e.to),n=Object(f.createLocation)(this.props.to);if(Object(f.locationsAreEqual)(t,n))return void c()(!1,"You tried to redirect to the same route you're currently on: \""+n.pathname+n.search+'"');this.perform()},t.prototype.computeTo=function(e){var t=e.computedMatch,n=e.to;return t?"string"==typeof n?Object(h.a)(n,t.params):m({},n,{pathname:Object(h.a)(n.pathname,t.params)}):n},t.prototype.perform=function(){var e=this.context.router.history,t=this.props.push,n=this.computeTo(this.props);t?e.push(n):e.replace(n)},t.prototype.render=function(){return null},t}(a.default.Component);g.propTypes={computedMatch:u.a.object,push:u.a.bool,from:u.a.string,to:u.a.oneOfType([u.a.string,u.a.object]).isRequired},g.defaultProps={push:!1},g.contextTypes={router:u.a.shape({history:u.a.shape({push:u.a.func.isRequired,replace:u.a.func.isRequired}).isRequired,staticContext:u.a.object}).isRequired},t.a=g},function(e,t,n){"use strict";var r=n(139);t.a=r.a},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(13),u=n.n(s),l=n(9),c=n.n(l),p=n(5),d=n(8),f=n.n(d),h=n(10),m=n(35),g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y=function(e){return"/"===e.charAt(0)?e:"/"+e},v=function(e,t){return e?g({},t,{pathname:y(e)+t.pathname}):t},_=function(e,t){if(!e)return t;var n=y(e);return 0!==t.pathname.indexOf(n)?t:g({},t,{pathname:t.pathname.substr(n.length)})},b=function(e){return"string"==typeof e?e:Object(h.createPath)(e)},x=function(e){return function(){c()(!1,"You cannot %s with <StaticRouter>",e)}},w=function(){},S=function(e){function t(){var n,r,a;i(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=r=o(this,e.call.apply(e,[this].concat(u))),r.createHref=function(e){return y(r.props.basename+b(e))},r.handlePush=function(e){var t=r.props,n=t.basename,i=t.context;i.action="PUSH",i.location=v(n,Object(h.createLocation)(e)),i.url=b(i.location)},r.handleReplace=function(e){var t=r.props,n=t.basename,i=t.context;i.action="REPLACE",i.location=v(n,Object(h.createLocation)(e)),i.url=b(i.location)},r.handleListen=function(){return w},r.handleBlock=function(){return w},a=n,o(r,a)}return a(t,e),t.prototype.getChildContext=function(){return{router:{staticContext:this.props.context}}},t.prototype.componentWillMount=function(){u()(!this.props.history,"<StaticRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { StaticRouter as Router }`.")},t.prototype.render=function(){var e=this.props,t=e.basename,n=(e.context,e.location),i=r(e,["basename","context","location"]),o={createHref:this.createHref,action:"POP",location:_(t,Object(h.createLocation)(n)),push:this.handlePush,replace:this.handleReplace,go:x("go"),goBack:x("goBack"),goForward:x("goForward"),listen:this.handleListen,block:this.handleBlock};return p.default.createElement(m.a,g({},i,{history:o}))},t}(p.default.Component);S.propTypes={basename:f.a.string,context:f.a.object.isRequired,location:f.a.oneOfType([f.a.string,f.a.object])},S.defaultProps={basename:"",location:"/"},S.childContextTypes={router:f.a.object.isRequired},t.a=S},function(e,t,n){"use strict";var r=n(141);t.a=r.a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(5),s=n(8),u=n.n(s),l=n(13),c=n.n(l),p=n(9),d=n.n(p),f=n(36),h=function(e){function t(){return r(this,t),i(this,e.apply(this,arguments))}return o(t,e),t.prototype.componentWillMount=function(){d()(this.context.router,"You should not use <Switch> outside a <Router>")},t.prototype.componentWillReceiveProps=function(e){c()(!(e.location&&!this.props.location),'<Switch> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),c()(!(!e.location&&this.props.location),'<Switch> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.')},t.prototype.render=function(){var e=this.context.router.route,t=this.props.children,n=this.props.location||e.location,r=void 0,i=void 0;return a.default.Children.forEach(t,function(t){if(null==r&&a.default.isValidElement(t)){var o=t.props,s=o.path,u=o.exact,l=o.strict,c=o.sensitive,p=o.from,d=s||p;i=t,r=Object(f.a)(n.pathname,{path:d,exact:u,strict:l,sensitive:c},e.match)}}),r?a.default.cloneElement(i,{location:n,computedMatch:r}):null},t}(a.default.Component);h.contextTypes={router:u.a.shape({route:u.a.object.isRequired}).isRequired},h.propTypes={children:u.a.node,location:u.a.object},t.a=h},function(e,t,n){"use strict";var r=n(61);t.a=r.a},function(e,t,n){"use strict";var r=n(36);t.a=r.a},function(e,t,n){"use strict";var r=n(145);t.a=r.a},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var i=n(5),o=n(8),a=n.n(o),s=n(50),u=n.n(s),l=n(59),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p=function(e){var t=function(t){var n=t.wrappedComponentRef,o=r(t,["wrappedComponentRef"]);return i.default.createElement(l.a,{children:function(t){return i.default.createElement(e,c({},o,t,{ref:n}))}})};return t.displayName="withRouter("+(e.displayName||e.name)+")",t.WrappedComponent=e,t.propTypes={wrappedComponentRef:a.a.func},u()(t,e)};t.a=p},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.UserAuthenticatedNotVerified=void 0;var i=n(1),o=r(i).default,a=n(2),s=r(a).default,u=n(3),l=r(u).default,c=n(0),p=c.Component,d=n(7),f=d.connect,h=n(51),m=r(h).default,g=void 0;g=n(12).Redirect;var y=t.UserAuthenticatedNotVerified=function(t){function n(){return o(this,n),s(this,t.apply(this,arguments))}return l(n,t),n.prototype.render=function(t){var n=t.isVerified,r=t.children,i=t.push,o=void 0!==i&&i,a=t.redirect,s=void 0!==a&&a;return e(m,{redirect:s},n?s&&e(g,{to:s,push:o}):r)},n}(p);t.default=f(function(e){var t=e.get("session");return{isVerified:Boolean(t.get("isLoggedIn")&&t.get("identity").get("isVerified"))}})(y)}).call(t,n(0).h)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(148),i=function(e){return e&&e.__esModule?e:{default:e}}(r).default;t.default=function(e){return i.indexOf(e)>-1},e.exports=t.default},function(e,t){e.exports=["ABVI","ACSO","ACUO","AHNO","AHSO","ALOF","APEX","AQH","ARAM","ATAH","AVID","AVST","BISA","BRTH","BWEE","BWPL","BWPR","CBVI","CHAE","CHOO","CHTX","CION","CLAR","COUR","CPRL","CSAU","CSOU","Curio","DHEO","DHOO","DHRU","DIAN","DODN","DREA","DRMS","EDIT","ELCO","ELEM","ESMU","EURO","EVEN","FIAN","FPOO","GAYL","GHRY","GLCO","HAMP","HAP","HAYN","HCTC","HEHR","HESP","HGII","HGVI","HHIO","HHOA","HHWW","HHYO","HIAN","HICV","HIEO","HIHO","HION","HIRO","HJC","HJOO","HOTU","HPYL","HRYE","HSBW","HSOU","HTLR","HUAL","HVCY","HYAT","HYZR","HYZV","JMWA","JURYS","KEYT","KIMP","KINN","LEBA","LHEO","LHSE","LMEE","LQAU","LTHE","MARR","MAYFAIR","MCCA","MCHI","MEAA","MESA","MGRS","MHCBR","MHRA","MIIN","MOVE","MOXY","MSSA","MVCA","NANN","NCTN","NHCO","NHHO","NHOW","NIGH","NIKK","NOW","OHRB","OHRK","OTNT","OUOT","PHAY","PHP","PHRR","PIAN","PPAL","PR","QUAL","RADI","RAMA","RBAL","RCHI","REGE","REHA","RENA","RFHO","RIEN","ROTA","RRIE","S8UP","SBR","SCRT","SESU","SHER","SHSP","SILN","SNSC","SOLA","SSTU","TAJJ","TCRL","THRO","TLCH","TOGA","TPSO","TRAV","TRID","UBCL","UNOI","WAAS","WBWI","WEST","WHOT","WORL","WYAA","WYND","WYTQ","YNAI","ZOET","default"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","GB"],e.exports=t.default},function(e,t){e.exports={CHC:{partnerName:"Choice",bookButtonLabel:"at Choice",partnerRewardName:"Choice Privileges®",partnerBenefits:["Late check-out","FREE wi-fi","Digital check-in"]},HLTN:{partnerName:"Hilton",bookButtonLabel:"at Hilton",partnerRewardName:"Hilton Honors",partnerBenefits:["Late check-out","FREE wi-fi","Digital check-in"]},HYAT:{partnerName:"Hyatt",bookButtonLabel:"at Hyatt",partnerRewardName:"World of Hyatt",partnerBenefits:["Late check-out","FREE wi-fi","Digital check-in"]},IHG:{partnerName:"IHG",bookButtonLabel:"Direct",partnerRewardName:"IHG® Rewards Club",partnerBenefits:["Late check-out","FREE wi-fi","Digital check-in"]},MRT:{partnerName:"Marriott",bookButtonLabel:"at Marriott",partnerRewardName:"Marriott Rewards",partnerBenefits:["Earn miles or points","FREE internet","Digital check-in"]},STRWD:{partnerName:"Starwood Hotels & Resorts",bookButtonLabel:"at Starwood",partnerRewardName:"Starwood Preferred Guest®",partnerBenefits:["Earn cash & points","Fifth night FREE","Late check-out"]},WYND:{partnerName:"Wyndham",bookButtonLabel:"at Wyndham",partnerRewardName:"Wyndham Rewards",partnerBenefits:["Earn miles or points","Merchandise","Special offers"]},BW:{partnerName:"Best Western",bookButtonLabel:"at Best Western",partnerRewardName:null,partnerBenefits:null},CARL:{partnerName:"Carlson",bookButtonLabel:"Direct",partnerRewardName:null,partnerBenefits:null},PEGS:{partnerName:"La Quinta",bookButtonLabel:"at La Quinta",partnerRewardName:null,partnerBenefits:null},SABR:{partnerName:"Sabre",bookButtonLabel:"Direct",partnerRewardName:"",partnerBenefits:null},SCEPTRE:{partnerName:"Sceptre",bookButtonLabel:"at Millennium",partnerRewardName:null,partnerBenefits:null},TCLK:{partnerName:"Travel Click",bookButtonLabel:"Direct",partnerRewardName:"",partnerBenefits:null},TRUS:{partnerName:"Trust",bookButtonLabel:"Direct",partnerRewardName:"",partnerBenefits:null}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(16),o=r(i).default,a=n(6),s=r(a).default,u=n(1),l=r(u).default,c=n(2),p=r(c).default,d=n(3),f=r(d).default,h=n(0),m=h.h,g=h.Component,y=function(e){function t(n){l(this,t);var r=p(this,e.call(this,n));return r.handleClick=r.handleClick.bind(r),r}return f(t,e),t.prototype.handleClick=function(e){var t=this.container,n=this.props.onClickOutside;t&&n&&(t.contains(e.target)||n(e))},t.prototype.componentDidMount=function(){document.addEventListener("click",this.handleClick,!0)},t.prototype.componentWillUnmount=function(){document.removeEventListener("click",this.handleClick,!0)},t.prototype.render=function(e){var t=this,n=s({},e),r=e.children;return delete n.children,delete n.onClickOutside,m("div",o({},n,{ref:function(e){return t.container=e}}),r)},t}(g);t.default=y,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(10),i=r.createBrowserHistory,o=void 0;t.default=function(){return o||(o=i()),o},e.exports=t.default},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Dropdown=void 0;var i=n(16),o=r(i).default,a=n(1),s=r(a).default,u=n(2),l=r(u).default,c=n(3),p=r(c).default,d=n(0),f=d.Component,h=n(7),m=h.connect,g=n(151),y=r(g).default,v=n(14),_=r(v).default,b=n(146),x=r(b).default,w=n(51),S=r(w).default,k=n(116),E=r(k).default,T=n(170),M=r(T).default,C=n(171),O=r(C).default,A=n(72),P=r(A).default,R=void 0;R=n(40).sendVerification;var D=t.Dropdown=function(t){function n(e){s(this,n);var r=l(this,t.call(this,e));return r.state={isOpened:e.open||!1},r.handleClickOutside=r.handleClickOutside.bind(r),r.handleKeyUp=r.handleKeyUp.bind(r),r.handleToggleClick=r.handleToggleClick.bind(r),r.handleSendVerification=r.handleSendVerification.bind(r),r}return p(n,t),n.prototype.handleKeyUp=function(e){27===e.keyCode&&this.setState({isOpened:!1})},n.prototype.handleClickOutside=function(){this.setState(function(e){return e.isOpened?{isOpened:!1}:e})},n.prototype.handleToggleClick=function(e){e.preventDefault(),this.setState(function(e){return{isOpened:!e.isOpened}})},n.prototype.handleSendVerification=function(e){e.preventDefault(),this.props.processing||this.props.sendVerification()},n.prototype.render=function(t,n){var r=t.email,i=t.parentEvent,a=t.useRouter,s=n.isOpened,u={id:"header-dropdown",className:P.dropdown,onKeyUp:this.handleKeyUp};return e(y,{onClickOutside:this.handleClickOutside},e("div",u,e("button",{id:"dropdown-toggle",className:s?P.toggle_active:P.toggle,onClick:this.handleToggleClick,type:"button"},e(S,null,e("span",null,"My Account")),e(E,null,e("span",null,"Log in / Register")),s?e("span",{className:P.icon},e("img",{src:O})):e("span",{className:P.icon},e("img",{src:M}))),s&&e("div",{className:P.panel},e(S,null,e("div",null,e("div",{className:P.panel_description},e("p",{className:P.email},r),e(x,null,e("p",{className:P.verify},"Please verify email. ",e("a",{href:"#",id:"send-verification",onClick:this.handleSendVerification},"Resend Confirmation Link")))),e("ul",{className:P.panel_links},e("li",null,e(_,o({element:"profile-link",href:"/profile",id:"dropdown-profile"},{parentEvent:i,useRouter:a}),"Profile")),e("li",null,e(_,o({element:"logout-link",href:"/logout",id:"dropdown-logout"},{parentEvent:i,useRouter:a}),"Sign Out"))))),e(E,null,e("div",null,e("div",{className:P.panel_description},e("p",null,"Create a RoomKey account to be notified of great deals and promotions")),e("ul",{className:P.panel_links},e("li",null,e(_,o({element:"login-link",href:"/login",id:"dropdown-login"},{parentEvent:i,useRouter:a}),"Log in")),e("li",null,e(_,o({element:"register-link",href:"/register",id:"dropdown-register"},{parentEvent:i,useRouter:a}),"Register"))))))))},n}(f);t.default=m(null,{sendVerification:R})(D)}).call(t,n(0).h)},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(6),a=i(o).default,s=n(1),u=i(s).default,l=n(2),c=i(l).default,p=n(3),d=i(p).default,f=n(0),h=f.Component,m=n(12),g=m.Redirect,y=n(65),v=y.stringify,_=n(76),b=i(_).default,x=n(38),w=i(x).default,S=function(e){function t(){return u(this,t),c(this,e.apply(this,arguments))}return d(t,e),t.prototype.render=function(e){var t=e.params,n=e.push,i=e.remove,o=void 0===i?[]:i,s=e.from,u=w(),l=b(a(u,t),o),c=v(l,{arrayFormat:"bracket"}),p="?"+c,d=location.pathname+p;return r(g,{to:d,push:n,from:s})},t}(h);t.default=S,e.exports=t.default}).call(t,n(0).h)},function(e,t,n){(function(e){!function(t,n){e.exports=function(){"use strict";function t(){return Mr.apply(null,arguments)}function n(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function r(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function i(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}function o(e){return void 0===e}function a(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function s(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function u(e,t){var n,r=[];for(n=0;n<e.length;++n)r.push(t(e[n],n));return r}function l(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function c(e,t){for(var n in t)l(t,n)&&(e[n]=t[n]);return l(t,"toString")&&(e.toString=t.toString),l(t,"valueOf")&&(e.valueOf=t.valueOf),e}function p(e,t,n,r){return kt(e,t,n,r,!0).utc()}function d(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function f(e){return null==e._pf&&(e._pf=d()),e._pf}function h(e){if(null==e._isValid){var t=f(e),n=Cr.call(t.parsedDateParts,function(e){return null!=e}),r=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(r=r&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return r;e._isValid=r}return e._isValid}function m(e){var t=p(NaN);return null!=e?c(f(t),e):f(t).userInvalidated=!0,t}function g(e,t){var n,r,i;if(o(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),o(t._i)||(e._i=t._i),o(t._f)||(e._f=t._f),o(t._l)||(e._l=t._l),o(t._strict)||(e._strict=t._strict),o(t._tzm)||(e._tzm=t._tzm),o(t._isUTC)||(e._isUTC=t._isUTC),o(t._offset)||(e._offset=t._offset),o(t._pf)||(e._pf=f(t)),o(t._locale)||(e._locale=t._locale),Or.length>0)for(n=0;n<Or.length;n++)r=Or[n],i=t[r],o(i)||(e[r]=i);return e}function y(e){g(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===Ar&&(Ar=!0,t.updateOffset(this),Ar=!1)}function v(e){return e instanceof y||null!=e&&null!=e._isAMomentObject}function _(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function b(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=_(t)),n}function x(e,t,n){var r,i=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),a=0;for(r=0;r<i;r++)(n&&e[r]!==t[r]||!n&&b(e[r])!==b(t[r]))&&a++;return a+o}function w(e){!1===t.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function S(e,n){var r=!0;return c(function(){if(null!=t.deprecationHandler&&t.deprecationHandler(null,e),r){for(var i,o=[],a=0;a<arguments.length;a++){if(i="","object"==typeof arguments[a]){i+="\n["+a+"] ";for(var s in arguments[0])i+=s+": "+arguments[0][s]+", ";i=i.slice(0,-2)}else i=arguments[a];o.push(i)}w(e+"\nArguments: "+Array.prototype.slice.call(o).join("")+"\n"+(new Error).stack),r=!1}return n.apply(this,arguments)},n)}function k(e,n){null!=t.deprecationHandler&&t.deprecationHandler(e,n),Pr[e]||(w(n),Pr[e]=!0)}function E(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function T(e){var t,n;for(n in e)t=e[n],E(t)?this[n]=t:this["_"+n]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function M(e,t){var n,i=c({},e);for(n in t)l(t,n)&&(r(e[n])&&r(t[n])?(i[n]={},c(i[n],e[n]),c(i[n],t[n])):null!=t[n]?i[n]=t[n]:delete i[n]);for(n in e)l(e,n)&&!l(t,n)&&r(e[n])&&(i[n]=c({},i[n]));return i}function C(e){null!=e&&this.set(e)}function O(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return E(r)?r.call(t,n):r}function A(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])}function P(){return this._invalidDate}function R(e){return this._ordinal.replace("%d",e)}function D(e,t,n,r){var i=this._relativeTime[n];return E(i)?i(e,t,n,r):i.replace(/%d/i,e)}function I(e,t){var n=this._relativeTime[e>0?"future":"past"];return E(n)?n(t):n.replace(/%s/i,t)}function N(e,t){var n=e.toLowerCase();zr[n]=zr[n+"s"]=zr[t]=e}function L(e){return"string"==typeof e?zr[e]||zr[e.toLowerCase()]:void 0}function z(e){var t,n,r={};for(n in e)l(e,n)&&(t=L(n))&&(r[t]=e[n]);return r}function j(e,t){jr[e]=t}function H(e){var t=[];for(var n in e)t.push({unit:n,priority:jr[n]});return t.sort(function(e,t){return e.priority-t.priority}),t}function B(e,t,n){var r=""+Math.abs(e),i=t-r.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}function F(e,t,n,r){var i=r;"string"==typeof r&&(i=function(){return this[r]()}),e&&(Ur[e]=i),t&&(Ur[t[0]]=function(){return B(i.apply(this,arguments),t[1],t[2])}),n&&(Ur[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function U(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function V(e){var t,n,r=e.match(Hr);for(t=0,n=r.length;t<n;t++)Ur[r[t]]?r[t]=Ur[r[t]]:r[t]=U(r[t]);return function(t){var i,o="";for(i=0;i<n;i++)o+=E(r[i])?r[i].call(t,e):r[i];return o}}function Y(e,t){return e.isValid()?(t=W(t,e.localeData()),Fr[t]=Fr[t]||V(t),Fr[t](e)):e.localeData().invalidDate()}function W(e,t){function n(e){return t.longDateFormat(e)||e}var r=5;for(Br.lastIndex=0;r>=0&&Br.test(e);)e=e.replace(Br,n),Br.lastIndex=0,r-=1;return e}function q(e,t,n){ai[e]=E(t)?t:function(e,r){return e&&n?n:t}}function G(e,t){return l(ai,e)?ai[e](t._strict,t._locale):new RegExp(Z(e))}function Z(e){return K(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i}))}function K(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function J(e,t){var n,r=t;for("string"==typeof e&&(e=[e]),a(t)&&(r=function(e,n){n[t]=b(e)}),n=0;n<e.length;n++)si[e[n]]=r}function X(e,t){J(e,function(e,n,r,i){r._w=r._w||{},t(e,r._w,r,i)})}function $(e,t,n){null!=t&&l(si,e)&&si[e](t,n._a,n,e)}function Q(e){return ee(e)?366:365}function ee(e){return e%4==0&&e%100!=0||e%400==0}function te(){return ee(this.year())}function ne(e,n){return function(r){return null!=r?(ie(this,e,r),t.updateOffset(this,n),this):re(this,e)}}function re(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function ie(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&ee(e.year())&&1===e.month()&&29===e.date()?e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),ue(n,e.month())):e._d["set"+(e._isUTC?"UTC":"")+t](n))}function oe(e){return e=L(e),E(this[e])?this[e]():this}function ae(e,t){if("object"==typeof e){e=z(e);for(var n=H(e),r=0;r<n.length;r++)this[n[r].unit](e[n[r].unit])}else if(e=L(e),E(this[e]))return this[e](t);return this}function se(e,t){return(e%t+t)%t}function ue(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=se(t,12);return e+=(t-n)/12,1===n?ee(e)?29:28:31-n%7%2}function le(e,t){return e?n(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||_i).test(t)?"format":"standalone"][e.month()]:n(this._months)?this._months:this._months.standalone}function ce(e,t){return e?n(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[_i.test(t)?"format":"standalone"][e.month()]:n(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function pe(e,t,n){var r,i,o,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)o=p([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===t?(i=yi.call(this._shortMonthsParse,a),-1!==i?i:null):(i=yi.call(this._longMonthsParse,a),-1!==i?i:null):"MMM"===t?-1!==(i=yi.call(this._shortMonthsParse,a))?i:(i=yi.call(this._longMonthsParse,a),-1!==i?i:null):-1!==(i=yi.call(this._longMonthsParse,a))?i:(i=yi.call(this._shortMonthsParse,a),-1!==i?i:null)}function de(e,t,n){var r,i,o;if(this._monthsParseExact)return pe.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=p([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function fe(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=b(t);else if(t=e.localeData().monthsParse(t),!a(t))return e;return n=Math.min(e.date(),ue(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function he(e){return null!=e?(fe(this,e),t.updateOffset(this,!0),this):re(this,"Month")}function me(){return ue(this.year(),this.month())}function ge(e){return this._monthsParseExact?(l(this,"_monthsRegex")||ve.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=wi),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function ye(e){return this._monthsParseExact?(l(this,"_monthsRegex")||ve.call(this),e?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=Si),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function ve(){function e(e,t){return t.length-e.length}var t,n,r=[],i=[],o=[];for(t=0;t<12;t++)n=p([2e3,t]),r.push(this.monthsShort(n,"")),i.push(this.months(n,"")),o.push(this.months(n,"")),o.push(this.monthsShort(n,""));for(r.sort(e),i.sort(e),o.sort(e),t=0;t<12;t++)r[t]=K(r[t]),i[t]=K(i[t]);for(t=0;t<24;t++)o[t]=K(o[t]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function _e(e,t,n,r,i,o,a){var s=new Date(e,t,n,r,i,o,a);return e<100&&e>=0&&isFinite(s.getFullYear())&&s.setFullYear(e),s}function be(e){var t=new Date(Date.UTC.apply(null,arguments));return e<100&&e>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function xe(e,t,n){var r=7+t-n;return-(7+be(e,0,r).getUTCDay()-t)%7+r-1}function we(e,t,n,r,i){var o,a,s=(7+n-r)%7,u=xe(e,r,i),l=1+7*(t-1)+s+u;return l<=0?(o=e-1,a=Q(o)+l):l>Q(e)?(o=e+1,a=l-Q(e)):(o=e,a=l),{year:o,dayOfYear:a}}function Se(e,t,n){var r,i,o=xe(e.year(),t,n),a=Math.floor((e.dayOfYear()-o-1)/7)+1;return a<1?(i=e.year()-1,r=a+ke(i,t,n)):a>ke(e.year(),t,n)?(r=a-ke(e.year(),t,n),i=e.year()+1):(i=e.year(),r=a),{week:r,year:i}}function ke(e,t,n){var r=xe(e,t,n),i=xe(e+1,t,n);return(Q(e)-r+i)/7}function Ee(e){return Se(e,this._week.dow,this._week.doy).week}function Te(){return this._week.dow}function Me(){return this._week.doy}function Ce(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function Oe(e){var t=Se(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function Ae(e,t){return"string"!=typeof e?e:isNaN(e)?(e=t.weekdaysParse(e),"number"==typeof e?e:null):parseInt(e,10)}function Pe(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Re(e,t){return e?n(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]:n(this._weekdays)?this._weekdays:this._weekdays.standalone}function De(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Ie(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Ne(e,t,n){var r,i,o,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)o=p([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===t?(i=yi.call(this._weekdaysParse,a),-1!==i?i:null):"ddd"===t?(i=yi.call(this._shortWeekdaysParse,a),-1!==i?i:null):(i=yi.call(this._minWeekdaysParse,a),-1!==i?i:null):"dddd"===t?-1!==(i=yi.call(this._weekdaysParse,a))?i:-1!==(i=yi.call(this._shortWeekdaysParse,a))?i:(i=yi.call(this._minWeekdaysParse,a),-1!==i?i:null):"ddd"===t?-1!==(i=yi.call(this._shortWeekdaysParse,a))?i:-1!==(i=yi.call(this._weekdaysParse,a))?i:(i=yi.call(this._minWeekdaysParse,a),-1!==i?i:null):-1!==(i=yi.call(this._minWeekdaysParse,a))?i:-1!==(i=yi.call(this._weekdaysParse,a))?i:(i=yi.call(this._shortWeekdaysParse,a),-1!==i?i:null)}function Le(e,t,n){var r,i,o;if(this._weekdaysParseExact)return Ne.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=p([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(o="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[r].test(e))return r;if(n&&"ddd"===t&&this._shortWeekdaysParse[r].test(e))return r;if(n&&"dd"===t&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}}function ze(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=Ae(e,this.localeData()),this.add(e-t,"d")):t}function je(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function He(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=Pe(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function Be(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Ve.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=Ci),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Fe(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Ve.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Oi),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Ue(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Ve.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ai),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Ve(){function e(e,t){return t.length-e.length}var t,n,r,i,o,a=[],s=[],u=[],l=[];for(t=0;t<7;t++)n=p([2e3,1]).day(t),r=this.weekdaysMin(n,""),i=this.weekdaysShort(n,""),o=this.weekdays(n,""),a.push(r),s.push(i),u.push(o),l.push(r),l.push(i),l.push(o);for(a.sort(e),s.sort(e),u.sort(e),l.sort(e),t=0;t<7;t++)s[t]=K(s[t]),u[t]=K(u[t]),l[t]=K(l[t]);this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function Ye(){return this.hours()%12||12}function We(){return this.hours()||24}function qe(e,t){F(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function Ge(e,t){return t._meridiemParse}function Ze(e){return"p"===(e+"").toLowerCase().charAt(0)}function Ke(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}function Je(e){return e?e.toLowerCase().replace("_","-"):e}function Xe(e){for(var t,n,r,i,o=0;o<e.length;){for(i=Je(e[o]).split("-"),t=i.length,n=Je(e[o+1]),n=n?n.split("-"):null;t>0;){if(r=$e(i.slice(0,t).join("-")))return r;if(n&&n.length>=t&&x(i,n,!0)>=t-1)break;t--}o++}return Pi}function $e(t){var n=null;if(!Ni[t]&&void 0!==e&&e&&e.exports)try{n=Pi._abbr,!function(){var e=new Error('Cannot find module "./locale"');throw e.code="MODULE_NOT_FOUND",e}(),Qe(n)}catch(e){}return Ni[t]}function Qe(e,t){var n;return e&&(n=o(t)?nt(e):et(e,t),n?Pi=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),Pi._abbr}function et(e,t){if(null!==t){var n,r=Ii;if(t.abbr=e,null!=Ni[e])k("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=Ni[e]._config;else if(null!=t.parentLocale)if(null!=Ni[t.parentLocale])r=Ni[t.parentLocale]._config;else{if(null==(n=$e(t.parentLocale)))return Li[t.parentLocale]||(Li[t.parentLocale]=[]),Li[t.parentLocale].push({name:e,config:t}),null;r=n._config}return Ni[e]=new C(M(r,t)),Li[e]&&Li[e].forEach(function(e){et(e.name,e.config)}),Qe(e),Ni[e]}return delete Ni[e],null}function tt(e,t){if(null!=t){var n,r,i=Ii;r=$e(e),null!=r&&(i=r._config),t=M(i,t),n=new C(t),n.parentLocale=Ni[e],Ni[e]=n,Qe(e)}else null!=Ni[e]&&(null!=Ni[e].parentLocale?Ni[e]=Ni[e].parentLocale:null!=Ni[e]&&delete Ni[e]);return Ni[e]}function nt(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Pi;if(!n(e)){if(t=$e(e))return t;e=[e]}return Xe(e)}function rt(){return Rr(Ni)}function it(e){var t,n=e._a;return n&&-2===f(e).overflow&&(t=n[li]<0||n[li]>11?li:n[ci]<1||n[ci]>ue(n[ui],n[li])?ci:n[pi]<0||n[pi]>24||24===n[pi]&&(0!==n[di]||0!==n[fi]||0!==n[hi])?pi:n[di]<0||n[di]>59?di:n[fi]<0||n[fi]>59?fi:n[hi]<0||n[hi]>999?hi:-1,f(e)._overflowDayOfYear&&(t<ui||t>ci)&&(t=ci),f(e)._overflowWeeks&&-1===t&&(t=mi),f(e)._overflowWeekday&&-1===t&&(t=gi),f(e).overflow=t),e}function ot(e,t,n){return null!=e?e:null!=t?t:n}function at(e){var n=new Date(t.now());return e._useUTC?[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()]:[n.getFullYear(),n.getMonth(),n.getDate()]}function st(e){var t,n,r,i,o,a=[];if(!e._d){for(r=at(e),e._w&&null==e._a[ci]&&null==e._a[li]&&ut(e),null!=e._dayOfYear&&(o=ot(e._a[ui],r[ui]),(e._dayOfYear>Q(o)||0===e._dayOfYear)&&(f(e)._overflowDayOfYear=!0),n=be(o,0,e._dayOfYear),e._a[li]=n.getUTCMonth(),e._a[ci]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=a[t]=r[t];for(;t<7;t++)e._a[t]=a[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[pi]&&0===e._a[di]&&0===e._a[fi]&&0===e._a[hi]&&(e._nextDay=!0,e._a[pi]=0),e._d=(e._useUTC?be:_e).apply(null,a),i=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[pi]=24),e._w&&void 0!==e._w.d&&e._w.d!==i&&(f(e).weekdayMismatch=!0)}}function ut(e){var t,n,r,i,o,a,s,u;if(t=e._w,null!=t.GG||null!=t.W||null!=t.E)o=1,a=4,n=ot(t.GG,e._a[ui],Se(Et(),1,4).year),r=ot(t.W,1),((i=ot(t.E,1))<1||i>7)&&(u=!0);else{o=e._locale._week.dow,a=e._locale._week.doy;var l=Se(Et(),o,a);n=ot(t.gg,e._a[ui],l.year),r=ot(t.w,l.week),null!=t.d?((i=t.d)<0||i>6)&&(u=!0):null!=t.e?(i=t.e+o,(t.e<0||t.e>6)&&(u=!0)):i=o}r<1||r>ke(n,o,a)?f(e)._overflowWeeks=!0:null!=u?f(e)._overflowWeekday=!0:(s=we(n,r,i,o,a),e._a[ui]=s.year,e._dayOfYear=s.dayOfYear)}function lt(e){var t,n,r,i,o,a,s=e._i,u=zi.exec(s)||ji.exec(s);if(u){for(f(e).iso=!0,t=0,n=Bi.length;t<n;t++)if(Bi[t][1].exec(u[1])){i=Bi[t][0],r=!1!==Bi[t][2];break}if(null==i)return void(e._isValid=!1);if(u[3]){for(t=0,n=Fi.length;t<n;t++)if(Fi[t][1].exec(u[3])){o=(u[2]||" ")+Fi[t][0];break}if(null==o)return void(e._isValid=!1)}if(!r&&null!=o)return void(e._isValid=!1);if(u[4]){if(!Hi.exec(u[4]))return void(e._isValid=!1);a="Z"}e._f=i+(o||"")+(a||""),yt(e)}else e._isValid=!1}function ct(e,t,n,r,i,o){var a=[pt(e),xi.indexOf(t),parseInt(n,10),parseInt(r,10),parseInt(i,10)];return o&&a.push(parseInt(o,10)),a}function pt(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function dt(e){return e.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function ft(e,t,n){return!e||Ti.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(f(n).weekdayMismatch=!0,n._isValid=!1,!1)}function ht(e,t,n){if(e)return Yi[e];if(t)return 0;var r=parseInt(n,10),i=r%100;return(r-i)/100*60+i}function mt(e){var t=Vi.exec(dt(e._i));if(t){var n=ct(t[4],t[3],t[2],t[5],t[6],t[7]);if(!ft(t[1],n,e))return;e._a=n,e._tzm=ht(t[8],t[9],t[10]),e._d=be.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),f(e).rfc2822=!0}else e._isValid=!1}function gt(e){var n=Ui.exec(e._i);if(null!==n)return void(e._d=new Date(+n[1]));lt(e),!1===e._isValid&&(delete e._isValid,mt(e),!1===e._isValid&&(delete e._isValid,t.createFromInputFallback(e)))}function yt(e){if(e._f===t.ISO_8601)return void lt(e);if(e._f===t.RFC_2822)return void mt(e);e._a=[],f(e).empty=!0;var n,r,i,o,a,s=""+e._i,u=s.length,l=0;for(i=W(e._f,e._locale).match(Hr)||[],n=0;n<i.length;n++)o=i[n],r=(s.match(G(o,e))||[])[0],r&&(a=s.substr(0,s.indexOf(r)),a.length>0&&f(e).unusedInput.push(a),s=s.slice(s.indexOf(r)+r.length),l+=r.length),Ur[o]?(r?f(e).empty=!1:f(e).unusedTokens.push(o),$(o,r,e)):e._strict&&!r&&f(e).unusedTokens.push(o);f(e).charsLeftOver=u-l,s.length>0&&f(e).unusedInput.push(s),e._a[pi]<=12&&!0===f(e).bigHour&&e._a[pi]>0&&(f(e).bigHour=void 0),f(e).parsedDateParts=e._a.slice(0),f(e).meridiem=e._meridiem,e._a[pi]=vt(e._locale,e._a[pi],e._meridiem),st(e),it(e)}function vt(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?(r=e.isPM(n),r&&t<12&&(t+=12),r||12!==t||(t=0),t):t}function _t(e){var t,n,r,i,o;if(0===e._f.length)return f(e).invalidFormat=!0,void(e._d=new Date(NaN));for(i=0;i<e._f.length;i++)o=0,t=g({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],yt(t),h(t)&&(o+=f(t).charsLeftOver,o+=10*f(t).unusedTokens.length,f(t).score=o,(null==r||o<r)&&(r=o,n=t));c(e,n||t)}function bt(e){if(!e._d){var t=z(e._i);e._a=u([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),st(e)}}function xt(e){var t=new y(it(wt(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function wt(e){var t=e._i,r=e._f;return e._locale=e._locale||nt(e._l),null===t||void 0===r&&""===t?m({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),v(t)?new y(it(t)):(s(t)?e._d=t:n(r)?_t(e):r?yt(e):St(e),h(e)||(e._d=null),e))}function St(e){var i=e._i;o(i)?e._d=new Date(t.now()):s(i)?e._d=new Date(i.valueOf()):"string"==typeof i?gt(e):n(i)?(e._a=u(i.slice(0),function(e){return parseInt(e,10)}),st(e)):r(i)?bt(e):a(i)?e._d=new Date(i):t.createFromInputFallback(e)}function kt(e,t,o,a,s){var u={};return!0!==o&&!1!==o||(a=o,o=void 0),(r(e)&&i(e)||n(e)&&0===e.length)&&(e=void 0),u._isAMomentObject=!0,u._useUTC=u._isUTC=s,u._l=o,u._i=e,u._f=t,u._strict=a,xt(u)}function Et(e,t,n,r){return kt(e,t,n,r,!1)}function Tt(e,t){var r,i;if(1===t.length&&n(t[0])&&(t=t[0]),!t.length)return Et();for(r=t[0],i=1;i<t.length;++i)t[i].isValid()&&!t[i][e](r)||(r=t[i]);return r}function Mt(){return Tt("isBefore",[].slice.call(arguments,0))}function Ct(){return Tt("isAfter",[].slice.call(arguments,0))}function Ot(e){for(var t in e)if(-1===yi.call(Zi,t)||null!=e[t]&&isNaN(e[t]))return!1;for(var n=!1,r=0;r<Zi.length;++r)if(e[Zi[r]]){if(n)return!1;parseFloat(e[Zi[r]])!==b(e[Zi[r]])&&(n=!0)}return!0}function At(){return this._isValid}function Pt(){return Jt(NaN)}function Rt(e){var t=z(e),n=t.year||0,r=t.quarter||0,i=t.month||0,o=t.week||0,a=t.day||0,s=t.hour||0,u=t.minute||0,l=t.second||0,c=t.millisecond||0;this._isValid=Ot(t),this._milliseconds=+c+1e3*l+6e4*u+1e3*s*60*60,this._days=+a+7*o,this._months=+i+3*r+12*n,this._data={},this._locale=nt(),this._bubble()}function Dt(e){return e instanceof Rt}function It(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Nt(e,t){F(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+B(~~(e/60),2)+t+B(~~e%60,2)})}function Lt(e,t){var n=(t||"").match(e);if(null===n)return null;var r=n[n.length-1]||[],i=(r+"").match(Ki)||["-",0,0],o=60*i[1]+b(i[2]);return 0===o?0:"+"===i[0]?o:-o}function zt(e,n){var r,i;return n._isUTC?(r=n.clone(),i=(v(e)||s(e)?e.valueOf():Et(e).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+i),t.updateOffset(r,!1),r):Et(e).local()}function jt(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Ht(e,n,r){var i,o=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=Lt(ri,e)))return this}else Math.abs(e)<16&&!r&&(e*=60);return!this._isUTC&&n&&(i=jt(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),o!==e&&(!n||this._changeInProgress?tn(this,Jt(e-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:jt(this)}function Bt(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Ft(e){return this.utcOffset(0,e)}function Ut(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(jt(this),"m")),this}function Vt(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=Lt(ni,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function Yt(e){return!!this.isValid()&&(e=e?Et(e).utcOffset():0,(this.utcOffset()-e)%60==0)}function Wt(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function qt(){if(!o(this._isDSTShifted))return this._isDSTShifted;var e={};if(g(e,this),e=wt(e),e._a){var t=e._isUTC?p(e._a):Et(e._a);this._isDSTShifted=this.isValid()&&x(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Gt(){return!!this.isValid()&&!this._isUTC}function Zt(){return!!this.isValid()&&this._isUTC}function Kt(){return!!this.isValid()&&this._isUTC&&0===this._offset}function Jt(e,t){var n,r,i,o=e,s=null;return Dt(e)?o={ms:e._milliseconds,d:e._days,M:e._months}:a(e)?(o={},t?o[t]=e:o.milliseconds=e):(s=Ji.exec(e))?(n="-"===s[1]?-1:1,o={y:0,d:b(s[ci])*n,h:b(s[pi])*n,m:b(s[di])*n,s:b(s[fi])*n,ms:b(It(1e3*s[hi]))*n}):(s=Xi.exec(e))?(n="-"===s[1]?-1:(s[1],1),o={y:Xt(s[2],n),M:Xt(s[3],n),w:Xt(s[4],n),d:Xt(s[5],n),h:Xt(s[6],n),m:Xt(s[7],n),s:Xt(s[8],n)}):null==o?o={}:"object"==typeof o&&("from"in o||"to"in o)&&(i=Qt(Et(o.from),Et(o.to)),o={},o.ms=i.milliseconds,o.M=i.months),r=new Rt(o),Dt(e)&&l(e,"_locale")&&(r._locale=e._locale),r}function Xt(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function $t(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Qt(e,t){var n;return e.isValid()&&t.isValid()?(t=zt(t,e),e.isBefore(t)?n=$t(e,t):(n=$t(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function en(e,t){return function(n,r){var i,o;return null===r||isNaN(+r)||(k(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=n,n=r,r=o),n="string"==typeof n?+n:n,i=Jt(n,r),tn(this,i,e),this}}function tn(e,n,r,i){var o=n._milliseconds,a=It(n._days),s=It(n._months);e.isValid()&&(i=null==i||i,s&&fe(e,re(e,"Month")+s*r),a&&ie(e,"Date",re(e,"Date")+a*r),o&&e._d.setTime(e._d.valueOf()+o*r),i&&t.updateOffset(e,a||s))}function nn(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function rn(e,n){var r=e||Et(),i=zt(r,this).startOf("day"),o=t.calendarFormat(this,i)||"sameElse",a=n&&(E(n[o])?n[o].call(this,r):n[o]);return this.format(a||this.localeData().calendar(o,this,Et(r)))}function on(){return new y(this)}function an(e,t){var n=v(e)?e:Et(e);return!(!this.isValid()||!n.isValid())&&(t=L(o(t)?"millisecond":t),"millisecond"===t?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())}function sn(e,t){var n=v(e)?e:Et(e);return!(!this.isValid()||!n.isValid())&&(t=L(o(t)?"millisecond":t),"millisecond"===t?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())}function un(e,t,n,r){return r=r||"()",("("===r[0]?this.isAfter(e,n):!this.isBefore(e,n))&&(")"===r[1]?this.isBefore(t,n):!this.isAfter(t,n))}function ln(e,t){var n,r=v(e)?e:Et(e);return!(!this.isValid()||!r.isValid())&&(t=L(t||"millisecond"),"millisecond"===t?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))}function cn(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function pn(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function dn(e,t,n){var r,i,o;if(!this.isValid())return NaN;if(r=zt(e,this),!r.isValid())return NaN;switch(i=6e4*(r.utcOffset()-this.utcOffset()),t=L(t)){case"year":o=fn(this,r)/12;break;case"month":o=fn(this,r);break;case"quarter":o=fn(this,r)/3;break;case"second":o=(this-r)/1e3;break;case"minute":o=(this-r)/6e4;break;case"hour":o=(this-r)/36e5;break;case"day":o=(this-r-i)/864e5;break;case"week":o=(this-r-i)/6048e5;break;default:o=this-r}return n?o:_(o)}function fn(e,t){var n,r,i=12*(t.year()-e.year())+(t.month()-e.month()),o=e.clone().add(i,"months");return t-o<0?(n=e.clone().add(i-1,"months"),r=(t-o)/(o-n)):(n=e.clone().add(i+1,"months"),r=(t-o)/(n-o)),-(i+r)||0}function hn(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function mn(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?Y(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):E(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",Y(n,"Z")):Y(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function gn(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var n="["+e+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i=t+'[")]';return this.format(n+r+"-MM-DD[T]HH:mm:ss.SSS"+i)}function yn(e){e||(e=this.isUtc()?t.defaultFormatUtc:t.defaultFormat);var n=Y(this,e);return this.localeData().postformat(n)}function vn(e,t){return this.isValid()&&(v(e)&&e.isValid()||Et(e).isValid())?Jt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function _n(e){return this.from(Et(),e)}function bn(e,t){return this.isValid()&&(v(e)&&e.isValid()||Et(e).isValid())?Jt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function xn(e){return this.to(Et(),e)}function wn(e){var t;return void 0===e?this._locale._abbr:(t=nt(e),null!=t&&(this._locale=t),this)}function Sn(){return this._locale}function kn(e){switch(e=L(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function En(e){return void 0===(e=L(e))||"millisecond"===e?this:("date"===e&&(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))}function Tn(){return this._d.valueOf()-6e4*(this._offset||0)}function Mn(){return Math.floor(this.valueOf()/1e3)}function Cn(){return new Date(this.valueOf())}function On(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function An(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Pn(){return this.isValid()?this.toISOString():null}function Rn(){return h(this)}function Dn(){return c({},f(this))}function In(){return f(this).overflow}function Nn(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Ln(e,t){F(0,[e,e.length],0,t)}function zn(e){return Fn.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function jn(e){return Fn.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Hn(){return ke(this.year(),1,4)}function Bn(){var e=this.localeData()._week;return ke(this.year(),e.dow,e.doy)}function Fn(e,t,n,r,i){var o;return null==e?Se(this,r,i).year:(o=ke(e,r,i),t>o&&(t=o),Un.call(this,e,t,n,r,i))}function Un(e,t,n,r,i){var o=we(e,t,n,r,i),a=be(o.year,0,o.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}function Vn(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function Yn(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function Wn(e,t){t[hi]=b(1e3*("0."+e))}function qn(){return this._isUTC?"UTC":""}function Gn(){return this._isUTC?"Coordinated Universal Time":""}function Zn(e){return Et(1e3*e)}function Kn(){return Et.apply(null,arguments).parseZone()}function Jn(e){return e}function Xn(e,t,n,r){var i=nt(),o=p().set(r,t);return i[n](o,e)}function $n(e,t,n){if(a(e)&&(t=e,e=void 0),e=e||"",null!=t)return Xn(e,t,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=Xn(e,r,n,"month");return i}function Qn(e,t,n,r){"boolean"==typeof e?(a(t)&&(n=t,t=void 0),t=t||""):(t=e,n=t,e=!1,a(t)&&(n=t,t=void 0),t=t||"");var i=nt(),o=e?i._week.dow:0;if(null!=n)return Xn(t,(n+o)%7,r,"day");var s,u=[];for(s=0;s<7;s++)u[s]=Xn(t,(s+o)%7,r,"day");return u}function er(e,t){return $n(e,t,"months")}function tr(e,t){return $n(e,t,"monthsShort")}function nr(e,t,n){return Qn(e,t,n,"weekdays")}function rr(e,t,n){return Qn(e,t,n,"weekdaysShort")}function ir(e,t,n){return Qn(e,t,n,"weekdaysMin")}function or(){var e=this._data;return this._milliseconds=uo(this._milliseconds),this._days=uo(this._days),this._months=uo(this._months),e.milliseconds=uo(e.milliseconds),e.seconds=uo(e.seconds),e.minutes=uo(e.minutes),e.hours=uo(e.hours),e.months=uo(e.months),e.years=uo(e.years),this}function ar(e,t,n,r){var i=Jt(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function sr(e,t){return ar(this,e,t,1)}function ur(e,t){return ar(this,e,t,-1)}function lr(e){return e<0?Math.floor(e):Math.ceil(e)}function cr(){var e,t,n,r,i,o=this._milliseconds,a=this._days,s=this._months,u=this._data;return o>=0&&a>=0&&s>=0||o<=0&&a<=0&&s<=0||(o+=864e5*lr(dr(s)+a),a=0,s=0),u.milliseconds=o%1e3,e=_(o/1e3),u.seconds=e%60,t=_(e/60),u.minutes=t%60,n=_(t/60),u.hours=n%24,a+=_(n/24),i=_(pr(a)),s+=i,a-=lr(dr(i)),r=_(s/12),s%=12,u.days=a,u.months=s,u.years=r,this}function pr(e){return 4800*e/146097}function dr(e){return 146097*e/4800}function fr(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;if("month"===(e=L(e))||"year"===e)return t=this._days+r/864e5,n=this._months+pr(t),"month"===e?n:n/12;switch(t=this._days+Math.round(dr(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}}function hr(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*b(this._months/12):NaN}function mr(e){return function(){return this.as(e)}}function gr(){return Jt(this)}function yr(e){return e=L(e),this.isValid()?this[e+"s"]():NaN}function vr(e){return function(){return this.isValid()?this._data[e]:NaN}}function _r(){return _(this.days()/7)}function br(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function xr(e,t,n){var r=Jt(e).abs(),i=Eo(r.as("s")),o=Eo(r.as("m")),a=Eo(r.as("h")),s=Eo(r.as("d")),u=Eo(r.as("M")),l=Eo(r.as("y")),c=i<=To.ss&&["s",i]||i<To.s&&["ss",i]||o<=1&&["m"]||o<To.m&&["mm",o]||a<=1&&["h"]||a<To.h&&["hh",a]||s<=1&&["d"]||s<To.d&&["dd",s]||u<=1&&["M"]||u<To.M&&["MM",u]||l<=1&&["y"]||["yy",l];return c[2]=t,c[3]=+e>0,c[4]=n,br.apply(null,c)}function wr(e){return void 0===e?Eo:"function"==typeof e&&(Eo=e,!0)}function Sr(e,t){return void 0!==To[e]&&(void 0===t?To[e]:(To[e]=t,"s"===e&&(To.ss=t-1),!0))}function kr(e){if(!this.isValid())return this.localeData().invalidDate();var t=this.localeData(),n=xr(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)}function Er(e){return(e>0)-(e<0)||+e}function Tr(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,r=Mo(this._milliseconds)/1e3,i=Mo(this._days),o=Mo(this._months);e=_(r/60),t=_(e/60),r%=60,e%=60,n=_(o/12),o%=12;var a=n,s=o,u=i,l=t,c=e,p=r?r.toFixed(3).replace(/\.?0+$/,""):"",d=this.asSeconds();if(!d)return"P0D";var f=d<0?"-":"",h=Er(this._months)!==Er(d)?"-":"",m=Er(this._days)!==Er(d)?"-":"",g=Er(this._milliseconds)!==Er(d)?"-":"";return f+"P"+(a?h+a+"Y":"")+(s?h+s+"M":"")+(u?m+u+"D":"")+(l||c||p?"T":"")+(l?g+l+"H":"")+(c?g+c+"M":"")+(p?g+p+"S":"")}var Mr,Cr;Cr=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),n=t.length>>>0,r=0;r<n;r++)if(r in t&&e.call(this,t[r],r,t))return!0;return!1};var Or=t.momentProperties=[],Ar=!1,Pr={};t.suppressDeprecationWarnings=!1,t.deprecationHandler=null;var Rr;Rr=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)l(e,t)&&n.push(t);return n};var Dr={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Ir={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Nr=/\d{1,2}/,Lr={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},zr={},jr={},Hr=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Br=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Fr={},Ur={},Vr=/\d/,Yr=/\d\d/,Wr=/\d{3}/,qr=/\d{4}/,Gr=/[+-]?\d{6}/,Zr=/\d\d?/,Kr=/\d\d\d\d?/,Jr=/\d\d\d\d\d\d?/,Xr=/\d{1,3}/,$r=/\d{1,4}/,Qr=/[+-]?\d{1,6}/,ei=/\d+/,ti=/[+-]?\d+/,ni=/Z|[+-]\d\d:?\d\d/gi,ri=/Z|[+-]\d\d(?::?\d\d)?/gi,ii=/[+-]?\d+(\.\d{1,3})?/,oi=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,ai={},si={},ui=0,li=1,ci=2,pi=3,di=4,fi=5,hi=6,mi=7,gi=8;F("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),F(0,["YY",2],0,function(){return this.year()%100}),F(0,["YYYY",4],0,"year"),F(0,["YYYYY",5],0,"year"),F(0,["YYYYYY",6,!0],0,"year"),N("year","y"),j("year",1),q("Y",ti),q("YY",Zr,Yr),q("YYYY",$r,qr),q("YYYYY",Qr,Gr),q("YYYYYY",Qr,Gr),J(["YYYYY","YYYYYY"],ui),J("YYYY",function(e,n){n[ui]=2===e.length?t.parseTwoDigitYear(e):b(e)}),J("YY",function(e,n){n[ui]=t.parseTwoDigitYear(e)}),J("Y",function(e,t){t[ui]=parseInt(e,10)}),t.parseTwoDigitYear=function(e){return b(e)+(b(e)>68?1900:2e3)};var yi,vi=ne("FullYear",!0);yi=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},F("M",["MM",2],"Mo",function(){return this.month()+1}),F("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),F("MMMM",0,0,function(e){return this.localeData().months(this,e)}),N("month","M"),j("month",8),q("M",Zr),q("MM",Zr,Yr),q("MMM",function(e,t){return t.monthsShortRegex(e)}),q("MMMM",function(e,t){return t.monthsRegex(e)}),J(["M","MM"],function(e,t){t[li]=b(e)-1}),J(["MMM","MMMM"],function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);null!=i?t[li]=i:f(n).invalidMonth=e});var _i=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,bi="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),xi="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),wi=oi,Si=oi;F("w",["ww",2],"wo","week"),F("W",["WW",2],"Wo","isoWeek"),N("week","w"),N("isoWeek","W"),j("week",5),j("isoWeek",5),q("w",Zr),q("ww",Zr,Yr),q("W",Zr),q("WW",Zr,Yr),X(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=b(e)});var ki={dow:0,doy:6};F("d",0,"do","day"),F("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),F("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),F("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),F("e",0,0,"weekday"),F("E",0,0,"isoWeekday"),N("day","d"),N("weekday","e"),N("isoWeekday","E"),j("day",11),j("weekday",11),j("isoWeekday",11),q("d",Zr),q("e",Zr),q("E",Zr),q("dd",function(e,t){return t.weekdaysMinRegex(e)}),q("ddd",function(e,t){return t.weekdaysShortRegex(e)}),q("dddd",function(e,t){return t.weekdaysRegex(e)}),X(["dd","ddd","dddd"],function(e,t,n,r){var i=n._locale.weekdaysParse(e,r,n._strict);null!=i?t.d=i:f(n).invalidWeekday=e}),X(["d","e","E"],function(e,t,n,r){t[r]=b(e)});var Ei="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ti="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Mi="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Ci=oi,Oi=oi,Ai=oi;F("H",["HH",2],0,"hour"),F("h",["hh",2],0,Ye),F("k",["kk",2],0,We),F("hmm",0,0,function(){return""+Ye.apply(this)+B(this.minutes(),2)}),F("hmmss",0,0,function(){return""+Ye.apply(this)+B(this.minutes(),2)+B(this.seconds(),2)}),F("Hmm",0,0,function(){return""+this.hours()+B(this.minutes(),2)}),F("Hmmss",0,0,function(){return""+this.hours()+B(this.minutes(),2)+B(this.seconds(),2)}),qe("a",!0),qe("A",!1),N("hour","h"),j("hour",13),q("a",Ge),q("A",Ge),q("H",Zr),q("h",Zr),q("k",Zr),q("HH",Zr,Yr),q("hh",Zr,Yr),q("kk",Zr,Yr),q("hmm",Kr),q("hmmss",Jr),q("Hmm",Kr),q("Hmmss",Jr),J(["H","HH"],pi),J(["k","kk"],function(e,t,n){var r=b(e);t[pi]=24===r?0:r}),J(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),J(["h","hh"],function(e,t,n){t[pi]=b(e),f(n).bigHour=!0}),J("hmm",function(e,t,n){var r=e.length-2;t[pi]=b(e.substr(0,r)),t[di]=b(e.substr(r)),f(n).bigHour=!0}),J("hmmss",function(e,t,n){var r=e.length-4,i=e.length-2;t[pi]=b(e.substr(0,r)),t[di]=b(e.substr(r,2)),t[fi]=b(e.substr(i)),f(n).bigHour=!0}),J("Hmm",function(e,t,n){var r=e.length-2;t[pi]=b(e.substr(0,r)),t[di]=b(e.substr(r))}),J("Hmmss",function(e,t,n){var r=e.length-4,i=e.length-2;t[pi]=b(e.substr(0,r)),t[di]=b(e.substr(r,2)),t[fi]=b(e.substr(i))});var Pi,Ri=/[ap]\.?m?\.?/i,Di=ne("Hours",!0),Ii={calendar:Dr,longDateFormat:Ir,invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:Nr,relativeTime:Lr,months:bi,monthsShort:xi,week:ki,weekdays:Ei,weekdaysMin:Mi,weekdaysShort:Ti,meridiemParse:Ri},Ni={},Li={},zi=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ji=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Hi=/Z|[+-]\d\d(?::?\d\d)?/,Bi=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Fi=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Ui=/^\/?Date\((\-?\d+)/i,Vi=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Yi={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};t.createFromInputFallback=S("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),t.ISO_8601=function(){},t.RFC_2822=function(){};var Wi=S("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Et.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:m()}),qi=S("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Et.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:m()}),Gi=function(){return Date.now?Date.now():+new Date},Zi=["year","quarter","month","week","day","hour","minute","second","millisecond"];Nt("Z",":"),Nt("ZZ",""),q("Z",ri),q("ZZ",ri),J(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Lt(ri,e)});var Ki=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var Ji=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Xi=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;Jt.fn=Rt.prototype,Jt.invalid=Pt;var $i=en(1,"add"),Qi=en(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var eo=S("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});F(0,["gg",2],0,function(){return this.weekYear()%100}),F(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Ln("gggg","weekYear"),Ln("ggggg","weekYear"),Ln("GGGG","isoWeekYear"),Ln("GGGGG","isoWeekYear"),N("weekYear","gg"),N("isoWeekYear","GG"),j("weekYear",1),j("isoWeekYear",1),q("G",ti),q("g",ti),q("GG",Zr,Yr),q("gg",Zr,Yr),q("GGGG",$r,qr),q("gggg",$r,qr),q("GGGGG",Qr,Gr),q("ggggg",Qr,Gr),X(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=b(e)}),X(["gg","GG"],function(e,n,r,i){n[i]=t.parseTwoDigitYear(e)}),F("Q",0,"Qo","quarter"),N("quarter","Q"),j("quarter",7),q("Q",Vr),J("Q",function(e,t){t[li]=3*(b(e)-1)}),F("D",["DD",2],"Do","date"),N("date","D"),j("date",9),q("D",Zr),q("DD",Zr,Yr),q("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),J(["D","DD"],ci),J("Do",function(e,t){t[ci]=b(e.match(Zr)[0])});var to=ne("Date",!0);F("DDD",["DDDD",3],"DDDo","dayOfYear"),N("dayOfYear","DDD"),j("dayOfYear",4),q("DDD",Xr),q("DDDD",Wr),J(["DDD","DDDD"],function(e,t,n){n._dayOfYear=b(e)}),F("m",["mm",2],0,"minute"),N("minute","m"),j("minute",14),q("m",Zr),q("mm",Zr,Yr),J(["m","mm"],di);var no=ne("Minutes",!1);F("s",["ss",2],0,"second"),N("second","s"),j("second",15),q("s",Zr),q("ss",Zr,Yr),J(["s","ss"],fi);var ro=ne("Seconds",!1);F("S",0,0,function(){return~~(this.millisecond()/100)}),F(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),F(0,["SSS",3],0,"millisecond"),F(0,["SSSS",4],0,function(){return 10*this.millisecond()}),F(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),F(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),F(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),F(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),F(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),N("millisecond","ms"),j("millisecond",16),q("S",Xr,Vr),q("SS",Xr,Yr),q("SSS",Xr,Wr);var io;for(io="SSSS";io.length<=9;io+="S")q(io,ei);for(io="S";io.length<=9;io+="S")J(io,Wn);var oo=ne("Milliseconds",!1);F("z",0,0,"zoneAbbr"),F("zz",0,0,"zoneName");var ao=y.prototype;ao.add=$i,ao.calendar=rn,ao.clone=on,ao.diff=dn,ao.endOf=En,ao.format=yn,ao.from=vn,ao.fromNow=_n,ao.to=bn,ao.toNow=xn,ao.get=oe,ao.invalidAt=In,ao.isAfter=an,ao.isBefore=sn,ao.isBetween=un,ao.isSame=ln,ao.isSameOrAfter=cn,ao.isSameOrBefore=pn,ao.isValid=Rn,ao.lang=eo,ao.locale=wn,ao.localeData=Sn,ao.max=qi,ao.min=Wi,ao.parsingFlags=Dn,ao.set=ae,ao.startOf=kn,ao.subtract=Qi,ao.toArray=On,ao.toObject=An,ao.toDate=Cn,ao.toISOString=mn,ao.inspect=gn,ao.toJSON=Pn,ao.toString=hn,ao.unix=Mn,ao.valueOf=Tn,ao.creationData=Nn,ao.year=vi,ao.isLeapYear=te,ao.weekYear=zn,ao.isoWeekYear=jn,ao.quarter=ao.quarters=Vn,ao.month=he,ao.daysInMonth=me,ao.week=ao.weeks=Ce,ao.isoWeek=ao.isoWeeks=Oe,ao.weeksInYear=Bn,ao.isoWeeksInYear=Hn,ao.date=to,ao.day=ao.days=ze,ao.weekday=je,ao.isoWeekday=He,ao.dayOfYear=Yn,ao.hour=ao.hours=Di,ao.minute=ao.minutes=no,ao.second=ao.seconds=ro,ao.millisecond=ao.milliseconds=oo,ao.utcOffset=Ht,ao.utc=Ft,ao.local=Ut,ao.parseZone=Vt,ao.hasAlignedHourOffset=Yt,ao.isDST=Wt,ao.isLocal=Gt,ao.isUtcOffset=Zt,ao.isUtc=Kt,ao.isUTC=Kt,ao.zoneAbbr=qn,ao.zoneName=Gn,ao.dates=S("dates accessor is deprecated. Use date instead.",to),ao.months=S("months accessor is deprecated. Use month instead",he),ao.years=S("years accessor is deprecated. Use year instead",vi),ao.zone=S("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Bt),ao.isDSTShifted=S("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",qt);var so=C.prototype;so.calendar=O,so.longDateFormat=A,so.invalidDate=P,so.ordinal=R,so.preparse=Jn,so.postformat=Jn,so.relativeTime=D,so.pastFuture=I,so.set=T,so.months=le,so.monthsShort=ce,so.monthsParse=de,so.monthsRegex=ye,so.monthsShortRegex=ge,so.week=Ee,so.firstDayOfYear=Me,so.firstDayOfWeek=Te,so.weekdays=Re,so.weekdaysMin=Ie,so.weekdaysShort=De,so.weekdaysParse=Le,so.weekdaysRegex=Be,so.weekdaysShortRegex=Fe,so.weekdaysMinRegex=Ue,so.isPM=Ze,so.meridiem=Ke,Qe("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===b(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),t.lang=S("moment.lang is deprecated. Use moment.locale instead.",Qe),t.langData=S("moment.langData is deprecated. Use moment.localeData instead.",nt);var uo=Math.abs,lo=mr("ms"),co=mr("s"),po=mr("m"),fo=mr("h"),ho=mr("d"),mo=mr("w"),go=mr("M"),yo=mr("y"),vo=vr("milliseconds"),_o=vr("seconds"),bo=vr("minutes"),xo=vr("hours"),wo=vr("days"),So=vr("months"),ko=vr("years"),Eo=Math.round,To={ss:44,s:45,m:45,h:22,d:26,M:11},Mo=Math.abs,Co=Rt.prototype;return Co.isValid=At,Co.abs=or,Co.add=sr,Co.subtract=ur,Co.as=fr,Co.asMilliseconds=lo,Co.asSeconds=co,Co.asMinutes=po,Co.asHours=fo,Co.asDays=ho,Co.asWeeks=mo,Co.asMonths=go,Co.asYears=yo,Co.valueOf=hr,Co._bubble=cr,Co.clone=gr,Co.get=yr,Co.milliseconds=vo,Co.seconds=_o,Co.minutes=bo,Co.hours=xo,Co.days=wo,Co.weeks=_r,Co.months=So,Co.years=ko,Co.humanize=kr,Co.toISOString=Tr,Co.toString=Tr,Co.toJSON=Tr,Co.locale=wn,Co.localeData=Sn,Co.toIsoString=S("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Tr),Co.lang=eo,F("X",0,0,"unix"),F("x",0,0,"valueOf"),q("x",ti),q("X",ii),J("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),J("x",function(e,t,n){n._d=new Date(b(e))}),t.version="2.22.2",function(e){Mr=e}(Et),t.fn=ao,t.min=Mt,t.max=Ct,t.now=Gi,t.utc=p,t.unix=Zn,t.months=er,t.isDate=s,t.locale=Qe,t.invalid=m,t.duration=Jt,t.isMoment=v,t.weekdays=nr,t.parseZone=Kn,t.localeData=nt,t.isDuration=Dt,t.monthsShort=tr,t.weekdaysMin=ir,t.defineLocale=et,t.updateLocale=tt,t.locales=rt,t.weekdaysShort=rr,t.normalizeUnits=L,t.relativeTimeRounding=wr,t.relativeTimeThreshold=Sr,t.calendarFormat=nn,t.prototype=ao,t.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"},t}()}()}).call(t,n(227)(e))},,,function(e,t,n){e.exports=n.p+"apps/roomkey/header/img/logo-roomkey-white.svg"},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(16),a=i(o).default,s=n(1),u=i(s).default,l=n(2),c=i(l).default,p=n(3),d=i(p).default,f=n(0),h=f.Component,m=n(172),g=m.container,y=m.link,v=n(14),_=i(v).default,b=n(173),x=i(b).default,w=n(174),S=i(w).default,k=n(175),E=i(k).default,T=function(e){function t(){return u(this,t),c(this,e.apply(this,arguments))}return d(t,e),t.prototype.render=function(e){var t=e.parentEvent;return r("div",{className:g},r("div",{className:y},r(_,a({parentEvent:t},{href:"https://www.facebook.com/RoomKey/",element:"footer-link-facebook",target:"_blank"}),r("img",{src:x,alt:"Facebook"}))),r("div",{className:y},r(_,a({parentEvent:t},{href:"https://www.instagram.com/roomkeytravels/",element:"footer-link-instagram",target:"_blank"}),r("img",{src:S,alt:"Instagram"}))),r("div",{className:y},r(_,a({parentEvent:t},{href:"https://twitter.com/roomkeytravels",element:"footer-link-twitter",target:"_blank"}),r("img",{src:E,alt:"Twitter"}))))},t}(h);t.default=T,e.exports=t.default}).call(t,n(0).h)},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=n(176),h=f.copyright,m=function(e){function t(){return a(this,t),u(this,e.apply(this,arguments))}return c(t,e),t.prototype.render=function(){return r("div",{className:h},"Room Key © ",(new Date).getFullYear())},t}(d);t.default=m,e.exports=t.default}).call(t,n(0).h)},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(16),a=i(o).default,s=n(1),u=i(s).default,l=n(2),c=i(l).default,p=n(3),d=i(p).default,f=n(0),h=f.Component,m=n(177),g=m.container,y=m.link,v=n(14),_=i(v).default,b=function(e){function t(){return u(this,t),c(this,e.apply(this,arguments))}return d(t,e),t.prototype.render=function(e){var t=e.parentEvent;return r("div",{className:g},r("div",{className:y},r(_,a({parentEvent:t,useRouter:!1},{href:"/",element:"footer-link-home",id:"footer-link-home"}),"Home")),r("div",{className:y},r(_,a({parentEvent:t,useRouter:!1},{href:"/about",element:"footer-link-about",id:"footer-link-about"}),"About Us")),r("div",{className:y},r(_,a({parentEvent:t,useRouter:!1},{href:"/careers",element:"footer-link-careers",id:"footer-link-careers"}),"Careers")),r("div",{className:y},r(_,a({parentEvent:t,useRouter:!1},{href:"/termsofuse",element:"footer-link-terms",id:"footer-link-terms"}),"Terms of Use")),r("div",{className:y},r(_,a({parentEvent:t,useRouter:!1},{href:"/privacystatement",element:"footer-link-privacy",id:"footer-link-privacy"}),"Privacy Statement")),r("div",{className:y},r(_,a({parentEvent:t,useRouter:!1},{href:"/scout",element:"footer-link-browser-extension",id:"footer-link-browser-extension"}),"Download Scout")))},t}(h);t.default=b,e.exports=t.default}).call(t,n(0).h)},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=n(39),h=i(f).default,m=n(178),g=i(m).default,y=function(e){function t(){return a(this,t),u(this,e.apply(this,arguments))}return c(t,e),t.prototype.handleCountrySelection=function(e){location.assign(e.target.value),e.preventDefault()},t.prototype.render=function(){var e=this;return r("div",{className:g.fakeSelect},r("span",null,"International Sites"),r("select",{className:g.realSelect,onChange:function(t){return e.handleCountrySelection(t)}},r("option",{selected:h("au"),disabled:h("au"),value:"//www.roomkey.com.au"},"Australia"),"}",r("option",{selected:h("ca"),disabled:h("ca"),value:"//www.roomkey.ca"},"Canada"),"}",r("option",{selected:h("nz"),disabled:h("nz"),value:"//www.roomkey.co.nz"},"New Zealand"),"}",r("option",{selected:h("us"),disabled:h("us"),value:"//www.roomkey.com"},"United States"),"}"))},t}(d);t.default=y,e.exports=t.default}).call(t,n(0).h)},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.CurrencySelect=void 0;var i=n(1),o=r(i).default,a=n(2),s=r(a).default,u=n(3),l=r(u).default,c=n(179),p=r(c).default,d=n(0),f=d.Component,h=n(12),m=h.withRouter,g=n(7),y=g.connect,v=n(154),_=r(v).default,b=n(41),x=r(b).default,w=n(183),S=r(w).default,k=p(x).sort(function(e,t){return e=e.name.toLowerCase(),t=t.name.toLowerCase(),e<t?-1:t<e?1:0}),E=["USD","GBP","EUR","CAD","JPY"],T=void 0;T=n(49).assignExistingRatesToHotels;var M=t.CurrencySelect=function(t){function n(e){o(this,n);var r=s(this,t.call(this,e));return r.state={currency:e.currency},r}return l(n,t),n.prototype.componentWillReceiveProps=function(e){var t=e.currency;this.props.currency!==t&&(this.setState({currency:t}),this.props.assignExistingRatesToHotels())},n.prototype.render=function(){var t=this,n=this.state,r=n.redirect,i=n.currency,o=void 0===i?"USD":i;return e("div",{className:S.fakeSelect},e("span",null,x[o].name," (",x[o].symbol,") ",o),e("select",{className:S.realSelect,onChange:function(e){return C(t,e)}},E.map(function(t){return e("option",{selected:t===o,value:t},x[t].name," (",x[t].symbol,") ",t)}),e("option",{disabled:!0}," ----------------------------------------"),"}",k.map(function(t){var n=t.name,r=t.code,i=t.symbol;return e("option",{selected:r===o&&-1===E.indexOf(r),value:r},n," (",i,") ",r)})),r&&e(_,{params:{currency:o},remove:["maxPrice"],push:!0}))},n}(f),C=function(e,t){var n=t.target.value;return e.setState({redirect:!0,currency:n},function(){return e.setState({redirect:!1})})};t.default=m(y(function(e){return{currency:e.get("currency")}},{assignExistingRatesToHotels:T})(M))}).call(t,n(0).h)},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=function(e){function t(){return a(this,t),u(this,e.apply(this,arguments))}return c(t,e),t.prototype.componentDidMount=function(){!function(){var e={},t=[],n=[],r=[],i=document.createElement("script"),o={vid:"hot"};for(var a in o)e[a]=o[a];for(var a in r)t.push(e[r[a]]);e.cid=t.join("|");for(var a in e)n.push(a+"="+encodeURIComponent(e[a]));i.type="text/javascript",i.async=!0,i.src="https://beacon.sojern.com/pixel/p/93422?f_v=v6_js&p_v=1&"+n.join("&"),(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(i)}()},t.prototype.render=function(){return r("img",{style:"display: none",border:"0",height:"1",id:"tapixel",src:"//www.tripadvisor.com/img/cdsi/partner/transparent_pixel-15154-1.gif",width:"1"})},t}(d);t.default=f,e.exports=t.default}).call(t,n(0).h)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateRates=t.setSearchParams=t.loadMoreHotels=t.loadMapHotels=t.setPlace=t.setMapParams=t.reset=t.numHotelsPerFetch=t.SEARCH_RESULTS_SET_IS_LOADING_HOTELS=t.SEARCH_RESULTS_INC_PAGE=t.SEARCH_RESULTS_SET_HOTELS=t.SEARCH_RESULTS_ADD_HOTELS=t.SEARCH_RESULTS_RESET_HOTELS=t.SEARCH_RESULTS_RESET=t.SEARCH_RESULTS_SET_PARAMS=t.SEARCH_RESULTS_SET_PLACE=t.SEARCH_RESULTS_RESET_MAP_PARAMS=t.SEARCH_RESULTS_SET_MAP_PARAMS=void 0;var r=n(4),i=r.fromJS,o=n(197),a=o.fetchPlace,s=n(32),u=s.fetchHotelsInPlace,l=s.searchHotelsByPolygon,c=n(49),p=c.assignExistingRatesToHotels,d=c.fetchRates,f=t.SEARCH_RESULTS_SET_MAP_PARAMS="SEARCH_RESULTS_SET_MAP_PARAMS",h=t.SEARCH_RESULTS_RESET_MAP_PARAMS="SEARCH_RESULTS_RESET_MAP_PARAMS",m=t.SEARCH_RESULTS_SET_PLACE="SEARCH_RESULTS_SET_PLACE",g=t.SEARCH_RESULTS_SET_PARAMS="SEARCH_RESULTS_SET_PARAMS",y=t.SEARCH_RESULTS_RESET="SEARCH_RESULTS_RESET",v=t.SEARCH_RESULTS_RESET_HOTELS="SEARCH_RESULTS_RESET_HOTELS",_=t.SEARCH_RESULTS_ADD_HOTELS="SEARCH_RESULTS_ADD_HOTELS",b=t.SEARCH_RESULTS_SET_HOTELS="SEARCH_RESULTS_SET_HOTELS",x=t.SEARCH_RESULTS_INC_PAGE="SEARCH_RESULTS_INC_PAGE",w=t.SEARCH_RESULTS_SET_IS_LOADING_HOTELS="SEARCH_RESULTS_SET_IS_LOADING_HOTELS",S=t.numHotelsPerFetch=400,k=(t.reset=function(){return{type:y}},t.setMapParams=function(e){return{type:f,mapParams:i(e)}},t.setPlace=function(e,t){return function(n){var r=e.has("lng");n(k(r&&t,e));var i=void 0;["locations","airports"].indexOf(e.get("endpoint"))>=0&&(i=["countryName","countryCode","fullName","hotelCount","name","regionName","lat","lng","geometry"]),n(a(e,{fields:i},k.bind(null,!r&&t)))}},t.loadMapHotels=function(e){return function(t,n){var r=n().get("searchResults"),i={metadata:!0,fields:["name","address","brand","primaryPhoto","userRating","lat","lng"],amenities:r.get("amenities").toJS(),sort:r.get("sort"),brands:r.get("brands").toJS(),currency:n().get("currency"),offset:0,limit:S},o=r.get("maxPrice");o&&(i.rateTo=1.2*o),t(C()),t(l(e,i,T.bind(null,Date.now())))}},t.loadMoreHotels=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,n){e&&t(O()),t({type:x}),n().get("searchResults").get("shouldFetchMoreHotels")&&t(M())}},t.setSearchParams=function(e){return function(t){t(O()),e.brands&&(e.brands=e.brands.sort()),e.amenities&&(e.amenities=e.amenities.sort()),t({type:g,params:i(e)})}},t.updateRates=function(){return function(e,t){e(p()),e(d(t().get("searchResults").get("baseHotels")))}},function(e,t){return function(n){e&&n({type:h}),n({type:m,place:t})}}),E=function(e,t,n){return function(r){r({type:_,hotels:t,metadata:n,moreHotelsToFetch:S<t.size,requestTime:e}),r(d(t.slice(0,S)))}},T=function(e,t,n){return function(r){r({type:b,hotels:t,metadata:n,moreHotelsToFetch:!1,requestTime:e}),r(d(t.slice(0,S)))}},M=function(){return function(e,t){e(C());var n=t().get("searchResults"),r={metadata:!0,fields:["name","address","brand","primaryPhoto","userRating","lat","lng"],offset:n.get("pageToFetch")*S,limit:S+1,amenities:n.get("amenities").toJS(),sort:n.get("sort"),brands:n.get("brands").toJS(),currency:t().get("currency")},i=n.get("maxPrice");i&&(r.rateTo=1.2*i),e(u(n.get("place"),r,E.bind(null,Date.now())))}},C=function(){return{type:w}},O=function(){return{type:v}}},,,,function(e,t){e.exports={container:"_59f6e68d",gutter:"cbe750da"}},function(e,t,n){e.exports=n.p+"apps/roomkey/header/img/chevron-down-white.svg"},function(e,t,n){e.exports=n.p+"apps/roomkey/header/img/chevron-up-white.svg"},function(e,t){e.exports={container:"_6d4b35bd",link:"_82b4ce17"}},function(e,t,n){e.exports=n.p+"components/footer/img/icon-facebook.svg"},function(e,t,n){e.exports=n.p+"components/footer/img/icon-instagram.svg"},function(e,t,n){e.exports=n.p+"components/footer/img/icon-twitter.svg"},function(e,t){e.exports={copyright:"_73983bb3"}},function(e,t){e.exports={link:"_5e817674",container:"ec274edb"}},function(e,t){e.exports={realSelect:"_8099370e",fakeSelect:"b11be32c"}},function(e,t,n){e.exports={default:n(180),__esModule:!0}},function(e,t,n){n(181),e.exports=n(63).Object.values},function(e,t,n){var r=n(69),i=n(182)(!1);r(r.S,"Object",{values:function(e){return i(e)}})},function(e,t,n){var r=n(187),i=n(157),o=n(191).f;e.exports=function(e){return function(t){for(var n,a=i(t),s=r(a),u=s.length,l=0,c=[];u>l;)o.call(a,n=s[l++])&&c.push(e?[n,a[n]]:a[n]);return c}}},function(e,t){e.exports={realSelect:"_4208036e",fakeSelect:"_75ed3b85"}},function(e,t){e.exports={footer:"_6f81efdb",container:"ad8b93b0",about:"_13c6f714",dropdown:"_92c16542",navigation:"ea70fd40"}},,,,,,,,,,,function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SearchResultsLink=void 0;var i=n(6),o=r(i).default,a=n(1),s=r(a).default,u=n(2),l=r(u).default,c=n(3),p=r(c).default,d=n(0),f=d.Component,h=n(4),m=h.Map,g=n(7),y=g.connect,v=n(65),_=v.stringify,b=n(415),x=r(b).default,w=n(76),S=r(w).default,k=n(436),E=r(k).default,T=n(14),M=r(T).default,C=["checkIn","checkOut","rooms","guests","currency","amenities","brands","chains","maxPrice","sort","lng","lat","zoom"],O=function(e){var t=e,n=t.currency,r=t.sort,i=t.place;n==E()&&(e=S(e,"currency")),"popularity-asc"==r&&(e=S(e,"sort")),e=x(e,C);var o=C.reduce(function(t,n){return void 0!==e[n]&&null!==e[n]&&(t[n]=e[n]),t},{});i&&"locations"!=i.get("endpoint")&&(o.query=i.get("fullName")||i.get("name"));var a=_(o,{arrayFormat:"bracket",sort:function(e,t){return C.indexOf(e)>=C.indexOf(t)}});return a?"?"+a:""},A=t.SearchResultsLink=function(t){function n(){return s(this,n),l(this,t.apply(this,arguments))}return p(n,t),n.prototype.render=function(t){t=o({},t.current,t);var n=t,r=n.children,i=n.place,a=n.locationId,s=void 0!==a&&a,u=n.to,l=s?"locations":i&&i.get("endpoint")||"locations",c=s||i&&i.get("id"),p=u?u.pathname:c?"/"+l+"/"+c+"/hotels":null,d=u&&u.search?u.search.replace(/&eventParentId=[^&]+/,""):O(t);return t=o(S(t,["current","place","locationId","checkIn","checkOut","rooms","guests","currency","amenities","brands","chains","maxPrice","sort","lng","lat","zoom"]),{parentOfRender:"search-results",href:p+d}),e(M,t,r)},n}(f);t.default=y(function(e){var t=e.get("searchResults"),n=t?t.toObject():{},r=m(x(n,["amenities","brands","chains","maxPrice","sort"])).toJS(),i=n.mapParams?n.mapParams.toJS():{},a=e.get("stay").toJS(),s=e.get("currency"),u=n.place;return{current:o({place:u},a,{currency:s},r,i)}})(A)}).call(t,n(0).h)},,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.fetchLocation=t.fetchPlace=t.PLACES_POLYGON_UPDATE=t.PLACES_GEOCIRCLE_UPDATE=t.PLACES_AIRPORTS_UPDATE=t.PLACES_LOCATIONS_HAS_BEEN_UPDATED=t.PLACES_LOCATIONS_UPDATE=void 0;var i=n(23),o=r(i).default,a=n(11),s=r(a).default,u=n(4),l=u.fromJS,c=n(21),p=r(c).default,d=n(67),f=d.setError,h=d.SYNC_ERROR,m=t.PLACES_LOCATIONS_UPDATE="PLACES_LOCATIONS_UPDATE",g=t.PLACES_LOCATIONS_HAS_BEEN_UPDATED="PLACES_LOCATIONS_HAS_BEEN_UPDATED",y=t.PLACES_AIRPORTS_UPDATE="PLACES_AIRPORTS_UPDATE",v=t.PLACES_GEOCIRCLE_UPDATE="PLACES_GEOCIRCLE_UPDATE",_=t.PLACES_POLYGON_UPDATE="PLACES_POLYGON_UPDATE",b=(t.fetchPlace=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];return function(r){var i=e.get("endpoint");if("locations"===i)r(b(e,t,n));else if("airports"===i)r(x(e,t,n));else if("geocircles"===i)r(w(e,t,n));else{if("polygons"!==i)throw new Error('Invalid endpoint "'+i+'" supplied to fetchPlace action');r(S(e,t,n))}}},t.fetchLocation=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];return function(r,i){return r(k("locations",e,t,function(e){var t=l(p(e)).set("endpoint","locations");r({type:m,locations:[t]}),"function"==typeof n&&r(n(t)),r({type:g,locations:i().get("places").get("locations")})}))}}),x=function(e,t,n){return function(r){return r(k("airports",e,t,function(e){var t=l(p(e)).set("endpoint","airports");r({type:y,airports:[t]}),"function"==typeof n&&r(n(t))}))}},w=function(e,t,n){return function(t){var r=e.get("id").split(",").map(parseFloat),i=r[0],o=r[1],a=r[2],s=l(E(i,o,a));e=e.merge({lat:i,lng:o,radius:a,geometry:s}).set("endpoint","geocircles"),t({type:v,geocircle:e}),"function"==typeof n&&t(n(e))}},S=function(e,t,n){return function(t){var r=e.get("id").split(",").map(parseFloat),i=r[0],o=r[1],a=r[3],s=r[4],u=l(T(i,o,a,s)),c=(i+s)/2,p=(a+o)/2;e=e.merge({lat:c,lng:p,south:i,west:o,east:a,north:s,geometry:u}).set("endpoint","polygons"),t({type:_,polygon:e}),"function"==typeof n&&t(n(e))}},k=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments[3];return function(i){var a=["id"],u={},l="string"==typeof t?t:"function"==typeof t.get?t.get("id"):t.id,c="/"+e+"/"+l;n.fields&&(u.fields=n.fields.concat(a).reduce(function(e,t){return-1===e.indexOf(t)&&e.push(t),e},[])),s.get(c,u,r,"json").fail(function(t,n,r){i(f(h,"actions/"+e,r,{id:l,url:c,data:o(u),xhr:t}))})}},E=function(e,t,n){return{type:"Circle",radius:n,coordinates:[t,e]}},T=function(e,t,n,r){return{type:"Polygon",coordinates:[[t,e],[n,e],[n,r],[t,r],[t,e]]}}},,,function(e,t,n){n(234),e.exports=n(63).Array.find},,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),o=r(i).default,a=n(38),s=r(a).default,u=n(74),l=r(u).default;t.default=function(e){var t=o({},s(),e),n=l(t);return location.pathname+"?"+n+location.hash},e.exports=t.default},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.LeadLink=t.setAdaraLeadTag=void 0;var i=n(487),o=r(i).default,a=n(1),s=r(a).default,u=n(2),l=r(u).default,c=n(3),p=r(c).default,d=n(0),f=d.Component,h=d.render,m=n(7),g=m.connect,y=n(14),v=r(y).default,_=void 0,b=(t.setAdaraLeadTag=function(e){return _=e},0),x=void 0,w=void 0,S=void 0;x=n(491).MarriottLeadTag,w=n(492),S=n(218).trackCriteoTransaction;var k=t.LeadLink=function(t){function n(e){s(this,n),e.key=e.key||"lead-link-index-"+b++;var r=l(this,t.call(this,e));return r.handleClick=r.handleClick.bind(r),r}return p(n,t),n.prototype.render=function(t){var n=t.hotel,r=t.rate,i=t.children,a=t.className,s=t.element,u=t.events,l=t.style,c=t.id,p=t.parentEvent;r=r||n.rate||n.get&&n.get("rate")&&n.get("rate").toJS();var d=n.brand||n.get&&n.get("brand"),f=d&&(d.code||d.get&&d.get("code")),h=r,m=h.partnerCode,g=h.qualification,y=r.bookingUrl||r.url;return y=o(["/handoff?url="+encodeURIComponent(y),"partnerCode="+r.partnerCode,"brandCode="+(f||"default")],"&"),e(v,{href:y,element:s,className:"lead-link "+(a||""),events:u,target:"_blank",style:l,id:c,eventData:{partnerCode:m,qualification:g,rateId:r.id},parentEvent:p,"data-rate-id":r.id,"data-rate-partner":r.partnerCode,"data-rate-qualification":r.qualification,"data-hide-amount":!r.amount,"data-has-strikethrough":Boolean(r.strikethrough),"data-element":s,"data-event":"partner-link"+(u?" "+u:""),onClick:this.handleClick},i)},n.prototype.handleClick=function(t,n){var r=this.props,i=r.hotel,o=r.referral,a=r.stay,s=r.currency,u=i.get?i.get("udicode"):i.udicode,l="/i"===location.pathname?"interstitial":"roomkey";S({id:n,item:u}),_&&h(e(_,{hotel:i,referral:o,stay:a,currency:s})),"roomkey"===l&&w(),x&&h(e(x,{referral:o}))},n}(f);t.default=g(function(e){return{referral:e.get("referral"),currency:e.get("currency"),stay:e.get("stay")}})(k)}).call(t,n(0).h)},function(e,t,n){e.exports=n.p+"images/roomkey/svg/loading-spin-white.svg"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(238),i=r.getState;t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"big",n=arguments[2],r=n?t+"x"+n:t;return e?i().get("imageUrlRoot")+e.id+r+".jpg":""},e.exports=t.default},,,function(e,t,n){e.exports=n(990)()},,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(39),o=r(i).default,a=n(200),s=r(a).default,u=function(){return s(["us","uk","ca","au","nz"],o)||"us"};t.default=u,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getMinGuests=t.getMaxGuests=t.getMinRooms=t.getMaxRooms=void 0;var i=n(22),o=r(i).default,a=n(4),s=a.Map,u=n(155),l=r(u).default,c=n(64),p=c.omit,d=n(38),f=r(d).default,h=n(203),m=r(h).default,g=n(31),y=g.ROUTING_ROUTE_HAS_CHANGED,v=function(e){return"string"==typeof e&&e.match(/^\d{4}-\d\d-\d\d$/)&&l(e).isValid()},_=t.getMaxRooms=function(e){return e?(e=parseInt(e),e<4?e:4):4},b=(t.getMinRooms=function(e){var t=_(),n=Math.ceil(e/4);return n>t?t:n},t.getMaxGuests=function(e){var t=_();return e=parseInt(e),e>t&&(e=t),4*e}),x=t.getMinGuests=function(e){var t=_();return e>t?t:e},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.checkIn,n=e.checkOut,r=e.rooms,i=e.guests,a=l(l().format("YYYY-MM-DD")),s={checkIn:t,checkOut:n,rooms:r,guests:i};v(t)&&!l(t).isBefore(a)||(t=l().add(2,"weeks").format("YYYY-MM-DD")),v(n)&&!l(n).isSameOrBefore(l(t))||(n=l(t).add(1,"day").format("YYYY-MM-DD"));var u=_();r=parseInt(r||1),(isNaN(r)||r<1)&&(r=1),r>u&&(r=u);var c=b(r),d=x(r);i=parseInt(i||2),(isNaN(i)||i<d)&&(i=Math.max(2,d)),i>c&&(i=c);var f={checkIn:t,checkOut:n,rooms:r,guests:i},h=p(f,function(e,t){return void 0===s[t]||s[t]==e});return o(h).length>0&&(history.replaceState?history.replaceState(history.state,null,m(h)):location.replace(m(h))),f},S=function(){var e=f();return["checkIn","checkOut","rooms","guests"].reduce(function(t,n){return e[n]&&(t[n]=e[n]),t},{})},k=function(){return s(w(S()))};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k();return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).type===y?e.merge(w(S())):e}},,,function(e,t,n){"use strict";var r=n(472)();e.exports=function(e){return e!==r&&null!==e}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.trackCriteoTransaction=t.CriteoTransactionTag=t.CriteoListTag=t.CriteoItemTag=t.CriteoHomeTag=void 0;var i=n(1),o=r(i).default,a=n(2),s=r(a).default,u=n(3),l=r(u).default,c=n(0),p=c.Component,d=n(429),f=r(d).default,h=(t.CriteoHomeTag=function(e){function t(){return o(this,t),s(this,e.apply(this,arguments))}return l(t,e),t.prototype.render=function(){return _(),y.criteo_q.push({event:"viewHome"}),null},t.prototype.shouldComponentUpdate=function(){return!1},t}(p),t.CriteoItemTag=function(e){function t(){return o(this,t),s(this,e.apply(this,arguments))}return l(t,e),t.prototype.render=function(e){var t=e.item;return t!==m&&(_(),y.criteo_q.push({event:"viewItem",item:t}),m=t),null},t.prototype.shouldComponentUpdate=function(e){return e.item!==this.props.item},t}(p),t.CriteoListTag=function(e){function t(){return o(this,t),s(this,e.apply(this,arguments))}return l(t,e),t.prototype.render=function(e){var t=e.items,n=t.toString();return n!==g&&(_(),y.criteo_q.push({event:"viewList",item:t}),g=n),null},t.prototype.shouldComponentUpdate=function(e){return e.items.toString()!==this.props.items.toString()},t}(p),t.CriteoTransactionTag=function(e){function t(){return o(this,t),s(this,e.apply(this,arguments))}return l(t,e),t.prototype.render=function(e){return h(e),null},t}(p),t.trackCriteoTransaction=function(e){var t=e.id,n=e.item,r=e.items;if(n&&r)throw new Error("CriteoTransactionTag Error: Supply either item or items prop, not both");_(),r=(r||[n]).map(function(e){return"string"==typeof e&&(e={id:e}),e.price=e.price||0,e.quantity=e.quantity||1,e}),y.criteo_q.push({event:"trackTransaction",item:r,id:t})}),m=void 0,g=void 0,y=window,v=/iPad/.test(navigator.userAgent)?"t":/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Silk/.test(navigator.userAgent)?"m":"d",_=function(){y.criteo_q||(y.criteo_q=[],y.criteo_q.push({event:"setAccount",account:39906},{event:"setSiteType",type:v}),f("//static.criteo.net/js/ld/ld.js"))}},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.HotelDetailsLink=void 0;var i=n(6),o=r(i).default,a=n(1),s=r(a).default,u=n(2),l=r(u).default,c=n(3),p=r(c).default,d=n(0),f=d.Component,h=n(7),m=h.connect,g=n(37),y=g.hotelDetails,v=n(26),_=v.getHotelAndRateData,b=n(14),x=r(b).default,w=n(76),S=r(w).default,k=t.HotelDetailsLink=function(t){function n(){return s(this,n),l(this,t.apply(this,arguments))}return p(n,t),n.prototype.render=function(t){t=o({},t.current,t);var n=t,r=n.children,i=n.checkIn,a=n.checkOut,s=n.rooms,u=n.guests,l=n.currency,c=n.hotel,p=n.newTab,d=[],f=c.udicode||c.id||c.get("udicode")||c.get("id");i&&d.push("checkIn="+i),a&&d.push("checkOut="+a),s&&d.push("rooms="+s),u&&d.push("guests="+u),l&&d.push("currency="+l);var h=d.join("&");return t=o(S(t,["rooms","guests","checkIn","checkOut","newTab"]),{eventData:_(c),href:y.replace(/:udicode/,f)+(h?"?"+h:""),parentOfRender:"hotel-details"}),p&&(t.target=[f,i,a,u,s].join("_")),e(x,t,r)},n}(f);t.default=m(function(e){var t=e.get("hotelDetails"),n=e.get("stay");return{current:{hotel:t&&t.get("hotel"),currency:e.get("currency"),checkIn:n.get("checkIn"),checkOut:n.get("checkOut"),rooms:n.get("rooms"),guests:n.get("guests")}}})(k)}).call(t,n(0).h)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.deletePriceAlert=t.createPriceAlert=t.getPriceAlerts=t.PRICE_ALERTS_SET=void 0;var i=n(23),o=r(i).default;n(166);var a=n(4),s=a.fromJS,u=n(32),l=u.fetchHotels,c=n(21),p=r(c).default,d=n(41),f=r(d).default,h=t.PRICE_ALERTS_SET="PRICE_ALERTS_SET",m=t.getPriceAlerts=function(e){return function(t){fetch("/users/"+e+"/price-alerts",{method:"GET",credentials:"same-origin"}).then(function(e){return e.json()}).then(function(e){var n=s(e.map(function(e){return{udicode:e.stay.hotel.udicode}}));t(l(n,{fields:["name","primaryPhoto"]},function(t){return{type:h,alerts:s(g(p(e),t))}}))})}},g=function(e,t){return e.map(function(e){e=y(e),e.stay.currencySymbol=f[e.stay.currency].symbol;var n=t.find(function(t){return t.get("udicode")==e.stay.hotel.udicode});return e.stay.hotel.name=n.get("name"),e.stay.hotel.primaryPhoto=n.get("primaryPhoto"),e})},y=function(e){return e.stay.currency="USD",e};t.createPriceAlert=function(e,t,n,r,i){return function(a,s){var u={hotel:{udicode:t},currency:r,checkIn:n.get("checkIn"),checkOut:n.get("checkOut"),guests:n.get("guests"),rooms:n.get("rooms")};fetch("/users/"+e+"/price-alerts",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:o({lowerThresholdRate:Math.floor(.95*i),stay:u})}).then(function(){a(m(s().get("session").get("identity").get("id")))})}},t.deletePriceAlert=function(e,t){return function(n,r){fetch("/users/"+e+"/price-alerts/"+t,{method:"DELETE",credentials:"same-origin"}).then(function(){n(m(r().get("session").get("identity").get("id")))})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(446),i=t.accessToken="pk.eyJ1Ijoicm9vbWtleSIsImEiOiJsdFh0eWJRIn0.PvaocS1okq7q99uwFrSzMA";r.accessToken=i,t.default=r},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=r.Map,o=r.fromJS,a=n(32),s=a.HOTELS_UPDATE,u=window.rkState||{},l=u.hotels;t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l?o(l):i(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.type===s?(i.isMap(t.hotels)?t.hotels:i(t.hotels.reduce(function(e,t){return e[t.get("udicode")]=t,e},{}))).reduce(function(e,t){var n=e.get(t.get("udicode"));return n?n.get("keysFetched")!=t.get("keysFetched")||n.get("isLoadingRates")!=t.get("isLoadingRates")||n.get("rates")&&void 0!==t.get("rates")&&!n.get("rates").equals(t.get("rates"))?e.set(t.get("udicode"),n.merge(t)):e:e.set(t.get("udicode"),t)},e):e},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=r.Map,o=n(197),a=o.PLACES_LOCATIONS_UPDATE,s=o.PLACES_AIRPORTS_UPDATE,u=o.PLACES_GEOCIRCLE_UPDATE,l=o.PLACES_POLYGON_UPDATE,c=i({locations:i(),airports:i(),geocircle:null,polygon:null});t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.type===a?e.set("locations",e.get("locations").mergeDeep(t.locations.reduce(function(e,t){return e[t.get("id")]=t,e},{}))):t.type===s?e.set("airports",e.get("airports").mergeDeep(t.airports.reduce(function(e,t){return e[t.get("id")]=t,e},{}))):t.type===u?e.set("geocircle",t.geocircle):t.type===l?e.set("polygon",t.polygon):e},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=r.fromJS,o=n(49),a=o.RATES_UPDATE,s=o.buildHotelRatesKey,u=function(e){var t=Date.now();return e.filter(function(e){return e.get("expire")>t})},l=function(e,t,n,r){return{expire:Date.now()+e,fields:t,isOnlyLowest:n,isHiddenRevealed:r,rates:[]}};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i({}),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.type===a){var n=t.udicodes,r=t.fields,o=t.isOnlyLowest,c=t.isFulfilled,p=t.isLastPoll,d=t.isHiddenRevealed,f=t.rates.reduce(function(e,n){var i=s(n.udicode,t);return e[i]||(e[i]=l(3e5,r,o,d)),e[i].rates.push(n),e},{});return(c||p)&&n.forEach(function(e){var n=s(e,t);f[n]||(f[n]=l(3e5,r,o,d))}),u(e.merge(i(f)))}return e},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(213),o=r(i).default,a=n(244),s=r(a).default,u=n(31),l=u.ROUTING_ROUTE_HAS_CHANGED,c=n(41),p=r(c).default,d=n(38),f=r(d).default,h=n(203),m=r(h).default,g={us:"USD",uk:"GBP",ca:"CAD",au:"AUD",nz:"NZD"},y=g[o()]||"USD",v=function(e){return e&&3===e.length&&p[e]?e:y},_=function(){var e=f().currency,t=s.get("currency"),n=v(e||t);return(e&&n!=e||!e&&n!=y)&&history.replaceState(history.state,null,m({currency:n})),n};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_();if((arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).type===l){var t=v(f().currency);return s.set("currency",t),t}return e},e.exports=t.default},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){function r(e){return n(i(e))}function i(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var o={"./ABVI.svg":246,"./ACSO.svg":247,"./ACUO.svg":248,"./AHNO.svg":249,"./AHSO.svg":250,"./ALOF.svg":251,"./APEX.svg":252,"./AQH.svg":253,"./ARAM.svg":254,"./ATAH.svg":255,"./AVID.svg":256,"./AVST.svg":257,"./BISA.svg":258,"./BRTH.svg":259,"./BWEE.svg":260,"./BWPL.svg":261,"./BWPR.svg":262,"./CBVI.svg":263,"./CHAE.svg":264,"./CHOO.svg":265,"./CHTX.svg":266,"./CION.svg":267,"./CLAR.svg":268,"./COUR.svg":269,"./CPRL.svg":270,"./CSAU.svg":271,"./CSOU.svg":272,"./Curio.svg":273,"./DHEO.svg":274,"./DHOO.svg":275,"./DHRU.svg":276,"./DIAN.svg":277,"./DODN.svg":278,"./DREA.svg":279,"./DRMS.svg":280,"./EDIT.svg":281,"./ELCO.svg":282,"./ELEM.svg":283,"./ESMU.svg":284,"./EURO.svg":285,"./EVEN.svg":286,"./FIAN.svg":287,"./FPOO.svg":288,"./GAYL.svg":289,"./GHRY.svg":290,"./GLCO.svg":291,"./HAMP.svg":292,"./HAP.svg":293,"./HAYN.svg":294,"./HCTC.svg":295,"./HEHR.svg":296,"./HESP.svg":297,"./HGII.svg":298,"./HGVI.svg":299,"./HHIO.svg":300,"./HHOA.svg":301,"./HHWW.svg":302,"./HHYO.svg":303,"./HIAN.svg":304,"./HICV.svg":305,"./HIEO.svg":306,"./HIHO.svg":307,"./HION.svg":308,"./HIRO.svg":309,"./HJC.svg":310,"./HJOO.svg":311,"./HOTU.svg":312,"./HPYL.svg":313,"./HRYE.svg":314,"./HSBW.svg":315,"./HSOU.svg":316,"./HTLR.svg":317,"./HUAL.svg":318,"./HVCY.svg":319,"./HYAT.svg":320,"./HYZR.svg":321,"./HYZV.svg":322,"./JMWA.svg":323,"./JURYS.svg":324,"./KEYT.svg":325,"./KIMP.svg":326,"./KINN.svg":327,"./LEBA.svg":328,"./LHEO.svg":329,"./LHSE.svg":330,"./LMEE.svg":331,"./LQAU.svg":332,"./LTHE.svg":333,"./MARR.svg":334,"./MAYFAIR.svg":335,"./MCCA.svg":336,"./MCHI.svg":337,"./MEAA.svg":338,"./MESA.svg":339,"./MGRS.svg":340,"./MHCBR.svg":341,"./MHRA.svg":342,"./MIIN.svg":343,"./MOVE.svg":344,"./MOXY.svg":345,"./MSSA.svg":346,"./MVCA.svg":347,"./NANN.svg":348,"./NCTN.svg":349,"./NHCO.svg":350,"./NHHO.svg":351,"./NHOW.svg":352,"./NIGH.svg":353,"./NIKK.svg":354,"./NOW.svg":355,"./OHRB.svg":356,"./OHRK.svg":357,"./OTNT.svg":358,"./OUOT.svg":359,"./PHAY.svg":360,"./PHP.svg":361,"./PHRR.svg":362,"./PIAN.svg":363,"./PPAL.svg":364,"./PR.svg":365,"./QUAL.svg":366,"./RADI.svg":367,"./RAMA.svg":368,"./RBAL.svg":369,"./RCHI.svg":370,"./REGE.svg":371,"./REHA.svg":372,"./RENA.svg":373,"./RFHO.svg":374,"./RIEN.svg":375,"./ROTA.svg":376,"./RRIE.svg":377,"./S8UP.svg":378,"./SBR.svg":379,"./SCRT.svg":380,"./SESU.svg":381,"./SHER.svg":382,"./SHSP.svg":383,"./SILN.svg":384,"./SNSC.svg":385,"./SOLA.svg":386,"./SSTU.svg":387,"./TAJJ.svg":388,"./TCRL.svg":389,"./THRO.svg":390,"./TLCH.svg":391,"./TOGA.svg":392,"./TPSO.svg":393,"./TRAV.svg":394,"./TRID.svg":395,"./UBCL.svg":396,"./UNOI.svg":397,"./WAAS.svg":398,"./WBWI.svg":399,"./WEST.svg":400,"./WHOT.svg":401,"./WORL.svg":402,"./WYAA.svg":403,"./WYND.svg":404,"./WYTQ.svg":405,"./YNAI.svg":406,"./ZOET.svg":407,"./default.svg":408};r.keys=function(){return Object.keys(o)},r.resolve=i,e.exports=r,r.id=228},function(e,t,n){"use strict";(function(n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.url,r=e.callback;return n("img",{src:t,onLoad:function(){return r&&r()}})},e.exports=t.default}).call(t,n(0).h)},function(e,t,n){(function(t){function n(e,t,n){function i(t){var n=m,r=g;return m=g=void 0,k=t,v=e.apply(r,n)}function o(e){return k=e,_=setTimeout(c,t),E?i(e):v}function u(e){var n=e-S,r=e-k,i=t-n;return T?x(i,y-r):i}function l(e){var n=e-S,r=e-k;return void 0===S||n>=t||n<0||T&&r>=y}function c(){var e=w();if(l(e))return p(e);_=setTimeout(c,u(e))}function p(e){return _=void 0,M&&m?i(e):(m=g=void 0,v)}function d(){void 0!==_&&clearTimeout(_),k=0,m=S=g=_=void 0}function f(){return void 0===_?v:p(w())}function h(){var e=w(),n=l(e);if(m=arguments,g=this,S=e,n){if(void 0===_)return o(S);if(T)return _=setTimeout(c,t),i(S)}return void 0===_&&(_=setTimeout(c,t)),v}var m,g,y,v,_,S,k=0,E=!1,T=!1,M=!0;if("function"!=typeof e)throw new TypeError(s);return t=a(t)||0,r(n)&&(E=!!n.leading,T="maxWait"in n,y=T?b(a(n.maxWait)||0,t):y,M="trailing"in n?!!n.trailing:M),h.cancel=d,h.flush=f,h}function r(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function i(e){return!!e&&"object"==typeof e}function o(e){return"symbol"==typeof e||i(e)&&_.call(e)==l}function a(e){if("number"==typeof e)return e;if(o(e))return u;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(c,"");var n=d.test(e);return n||f.test(e)?h(e.slice(2),n?2:8):p.test(e)?u:+e}var s="Expected a function",u=NaN,l="[object Symbol]",c=/^\s+|\s+$/g,p=/^[-+]0x[0-9a-f]+$/i,d=/^0b[01]+$/i,f=/^0o[0-7]+$/i,h=parseInt,m="object"==typeof t&&t&&t.Object===Object&&t,g="object"==typeof self&&self&&self.Object===Object&&self,y=m||g||Function("return this")(),v=Object.prototype,_=v.toString,b=Math.max,x=Math.min,w=function(){return y.Date.now()};e.exports=n}).call(t,n(66))},function(e,t,n){"use strict";function r(e){return new Date(e.getTime())}function i(e){return e instanceof Date&&!isNaN(e.valueOf())}function o(e,t){var n=r(e);return n.setMonth(e.getMonth()+t),n}function a(e,t){return!(!e||!t)&&e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function s(e,t){return!(!e||!t)&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function u(e,t){return r(e).setHours(0,0,0,0)<r(t).setHours(0,0,0,0)}function l(e,t){return r(e).setHours(0,0,0,0)>r(t).setHours(0,0,0,0)}function c(e){var t=new Date;return t.setHours(0,0,0,0),u(e,t)}function p(e){var t=new Date((new Date).getTime()+864e5);return t.setHours(0,0,0,0),e>=t}function d(e,t,n){var i=r(e);return i.setHours(0,0,0,0),l(i,t)&&u(i,n)||l(i,n)&&u(i,t)}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{from:null,to:null},n=t.from,r=t.to;return n?n&&r&&a(n,r)&&a(e,n)?(n=null,r=null):r&&u(e,n)?n=e:r&&a(e,r)?(n=e,r=e):(r=e,u(r,n)&&(r=n,n=e)):n=e,{from:n,to:r}}function h(e,t){var n=t.from,r=t.to;return n&&a(e,n)||r&&a(e,r)||n&&r&&d(e,n,r)}function m(e){var t=r(e);return t.setHours(0,0,0),t.setDate(t.getDate()+4-(t.getDay()||7)),Math.ceil(((t-new Date(t.getFullYear(),0,1))/864e5+1)/7)}Object.defineProperty(t,"__esModule",{value:!0}),t.clone=r,t.isDate=i,t.addMonths=o,t.isSameDay=a,t.isSameMonth=s,t.isDayBefore=u,t.isDayAfter=l,t.isPastDay=c,t.isFutureDay=p,t.isDayBetween=d,t.addDayToRange=f,t.isDayInRange=h,t.getWeekNumber=m,t.default={addDayToRange:f,addMonths:o,clone:r,getWeekNumber:m,isDate:i,isDayAfter:l,isDayBefore:u,isDayBetween:d,isDayInRange:h,isFutureDay:p,isPastDay:c,isSameDay:a,isSameMonth:s}},function(e,t){e.exports={page:"d71b877e",form:"_3033cd01",errorMessage:"_97c5ebad",message:"e0f6b09b",successMessage:"fe409d54",lastrow:"_4fec42ba",backToLink:"c69a6f78",fineprint:"_8582168f",inputError:"_7833e331",inputErrorMessage:"_085d35bb",disabled:"_2e494ad2",spin:"_7250ef2e",checkbox:"fc521f9e",switch:"c4ef1183",switchOn:"_703251dc",switchLoading:"_9920112d",field:"_0c7bd719",fieldAction:"_6f87f51d",email:"_43868324",password:"_5f1023f6",editField:"e10dfba1"}},function(e,t){e.exports={row:"_163ef577",column:"_9fd5822f",twoColumn:"_481d6f2f",intro:"e9583c21",savings:"_58637804",caption:"_7f6ec56d",sup:"_19ece926",amount:"_035e28b7",long:"_94c5567a",tooLow:"faa01981",loyalty:"_35e316dc",benefits:"_5d09af6f",benefit:"_07486bc6",benefitMark:"e3248192",button:"dd61811f",buttonCTA:"_3ab935b1",small:"_3abcb910",buttonLabel:"_362973da",qualifier:"_6ade8783",signupMessage:"aa0961da",title:"_1ce4a349"}},function(e,t,n){"use strict";var r=n(69),i=n(235)(5),o=!0;"find"in[]&&Array(1).find(function(){o=!1}),r(r.P+r.F*o,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(419)("find")},function(e,t,n){var r=n(201),i=n(211),o=n(210),a=n(222),s=n(236);e.exports=function(e,t){var n=1==e,u=2==e,l=3==e,c=4==e,p=6==e,d=5==e||p,f=t||s;return function(t,s,h){for(var m,g,y=o(t),v=i(y),_=r(s,h,3),b=a(v.length),x=0,w=n?f(t,b):u?f(t,0):void 0;b>x;x++)if((d||x in v)&&(m=v[x],g=_(m,x,y),e))if(n)w[x]=g;else if(g)switch(e){case 3:return!0;case 5:return m;case 6:return x;case 2:w.push(m)}else if(c)return!1;return p?-1:l||c?c:w}}},function(e,t,n){var r=n(237);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){var r=n(194),i=n(420),o=n(156)("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.observeState=t.subscribe=t.dispatch=t.getState=void 0;var r=n(437),i=function(e){return e&&e.__esModule?e:{default:e}}(r).default;t.default=i,t.getState=i.getState,t.dispatch=i.dispatch,t.subscribe=i.subscribe,t.observeState=function(e,t){var n=e(i.getState());return i.subscribe(function(){var r=e(i.getState());r!==n&&(n=r,t(n))})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.emptyPlaces=t.decreaseSelectedIndex=t.increaseSelectedIndex=t.setOpen=t.setPlace=t.setQuery=t.fetchInputResults=t.SEARCH_INPUT_DECREASE_SELECTED_INDEX=t.SEARCH_INPUT_INCREASE_SELECTED_INDEX=t.SEARCH_INPUT_SET_OPEN=t.SEARCH_INPUT_SET_QUERY=t.SEARCH_INPUT_SET_PLACES=t.SEARCH_INPUT_SET_PLACE=void 0;var i=n(6),o=r(i).default,a=n(22),s=r(a).default;n(166);var u=n(4),l=u.fromJS,c=n(21),p=r(c).default,d=n(418),f=r(d).default,h=n(221),m=h.accessToken,g=n(193),y=r(g).default,v=t.SEARCH_INPUT_SET_PLACE="SEARCH_INPUT_SET_PLACE",_=t.SEARCH_INPUT_SET_PLACES="SEARCH_INPUT_SET_PLACES",b=t.SEARCH_INPUT_SET_QUERY="SEARCH_INPUT_SET_QUERY",x=t.SEARCH_INPUT_SET_OPEN="SEARCH_INPUT_SET_OPEN",w=t.SEARCH_INPUT_INCREASE_SELECTED_INDEX="SEARCH_INPUT_INCREASE_SELECTED_INDEX",S=t.SEARCH_INPUT_DECREASE_SELECTED_INDEX="SEARCH_INPUT_DECREASE_SELECTED_INDEX",k={},E=encodeURIComponent(["postcode","district","place","locality","neighborhood","address","poi"].join(",")),T=(t.fetchInputResults=function(e){return function(t){if(!k[e])return fetch("/autofill?query="+encodeURIComponent(e)).then(function(e){return e.json()}).then(function(n){k[e]=M(n),t(T(k[e])),y("mapbox-lookup")&&0===k[e].size&&fetch("https://api.mapbox.com/geocoding/v5/mapbox.places/"+encodeURIComponent(e)+".json?types="+E+"&language=en-US&access_token="+m).then(function(e){return e.json()}).then(function(n){var r=n.features;k[e]=l(r.map(function(e){e=p(e);var t=e,n=t.text,r=t.placeName,i=t.center,o=i[0],a=i[1],s=t.bbox,u=s||[],l=u[0],c=u[1],d=u[2],f=u[3],h=!s||e.placeType.indexOf("poi")>=0?"geocircles":"polygons";return p({name:n,fullName:r,id:("polygons"===h?[c,l,c,d,f,d,f,l]:[a,o,10]).join(","),endpoint:h,type:"generic",lng:o,lat:a})})),t(T(k[e]))})});t(T(k[e]))}},t.setQuery=function(e){return{type:b,query:e}},t.setPlace=function(e){return{type:v,place:e}},t.setOpen=function(e){return{type:x,open:e}},t.increaseSelectedIndex=function(){return{type:w}},t.decreaseSelectedIndex=function(){return{type:S}},t.emptyPlaces=function(){return{type:_,places:l([])}},function(e){return{type:_,places:e}}),M=function(e){return l(s(f).reduce(function(t,n){return e[n]?t.concat(e[n].map(function(e){return p(o(e,{endpoint:n,type:n}))})):t},[]))}},,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(23),o=r(i).default,a=n(11),s=r(a).default,u=n(167),l=r(u).default;n(245),t.default={get:function(e){var t=l()?localStorage.getItem(e):s.cookie(e);if(void 0!==t)try{return JSON.parse(t)}catch(e){return t}},remove:function(e){return l()?localStorage.removeItem(e):s.removeCookie(e)},set:function(e,t){t=o(t),l()?localStorage.setItem(e,t):s.cookie(e,t,{expires:365,path:"/"})}},e.exports=t.default},function(e,t,n){var r,i,o;!function(a){i=[n(11)],r=a,void 0!==(o="function"==typeof r?r.apply(t,i):r)&&(e.exports=o)}(function(e){function t(e){return s.raw?e:encodeURIComponent(e)}function n(e){return s.raw?e:decodeURIComponent(e)}function r(e){return t(s.json?JSON.stringify(e):String(e))}function i(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(a," ")),s.json?JSON.parse(e):e}catch(e){}}function o(t,n){var r=s.raw?t:i(t);return e.isFunction(n)?n(r):r}var a=/\+/g,s=e.cookie=function(i,a,u){if(void 0!==a&&!e.isFunction(a)){if(u=e.extend({},s.defaults,u),"number"==typeof u.expires){var l=u.expires,c=u.expires=new Date;c.setTime(+c+864e5*l)}return document.cookie=[t(i),"=",r(a),u.expires?"; expires="+u.expires.toUTCString():"",u.path?"; path="+u.path:"",u.domain?"; domain="+u.domain:"",u.secure?"; secure":""].join("")}for(var p=i?void 0:{},d=document.cookie?document.cookie.split("; "):[],f=0,h=d.length;f<h;f++){var m=d[f].split("="),g=n(m.shift()),y=m.join("=");if(i&&i===g){p=o(y,a);break}i||void 0===(y=o(y))||(p[g]=y)}return p};s.defaults={},e.removeCookie=function(t,n){return void 0!==e.cookie(t)&&(e.cookie(t,"",e.extend({},n,{expires:-1})),!e.cookie(t))}})},function(e,t,n){e.exports=n.p+"images/brands/svg/ABVI.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/ACSO.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/ACUO.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/AHNO.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/AHSO.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/ALOF.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/APEX.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/AQH.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/ARAM.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/ATAH.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/AVID.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/AVST.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/BISA.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/BRTH.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/BWEE.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/BWPL.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/BWPR.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/CBVI.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/CHAE.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/CHOO.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/CHTX.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/CION.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/CLAR.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/COUR.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/CPRL.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/CSAU.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/CSOU.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/Curio.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/DHEO.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/DHOO.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/DHRU.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/DIAN.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/DODN.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/DREA.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/DRMS.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/EDIT.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/ELCO.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/ELEM.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/ESMU.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/EURO.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/EVEN.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/FIAN.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/FPOO.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/GAYL.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/GHRY.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/GLCO.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/HAMP.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/HAP.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/HAYN.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/HCTC.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/HEHR.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/HESP.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/HGII.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/HGVI.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/HHIO.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/HHOA.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/HHWW.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/HHYO.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/HIAN.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/HICV.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/HIEO.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/HIHO.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/HION.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/HIRO.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/HJC.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/HJOO.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/HOTU.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/HPYL.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/HRYE.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/HSBW.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/HSOU.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/HTLR.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/HUAL.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/HVCY.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/HYAT.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/HYZR.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/HYZV.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/JMWA.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/JURYS.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/KEYT.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/KIMP.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/KINN.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/LEBA.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/LHEO.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/LHSE.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/LMEE.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/LQAU.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/LTHE.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/MARR.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/MAYFAIR.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/MCCA.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/MCHI.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/MEAA.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/MESA.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/MGRS.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/MHCBR.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/MHRA.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/MIIN.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/MOVE.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/MOXY.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/MSSA.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/MVCA.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/NANN.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/NCTN.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/NHCO.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/NHHO.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/NHOW.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/NIGH.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/NIKK.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/NOW.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/OHRB.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/OHRK.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/OTNT.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/OUOT.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/PHAY.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/PHP.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/PHRR.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/PIAN.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/PPAL.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/PR.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/QUAL.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/RADI.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/RAMA.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/RBAL.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/RCHI.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/REGE.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/REHA.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/RENA.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/RFHO.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/RIEN.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/ROTA.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/RRIE.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/S8UP.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/SBR.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/SCRT.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/SESU.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/SHER.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/SHSP.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/SILN.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/SNSC.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/SOLA.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/SSTU.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/TAJJ.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/TCRL.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/THRO.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/TLCH.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/TOGA.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/TPSO.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/TRAV.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/TRID.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/UBCL.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/UNOI.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/WAAS.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/WBWI.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/WEST.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/WHOT.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/WORL.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/WYAA.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/WYND.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/WYTQ.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/YNAI.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/ZOET.svg"},function(e,t,n){e.exports=n.p+"images/brands/svg/default.svg"},function(e,t,n){e.exports=n.p+"img/logo-roomkey.svg"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectedAdaraLeadTag=t.AdaraLeadTag=t.ConnectedAdaraSearchTag=t.AdaraSearchTag=t.ConnectedAdaraHomeTag=t.AdaraHomeTag=t.getBaseSearchParams=t.getLeadParams=t.splitSgu=t.isTrackingPermitted=t.addSeed=t.buildPixelUrl=t.getEveryLeadBeaconUrl=t.requiredParams=t.retargetCampaignId=t.path=void 0;var i=n(1),o=r(i).default,a=n(2),s=r(a).default,u=n(3),l=r(u).default,c=n(6),p=r(c).default,d=n(22),f=r(d).default,h=n(0),m=h.h,g=h.render,y=h.Component,v=n(7),_=v.connect,b=n(65),x=b.stringify,w=n(39),S=r(w).default,k=n(493),E=r(k).default,T=n(243),M=r(T).default,C=n(426),O=r(C).default,A=n(229),P=r(A).default,R=t.path="production"===M()?"//tag.yieldoptimizer.com/ps/ps":"//qaext-tag.yieldoptimizer.com/ps/ps",D=t.retargetCampaignId="adara-retarget",I=t.requiredParams={t:"i",p:"1244",u:O()},N=t.getEveryLeadBeaconUrl=function(){return"//cs.yieldoptimizer.com/cs/c?a=1320&cpid=3988&_="+B()},L=function(){return"//cs.yieldoptimizer.com/cs/c?a=1320&cpid=3551&_="+B()},z=!1,j=t.buildPixelUrl=function(e,t,n,r){var i=f(n).reduce(function(e,t){return e[0===t.indexOf("sgu")?t:r+t]=n[t],e},{});return e+"?"+x(p({},t,E(i)))},H=t.addSeed=function(e){return e.indexOf("?")<0?e+="?":e+="&",e+="_="+B()},B=function(){return(Math.ceil(1e13*Math.random())+1).toFixed()},F=t.isTrackingPermitted=function(e){if("development"===M()||S("us")||S("ca"))return!0;if(S("uk")){var t=e.toJS(),n=t.method,r=t.impressionId,i=t.partnerCode;return!("connector"!==n&&!Boolean(r))||"IHG"===i}return!1},U=function(e){var t=e.toJS(),n=t.method,r=t.campaignId;return"retarget"==n&&r==D},V=function(e,t,n,r,i,o,a){var s=n.toJS(),u=s.id,l=s.endpoint,c=s.lat,d=s.lng,f=s.name,h=s.countryCode,m=s.countryName,g=s.regionName,y=t.toJS(),v=y.hotelCount,_=y.aggregatedBestRates,b=y.aggregatedUserRatings,w=y.aggregatedStarRatings,k=o?[Math.round(_&&_.lowest)||0,Math.round(o)]:[],E=[],T=[],M={};if(S("us")&&"locations"==l&&"retarget"!=e.get("method")){var C=r.toJS(),O=C.checkIn,A=C.checkOut,P=C.rooms,R=C.guests;M=W(x({location_id:u,lat:c,lng:d,check_in:O,check_out:A,rooms:P,guests:R,currency:i,referral_method:"retarget",campaign_id:D}),70)}return p({},a,{hcty:f,hst:"US"===h?g:void 0,hctry:m,hpr:Y(v,k,_),hur:Y(v,E,b),hsr:Y(v,T,w)},M)},Y=function(e,t,n){var r=n.lowest,i=void 0===r?null:r,o=n.highest,a=void 0===o?null:o;if(e&&null!==i&&null!==a){var s=void 0;return s=t.length?[Math.min.apply(null,t),Math.max.apply(null,t)]:[i,a],s.join(",")}return null},W=t.splitSgu=function(e,t){return e.split("&").reduce(function(e,n){if(e.length){var r=e[e.length-1]+"&"+n;r.length<t?e[e.length-1]=r:e[e.length]=n}else e[0]=n;return e},[]).reduce(function(e,t,n){return e["sgu"+n]=t,e},{})},q=t.getLeadParams=function(e,t){"function"==typeof e.toJS&&(e=e.toJS());var n=e.rate,r=e.address||{},i=r||{},o=i.countryName,a=i.postalCode,s=i.regionName,u=e.group||{},l=e.brand||{},c=e.country_code||e.countryCode||"",d=n.amount;return p({},t,{hcty:r.city,hst:"US"===c?r.region_name||s:void 0,hctry:r.country_name||o,hzip:r.postal_code||a,hstr:l.str,hpr:d,hur:e.user_rating||e.userRating,hsr:e.stars,hgrp:u.name,hbn:l.name,hpn:e.name,hpc:e.udicode,sphi:"N"})},G=t.getBaseSearchParams=function(e,t,n){var r=t.toJS();return{chin:r.checkIn,chout:r.checkOut,hnr:r.rooms,hng:r.guests,hct:n,hsort:e}},Z=t.AdaraHomeTag=function(e){function t(n){o(this,t);var r=s(this,e.call(this,n));return r.state={url:j(R,I,{cb:Date.now().toString()},"")},r}return l(t,e),t.prototype.shouldComponentUpdate=function(){return!1},t.prototype.render=function(){var e=this.props,t=e.referral,n=e.callback,r=this.state.url;F(t)&&g(m(P,{url:r,callback:n}))},t}(y),K=(t.ConnectedAdaraHomeTag=_(function(e){return{referral:e.get("referral")}})(Z),function(e){var t=e.referral,n=e.metadata,r=e.place,i=e.stay,o=e.currency,a=e.sort,s=e.maxPrice;if(t&&n&&r&&r.get("name")&&i&&o){var u=G(a,i,o),l=V(t,n,r,i,o,s,u);return j(R,I,l,"s")}}),J=t.AdaraSearchTag=function(e){function t(n){o(this,t);var r=s(this,e.call(this,n)),i=K(n);return i&&(r.state={url:i}),r}return l(t,e),t.prototype.componentWillReceiveProps=function(e){var t=K(e);t&&this.setState({url:t})},t.prototype.shouldComponentUpdate=function(e,t){var n=t.url;return this.state.url!=n},t.prototype.render=function(){var e=this.props,t=e.referral,n=e.callback,r=this.state.url;r&&F(t)&&(r=H(r),g(m(P,{url:r,callback:n})))},t}(y),X=(t.ConnectedAdaraSearchTag=_(function(e){var t=e.get("searchResults");return{referral:e.get("referral"),metadata:t.get("metadata"),place:t.get("place"),stay:e.get("stay"),currency:e.get("currency"),sort:t.get("sort"),maxPrice:t.get("maxPrice")}})(J),function(e){var t=(e.referral,e.hotel),n=e.stay,r=e.currency,i=e.sort;if(t&&n&&r){var o=G(i,n,r),a=q(t,o);return j(R,I,a,"l")}}),$=t.AdaraLeadTag=function(e){function t(n){o(this,t);var r=s(this,e.call(this,n)),i=X(n);return i&&(r.state={url:i}),r}return l(t,e),t.prototype.componentWillReceiveProps=function(e){var t=X(e);t&&this.setState({url:t})},t.prototype.shouldComponentUpdate=function(e,t){var n=t.url;return this.state.url!=n},t.prototype.render=function(){var e=this.props,t=e.referral,n=e.callback,r=this.state.url;if(r&&F(t)){var i=void 0;!z&&U(t)&&(z=!0,i=L()),r=H(r),g(m("div",null,m(P,{url:r,callback:n}),m(P,{url:N()}),i&&m(P,{url:i})))}},t}(y);t.ConnectedAdaraLeadTag=_(function(e){return{currency:e.get("currency"),stay:e.get("stay"),sort:e.get("searchResults").get("sort")}})($)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(e){var t=e.toJS?e.toJS():e,n=t.pathname,r=t.search,i=void 0===r?"":r,o=t.hash;return n+i+(void 0===o?"":o)}return null},e.exports=t.default},function(e,t,n){e.exports=n.p+"apps/roomkey/img/arrow-back.svg"},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=n(1024),h=i(f).default,m=function(e){function t(){return a(this,t),u(this,e.apply(this,arguments))}return c(t,e),t.prototype.render=function(e){var t=e.children;return r("div",{className:h.container},r("div",{className:h.gutter},t))},t}(d);t.default=m,e.exports=t.default}).call(t,n(0).h)},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(22),i=function(e){return e&&e.__esModule?e:{default:e}}(r).default;t.default=function(e,t){return i(e).reduce(function(n,r){return t.indexOf(r)>=0&&(n[r]=e[r]),n},{})},e.exports=t.default},function(e,t){e.exports=[{city:"nyc",partner:"CHC",udicode:"1ddXvsG4o04s4Cg05g9krVMw"},{city:"nyc",partner:"CHC",udicode:"3JHe1AG4n04s3jz05g9krVMw"},{city:"nyc",partner:"HLT",udicode:"9eb48b71121d491895232319"},{city:"nyc",partner:"HLT",udicode:"4ZGdw8G4S04s6Es05g9krVMw"},{city:"nyc",partner:"HYAT",udicode:"e3381328e35f4807bcc81035"},{city:"nyc",partner:"HYAT",udicode:"3oOqKeC6z04tGjc05g9krVMw"},{city:"nyc",partner:"IHG",udicode:"08R4AiG4V04s7TU05g9krVMw"},{city:"nyc",partner:"IHG",udicode:"34v8gCG4U04s7F005g9krVMw"},{city:"nyc",partner:"MRT",udicode:"4Oh9GaG4V04s86S05g9krVMw"},{city:"nyc",partner:"MRT",udicode:"31NfTkG4e04sEJ005g9krVMw"},{city:"lon",partner:"CHC",udicode:"c234e175184f4e40bf136a25"},{city:"lon",partner:"HLT",udicode:"3cSSOmG4S04s67q05g9krVMw"},{city:"lon",partner:"HYAT",udicode:"2uVrAuG4W04s8WA05g9krVMw"},{city:"lon",partner:"IHG",udicode:"2vpscCG4U04s7Dk05g9krVMw"},{city:"lon",partner:"MRT",udicode:"3wNUS8G4V04s82I05g9krVMw"},{city:"chi",partner:"CHC",udicode:"f5b80ee8af134131b3454534"},{city:"chi",partner:"HLT",udicode:"70baa4b9c9cc4dc2bd8fb1d0"},{city:"chi",partner:"HYAT",udicode:"2dwjgmG4W04s8Ta05g9krVMw"},{city:"chi",partner:"IHG",udicode:"4IX57YG4T04s6mX05g9krVMw"},{city:"chi",partner:"MRT",udicode:"3ZAU5oG4V04s7yu05g9krVMw"},{city:"orl",partner:"CHC",udicode:"7983155cd0c54563aea648b3"},{city:"orl",partner:"HLT",udicode:"3iDrDEGtc04s1YR05g9krVMw"},{city:"orl",partner:"HYAT",udicode:"38upxQ1dE04tFPS05g9kuoby"},{city:"orl",partner:"IHG",udicode:"2pIvzcGti04s1l405g9krVMw"},{city:"orl",partner:"MRT",udicode:"2kcRaCGti04s1k505g9krVMw"},{city:"sd",partner:"CHC",udicode:"4HYSiOG4c04sD5J05g9krVMw"},{city:"sd",partner:"HLT",udicode:"130EsqG4T04s6Nf05g9krVMw"},{city:"sd",partner:"HYAT",udicode:"2eRLAOG4W04s8Tf05g9krVMw"},{city:"sd",partner:"IHG",udicode:"4Wwi24G4U04s7R505g9krVMw"},{city:"sd",partner:"MRT",udicode:"11Le88G4W04s8IX05g9krVMw"},{city:"nash",partner:"CHC",udicode:"eabda2934745451196a4c05b"},{city:"nash",partner:"HLT",udicode:"0C7rUmG4S04s5iu05g9krVMw"},{city:"nash",partner:"HYAT",udicode:"aa54fec7597046e5ad2b4dd5"},{city:"nash",partner:"IHG",udicode:"45H8UaG4T04s6kk05g9krVMw"},{city:"nash",partner:"MRT",udicode:"1S2Hr6G4d04sDN505g9krVMw"},{city:"dc",partner:"CHC",udicode:"2kUxSiG4k04s1Yy05g9krVMw"},{city:"dc",partner:"HLT",udicode:"7149c139e3ae4404be967dd2"},{city:"dc",partner:"HYAT",udicode:"3EOup6G4W04s8Z405g9krVMw"},{city:"dc",partner:"IHG",udicode:"1f4QFsG4U04s73305g9krVMw"},{city:"dc",partner:"MRT",udicode:"16WLa42iW04tFX505g9kuoby"},{city:"sanfran",partner:"CHC",udicode:"0GbU80G4X04s8rM05g9krVMw"},{city:"sanfran",partner:"HLT",udicode:"1JHFL6G4T04s6Ph05g9krVMw"},{city:"sanfran",partner:"HYAT",udicode:"3B5sFUG4W04s8Yb05g9krVMw"},{city:"sanfran",partner:"IHG",udicode:"3T99geG4U04s7IE05g9krVMw"},{city:"sanfran",partner:"MRT",udicode:"4WqcyWG4W04s8mb05g9krVMw"},{city:"bos",partner:"CHC",udicode:"1cBovoA4D04t9Mp05g9krVMw"},{city:"bos",partner:"HLT",udicode:"0Im3LEG4S04s5je05g9krVMw"},{city:"bos",partner:"HYAT",udicode:"3wrG8uG4X04s9Uy05g9krVMw"},{city:"bos",partner:"IHG",udicode:"4eSLGS30Q04tBcU05g9krVMw"},{city:"bos",partner:"MRT",udicode:"0ew1hYG4i04sGrb05g9krVMw"},{city:"neworl",partner:"CHC",udicode:"e6faaec72f164045ada02044"},{city:"neworl",partner:"HLT",udicode:"4MOR0qG4S04s6DP05g9krVMw"},{city:"neworl",partner:"HYAT",udicode:"1FFaYiC7104t0Kl05g9pSDHj"},{city:"neworl",partner:"IHG",udicode:"0eeezgG4U04s6vC05g9krVMw"},{city:"neworl",partner:"MRT",udicode:"3PpmeuG4V04s7xT05g9krVMw"},{city:"vegas",partner:"CHC",udicode:"49VDU0G4n04s3sH05g9krVMw"},{city:"vegas",partner:"HLT",udicode:"3Ifn04G4S04s65U05g9krVMw"},{city:"vegas",partner:"HYAT",udicode:"2hvR1EG4W04s8UE05g9krVMw"},{city:"vegas",partner:"IHG",udicode:"3dhQRsG4T04s6hH05g9krVMw"},{city:"vegas",partner:"MRT",udicode:"1dalCyG4V04s7h905g9krVMw"},{city:"miami",partner:"CHC",udicode:"addd5c1ac6944ff2ab578fa5"},{city:"miami",partner:"HLT",udicode:"98ea4d82b007480d983b8502"},{city:"miami",partner:"HYAT",udicode:"2rQR5UG4W04s8Vi05g9krVMw"},{city:"miami",partner:"IHG",udicode:"4BkizgG4g04sFvR05g9krVMw"},{city:"miami",partner:"MRT",udicode:"4YAQsaG4e04sEY205g9krVMw"},{city:"miami",partner:"WYND",udicode:"294gUaG4X04s9Bu05g9krVMw"}]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ROOM_TYPE_ORDER=t.ROOM_TYPES=t.fetchRatesForHotel=t.setHotelByUdicode=t.clearHotel=t.HOTEL_DETAILS_BUCKETED_RATES_CHANGED=t.HOTEL_DETAILS_SET_SIMILAR_HOTELS=t.HOTEL_DETAILS_SET_HOTEL=t.HOTEL_DETAILS_CLEAR_HOTEL=void 0;var r,i=n(22),o=function(e){return e&&e.__esModule?e:{default:e}}(i).default,a=n(4),s=a.Map,u=a.fromJS,l=n(32),c=l.updateHotels,p=l.fetchHotel,d=l.fetchSimilarHotels,f=n(49),h=f.fetchHotelRates,m=f.fetchRates,g=t.HOTEL_DETAILS_CLEAR_HOTEL="HOTEL_DETAILS_CLEAR_HOTEL",y=t.HOTEL_DETAILS_SET_HOTEL="HOTEL_DETAILS_SET_HOTEL",v=t.HOTEL_DETAILS_SET_SIMILAR_HOTELS="HOTEL_DETAILS_SET_SIMILAR_HOTELS",_=t.HOTEL_DETAILS_BUCKETED_RATES_CHANGED="HOTEL_DETAILS_BUCKETED_RATES_CHANGED",b=(t.clearHotel=function(){return{type:g}},t.setHotelByUdicode=function(e){return function(t){var n=s({udicode:e});t(c([n])),t(x(null)),t(p(e,{fields:["address","amenities","brand","description","group","indicativeRate","lat","lng","locationId","locations","name","photos","primaryPhoto","stars","tripadvisor","userRating","vfmUrl","reservationTelephone"]},x))}},t.fetchRatesForHotel=function(e){return function(t){return t(h(e,{onlyLowest:!1},function(){return function(t,n){e=n().get("hotels").get(e.get("udicode")),t(E(e));var r={offset:0,metadata:!1,sort:"distance-asc",limit:20,fields:["address","amenities","brand","group","locations","neighborhood","name","primaryPhoto","stars","userRating"],currency:n().get("currency")};t(d(e,r,w))}}))}}),x=function(e){return function(t){t({type:y,hotel:e}),e&&t(b(e))}},w=function(e){return function(t){t({type:v,hotels:e}),t(m(e))}},S=t.ROOM_TYPES=(r={single:"Single",twin:"Twin",double:"Double",full:"Full",queen:"Queen",king:"King",suite:"Suite"},r.other="More Room Types",r.onlyOther="Rooms",r),k=t.ROOM_TYPE_ORDER=o(S),E=function(e){return function(t,n){e=n().get("hotels").get(e.get("udicode"));var r=e.get("rates");if(r){var i=r.reduce(function(e,t){var n=t.get("roomType");return k.indexOf(n)<0&&(n="other"),e[n]||(e[n]=[]),e[n].push(t),e},{});1===o(i).length&&i.other&&(i.onlyOther=i.other,delete i.other);var a=void 0;if(r.size>6){var s=Math.min(r.size,6),l=0,c=0;a={};do{for(var p=0;p<k.length&&!(c>=s);p++){var d=k[p],f=i[d];f&&f.length>l&&(a[d]||(a[d]=[]),a[d].push(f[l]),c++)}l++}while(c<s);a=u(a)}i=u(i),r.size<=6&&(a=i),t({type:_,fullList:i,shortList:a})}}}},function(e,t){e.exports={locations:"Locations",airports:"Airports",generic:""}},,,,,,,,,function(e,t,n){e.exports=n.p+"images/roomkey/svg/logo-blue.svg"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),o=r(i).default,a=n(484),s=r(a).default,u=window&&void 0!==window.rkConfig&&void 0!==window.rkConfig.experience&&void 0!==window.rkConfig.experience.path?window.rkConfig.experience.path:{},l=o({},s,u);t.default=function(e,t){var n,r=l[e];return t&&t.updateData((n={},n["experiment-"+e]=r,n)),r},e.exports=t.default},function(e,t,n){var r,i;!function(o,a){void 0!==e&&e.exports?e.exports=a():(r=a,void 0!==(i="function"==typeof r?r.call(t,n,t,e):r)&&(e.exports=i))}(0,function(){function e(e,t){for(var n=0,r=e.length;n<r;++n)if(!t(e[n]))return u;return 1}function t(t,n){e(t,function(e){return!n(e)})}function n(o,a,s){function u(e){return e.call?e():d[e]}function c(){if(!--v){d[y]=1,g&&g();for(var n in h)e(n.split("|"),u)&&!t(h[n],u)&&(h[n]=[])}}o=o[l]?o:[o];var p=a&&a.call,g=p?a:s,y=p?o.join(""):a,v=o.length;return setTimeout(function(){t(o,function e(t,n){return null===t?c():(n||/^https?:\/\//.test(t)||!i||(t=-1===t.indexOf(".js")?i+t+".js":i+t),m[t]?(y&&(f[y]=1),2==m[t]?c():setTimeout(function(){e(t,!0)},0)):(m[t]=1,y&&(f[y]=1),void r(t,c)))})},0),n}function r(e,t){var n,r=a.createElement("script");r.onload=r.onerror=r[p]=function(){r[c]&&!/^c|loade/.test(r[c])||n||(r.onload=r[p]=null,n=1,m[e]=2,t())},r.async=1,r.src=o?e+(-1===e.indexOf("?")?"?":"&")+o:e,s.insertBefore(r,s.lastChild)}var i,o,a=document,s=a.getElementsByTagName("head")[0],u=!1,l="push",c="readyState",p="onreadystatechange",d={},f={},h={},m={};return n.get=r,n.order=function(e,t,r){!function i(o){o=e.shift(),e.length?n(o,i):n(o,t,r)}()},n.path=function(e){i=e},n.urlArgs=function(e){o=e},n.ready=function(r,i,o){r=r[l]?r:[r];var a=[];return!t(r,function(e){d[e]||a[l](e)})&&e(r,function(e){return d[e]})?i():function(e){h[e]=h[e]||[],h[e][l](i),o&&o(a)}(r.join("|")),n},n.done=function(e){n([null],e)},n})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=/^\d+(\.\d+){0,}$/,i=function(e,t,n,i){var o=void 0,a=void 0,s=void 0,u=void 0;return o=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/7\.))\/?\s*((\d+)(?:\.\d+)*)/i)||[],o?(s=o[1].toLowerCase(),u=o[2],"msie"===s?s="ie":"trident"===s?(a=/\brv[ :]+((\d+)(?:\.\d+)*)/g.exec(e)||["","",""],s="ie",u=a[1]):"chrome"===s&&null!==(a=e.match(/\b(OPR|Edge)\/((\d+)(?:\.\d+)*)/))?(s=a[1].toLowerCase(),s=s.replace("opr","opera"),u=a[2]):null!==(a=t.match(/version\/((\d+)(?:\.\d+)*)/))&&(u=a[1])):(s=n.toLowerCase(),(u=i||null)&&null!==(a=u.match(/^((\d+)(?:\.\d+)*)/))&&(u=a[0])),u=r.test(u)?u.split(".").map(function(e){return parseInt(e)}):[],{browser:s,version:u}},o=function(e){return!!e.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile|WPDesktop|Silk/i)},a=function(e){return!!e.match(/GomezAgent/i)};t.default=function(e){var t=e.navigator;t=void 0===t?{}:t;var n=t.userAgent,r=t.appName,s=t.appVersion;if(!n)return{browser:"node",version:[],isMobile:!1,isBot:!1};var u=n.toLowerCase(),l=i(n,u,r,s);return{browser:l.browser,version:l.version,isMobile:o(n),isBot:a(n)}},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e.toDateString()}function i(e){return p[e.getMonth()]+" "+e.getFullYear()}function o(e){return c[e]}function a(e){return l[e]}function s(){return 0}function u(){return p}Object.defineProperty(t,"__esModule",{value:!0}),t.formatDay=r,t.formatMonthTitle=i,t.formatWeekdayShort=o,t.formatWeekdayLong=a,t.getFirstDayOfWeek=s,t.getMonths=u;var l=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],c=["Su","Mo","Tu","We","Th","Fr","Sa"],p=["January","February","March","April","May","June","July","August","September","October","November","December"];t.default={formatDay:r,formatMonthTitle:i,formatWeekdayShort:o,formatWeekdayLong:a,getFirstDayOfWeek:s,getMonths:u}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LEFT=37,t.UP=38,t.RIGHT=39,t.DOWN=40,t.ENTER=13,t.SPACE=32,t.ESC=27,t.TAB=9},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={container:"DayPicker",wrapper:"DayPicker-wrapper",interactionDisabled:"DayPicker--interactionDisabled",months:"DayPicker-Months",month:"DayPicker-Month",navBar:"DayPicker-NavBar",navButtonPrev:"DayPicker-NavButton DayPicker-NavButton--prev",navButtonNext:"DayPicker-NavButton DayPicker-NavButton--next",navButtonInteractionDisabled:"DayPicker-NavButton--interactionDisabled",caption:"DayPicker-Caption",weekdays:"DayPicker-Weekdays",weekdaysRow:"DayPicker-WeekdaysRow",weekday:"DayPicker-Weekday",body:"DayPicker-Body",week:"DayPicker-Week",weekNumber:"DayPicker-WeekNumber",day:"DayPicker-Day",footer:"DayPicker-Footer",todayButton:"DayPicker-TodayButton",today:"today",selected:"selected",disabled:"disabled",outside:"outside"}},function(e,t,n){"use strict";function r(e){e.preventDefault(),e.stopPropagation()}function i(e){return new Date(e.getFullYear(),e.getMonth(),1,12)}function o(e){var t=i(e);return t.setMonth(t.getMonth()+1),t.setDate(t.getDate()-1),t.getDate()}function a(e){var t=m({},e.modifiers);return e.selectedDays&&(t[e.classNames.selected]=e.selectedDays),e.disabledDays&&(t[e.classNames.disabled]=e.disabledDays),t}function s(e){var t=e.firstDayOfWeek,n=e.locale,r=void 0===n?"en":n,i=e.localeUtils,o=void 0===i?{}:i;return isNaN(t)?o.getFirstDayOfWeek?o.getFirstDayOfWeek(r):0:t}function u(e){return!!(e&&e.from&&e.to)}function l(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}function c(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,y.getFirstDayOfWeek)(),n=arguments[2],r=o(e),i=[],a=[],s=[],u=1;u<=r;u+=1)i.push(new Date(e.getFullYear(),e.getMonth(),u,12));i.forEach(function(e){a.length>0&&e.getDay()===t&&(s.push(a),a=[]),a.push(e),i.indexOf(e)===i.length-1&&s.push(a)});for(var l=s[0],c=7-l.length;c>0;c-=1){var p=(0,g.clone)(l[0]);p.setDate(l[0].getDate()-1),l.unshift(p)}for(var d=s[s.length-1],f=d.length;f<7;f+=1){var h=(0,g.clone)(d[d.length-1]);h.setDate(d[d.length-1].getDate()+1),d.push(h)}if(n&&s.length<6)for(var m=void 0,v=s.length;v<6;v+=1){m=s[s.length-1];for(var _=m[m.length-1],b=[],x=0;x<7;x+=1){var w=(0,g.clone)(_);w.setDate(_.getDate()+x+1),b.push(w)}s.push(b)}return s}function p(e){var t=(0,g.clone)(e);return t.setDate(1),t.setHours(12,0,0,0),t}function d(e,t){var n=void 0;n=t===_.default?t.day+"--"+t.outside:""+t.outside;var r=t.day.replace(/ /g,"."),i=n.replace(/ /g,"."),o="."+r+":not(."+i+")";return e.querySelectorAll(o)}function f(e){return Array.prototype.slice.call(e,0)}function h(e,t){return Object.prototype.hasOwnProperty.call(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.cancelEvent=r,t.getFirstDayOfMonth=i,t.getDaysInMonth=o,t.getModifiersFromProps=a,t.getFirstDayOfWeekFromProps=s,t.isRangeOfDates=u,t.getMonthsDiff=l,t.getWeekArray=c,t.startOfMonth=p,t.getDayNodes=d,t.nodeListToArray=f,t.hasOwnProp=h;var g=n(231),y=n(431),v=n(433),_=function(e){return e&&e.__esModule?e:{default:e}}(v)},,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(22),o=r(i).default;t.default=function(){var e=s(),t={us:"USD",uk:"GBP",ca:"CAD",au:"AUD",nz:"NZD"};return o(t).reduce(function(n,r){return r===e?t[r]:n},"USD")};var a=n(213),s=r(a).default;e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.dispatch=t.getState=void 0;var i=n(70),o=r(i).default,a=n(226),s=r(a).default,u=n(214),l=r(u).default,c=n(223),p=r(c).default,d=n(224),f=r(d).default,h=n(225),m=r(h).default,g=n(438),y=r(g).default,v=n(440),_=r(v).default,b=n(443),x=r(b).default,w=n(444),S=r(w).default,k=n(445),E=r(k).default,T=o({currency:s,stay:l,hotels:p,places:f,rates:m,homePage:y,hotelDetails:_,searchResults:x,priceAlerts:S,placeInput:E});t.default=T,t.getState=T.getState,t.dispatch=T.dispatch},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(64),o=i.shuffle,a=n(4),s=a.fromJS,u=n(32),l=u.HOTELS_HAS_BEEN_UPDATED,c=n(416),p=r(c).default,d=n(439),f=r(d).default,h=o(p),m=function(){return s({coverHotel:window.rkState&&window.rkState.homePage&&window.rkState.homePage.coverHotel?window.rkState.homePage.coverHotel:f[Math.floor(f.length*Math.random())],dealHotels:[]})};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.type,r=t.hotels;if(n===l){var i=e.get("coverHotel"),o=i?r.get(i.get("udicode")):null;return o&&(e=e.set("coverHotel",o)),e=e.set("dealHotels",s(h).map(function(e){return r.get(e.get("udicode"))}).filter(function(e){return e&&e.get("rate")&&e.get("rate").get("isLoyalty")&&(e.get("rate").get("strikethrough")||!e.get("rate").get("amount"))}).take(6))}return e},e.exports=t.default},function(e,t,n){"use strict";var r=[{udicode:"3a78818490dc4cfc98e0a73f",name:"Hilton Garden Inn New York / Midtown Park Ave",img:"new-york/hilton-garden-inn-park-ave",ypos:"bottom"},{udicode:"2p0MsKG4W04s8VM05g9krVMw",name:"Grand Hyatt New York",img:"new-york/grand-hyatt-new-york",ypos:"15%"},{udicode:"08R4AiG4V04s7TU05g9krVMw",name:"InterContinental New York Times Square",img:"new-york/intercontinental-times-square",ypos:"60%"},{udicode:"afbf08d0f9a84c849a14130c",name:"The New York EDITION",img:"new-york/new-york-edition"},{udicode:"07u2k4G4T04s6Gn05g9krVMw",name:"Hilton Orlando",img:"orlando/hilton-orlando",ypos:"top"},{udicode:"2sx9VoG4W04s8Vy05g9krVMw",name:"Hyatt Regency Orlando Intl Airport",img:"orlando/hyatt-regency-orlando-intl-airport",ypos:"top"},{udicode:"0IYxtYG4U04s6sB05g9krVMw",name:"Crowne Plaza Orlando Universal",img:"orlando/crowne-plaza-universal",ypos:"30%"},{udicode:"4GvpdgG4l04s2UL05g9krVMw",name:"Gaylord Palms Resort",img:"orlando/gaylord-palms",ypos:"60%"},{udicode:"3cSSOmG4S04s67q05g9krVMw",name:"Hilton London Tower Bridge",img:"london/hilton-tower-bridge",ypos:"top"},{udicode:"2uVrAuG4W04s8WA05g9krVMw",name:"Andaz London Liverpool Street",img:"london/andaz-liverpool-st"},{udicode:"0Xsb5cG4a04sB7W05g9krVMw",name:"InterContinental London Park Lane",img:"london/intercontinental-london-park-lane"},{udicode:"10hZseG4V04s7bF05g9krVMw",name:"London Marriott Hotel Park Lane",img:"london/marriott-park-lane"},{udicode:"0hbvFIG4S04s5mV05g9krVMw",name:"The Drake Hotel, Chicago",img:"chicago/drake"},{udicode:"35LW5IG4W04s8Xm05g9krVMw",name:"Hyatt Regency Chicago",img:"chicago/hyatt-regency"},{udicode:"4Ehs6yG4T04s6m105g9krVMw",name:"Holiday Inn Chicago Mart Plaza",img:"chicago/holiday-inn-mart-plaza"},{udicode:"1fuNPMG4g04sFY905g9krVMw",name:"Wyndham New Yorker Hotel",img:"new-york/wyndham-new-yorker"},{udicode:"0tiQk4G4U04s6xB05g9krVMw",name:"Wyndham San Diego Bayside",img:"san-diego/wyndham-san-diego-bayside",ypos:"32%"},{udicode:"7c139be373fc47b0854c6572",name:"Cambria Hotel & Suites Washington, D.C.",img:"choice/cambria-dc",ypos:"20%"},{udicode:"3JHe1AG4n04s3jz05g9krVMw",name:"GEM Hotel Chelsea, New York",img:"new-york/gem-ascend-chelsea",ypos:"top"},{udicode:"6ca985eaade24bfeba218c5f",name:"Cambria Hotel & Suites New York - Times Square",img:"choice/cambria-times-square",ypos:"65%"}];e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=r.fromJS,o=n(31),a=o.ROUTING_ROUTE_HAS_CHANGED,s=n(165),u=s.SEARCH_RESULTS_SET_PLACE,l=n(32),c=l.HOTELS_HAS_BEEN_UPDATED,p=n(417),d=p.HOTEL_DETAILS_CLEAR_HOTEL,f=p.HOTEL_DETAILS_SET_HOTEL,h=p.HOTEL_DETAILS_SET_SIMILAR_HOTELS,m=p.HOTEL_DETAILS_BUCKETED_RATES_CHANGED,g=p.ROOM_TYPE_ORDER,y=p.ROOM_TYPES,v=n(37),_=v.hotelDetails,b=v.searchGeocircles,x=v.searchAirports,w=v.searchLocations,S=v.searchPolygons,k=n(441),E=function(e){return e&&e.__esModule?e:{default:e}}(k).default,T=[x,w,S,b],M=window.rkState&&window.rkState.hotelDetails||{},C=M.hotel,O=i({hotel:C,similarHotels:null,previousSearchRoute:null,backToSearchRouteLocation:null,shortList:null,fullList:null,roomTypeOrder:g,roomTypes:y});t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments[1],n=t,r=n.type;if(r===a){var i=t.previous,o=i?i.findIndex(function(e){return e.get("path")!==_}):-1,s=o>-1?i.get(o):null,l=s&&s.get("path"),p=l&&T.indexOf(l)>-1,g=p?s.get("location"):null;return e.set("previousSearchRouteLocation",g)}if(r===u){var y=t.placeEndpoint,v=t.place;return e.merge({placeEndpoint:y,place:v})}if(r===f){var b=null,x=t.hotel,w=e.get("previousSearchRouteLocation");if(x&&w){var S=e.get("place");S&&E(x,S)&&(b=w)}return e.merge({backToSearchRouteLocation:b,hotel:x,similarHotels:null})}if(r===d)return e.merge({backToSearchRouteLocation:null,hotel:null,similarHotels:null});if(r===h&&e.get("hotel"))return e.set("similarHotels",t.hotels.filter(function(t){return t.get("udicode")!==e.get("hotel").get("udicode")}));if(r===c){if(e.get("hotel")&&(e=e.set("hotel",t.hotels.get(e.get("hotel").get("udicode")))),e.get("similarHotels")){var k=e.get("hotel"),M=k&&k.get("rate"),C=M&&(M.get("amount")||M.get("strikethrough"))||k&&k.get("indicativeRate");e=e.set("similarHotels",e.get("similarHotels").map(function(e){return t.hotels.get(e.get("udicode"))}).filter(function(e){var t=e.get("rate"),n=t&&(t.get("amount")||t.get("strikethrough"));return e.get("isLoadingRates")||n&&n<1.3*C&&n>.7*C}))}return e}if(r===m){var A=t.shortList,P=t.fullList;return e.merge({shortList:A,fullList:P})}return e},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(442),i=function(e){return e&&e.__esModule?e:{default:e}}(r).default;t.default=function(e,t){var n=t.get("endpoint");return n.match(/^locations|airports$/)?o(e,t):"polygons"===n?a(e,t):"geocircles"===n&&s(e,t)};var o=function(e,t){if(e.get("locationId")===t.get("id"))return!0;var n=t.get("id"),r=e.get("locations");return!(!r||!r.size)&&r.findIndex(function(e){return e.get("id")===n})>-1},a=function(e,t){var n=t.toJS(),r=n.south,i=n.west,o=n.east,a=n.north,s=e.get("lat"),u=e.get("lng");return r<=s&&s<=a&&o<=u&&u<=i},s=function(e,t){return i({lat:e.get("lat"),lng:e.get("lng")},{lat:t.get("lat"),lng:t.get("lng")})<=t.get("radius")};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return Math.PI/180*e};t.default=function(e,t){var n=e.lat,i=e.lng,o=t.lat,a=t.lng;n=r(n),i=r(i),o=r(o),a=r(a);var s=o-n,u=a-i,l=Math.pow(Math.sin(s/2),2)+Math.cos(n)*Math.cos(o)*Math.pow(Math.sin(u/2),2);return 2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))*6371},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=r.List,o=r.fromJS,a=n(32),s=a.HOTELS_HAS_BEEN_UPDATED,u=n(165),l=u.SEARCH_RESULTS_SET_MAP_PARAMS,c=u.SEARCH_RESULTS_RESET_MAP_PARAMS,p=u.SEARCH_RESULTS_SET_PLACE,d=u.SEARCH_RESULTS_SET_PARAMS,f=u.SEARCH_RESULTS_INC_PAGE,h=u.SEARCH_RESULTS_ADD_HOTELS,m=u.SEARCH_RESULTS_SET_HOTELS,g=u.SEARCH_RESULTS_RESET,y=u.SEARCH_RESULTS_RESET_HOTELS,v=u.SEARCH_RESULTS_SET_IS_LOADING_HOTELS,_=u.numHotelsPerFetch,b=function(){return o({mapParams:null,place:null,metadata:null,previousBaseHotels:[],baseHotels:[],hotels:[],numHotelsToShow:12,sort:"distance-asc",amenities:[],brands:[],maxPrice:null,pageToFetch:0,currentPage:-1,moreHotelsToFetch:!0,moreHotelsToShow:!1,shouldFetchMoreHotels:!0,isLoadingHotels:!0,isLoadingRates:!1,latestRequestTime:0})},x={};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.type===l)return e.set("mapParams",t.mapParams);if(t.type===c)return e.set("mapParams",null);if(t.type===p){var n=t.place,r=e.get("place");return Boolean(r&&r.get("id")===n.get("id"))?e.merge({place:r.merge(n)}):e.merge({place:n,metadata:null})}if(t.type===g)return x={},b();if(t.type===y){x={};var o=e.get("baseHotels");return e.merge({baseHotels:i(),hotels:i(),previousBaseHotels:o.size?o:e.get("previousBaseHotels"),pageToFetch:0,currentPage:-1,moreHotelsToFetch:!0,shouldFetchMoreHotels:!0,isLoadingHotels:!0})}if(t.type===v)return e.set("isLoadingHotels",void 0===t.isLoadingHotels||t.isLoadingHotels);if(t.type===d)return e.merge(t.params);var a=t.type===m;if(t.type===h||a){var u=e.get("latestRequestTime");if(t.requestTime<=u)return e;a&&(x={});var w=t.metadata||e.get("metadata"),S=e.get("baseHotels"),k=a?S:e.get("previousBaseHotels"),E=e.get("pageToFetch"),T=t.hotels.reduce(function(e,t){var n=t.get("udicode"),r=k.find(function(e){return e.get("udicode")==n});return x[n]=e.size,e.push(r||t)},a?i():S),M=Boolean(w&&t.moreHotelsToFetch&&(E+1)*_<w.get("hotelCount")),C=Boolean(M||T.size>e.get("numHotelsToShow")),O=Boolean(M&&T.size<=e.get("numHotelsToShow")+24),A={pageToFetch:a?1:E+1,previousBaseHotels:S,baseHotels:T,moreHotelsToFetch:M,moreHotelsToShow:C,shouldFetchMoreHotels:O,isLoadingHotels:!1,latestRequestTime:t.requestTime};return t.metadata&&(A.metadata=w),e.merge(A)}if(t.type===f){var P=e.get("baseHotels").size,R=e.get("currentPage")+1,D=12*(R+1),I=e.get("moreHotelsToFetch"),N=I||P>D,L=I&&P<=e.get("numHotelsToShow")+24;return e.merge({currentPage:R,numHotelsToShow:D,moreHotelsToShow:N,shouldFetchMoreHotels:L,isLoadingHotels:I})}if(t.type===s){var z=e.get("baseHotels");if(!z.size)return e;var j=e.get("sort")||"",H=j.match(/^rate/),B=e.get("maxPrice");z=z.map(function(e){return t.hotels.get(e.get("udicode"))||e});var F=z;(B||H)&&(F=F.filter(function(e){var t=e.get("rate");return t?!B||(t.get("amount")||t.get("lowestNonQualified"))<B:void 0!==e.get("isLoadingRates")})),F=F.sort(function(e,t){var n=e.get("rate"),r=t.get("rate");if(n&&!r)return-1/0;if(!n&&r)return 1/0;if(H&&n&&r){var i=n.get("amount")||n.get("lowestNonQualified"),o=r.get("amount")||r.get("lowestNonQualified");return("rate-asc"==j?1:-1)*(i-o)}return x[e.get("udicode")]-x[t.get("udicode")]});var U=e.get("moreHotelsToFetch"),V=U||F.size>e.get("numHotelsToShow"),Y=U&&F.size<=e.get("numHotelsToShow")+24;return e.merge({baseHotels:z,hotels:F,moreHotelsToShow:V,shouldFetchMoreHotels:Y,isLoadingRates:F.some(function(e){return e.get("isLoadingRates")})})}return e},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=r.fromJS,o=n(220),a=o.PRICE_ALERTS_SET,s=function(){return i([])};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.type===a?t.alerts:e},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),o=i.fromJS,a=n(239),s=a.SEARCH_INPUT_SET_PLACES,u=a.SEARCH_INPUT_SET_QUERY,l=a.SEARCH_INPUT_SET_OPEN,c=a.SEARCH_INPUT_INCREASE_SELECTED_INDEX,p=a.SEARCH_INPUT_DECREASE_SELECTED_INDEX,d=n(165),f=d.SEARCH_RESULTS_SET_PLACE,h=n(38),m=r(h).default,g=n(193),y=r(g).default,v=o({query:m().query||"",places:[],selectedIndex:0,open:!1,hint:""});t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.type,r=t.places,i=t.query,a=t.open,d=t.place;if(n===f){var h=d&&(d.get("fullName")||d.get("name"));h&&(e=x(b(e.set("query",h))))}if(n===u&&(e=x(b(e.set("query",i).set("open",i.length>0))),i.length<3&&(e=e.set("places",o([])))),n===s&&(e=x(b(e.set("places",r))),y("mapbox-lookup")&&(e=x(b(e.set("places",r))))),n===c&&(e=x(e.set("selectedIndex",(e.get("selectedIndex")+1)%e.get("places").size))),n===p){var m=e.get("selectedIndex");e=x(e.set("selectedIndex",(0===m?e.get("places").size:m)-1))}return n===l&&(e=e.set("open",a),a&&(e=e.set("selectedIndex",0))),e};var _=function(e){return e.toLowerCase()},b=function(e){return e.get("places").get(e.get("selectedIndex"))||(e=e.set("selectedIndex",0)),e},x=function(e){if(0===e.get("query").length)return e.set("hint","");var t=e.get("places").get(e.get("selectedIndex"))||e.get("places").find(function(t){return _(t.get("name")).indexOf(_(e.get("query")))>-1}),n=t?t.get("fullName")||t.get("name"):"",r=e.get("query"),i=n.length>=r.length&&0===_(n).indexOf(_(r));return e.set("hint",i?n:"").set("query",i?n.substr(0,r.length):r)};e.exports=t.default},function(e,t,n){var r,r;!function(t){e.exports=function(){var e;return function e(t,n,i){function o(s,u){if(!n[s]){if(!t[s]){var l="function"==typeof r&&r;if(!u&&l)return r(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var p=n[s]={exports:{}};t[s][0].call(p.exports,function(e){return o(t[s][1][e]||e)},p,p.exports,e,t,n,i)}return n[s].exports}for(var a="function"==typeof r&&r,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,t,n){function r(e){var t,n=0;switch(e.type){case"Polygon":return i(e.coordinates);case"MultiPolygon":for(t=0;t<e.coordinates.length;t++)n+=i(e.coordinates[t]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(t=0;t<e.geometries.length;t++)n+=r(e.geometries[t]);return n}}function i(e){var t=0;if(e&&e.length>0){t+=Math.abs(o(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(o(e[n]))}return t}function o(e){var t,n,r,i,o,u,l,c=0,p=e.length;if(p>2){for(l=0;l<p;l++)l===p-2?(i=p-2,o=p-1,u=0):l===p-1?(i=p-1,o=0,u=1):(i=l,o=l+1,u=l+2),t=e[i],n=e[o],r=e[u],c+=(a(r[0])-a(t[0]))*Math.sin(a(n[1]));c=c*s.RADIUS*s.RADIUS/2}return c}function a(e){return e*Math.PI/180}var s=e("wgs84");t.exports.geometry=r,t.exports.ring=o},{wgs84:36}],2:[function(t,n,r){!function(t,i){"object"==typeof r&&void 0!==n?n.exports=i():"function"==typeof e&&e.amd?e(i):t.glMatrix=i()}(this,function(){"use strict";function e(e,t,n){var r=t[0],i=t[1],o=t[2];return e[0]=r*n[0]+i*n[3]+o*n[6],e[1]=r*n[1]+i*n[4]+o*n[7],e[2]=r*n[2]+i*n[5]+o*n[8],e}function t(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,e}function n(){var e=new Float32Array(4);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e}function r(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u+o*s,e[1]=i*u+a*s,e[2]=r*-s+o*u,e[3]=i*-s+a*u,e}function i(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=n[0],u=n[1];return e[0]=r*s,e[1]=i*s,e[2]=o*u,e[3]=a*u,e}function o(){var e=new Float32Array(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function a(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function s(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function u(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function l(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],l=t[7],c=t[8],p=t[9],d=t[10],f=t[11],h=t[12],m=t[13],g=t[14],y=t[15],v=n*s-r*a,_=n*u-i*a,b=n*l-o*a,x=r*u-i*s,w=r*l-o*s,S=i*l-o*u,k=c*m-p*h,E=c*g-d*h,T=c*y-f*h,M=p*g-d*m,C=p*y-f*m,O=d*y-f*g,A=v*O-_*C+b*M+x*T-w*E+S*k;return A?(A=1/A,e[0]=(s*O-u*C+l*M)*A,e[1]=(i*C-r*O-o*M)*A,e[2]=(m*S-g*w+y*x)*A,e[3]=(d*w-p*S-f*x)*A,e[4]=(u*T-a*O-l*E)*A,e[5]=(n*O-i*T+o*E)*A,e[6]=(g*b-h*S-y*_)*A,e[7]=(c*S-d*b+f*_)*A,e[8]=(a*C-s*T+l*k)*A,e[9]=(r*T-n*C-o*k)*A,e[10]=(h*w-m*b+y*v)*A,e[11]=(p*b-c*w-f*v)*A,e[12]=(s*E-a*M-u*k)*A,e[13]=(n*M-r*E+i*k)*A,e[14]=(m*_-h*x-g*v)*A,e[15]=(c*x-p*_+d*v)*A,e):null}function c(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],p=t[8],d=t[9],f=t[10],h=t[11],m=t[12],g=t[13],y=t[14],v=t[15],_=n[0],b=n[1],x=n[2],w=n[3];return e[0]=_*r+b*s+x*p+w*m,e[1]=_*i+b*u+x*d+w*g,e[2]=_*o+b*l+x*f+w*y,e[3]=_*a+b*c+x*h+w*v,_=n[4],b=n[5],x=n[6],w=n[7],e[4]=_*r+b*s+x*p+w*m,e[5]=_*i+b*u+x*d+w*g,e[6]=_*o+b*l+x*f+w*y,e[7]=_*a+b*c+x*h+w*v,_=n[8],b=n[9],x=n[10],w=n[11],e[8]=_*r+b*s+x*p+w*m,e[9]=_*i+b*u+x*d+w*g,e[10]=_*o+b*l+x*f+w*y,e[11]=_*a+b*c+x*h+w*v,_=n[12],b=n[13],x=n[14],w=n[15],e[12]=_*r+b*s+x*p+w*m,e[13]=_*i+b*u+x*d+w*g,e[14]=_*o+b*l+x*f+w*y,e[15]=_*a+b*c+x*h+w*v,e}function p(e,t,n){var r,i,o,a,s,u,l,c,p,d,f,h,m=n[0],g=n[1],y=n[2];return t===e?(e[12]=t[0]*m+t[4]*g+t[8]*y+t[12],e[13]=t[1]*m+t[5]*g+t[9]*y+t[13],e[14]=t[2]*m+t[6]*g+t[10]*y+t[14],e[15]=t[3]*m+t[7]*g+t[11]*y+t[15]):(r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],p=t[8],d=t[9],f=t[10],h=t[11],e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=u,e[6]=l,e[7]=c,e[8]=p,e[9]=d,e[10]=f,e[11]=h,e[12]=r*m+s*g+p*y+t[12],e[13]=i*m+u*g+d*y+t[13],e[14]=o*m+l*g+f*y+t[14],e[15]=a*m+c*g+h*y+t[15]),e}function d(e,t,n){var r=n[0],i=n[1],o=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function f(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[4],a=t[5],s=t[6],u=t[7],l=t[8],c=t[9],p=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+l*r,e[5]=a*i+c*r,e[6]=s*i+p*r,e[7]=u*i+d*r,e[8]=l*i-o*r,e[9]=c*i-a*r,e[10]=p*i-s*r,e[11]=d*i-u*r,e}function h(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],u=t[3],l=t[4],c=t[5],p=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+l*r,e[1]=a*i+c*r,e[2]=s*i+p*r,e[3]=u*i+d*r,e[4]=l*i-o*r,e[5]=c*i-a*r,e[6]=p*i-s*r,e[7]=d*i-u*r,e}function m(e,t,n,r,i){var o=1/Math.tan(t/2),a=1/(r-i);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+r)*a,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*r*a,e[15]=0,e}function g(e,t,n,r,i,o,a){var s=1/(t-n),u=1/(r-i),l=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*u,e[14]=(a+o)*l,e[15]=1,e}return function(){var e=new Float32Array(3);e[0]=0,e[1]=0,e[2]=0}(),function(){var e=new Float32Array(4);e[0]=0,e[1]=0,e[2]=0,e[3]=0}(),{vec3:{transformMat3:e},vec4:{transformMat4:t},mat2:{create:n,rotate:r,scale:i},mat3:{create:o,fromRotation:a},mat4:{create:s,identity:u,translate:p,scale:d,multiply:c,perspective:m,rotateX:f,rotateZ:h,invert:l,ortho:g}}})},{}],3:[function(e,t,n){"use strict";function r(e){return!!(i()&&o()&&a()&&s()&&u()&&l()&&c()&&p(e&&e.failIfMajorPerformanceCaveat))}function i(){return"undefined"!=typeof window&&"undefined"!=typeof document}function o(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function a(){return Function.prototype&&Function.prototype.bind}function s(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function u(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function l(){if(!("Worker"in window&&"Blob"in window))return!1;var e,t,n=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(n);try{t=new Worker(r),e=!0}catch(t){e=!1}return t&&t.terminate(),URL.revokeObjectURL(r),e}function c(){return"Uint8ClampedArray"in window}function p(e){return void 0===f[e]&&(f[e]=d(e)),f[e]}function d(e){var t=document.createElement("canvas"),n=Object.create(r.webGLContextAttributes);return n.failIfMajorPerformanceCaveat=e,t.probablySupportsContext?t.probablySupportsContext("webgl",n)||t.probablySupportsContext("experimental-webgl",n):t.supportsContext?t.supportsContext("webgl",n)||t.supportsContext("experimental-webgl",n):t.getContext("webgl",n)||t.getContext("experimental-webgl",n)}void 0!==t&&t.exports?t.exports=r:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=r);var f={};r.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}},{}],4:[function(e,t,n){"use strict";function r(e,t){this.x=e,this.y=t}t.exports=r,r.prototype={clone:function(){return new r(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,n=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=n,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=t*this.x-n*this.y,i=n*this.x+t*this.y;return this.x=r,this.y=i,this},_rotateAround:function(e,t){var n=Math.cos(e),r=Math.sin(e),i=t.x+n*(this.x-t.x)-r*(this.y-t.y),o=t.y+r*(this.x-t.x)+n*(this.y-t.y);return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},r.convert=function(e){return e instanceof r?e:Array.isArray(e)?new r(e[0],e[1]):e}},{}],5:[function(t,n,r){!function(t,i){"object"==typeof r&&void 0!==n?n.exports=i():"function"==typeof e&&e.amd?e(i):t.ShelfPack=i()}(this,function(){function e(e,t,n){n=n||{},this.w=e||64,this.h=t||64,this.autoResize=!!n.autoResize,this.shelves=[],this.freebins=[],this.stats={},this.bins={},this.maxId=0}function t(e,t,n){this.x=0,this.y=e,this.w=this.free=t,this.h=n}function n(e,t,n,r,i,o,a){this.id=e,this.x=t,this.y=n,this.w=r,this.h=i,this.maxw=o||r,this.maxh=a||i,this.refcount=0}return e.prototype.pack=function(e,t){e=[].concat(e),t=t||{};for(var n,r,i,o,a=[],s=0;s<e.length;s++)if(n=e[s].w||e[s].width,r=e[s].h||e[s].height,i=e[s].id,n&&r){if(!(o=this.packOne(n,r,i)))continue;t.inPlace&&(e[s].x=o.x,e[s].y=o.y,e[s].id=o.id),a.push(o)}return this.shrink(),a},e.prototype.packOne=function(e,n,r){var i,o,a,s,u={freebin:-1,shelf:-1,waste:1/0},l=0;if("string"==typeof r||"number"==typeof r){if(i=this.getBin(r))return this.ref(i),i;"number"==typeof r&&(this.maxId=Math.max(r,this.maxId))}else r=++this.maxId;for(s=0;s<this.freebins.length;s++){if(i=this.freebins[s],n===i.maxh&&e===i.maxw)return this.allocFreebin(s,e,n,r);n>i.maxh||e>i.maxw||n<=i.maxh&&e<=i.maxw&&(a=i.maxw*i.maxh-e*n)<u.waste&&(u.waste=a,u.freebin=s)}for(s=0;s<this.shelves.length;s++)if(o=this.shelves[s],l+=o.h,!(e>o.free)){if(n===o.h)return this.allocShelf(s,e,n,r);n>o.h||n<o.h&&(a=(o.h-n)*e)<u.waste&&(u.freebin=-1,u.waste=a,u.shelf=s)}if(-1!==u.freebin)return this.allocFreebin(u.freebin,e,n,r);if(-1!==u.shelf)return this.allocShelf(u.shelf,e,n,r);if(n<=this.h-l&&e<=this.w)return o=new t(l,this.w,n),this.allocShelf(this.shelves.push(o)-1,e,n,r);if(this.autoResize){var c,p,d,f;return c=p=this.h,d=f=this.w,(d<=c||e>d)&&(f=2*Math.max(e,d)),(c<d||n>c)&&(p=2*Math.max(n,c)),this.resize(f,p),this.packOne(e,n,r)}return null},e.prototype.allocFreebin=function(e,t,n,r){var i=this.freebins.splice(e,1)[0];return i.id=r,i.w=t,i.h=n,i.refcount=0,this.bins[r]=i,this.ref(i),i},e.prototype.allocShelf=function(e,t,n,r){var i=this.shelves[e],o=i.alloc(t,n,r);return this.bins[r]=o,this.ref(o),o},e.prototype.shrink=function(){if(this.shelves.length>0){for(var e=0,t=0,n=0;n<this.shelves.length;n++){var r=this.shelves[n];t+=r.h,e=Math.max(r.w-r.free,e)}this.resize(e,t)}},e.prototype.getBin=function(e){return this.bins[e]},e.prototype.ref=function(e){if(1==++e.refcount){var t=e.h;this.stats[t]=1+(0|this.stats[t])}return e.refcount},e.prototype.unref=function(e){return 0===e.refcount?0:(0==--e.refcount&&(this.stats[e.h]--,delete this.bins[e.id],this.freebins.push(e)),e.refcount)},e.prototype.clear=function(){this.shelves=[],this.freebins=[],this.stats={},this.bins={},this.maxId=0},e.prototype.resize=function(e,t){this.w=e,this.h=t;for(var n=0;n<this.shelves.length;n++)this.shelves[n].resize(e);return!0},t.prototype.alloc=function(e,t,r){if(e>this.free||t>this.h)return null;var i=this.x;return this.x+=e,this.free-=e,new n(r,i,this.y,e,t,e,this.h)},t.prototype.resize=function(e){return this.free+=e-this.w,this.w=e,!0},e})},{}],6:[function(e,t,n){"use strict";function r(e,t,n,r,i,o){this.fontSize=e||24,this.buffer=void 0===t?3:t,this.cutoff=r||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=n||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function i(e,t,n,r,i,a,s){for(var u=0;u<t;u++){for(var l=0;l<n;l++)r[l]=e[l*t+u];for(o(r,i,a,s,n),l=0;l<n;l++)e[l*t+u]=i[l]}for(l=0;l<n;l++){for(u=0;u<t;u++)r[u]=e[l*t+u];for(o(r,i,a,s,t),u=0;u<t;u++)e[l*t+u]=Math.sqrt(i[u])}}function o(e,t,n,r,i){n[0]=0,r[0]=-a,r[1]=+a;for(var o=1,s=0;o<i;o++){for(var u=(e[o]+o*o-(e[n[s]]+n[s]*n[s]))/(2*o-2*n[s]);u<=r[s];)s--,u=(e[o]+o*o-(e[n[s]]+n[s]*n[s]))/(2*o-2*n[s]);s++,n[s]=o,r[s]=u,r[s+1]=+a}for(o=0,s=0;o<i;o++){for(;r[s+1]<o;)s++;t[o]=(o-n[s])*(o-n[s])+e[n[s]]}}t.exports=r;var a=1e20;r.prototype.draw=function(e){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(e,this.buffer,this.middle);for(var t=this.ctx.getImageData(0,0,this.size,this.size),n=new Uint8ClampedArray(this.size*this.size),r=0;r<this.size*this.size;r++){var o=t.data[4*r+3]/255;this.gridOuter[r]=1===o?0:0===o?a:Math.pow(Math.max(0,.5-o),2),this.gridInner[r]=1===o?a:0===o?0:Math.pow(Math.max(0,o-.5),2)}for(i(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),i(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),r=0;r<this.size*this.size;r++){var s=this.gridOuter[r]-this.gridInner[r];n[r]=Math.max(0,Math.min(255,Math.round(255-255*(s/this.radius+this.cutoff))))}return n}},{}],7:[function(e,t,n){function r(e,t,n,r){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=r,this.p2x=n,this.p2y=r}t.exports=r,r.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},r.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},r.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},r.prototype.solveCurveX=function(e,t){void 0===t&&(t=1e-6);var n,r,i,o,a;for(i=e,a=0;a<8;a++){if(o=this.sampleCurveX(i)-e,Math.abs(o)<t)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=o/s}if(n=0,r=1,(i=e)<n)return n;if(i>r)return r;for(;n<r;){if(o=this.sampleCurveX(i),Math.abs(o-e)<t)return i;e>o?n=i:r=i,i=.5*(r-n)+n}return i},r.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},{}],8:[function(e,t,n){t.exports.VectorTile=e("./lib/vectortile.js"),t.exports.VectorTileFeature=e("./lib/vectortilefeature.js"),t.exports.VectorTileLayer=e("./lib/vectortilelayer.js")},{"./lib/vectortile.js":9,"./lib/vectortilefeature.js":10,"./lib/vectortilelayer.js":11}],9:[function(e,t,n){"use strict";function r(e,t){this.layers=e.readFields(i,{},t)}function i(e,t,n){if(3===e){var r=new o(n,n.readVarint()+n.pos);r.length&&(t[r.name]=r)}}var o=e("./vectortilelayer");t.exports=r},{"./vectortilelayer":11}],10:[function(e,t,n){"use strict";function r(e,t,n,r,o){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=r,this._values=o,e.readFields(i,this,t)}function i(e,t,n){1==e?t.id=n.readVarint():2==e?o(n,t):3==e?t.type=n.readVarint():4==e&&(t._geometry=n.pos)}function o(e,t){for(var n=e.readVarint()+e.pos;e.pos<n;){var r=t._keys[e.readVarint()],i=t._values[e.readVarint()];t.properties[r]=i}}function a(e){var t=e.length;if(t<=1)return[e];for(var n,r,i=[],o=0;o<t;o++){var a=s(e[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[e[o]]):n.push(e[o]))}return n&&i.push(n),i}function s(e){for(var t,n,r=0,i=0,o=e.length,a=o-1;i<o;a=i++)t=e[i],n=e[a],r+=(n.x-t.x)*(t.y+n.y);return r}var u=e("@mapbox/point-geometry");t.exports=r,r.types=["Unknown","Point","LineString","Polygon"],r.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,r=1,i=0,o=0,a=0,s=[];e.pos<n;){if(!i){var l=e.readVarint();r=7&l,i=l>>3}if(i--,1===r||2===r)o+=e.readSVarint(),a+=e.readSVarint(),1===r&&(t&&s.push(t),t=[]),t.push(new u(o,a));else{if(7!==r)throw new Error("unknown command "+r);t&&t.push(t[0].clone())}}return t&&s.push(t),s},r.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,r=0,i=0,o=0,a=1/0,s=-1/0,u=1/0,l=-1/0;e.pos<t;){if(!r){var c=e.readVarint();n=7&c,r=c>>3}if(r--,1===n||2===n)i+=e.readSVarint(),o+=e.readSVarint(),i<a&&(a=i),i>s&&(s=i),o<u&&(u=o),o>l&&(l=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,u,s,l]},r.prototype.toGeoJSON=function(e,t,n){function i(e){for(var t=0;t<e.length;t++){var n=e[t],r=180-360*(n.y+c)/u;e[t]=[360*(n.x+l)/u-180,360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90]}}var o,s,u=this.extent*Math.pow(2,n),l=this.extent*e,c=this.extent*t,p=this.loadGeometry(),d=r.types[this.type];switch(this.type){case 1:var f=[];for(o=0;o<p.length;o++)f[o]=p[o][0];p=f,i(p);break;case 2:for(o=0;o<p.length;o++)i(p[o]);break;case 3:for(p=a(p),o=0;o<p.length;o++)for(s=0;s<p[o].length;s++)i(p[o][s])}1===p.length?p=p[0]:d="Multi"+d;var h={type:"Feature",geometry:{type:d,coordinates:p},properties:this.properties};return"id"in this&&(h.id=this.id),h}},{"@mapbox/point-geometry":4}],11:[function(e,t,n){"use strict";function r(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(i,this,t),this.length=this._features.length}function i(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():5===e?t.extent=n.readVarint():2===e?t._features.push(n.pos):3===e?t._keys.push(n.readString()):4===e&&t._values.push(o(n))}function o(e){for(var t=null,n=e.readVarint()+e.pos;e.pos<n;){var r=e.readVarint()>>3;t=1===r?e.readString():2===r?e.readFloat():3===r?e.readDouble():4===r?e.readVarint64():5===r?e.readVarint():6===r?e.readSVarint():7===r?e.readBoolean():null}return t}var a=e("./vectortilefeature.js");t.exports=r,r.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new a(this._pbf,t,this.extent,this._keys,this._values)}},{"./vectortilefeature.js":10}],12:[function(t,n,r){!function(t,i){"object"==typeof r&&void 0!==n?i(r):"function"==typeof e&&e.amd?e(["exports"],i):i(t.WhooTS=t.WhooTS||{})}(this,function(e){function t(e,t,r,i,o,a){return a=a||{},e+"?"+["bbox="+n(r,i,o),"format="+(a.format||"image/png"),"service="+(a.service||"WMS"),"version="+(a.version||"1.1.1"),"request="+(a.request||"GetMap"),"srs="+(a.srs||"EPSG:3857"),"width="+(a.width||256),"height="+(a.height||256),"layers="+t].join("&")}function n(e,t,n){t=Math.pow(2,n)-t-1;var i=r(256*e,256*t,n),o=r(256*(e+1),256*(t+1),n);return i[0]+","+i[1]+","+o[0]+","+o[1]}function r(e,t,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[e*r-2*Math.PI*6378137/2,t*r-2*Math.PI*6378137/2]}e.getURL=t,e.getTileBBox=n,e.getMercCoords=r,Object.defineProperty(e,"__esModule",{value:!0})})},{}],13:[function(e,t,n){"use strict";function r(e,t,n){n=n||2;var r=t&&t.length,o=r?t[0]*n:e.length,s=i(e,0,o,n,!0),u=[];if(!s)return u;var l,c,d,f,h,m,g;if(r&&(s=p(e,t,s,n)),e.length>80*n){l=d=e[0],c=f=e[1];for(var y=n;y<o;y+=n)h=e[y],m=e[y+1],h<l&&(l=h),m<c&&(c=m),h>d&&(d=h),m>f&&(f=m);g=Math.max(d-l,f-c),g=0!==g?1/g:0}return a(s,u,n,l,c,g),u}function i(e,t,n,r,i){var o,a;if(i===P(e,t,n,r)>0)for(o=t;o<n;o+=r)a=C(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=C(o,e[o],e[o+1],a);return a&&w(a,a.next)&&(O(a),a=a.next),a}function o(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!w(r,r.next)&&0!==x(r.prev,r,r.next))r=r.next;else{if(O(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function a(e,t,n,r,i,p,d){if(e){!d&&p&&m(e,r,i,p);for(var f,h,g=e;e.prev!==e.next;)if(f=e.prev,h=e.next,p?u(e,r,i,p):s(e))t.push(f.i/n),t.push(e.i/n),t.push(h.i/n),O(e),e=h.next,g=h.next;else if((e=h)===g){d?1===d?(e=l(e,t,n),a(e,t,n,r,i,p,2)):2===d&&c(e,t,n,r,i,p):a(o(e),t,n,r,i,p,1);break}}}function s(e){var t=e.prev,n=e,r=e.next;if(x(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(_(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&x(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function u(e,t,n,r){var i=e.prev,o=e,a=e.next;if(x(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,l=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,p=y(s,u,t,n,r),d=y(l,c,t,n,r),f=e.prevZ,h=e.nextZ;f&&f.z>=p&&h&&h.z<=d;){if(f!==e.prev&&f!==e.next&&_(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&x(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,h!==e.prev&&h!==e.next&&_(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&x(h.prev,h,h.next)>=0)return!1;h=h.nextZ}for(;f&&f.z>=p;){if(f!==e.prev&&f!==e.next&&_(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&x(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;h&&h.z<=d;){if(h!==e.prev&&h!==e.next&&_(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&x(h.prev,h,h.next)>=0)return!1;h=h.nextZ}return!0}function l(e,t,n){var r=e;do{var i=r.prev,o=r.next.next;!w(i,o)&&S(i,r,r.next,o)&&E(i,o)&&E(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),O(r),O(r.next),r=e=o),r=r.next}while(r!==e);return r}function c(e,t,n,r,i,s){var u=e;do{for(var l=u.next.next;l!==u.prev;){if(u.i!==l.i&&b(u,l)){var c=M(u,l);return u=o(u,u.next),c=o(c,c.next),a(u,t,n,r,i,s),void a(c,t,n,r,i,s)}l=l.next}u=u.next}while(u!==e)}function p(e,t,n,r){var a,s,u,l,c,p=[];for(a=0,s=t.length;a<s;a++)u=t[a]*r,l=a<s-1?t[a+1]*r:e.length,c=i(e,u,l,r,!1),c===c.next&&(c.steiner=!0),p.push(v(c));for(p.sort(d),a=0;a<p.length;a++)f(p[a],n),n=o(n,n.next);return n}function d(e,t){return e.x-t.x}function f(e,t){if(t=h(e,t)){var n=M(t,e);o(n,n.next)}}function h(e,t){var n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===a)return n.prev;var u,l=n,c=n.x,p=n.y,d=1/0;for(r=n.next;r!==l;)i>=r.x&&r.x>=c&&i!==r.x&&_(o<p?i:a,o,c,p,o<p?a:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<d||u===d&&r.x>n.x)&&E(r,e)&&(n=r,d=u),r=r.next;return n}function m(e,t,n,r){var i=e;do{null===i.z&&(i.z=y(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,g(i)}function g(e){var t,n,r,i,o,a,s,u,l=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<l&&(s++,r=r.nextZ);t++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1);return e}function y(e,t,n,r,i){return e=32767*(e-n)*i,t=32767*(t-r)*i,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1}function v(e){var t=e,n=e;do{t.x<n.x&&(n=t),t=t.next}while(t!==e);return n}function _(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function b(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!k(e,t)&&E(e,t)&&E(t,e)&&T(e,t)}function x(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function w(e,t){return e.x===t.x&&e.y===t.y}function S(e,t,n,r){return!!(w(e,t)&&w(n,r)||w(e,r)&&w(n,t))||x(e,t,n)>0!=x(e,t,r)>0&&x(n,r,e)>0!=x(n,r,t)>0}function k(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&S(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}function E(e,t){return x(e.prev,e,e.next)<0?x(e,t,e.next)>=0&&x(e,e.prev,t)>=0:x(e,t,e.prev)<0||x(e,e.next,t)<0}function T(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}function M(e,t){var n=new A(e.i,e.x,e.y),r=new A(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function C(e,t,n,r){var i=new A(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function O(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function A(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function P(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}t.exports=r,t.exports.default=r,r.deviation=function(e,t,n,r){var i=t&&t.length,o=i?t[0]*n:e.length,a=Math.abs(P(e,0,o,n));if(i)for(var s=0,u=t.length;s<u;s++){var l=t[s]*n,c=s<u-1?t[s+1]*n:e.length;a-=Math.abs(P(e,l,c,n))}var p=0;for(s=0;s<r.length;s+=3){var d=r[s]*n,f=r[s+1]*n,h=r[s+2]*n;p+=Math.abs((e[d]-e[h])*(e[f+1]-e[d+1])-(e[d]-e[f])*(e[h+1]-e[d+1]))}return 0===a&&0===p?0:Math.abs((p-a)/a)},r.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)n.vertices.push(e[i][o][a]);i>0&&(r+=e[i-1].length,n.holes.push(r))}return n}},{}],14:[function(e,t,n){function r(e,t){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.map(i(r,t)),e;case"Feature":return e.geometry=r(e.geometry,t),e;case"Polygon":case"MultiPolygon":return o(e,t);default:return e}}function i(e,t){return function(n){return e(n,t)}}function o(e,t){return"Polygon"===e.type?e.coordinates=a(e.coordinates,t):"MultiPolygon"===e.type&&(e.coordinates=e.coordinates.map(i(a,t))),e}function a(e,t){t=!!t,e[0]=s(e[0],t);for(var n=1;n<e.length;n++)e[n]=s(e[n],!t);return e}function s(e,t){return u(e)===t?e:e.reverse()}function u(e){return l.ring(e)>=0}var l=e("@mapbox/geojson-area");t.exports=r},{"@mapbox/geojson-area":1}],15:[function(e,t,n){"use strict";function r(e,t,n,r,s,u,l){if(n/=t,r/=t,u>=n&&l<=r)return e;if(u>r||l<n)return null;for(var p=[],d=0;d<e.length;d++){var f=e[d],h=f.geometry,m=f.type,g=0===s?f.minX:f.minY,y=0===s?f.maxX:f.maxY;if(g>=n&&y<=r)p.push(f);else if(!(g>r||y<n)){var v=[];if("Point"===m||"MultiPoint"===m)i(h,v,n,r,s);else if("LineString"===m)o(h,v,n,r,s,!1);else if("MultiLineString"===m)a(h,v,n,r,s,!1);else if("Polygon"===m)a(h,v,n,r,s,!0);else if("MultiPolygon"===m)for(var _=0;_<h.length;_++){var b=[];a(h[_],b,n,r,s,!0),b.length&&v.push(b)}v.length&&("LineString"!==m&&"MultiLineString"!==m||(1===v.length?(m="LineString",v=v[0]):m="MultiLineString"),"Point"!==m&&"MultiPoint"!==m||(m=3===v.length?"Point":"MultiPoint"),p.push(c(f.id,m,v,f.tags)))}}return p.length?p:null}function i(e,t,n,r,i){for(var o=0;o<e.length;o+=3){var a=e[o+i];a>=n&&a<=r&&(t.push(e[o]),t.push(e[o+1]),t.push(e[o+2]))}}function o(e,t,n,r,i,o){for(var a=[],c=0===i?u:l,p=0;p<e.length-3;p+=3){var d=e[p],f=e[p+1],h=e[p+2],m=e[p+3],g=e[p+4],y=0===i?d:f,v=0===i?m:g,_=!1;y<n?v>=n&&c(a,d,f,m,g,n):y>r?v<=r&&c(a,d,f,m,g,r):s(a,d,f,h),v<n&&y>=n&&(c(a,d,f,m,g,n),_=!0),v>r&&y<=r&&(c(a,d,f,m,g,r),_=!0),!o&&_&&(a.size=e.size,t.push(a),a=[])}var b=e.length-3;d=e[b],f=e[b+1],h=e[b+2],y=0===i?d:f,y>=n&&y<=r&&s(a,d,f,h),b=a.length-3,o&&b>=3&&(a[b]!==a[0]||a[b+1]!==a[1])&&s(a,a[0],a[1],a[2]),a.length&&(a.size=e.size,t.push(a))}function a(e,t,n,r,i,a){for(var s=0;s<e.length;s++)o(e[s],t,n,r,i,a)}function s(e,t,n,r){e.push(t),e.push(n),e.push(r)}function u(e,t,n,r,i,o){e.push(o),e.push(n+(o-t)*(i-n)/(r-t)),e.push(1)}function l(e,t,n,r,i,o){e.push(t+(o-n)*(r-t)/(i-n)),e.push(o),e.push(1)}t.exports=r;var c=e("./feature")},{"./feature":17}],16:[function(e,t,n){"use strict";function r(e,t){var n=[];if("FeatureCollection"===e.type)for(var r=0;r<e.features.length;r++)i(n,e.features[r],t);else"Feature"===e.type?i(n,e,t):i(n,{geometry:e},t);return n}function i(e,t,n){if(t.geometry){var r=t.geometry.coordinates,u=t.geometry.type,l=n*n,c=[];if("Point"===u)o(r,c);else if("MultiPoint"===u)for(var d=0;d<r.length;d++)o(r[d],c);else if("LineString"===u)a(r,c,l,!1);else if("MultiLineString"===u)s(r,c,l,!1);else if("Polygon"===u)s(r,c,l,!0);else{if("MultiPolygon"!==u){if("GeometryCollection"===u){for(d=0;d<t.geometry.geometries.length;d++)i(e,{geometry:t.geometry.geometries[d],properties:t.properties},n);return}throw new Error("Input data is not a valid GeoJSON object.")}for(d=0;d<r.length;d++){var f=[];s(r[d],f,l,!0),c.push(f)}}e.push(p(t.id,u,c,t.properties))}}function o(e,t){t.push(u(e[0])),t.push(l(e[1])),t.push(0)}function a(e,t,n,r){for(var i,o,a=0,s=0;s<e.length;s++){var p=u(e[s][0]),d=l(e[s][1]);t.push(p),t.push(d),t.push(0),s>0&&(a+=r?(i*d-p*o)/2:Math.sqrt(Math.pow(p-i,2)+Math.pow(d-o,2))),i=p,o=d}var f=t.length-3;t[2]=1,c(t,0,f,n),t[f+2]=1,t.size=Math.abs(a)}function s(e,t,n,r){for(var i=0;i<e.length;i++){var o=[];a(e[i],o,n,r),t.push(o)}}function u(e){return e/360+.5}function l(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}t.exports=r;var c=e("./simplify"),p=e("./feature")},{"./feature":17,"./simplify":19}],17:[function(e,t,n){"use strict";function r(e,t,n,r){var o={id:e||null,type:t,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return i(o),o}function i(e){var t=e.geometry,n=e.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)o(e,t);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<t.length;r++)o(e,t[r]);else if("MultiPolygon"===n)for(r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)o(e,t[r][i])}function o(e,t){for(var n=0;n<t.length;n+=3)e.minX=Math.min(e.minX,t[n]),e.minY=Math.min(e.minY,t[n+1]),e.maxX=Math.max(e.maxX,t[n]),e.maxY=Math.max(e.maxY,t[n+1])}t.exports=r},{}],18:[function(e,t,n){"use strict";function r(e,t){return new i(e,t)}function i(e,t){t=this.options=a(Object.create(this.options),t);var n=t.debug;if(n&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");var r=1<<t.maxZoom,i=s(e,t.tolerance/(r*t.extent));this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),i=c(i,t.buffer/t.extent),i.length&&this.splitTile(i,0,0,0),n&&(i.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function o(e,t,n){return 32*((1<<e)*n+t)+e}function a(e,t){for(var n in t)e[n]=t[n];return e}t.exports=r;var s=e("./convert"),u=e("./transform"),l=e("./clip"),c=e("./wrap"),p=e("./tile");i.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,debug:0},i.prototype.splitTile=function(e,t,n,r,i,a,s){for(var u=[e,t,n,r],c=this.options,d=c.debug;u.length;){r=u.pop(),n=u.pop(),t=u.pop(),e=u.pop();var f=1<<t,h=o(t,n,r),m=this.tiles[h],g=t===c.maxZoom?0:c.tolerance/(f*c.extent);if(!m&&(d>1&&console.time("creation"),m=this.tiles[h]=p(e,f,n,r,g,t===c.maxZoom),this.tileCoords.push({z:t,x:n,y:r}),d)){d>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,n,r,m.numFeatures,m.numPoints,m.numSimplified),console.timeEnd("creation"));var y="z"+t;this.stats[y]=(this.stats[y]||0)+1,this.total++}if(m.source=e,i){if(t===c.maxZoom||t===i)continue;var v=1<<i-t;if(n!==Math.floor(a/v)||r!==Math.floor(s/v))continue}else if(t===c.indexMaxZoom||m.numPoints<=c.indexMaxPoints)continue;if(m.source=null,0!==e.length){d>1&&console.time("clipping");var _,b,x,w,S,k,E=.5*c.buffer/c.extent,T=.5-E,M=.5+E,C=1+E;_=b=x=w=null,S=l(e,f,n-E,n+M,0,m.minX,m.maxX),k=l(e,f,n+T,n+C,0,m.minX,m.maxX),e=null,S&&(_=l(S,f,r-E,r+M,1,m.minY,m.maxY),b=l(S,f,r+T,r+C,1,m.minY,m.maxY),S=null),k&&(x=l(k,f,r-E,r+M,1,m.minY,m.maxY),w=l(k,f,r+T,r+C,1,m.minY,m.maxY),k=null),d>1&&console.timeEnd("clipping"),u.push(_||[],t+1,2*n,2*r),u.push(b||[],t+1,2*n,2*r+1),u.push(x||[],t+1,2*n+1,2*r),u.push(w||[],t+1,2*n+1,2*r+1)}}},i.prototype.getTile=function(e,t,n){var r=this.options,i=r.extent,a=r.debug;if(e<0||e>24)return null;var s=1<<e;t=(t%s+s)%s;var l=o(e,t,n);if(this.tiles[l])return u.tile(this.tiles[l],i);a>1&&console.log("drilling down to z%d-%d-%d",e,t,n);for(var c,p=e,d=t,f=n;!c&&p>0;)p--,d=Math.floor(d/2),f=Math.floor(f/2),c=this.tiles[o(p,d,f)];return c&&c.source?(a>1&&console.log("found parent tile z%d-%d-%d",p,d,f),a>1&&console.time("drilling down"),this.splitTile(c.source,p,d,f,e,t,n),a>1&&console.timeEnd("drilling down"),this.tiles[l]?u.tile(this.tiles[l],i):null):null}},{"./clip":15,"./convert":16,"./tile":20,"./transform":21,"./wrap":22}],19:[function(e,t,n){"use strict";function r(e,t,n,o){for(var a,s=o,u=e[t],l=e[t+1],c=e[n],p=e[n+1],d=t+3;d<n;d+=3){var f=i(e[d],e[d+1],u,l,c,p);f>s&&(a=d,s=f)}s>o&&(a-t>3&&r(e,t,a,o),e[a+2]=s,n-a>3&&r(e,a,n,o))}function i(e,t,n,r,i,o){var a=i-n,s=o-r;if(0!==a||0!==s){var u=((e-n)*a+(t-r)*s)/(a*a+s*s);u>1?(n=i,r=o):u>0&&(n+=a*u,r+=s*u)}return a=e-n,s=t-r,a*a+s*s}t.exports=r},{}],20:[function(e,t,n){"use strict";function r(e,t,n,r,o,a){for(var s={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z2:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},u=0;u<e.length;u++){s.numFeatures++,i(s,e[u],o,a);var l=e[u].minX,c=e[u].minY,p=e[u].maxX,d=e[u].maxY;l<s.minX&&(s.minX=l),c<s.minY&&(s.minY=c),p>s.maxX&&(s.maxX=p),d>s.maxY&&(s.maxY=d)}return s}function i(e,t,n,r){var i=t.geometry,a=t.type,s=[];if("Point"===a||"MultiPoint"===a)for(var u=0;u<i.length;u+=3)s.push(i[u]),s.push(i[u+1]),e.numPoints++,e.numSimplified++;else if("LineString"===a)o(s,i,e,n,r,!1,!1);else if("MultiLineString"===a||"Polygon"===a)for(u=0;u<i.length;u++)o(s,i[u],e,n,r,"Polygon"===a,0===u);else if("MultiPolygon"===a)for(var l=0;l<i.length;l++){var c=i[l];for(u=0;u<c.length;u++)o(s,c[u],e,n,r,!0,0===u)}if(s.length){var p={geometry:s,type:"Polygon"===a||"MultiPolygon"===a?3:"LineString"===a||"MultiLineString"===a?2:1,tags:t.tags||null};null!==t.id&&(p.id=t.id),e.features.push(p)}}function o(e,t,n,r,i,o,s){var u=r*r;if(!i&&t.size<(o?u:r))return void(n.numPoints+=t.length/3);for(var l=[],c=0;c<t.length;c+=3)(i||t[c+2]>u)&&(n.numSimplified++,l.push(t[c]),l.push(t[c+1])),n.numPoints++;o&&a(l,s),e.push(l)}function a(e,t){for(var n=0,r=0,i=e.length,o=i-2;r<i;o=r,r+=2)n+=(e[r]-e[o])*(e[r+1]+e[o+1]);if(n>0===t)for(r=0,i=e.length;r<i/2;r+=2){var a=e[r],s=e[r+1];e[r]=e[i-2-r],e[r+1]=e[i-1-r],e[i-2-r]=a,e[i-1-r]=s}}t.exports=r},{}],21:[function(e,t,n){"use strict";function r(e,t){if(e.transformed)return e;var n,r,o,a=e.z2,s=e.x,u=e.y;for(n=0;n<e.features.length;n++){var l=e.features[n],c=l.geometry,p=l.type;if(l.geometry=[],1===p)for(r=0;r<c.length;r+=2)l.geometry.push(i(c[r],c[r+1],t,a,s,u));else for(r=0;r<c.length;r++){var d=[];for(o=0;o<c[r].length;o+=2)d.push(i(c[r][o],c[r][o+1],t,a,s,u));l.geometry.push(d)}}return e.transformed=!0,e}function i(e,t,n,r,i,o){return[Math.round(n*(e*r-i)),Math.round(n*(t*r-o))]}n.tile=r,n.point=i},{}],22:[function(e,t,n){"use strict";function r(e,t){var n=e,r=a(e,1,-1-t,t,0,-1,2),o=a(e,1,1-t,2+t,0,-1,2);return(r||o)&&(n=a(e,1,-t,1+t,0,-1,2)||[],r&&(n=i(r,1).concat(n)),o&&(n=n.concat(i(o,-1)))),n}function i(e,t){for(var n=[],r=0;r<e.length;r++){var i,a=e[r],u=a.type;if("Point"===u||"MultiPoint"===u||"LineString"===u)i=o(a.geometry,t);else if("MultiLineString"===u||"Polygon"===u){i=[];for(var l=0;l<a.geometry.length;l++)i.push(o(a.geometry[l],t))}else if("MultiPolygon"===u)for(i=[],l=0;l<a.geometry.length;l++){for(var c=[],p=0;p<a.geometry[l].length;p++)c.push(o(a.geometry[l][p],t));i.push(c)}n.push(s(a.id,u,i,a.tags))}return n}function o(e,t){var n=[];n.size=e.size;for(var r=0;r<e.length;r+=3)n.push(e[r]+t,e[r+1],e[r+2]);return n}var a=e("./clip"),s=e("./feature");t.exports=r},{"./clip":15,"./feature":17}],23:[function(e,t,n){"use strict";function r(e,t,n){var r=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var o=new Int32Array(this.arrayBuffer);e=o[0],t=o[1],n=o[2],this.d=t+2*n;for(var a=0;a<this.d*this.d;a++){var s=o[i+a],u=o[i+a+1];r.push(s===u?null:o.subarray(s,u))}var l=o[i+r.length],c=o[i+r.length+1];this.keys=o.subarray(l,c),this.bboxes=o.subarray(c),this.insert=this._insertReadonly}else{this.d=t+2*n;for(var p=0;p<this.d*this.d;p++)r.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=n,this.scale=t/e,this.uid=0;var d=n/t*e;this.min=-d,this.max=e+d}t.exports=r;var i=3;r.prototype.insert=function(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},r.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},r.prototype._insertCell=function(e,t,n,r,i,o){this.cells[i].push(o)},r.prototype.query=function(e,t,n,r){var i=this.min,o=this.max;if(e<=i&&t<=i&&o<=n&&o<=r)return Array.prototype.slice.call(this.keys);var a=[],s={};return this._forEachCell(e,t,n,r,this._queryCell,a,s),a},r.prototype._queryCell=function(e,t,n,r,i,o,a){var s=this.cells[i];if(null!==s)for(var u=this.keys,l=this.bboxes,c=0;c<s.length;c++){var p=s[c];if(void 0===a[p]){var d=4*p;e<=l[d+2]&&t<=l[d+3]&&n>=l[d+0]&&r>=l[d+1]?(a[p]=!0,o.push(u[p])):a[p]=!1}}},r.prototype._forEachCell=function(e,t,n,r,i,o,a){for(var s=this._convertToCellCoord(e),u=this._convertToCellCoord(t),l=this._convertToCellCoord(n),c=this._convertToCellCoord(r),p=s;p<=l;p++)for(var d=u;d<=c;d++){var f=this.d*d+p;if(i.call(this,e,t,n,r,f,o,a))return}},r.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},r.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=i+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var o=new Int32Array(t+n+this.keys.length+this.bboxes.length);o[0]=this.extent,o[1]=this.n,o[2]=this.padding;for(var a=t,s=0;s<e.length;s++){var u=e[s];o[i+s]=a,o.set(u,a),a+=u.length}return o[i+e.length]=a,o.set(this.keys,a),a+=this.keys.length,o[i+e.length+1]=a,o.set(this.bboxes,a),a+=this.bboxes.length,o.buffer}},{}],24:[function(e,t,n){n.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,p=n?i-1:0,d=n?-1:1,f=e[t+p];for(p+=d,o=f&(1<<-c)-1,f>>=-c,c+=s;c>0;o=256*o+e[t+p],p+=d,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+e[t+p],p+=d,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),o-=l}return(f?-1:1)*a*Math.pow(2,o-r)},n.write=function(e,t,n,r,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,p=c>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,h=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),t+=a+p>=1?d/u:d*Math.pow(2,1-p),t*u>=2&&(a++,u/=2),a+p>=c?(s=0,a=c):a+p>=1?(s=(t*u-1)*Math.pow(2,i),a+=p):(s=t*Math.pow(2,p-1)*Math.pow(2,i),a=0));i>=8;e[n+f]=255&s,f+=h,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;e[n+f]=255&a,f+=h,a/=256,l-=8);e[n+f-h]|=128*m}},{}],25:[function(e,t,n){"use strict";function r(e,t,n,r,o){return new i(e,t,n,r,o)}function i(e,t,n,r,i){t=t||o,n=n||a,i=i||Array,this.nodeSize=r||64,this.points=e,this.ids=new i(e.length),this.coords=new i(2*e.length);for(var u=0;u<e.length;u++)this.ids[u]=u,this.coords[2*u]=t(e[u]),this.coords[2*u+1]=n(e[u]);s(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}function o(e){return e[0]}function a(e){return e[1]}var s=e("./sort"),u=e("./range"),l=e("./within");t.exports=r,i.prototype={range:function(e,t,n,r){return u(this.ids,this.coords,e,t,n,r,this.nodeSize)},within:function(e,t,n){return l(this.ids,this.coords,e,t,n,this.nodeSize)}}},{"./range":26,"./sort":27,"./within":28}],26:[function(e,t,n){"use strict";function r(e,t,n,r,i,o,a){for(var s,u,l=[0,e.length-1,0],c=[];l.length;){var p=l.pop(),d=l.pop(),f=l.pop();if(d-f<=a)for(var h=f;h<=d;h++)s=t[2*h],u=t[2*h+1],s>=n&&s<=i&&u>=r&&u<=o&&c.push(e[h]);else{var m=Math.floor((f+d)/2);s=t[2*m],u=t[2*m+1],s>=n&&s<=i&&u>=r&&u<=o&&c.push(e[m]);var g=(p+1)%2;(0===p?n<=s:r<=u)&&(l.push(f),l.push(m-1),l.push(g)),(0===p?i>=s:o>=u)&&(l.push(m+1),l.push(d),l.push(g))}}return c}t.exports=r},{}],27:[function(e,t,n){"use strict";function r(e,t,n,o,a,s){if(!(a-o<=n)){var u=Math.floor((o+a)/2);i(e,t,u,o,a,s%2),r(e,t,n,o,u-1,s+1),r(e,t,n,u+1,a,s+1)}}function i(e,t,n,r,a,s){for(;a>r;){if(a-r>600){var u=a-r+1,l=n-r+1,c=Math.log(u),p=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*p*(u-p)/u)*(l-u/2<0?-1:1);i(e,t,n,Math.max(r,Math.floor(n-l*p/u+d)),Math.min(a,Math.floor(n+(u-l)*p/u+d)),s)}var f=t[2*n+s],h=r,m=a;for(o(e,t,r,n),t[2*a+s]>f&&o(e,t,r,a);h<m;){for(o(e,t,h,m),h++,m--;t[2*h+s]<f;)h++;for(;t[2*m+s]>f;)m--}t[2*r+s]===f?o(e,t,r,m):(m++,o(e,t,m,a)),m<=n&&(r=m+1),n<=m&&(a=m-1)}}function o(e,t,n,r){a(e,n,r),a(t,2*n,2*r),a(t,2*n+1,2*r+1)}function a(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}t.exports=r},{}],28:[function(e,t,n){"use strict";function r(e,t,n,r,o,a){for(var s=[0,e.length-1,0],u=[],l=o*o;s.length;){var c=s.pop(),p=s.pop(),d=s.pop();if(p-d<=a)for(var f=d;f<=p;f++)i(t[2*f],t[2*f+1],n,r)<=l&&u.push(e[f]);else{var h=Math.floor((d+p)/2),m=t[2*h],g=t[2*h+1];i(m,g,n,r)<=l&&u.push(e[h]);var y=(c+1)%2;(0===c?n-o<=m:r-o<=g)&&(s.push(d),s.push(h-1),s.push(y)),(0===c?n+o>=m:r+o>=g)&&(s.push(h+1),s.push(p),s.push(y))}}return u}function i(e,t,n,r){var i=e-n,o=t-r;return i*i+o*o}t.exports=r},{}],29:[function(e,t,n){"use strict";function r(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}function i(e,t,n){var r,i,o=n.buf;if(i=o[n.pos++],r=(112&i)>>4,i<128)return a(e,r,t);if(i=o[n.pos++],r|=(127&i)<<3,i<128)return a(e,r,t);if(i=o[n.pos++],r|=(127&i)<<10,i<128)return a(e,r,t);if(i=o[n.pos++],r|=(127&i)<<17,i<128)return a(e,r,t);if(i=o[n.pos++],r|=(127&i)<<24,i<128)return a(e,r,t);if(i=o[n.pos++],r|=(1&i)<<31,i<128)return a(e,r,t);throw new Error("Expected varint not more than 10 bytes")}function o(e){return e.type===r.Bytes?e.readVarint()+e.pos:e.pos+1}function a(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function s(e,t){var n,r;if(e>=0?(n=e%4294967296|0,r=e/4294967296|0):(n=~(-e%4294967296),r=~(-e/4294967296),4294967295^n?n=n+1|0:(n=0,r=r+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),u(n,r,t),l(r,t)}function u(e,t,n){n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos]=127&e}function l(e,t){var n=(7&e)<<4;t.buf[t.pos++]|=n|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}function c(e,t,n){var r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.ceil(Math.log(t)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=e;i--)n.buf[i+r]=n.buf[i]}function p(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function d(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function f(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function h(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function m(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function g(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function y(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function v(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function _(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function b(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function x(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function w(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function S(e,t,n){for(var r="",i=t;i<n;){var o=e[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s>n)break;var u,l,c;1===s?o<128&&(a=o):2===s?128==(192&(u=e[i+1]))&&(a=(31&o)<<6|63&u)<=127&&(a=null):3===s?(u=e[i+1],l=e[i+2],128==(192&u)&&128==(192&l)&&((a=(15&o)<<12|(63&u)<<6|63&l)<=2047||a>=55296&&a<=57343)&&(a=null)):4===s&&(u=e[i+1],l=e[i+2],c=e[i+3],128==(192&u)&&128==(192&l)&&128==(192&c)&&((a=(15&o)<<18|(63&u)<<12|(63&l)<<6|63&c)<=65535||a>=1114112)&&(a=null)),null===a?(a=65533,s=1):a>65535&&(a-=65536,r+=String.fromCharCode(a>>>10&1023|55296),a=56320|1023&a),r+=String.fromCharCode(a),i+=s}return r}function k(e,t,n){for(var r,i,o=0;o<t.length;o++){if((r=t.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):i=r;continue}if(r<56320){e[n++]=239,e[n++]=191,e[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(e[n++]=239,e[n++]=191,e[n++]=189,i=null);r<128?e[n++]=r:(r<2048?e[n++]=r>>6|192:(r<65536?e[n++]=r>>12|224:(e[n++]=r>>18|240,e[n++]=r>>12&63|128),e[n++]=r>>6&63|128),e[n++]=63&r|128)}return n}t.exports=r;var E=e("ieee754");r.Varint=0,r.Fixed64=1,r.Bytes=2,r.Fixed32=5,r.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,e(i,t,this),this.pos===o&&this.skip(r)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=b(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=w(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=b(this.buf,this.pos)+4294967296*b(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=b(this.buf,this.pos)+4294967296*w(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=E.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=E.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,n,r=this.buf;return n=r[this.pos++],t=127&n,n<128?t:(n=r[this.pos++],t|=(127&n)<<7,n<128?t:(n=r[this.pos++],t|=(127&n)<<14,n<128?t:(n=r[this.pos++],t|=(127&n)<<21,n<128?t:(n=r[this.pos],t|=(15&n)<<28,i(t,e,this)))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=S(this.buf,this.pos,e);return this.pos=e,t},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){var n=o(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){var t=o(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){var t=o(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){var t=o(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){var t=o(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){var t=o(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){var t=o(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){var t=o(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){var t=o(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===r.Varint)for(;this.buf[this.pos++]>127;);else if(t===r.Bytes)this.pos=this.readVarint()+this.pos;else if(t===r.Fixed32)this.pos+=4;else{if(t!==r.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),x(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),x(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),x(this.buf,-1&e,this.pos),x(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),x(this.buf,-1&e,this.pos),x(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){if((e=+e||0)>268435455||e<0)return void s(e,this);this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127)))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=k(this.buf,e,this.pos);var n=this.pos-t;n>=128&&c(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),E.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),E.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var r=this.pos-n;r>=128&&c(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(e,t,n){this.writeTag(e,r.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){this.writeMessage(e,p,t)},writePackedSVarint:function(e,t){this.writeMessage(e,d,t)},writePackedBoolean:function(e,t){this.writeMessage(e,m,t)},writePackedFloat:function(e,t){this.writeMessage(e,f,t)},writePackedDouble:function(e,t){this.writeMessage(e,h,t)},writePackedFixed32:function(e,t){this.writeMessage(e,g,t)},writePackedSFixed32:function(e,t){this.writeMessage(e,y,t)},writePackedFixed64:function(e,t){this.writeMessage(e,v,t)},writePackedSFixed64:function(e,t){this.writeMessage(e,_,t)},writeBytesField:function(e,t){this.writeTag(e,r.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,r.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,r.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,r.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,r.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,r.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,r.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,r.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,r.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,r.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}}},{ieee754:24}],30:[function(e,t,n){"use strict";function r(e,t,n,a,s){for(n=n||0,a=a||e.length-1,s=s||o;a>n;){if(a-n>600){var u=a-n+1,l=t-n+1,c=Math.log(u),p=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*p*(u-p)/u)*(l-u/2<0?-1:1);r(e,t,Math.max(n,Math.floor(t-l*p/u+d)),Math.min(a,Math.floor(t+(u-l)*p/u+d)),s)}var f=e[t],h=n,m=a;for(i(e,n,t),s(e[a],f)>0&&i(e,n,a);h<m;){for(i(e,h,m),h++,m--;s(e[h],f)<0;)h++;for(;s(e[m],f)>0;)m--}0===s(e[n],f)?i(e,n,m):(m++,i(e,m,a)),m<=t&&(n=m+1),t<=m&&(a=m-1)}}function i(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function o(e,t){return e<t?-1:e>t?1:0}t.exports=r},{}],31:[function(e,t,n){"use strict";function r(e){return new i(e)}function i(e){this.options=f(Object.create(this.options),e),this.trees=new Array(this.options.maxZoom+1)}function o(e,t,n,r,i){return{x:e,y:t,zoom:1/0,id:r,properties:i,parentId:-1,numPoints:n}}function a(e,t){var n=e.geometry.coordinates;return{x:l(n[0]),y:c(n[1]),zoom:1/0,id:t,parentId:-1}}function s(e){return{type:"Feature",properties:u(e),geometry:{type:"Point",coordinates:[p(e.x),d(e.y)]}}}function u(e){var t=e.numPoints,n=t>=1e4?Math.round(t/1e3)+"k":t>=1e3?Math.round(t/100)/10+"k":t;return f(f({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:n})}function l(e){return e/360+.5}function c(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function p(e){return 360*(e-.5)}function d(e){var t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function f(e,t){for(var n in t)e[n]=t[n];return e}function h(e){return e.x}function m(e){return e.y}var g=e("kdbush");t.exports=r,i.prototype={options:{minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,initial:function(){return{}},map:function(e){return e}},load:function(e){var t=this.options.log;t&&console.time("total time");var n="prepare "+e.length+" points";t&&console.time(n),this.points=e;var r=e.map(a);t&&console.timeEnd(n);for(var i=this.options.maxZoom;i>=this.options.minZoom;i--){var o=+Date.now();this.trees[i+1]=g(r,h,m,this.options.nodeSize,Float32Array),r=this._cluster(r,i),t&&console.log("z%d: %d clusters in %dms",i,r.length,+Date.now()-o)}return this.trees[this.options.minZoom]=g(r,h,m,this.options.nodeSize,Float32Array),t&&console.timeEnd("total time"),this},getClusters:function(e,t){for(var n=this.trees[this._limitZoom(t)],r=n.range(l(e[0]),c(e[3]),l(e[2]),c(e[1])),i=[],o=0;o<r.length;o++){var a=n.points[r[o]];i.push(a.numPoints?s(a):this.points[a.id])}return i},getChildren:function(e,t){for(var n=this.trees[t+1].points[e],r=this.options.radius/(this.options.extent*Math.pow(2,t)),i=this.trees[t+1].within(n.x,n.y,r),o=[],a=0;a<i.length;a++){var u=this.trees[t+1].points[i[a]];u.parentId===e&&o.push(u.numPoints?s(u):this.points[u.id])}return o},getLeaves:function(e,t,n,r){n=n||10,r=r||0;var i=[];return this._appendLeaves(i,e,t,n,r,0),i},getTile:function(e,t,n){var r=this.trees[this._limitZoom(e)],i=Math.pow(2,e),o=this.options.extent,a=this.options.radius,s=a/o,u=(n-s)/i,l=(n+1+s)/i,c={features:[]};return this._addTileFeatures(r.range((t-s)/i,u,(t+1+s)/i,l),r.points,t,n,i,c),0===t&&this._addTileFeatures(r.range(1-s/i,u,1,l),r.points,i,n,i,c),t===i-1&&this._addTileFeatures(r.range(0,u,s/i,l),r.points,-1,n,i,c),c.features.length?c:null},getClusterExpansionZoom:function(e,t){for(;t<this.options.maxZoom;){var n=this.getChildren(e,t);if(t++,1!==n.length)break;e=n[0].properties.cluster_id}return t},_appendLeaves:function(e,t,n,r,i,o){for(var a=this.getChildren(t,n),s=0;s<a.length;s++){var u=a[s].properties;if(u.cluster?o+u.point_count<=i?o+=u.point_count:o=this._appendLeaves(e,u.cluster_id,n+1,r,i,o):o<i?o++:e.push(a[s]),e.length===r)break}return o},_addTileFeatures:function(e,t,n,r,i,o){for(var a=0;a<e.length;a++){var s=t[e[a]];o.features.push({type:1,geometry:[[Math.round(this.options.extent*(s.x*i-n)),Math.round(this.options.extent*(s.y*i-r))]],tags:s.numPoints?u(s):this.points[s.id].properties})}},_limitZoom:function(e){return Math.max(this.options.minZoom,Math.min(e,this.options.maxZoom+1))},_cluster:function(e,t){for(var n=[],r=this.options.radius/(this.options.extent*Math.pow(2,t)),i=0;i<e.length;i++){var a=e[i];if(!(a.zoom<=t)){a.zoom=t;var s=this.trees[t+1],u=s.within(a.x,a.y,r),l=a.numPoints||1,c=a.x*l,p=a.y*l,d=null;this.options.reduce&&(d=this.options.initial(),this._accumulate(d,a));for(var f=0;f<u.length;f++){var h=s.points[u[f]];if(t<h.zoom){var m=h.numPoints||1;h.zoom=t,c+=h.x*m,p+=h.y*m,l+=m,h.parentId=i,this.options.reduce&&this._accumulate(d,h)}}1===l?n.push(a):(a.parentId=i,n.push(o(c/l,p/l,l,i,d)))}}return n},_accumulate:function(e,t){var n=t.numPoints?t.properties:this.options.map(this.points[t.id].properties);this.options.reduce(e,n)}}},{kdbush:25}],32:[function(e,t,n){"use strict";function r(e,t){if(!(this instanceof r))return new r(e,t);if(this.data=e||[],this.length=this.data.length,this.compare=t||i,this.length>0)for(var n=this.length>>1;n>=0;n--)this._down(n)}function i(e,t){return e<t?-1:e>t?1:0}t.exports=r,r.prototype={push:function(e){this.data.push(e),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var e=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),e}},peek:function(){return this.data[0]},_up:function(e){for(var t=this.data,n=this.compare,r=t[e];e>0;){var i=e-1>>1,o=t[i];if(n(r,o)>=0)break;t[e]=o,e=i}t[e]=r},_down:function(e){for(var t=this.data,n=this.compare,r=this.length,i=r>>1,o=t[e];e<i;){var a=1+(e<<1),s=a+1,u=t[a];if(s<r&&n(t[s],u)<0&&(a=s,u=t[s]),n(u,o)>=0)break;t[e]=u,e=a}t[e]=o}}},{}],33:[function(e,t,n){function r(e){var t=new f;return o(e,t),t.finish()}function i(e){var t={};for(var n in e)t[n]=new h(e[n].features),t[n].name=n;return r({layers:t})}function o(e,t){for(var n in e.layers)t.writeMessage(3,a,e.layers[n])}function a(e,t){t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var n,r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<e.length;n++)r.feature=e.feature(n),t.writeMessage(2,s,r);var i=r.keys;for(n=0;n<i.length;n++)t.writeStringField(3,i[n]);var o=r.values;for(n=0;n<o.length;n++)t.writeMessage(4,d,o[n])}function s(e,t){var n=e.feature;void 0!==n.id&&t.writeVarintField(1,n.id),t.writeMessage(2,u,e),t.writeVarintField(3,n.type),t.writeMessage(4,p,n)}function u(e,t){var n=e.feature,r=e.keys,i=e.values,o=e.keycache,a=e.valuecache;for(var s in n.properties){var u=o[s];void 0===u&&(r.push(s),u=r.length-1,o[s]=u),t.writeVarint(u);var l=n.properties[s],c=typeof l;"string"!==c&&"boolean"!==c&&"number"!==c&&(l=JSON.stringify(l));var p=c+":"+l,d=a[p];void 0===d&&(i.push(l),d=i.length-1,a[p]=d),t.writeVarint(d)}}function l(e,t){return(t<<3)+(7&e)}function c(e){return e<<1^e>>31}function p(e,t){for(var n=e.loadGeometry(),r=e.type,i=0,o=0,a=n.length,s=0;s<a;s++){var u=n[s],p=1;1===r&&(p=u.length),t.writeVarint(l(1,p));for(var d=0;d<u.length;d++){1===d&&1!==r&&t.writeVarint(l(2,u.length-1));var f=u[d].x-i,h=u[d].y-o;t.writeVarint(c(f)),t.writeVarint(c(h)),i+=f,o+=h}}}function d(e,t){var n=typeof e;"string"===n?t.writeStringField(1,e):"boolean"===n?t.writeBooleanField(7,e):"number"===n&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}var f=e("pbf"),h=e("./lib/geojson_wrapper");t.exports=r,t.exports.fromVectorTileJs=r,t.exports.fromGeojsonVt=i,t.exports.GeoJSONWrapper=h},{"./lib/geojson_wrapper":34,pbf:29}],34:[function(e,t,n){"use strict";function r(e){this.features=e,this.length=e.length}function i(e){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=4096}var o=e("@mapbox/point-geometry"),a=e("@mapbox/vector-tile").VectorTileFeature;t.exports=r,r.prototype.feature=function(e){return new i(this.features[e])},i.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var t=0;t<e.length;t++){for(var n=e[t],r=[],i=0;i<n.length;i++)r.push(new o(n[i][0],n[i][1]));this.geometry.push(r)}return this.geometry},i.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,n=-1/0,r=1/0,i=-1/0,o=0;o<e.length;o++)for(var a=e[o],s=0;s<a.length;s++){var u=a[s];t=Math.min(t,u.x),n=Math.max(n,u.x),r=Math.min(r,u.y),i=Math.max(i,u.y)}return[t,r,n,i]},i.prototype.toGeoJSON=a.prototype.toGeoJSON},{"@mapbox/point-geometry":4,"@mapbox/vector-tile":8}],35:[function(e,t,n){var r=arguments[3],i=arguments[4],o=arguments[5],a=JSON.stringify;t.exports=function(e,t){function n(e){g[e]=!0;for(var t in i[e][1]){var r=i[e][1][t];g[r]||n(r)}}for(var s,u=Object.keys(o),l=0,c=u.length;l<c;l++){var p=u[l],d=o[p].exports;if(d===e||d&&d.default===e){s=p;break}}if(!s){s=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var f={},l=0,c=u.length;l<c;l++){var p=u[l];f[p]=p}i[s]=["function(require,module,exports){"+e+"(self); }",f]}var h=Math.floor(Math.pow(16,8)*Math.random()).toString(16),m={};m[s]=s,i[h]=["function(require,module,exports){var f = require("+a(s)+");(f.default ? f.default : f)(self);}",m];var g={};n(h);var y="("+r+")({"+Object.keys(g).map(function(e){return a(e)+":["+i[e][0]+","+a(i[e][1])+"]"}).join(",")+"},{},["+a(h)+"])",v=window.URL||window.webkitURL||window.mozURL||window.msURL,_=new Blob([y],{type:"text/javascript"});if(t&&t.bare)return _;var b=v.createObjectURL(_),x=new Worker(b);return x.objectURL=b,x}},{}],36:[function(e,t,n){t.exports.RADIUS=6378137,t.exports.FLATTENING=1/298.257223563,t.exports.POLAR_RADIUS=6356752.3142},{}],37:[function(e,t,n){t.exports={version:"0.44.0"}},{}],38:[function(e,t,n){"use strict";var r=e("../util/struct_array"),i=r.StructArray,o=e("../util/struct_array"),a=o.Struct,s=e("../util/web_worker_transfer"),u=s.register,l=e("@mapbox/point-geometry"),c=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t){var n=this.length;this.resize(n+1);var r=2*n;return this.int16[r+0]=e,this.int16[r+1]=t,n},t}(i);c.prototype.bytesPerElement=4,u("StructArrayLayout2i4",c);var p=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r){var i=this.length;this.resize(i+1);var o=4*i;return this.int16[o+0]=e,this.int16[o+1]=t,this.int16[o+2]=n,this.int16[o+3]=r,i},t}(i);p.prototype.bytesPerElement=8,u("StructArrayLayout4i8",p);var d=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,i,o){var a=this.length;this.resize(a+1);var s=6*a;return this.int16[s+0]=e,this.int16[s+1]=t,this.int16[s+2]=n,this.int16[s+3]=r,this.int16[s+4]=i,this.int16[s+5]=o,a},t}(i);d.prototype.bytesPerElement=12,u("StructArrayLayout2i4i12",d);var f=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,i,o,a,s){var u=this.length;this.resize(u+1);var l=6*u,c=12*u;return this.int16[l+0]=e,this.int16[l+1]=t,this.int16[l+2]=n,this.int16[l+3]=r,this.uint8[c+8]=i,this.uint8[c+9]=o,this.uint8[c+10]=a,this.uint8[c+11]=s,u},t}(i);f.prototype.bytesPerElement=12,u("StructArrayLayout4i4ub12",f);var h=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,i,o,a,s){var u=this.length;this.resize(u+1);var l=8*u;return this.int16[l+0]=e,this.int16[l+1]=t,this.int16[l+2]=n,this.int16[l+3]=r,this.uint16[l+4]=i,this.uint16[l+5]=o,this.uint16[l+6]=a,this.uint16[l+7]=s,u},t}(i);h.prototype.bytesPerElement=16,u("StructArrayLayout4i4ui16",h);var m=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n){var r=this.length;this.resize(r+1);var i=3*r;return this.float32[i+0]=e,this.float32[i+1]=t,this.float32[i+2]=n,r},t}(i);m.prototype.bytesPerElement=12,u("StructArrayLayout3f12",m);var g=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e){var t=this.length;this.resize(t+1);var n=1*t;return this.uint32[n+0]=e,t},t}(i);g.prototype.bytesPerElement=4,u("StructArrayLayout1ul4",g);var y=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,i,o,a,s,u,l,c){var p=this.length;this.resize(p+1);var d=12*p,f=6*p;return this.int16[d+0]=e,this.int16[d+1]=t,this.int16[d+2]=n,this.int16[d+3]=r,this.int16[d+4]=i,this.int16[d+5]=o,this.uint32[f+3]=a,this.uint16[d+8]=s,this.uint16[d+9]=u,this.int16[d+10]=l,this.int16[d+11]=c,p},t}(i);y.prototype.bytesPerElement=24,u("StructArrayLayout6i1ul2ui2i24",y);var v=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,i,o){var a=this.length;this.resize(a+1);var s=6*a;return this.int16[s+0]=e,this.int16[s+1]=t,this.int16[s+2]=n,this.int16[s+3]=r,this.int16[s+4]=i,this.int16[s+5]=o,a},t}(i);v.prototype.bytesPerElement=12,u("StructArrayLayout2i2i2i12",v);var _=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t){var n=this.length;this.resize(n+1);var r=4*n;return this.uint8[r+0]=e,this.uint8[r+1]=t,n},t}(i);_.prototype.bytesPerElement=4,u("StructArrayLayout2ub4",_);var b=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,i,o,a,s,u,l,c,p,d,f){var h=this.length;this.resize(h+1);var m=20*h,g=10*h,y=40*h;return this.int16[m+0]=e,this.int16[m+1]=t,this.uint16[m+2]=n,this.uint16[m+3]=r,this.uint32[g+2]=i,this.uint32[g+3]=o,this.uint32[g+4]=a,this.uint16[m+10]=s,this.uint16[m+11]=u,this.uint16[m+12]=l,this.float32[g+7]=c,this.float32[g+8]=p,this.uint8[y+36]=d,this.uint8[y+37]=f,h},t}(i);b.prototype.bytesPerElement=40,u("StructArrayLayout2i2ui3ul3ui2f2ub40",b);var x=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e){var t=this.length;this.resize(t+1);var n=1*t;return this.float32[n+0]=e,t},t}(i);x.prototype.bytesPerElement=4,u("StructArrayLayout1f4",x);var w=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n){var r=this.length;this.resize(r+1);var i=3*r;return this.int16[i+0]=e,this.int16[i+1]=t,this.int16[i+2]=n,r},t}(i);w.prototype.bytesPerElement=6,u("StructArrayLayout3i6",w);var S=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n){var r=this.length;this.resize(r+1);var i=2*r,o=4*r;return this.uint32[i+0]=e,this.uint16[o+2]=t,this.uint16[o+3]=n,r},t}(i);S.prototype.bytesPerElement=8,u("StructArrayLayout1ul2ui8",S);var k=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n){var r=this.length;this.resize(r+1);var i=3*r;return this.uint16[i+0]=e,this.uint16[i+1]=t,this.uint16[i+2]=n,r},t}(i);k.prototype.bytesPerElement=6,u("StructArrayLayout3ui6",k);var E=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t){var n=this.length;this.resize(n+1);var r=2*n;return this.uint16[r+0]=e,this.uint16[r+1]=t,n},t}(i);E.prototype.bytesPerElement=4,u("StructArrayLayout2ui4",E);var T=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t){var n=this.length;this.resize(n+1);var r=2*n;return this.float32[r+0]=e,this.float32[r+1]=t,n},t}(i);T.prototype.bytesPerElement=8,u("StructArrayLayout2f8",T);var M=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r){var i=this.length;this.resize(i+1);var o=4*i;return this.float32[o+0]=e,this.float32[o+1]=t,this.float32[o+2]=n,this.float32[o+3]=r,i},t}(i);M.prototype.bytesPerElement=16,u("StructArrayLayout4f16",M);var C=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={anchorPointX:{},anchorPointY:{},x1:{},y1:{},x2:{},y2:{},featureIndex:{},sourceLayerIndex:{},bucketIndex:{},radius:{},signedDistanceFromAnchor:{},anchorPoint:{}};return n.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorPointX.set=function(e){this._structArray.int16[this._pos2+0]=e},n.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorPointY.set=function(e){this._structArray.int16[this._pos2+1]=e},n.x1.get=function(){return this._structArray.int16[this._pos2+2]},n.x1.set=function(e){this._structArray.int16[this._pos2+2]=e},n.y1.get=function(){return this._structArray.int16[this._pos2+3]},n.y1.set=function(e){this._structArray.int16[this._pos2+3]=e},n.x2.get=function(){return this._structArray.int16[this._pos2+4]},n.x2.set=function(e){this._structArray.int16[this._pos2+4]=e},n.y2.get=function(){return this._structArray.int16[this._pos2+5]},n.y2.set=function(e){this._structArray.int16[this._pos2+5]=e},n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.featureIndex.set=function(e){this._structArray.uint32[this._pos4+3]=e},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},n.sourceLayerIndex.set=function(e){this._structArray.uint16[this._pos2+8]=e},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.bucketIndex.set=function(e){this._structArray.uint16[this._pos2+9]=e},n.radius.get=function(){return this._structArray.int16[this._pos2+10]},n.radius.set=function(e){this._structArray.int16[this._pos2+10]=e},n.signedDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+11]},n.signedDistanceFromAnchor.set=function(e){this._structArray.int16[this._pos2+11]=e},n.anchorPoint.get=function(){return new l(this.anchorPointX,this.anchorPointY)},Object.defineProperties(t.prototype,n),t}(a);C.prototype.size=24;var O=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e){return new C(this,e)},t}(y);u("CollisionBoxArray",O);var A=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={anchorX:{},anchorY:{},glyphStartIndex:{},numGlyphs:{},vertexStartIndex:{},lineStartIndex:{},lineLength:{},segment:{},lowerSize:{},upperSize:{},lineOffsetX:{},lineOffsetY:{},writingMode:{},hidden:{}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorX.set=function(e){this._structArray.int16[this._pos2+0]=e},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorY.set=function(e){this._structArray.int16[this._pos2+1]=e},n.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.glyphStartIndex.set=function(e){this._structArray.uint16[this._pos2+2]=e},n.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},n.numGlyphs.set=function(e){this._structArray.uint16[this._pos2+3]=e},n.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},n.vertexStartIndex.set=function(e){this._structArray.uint32[this._pos4+2]=e},n.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.lineStartIndex.set=function(e){this._structArray.uint32[this._pos4+3]=e},n.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},n.lineLength.set=function(e){this._structArray.uint32[this._pos4+4]=e},n.segment.get=function(){return this._structArray.uint16[this._pos2+10]},n.segment.set=function(e){this._structArray.uint16[this._pos2+10]=e},n.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},n.lowerSize.set=function(e){this._structArray.uint16[this._pos2+11]=e},n.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},n.upperSize.set=function(e){this._structArray.uint16[this._pos2+12]=e},n.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},n.lineOffsetX.set=function(e){this._structArray.float32[this._pos4+7]=e},n.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},n.lineOffsetY.set=function(e){this._structArray.float32[this._pos4+8]=e},n.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},n.writingMode.set=function(e){this._structArray.uint8[this._pos1+36]=e},n.hidden.get=function(){return this._structArray.uint8[this._pos1+37]},n.hidden.set=function(e){this._structArray.uint8[this._pos1+37]=e},Object.defineProperties(t.prototype,n),t}(a);A.prototype.size=40;var P=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e){return new A(this,e)},t}(b);u("PlacedSymbolArray",P);var R=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={offsetX:{}};return n.offsetX.get=function(){return this._structArray.float32[this._pos4+0]},n.offsetX.set=function(e){this._structArray.float32[this._pos4+0]=e},Object.defineProperties(t.prototype,n),t}(a);R.prototype.size=4;var D=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getoffsetX=function(e){return this.float32[1*e+0]},t.prototype.get=function(e){return new R(this,e)},t}(x);u("GlyphOffsetArray",D);var I=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={x:{},y:{},tileUnitDistanceFromAnchor:{}};return n.x.get=function(){return this._structArray.int16[this._pos2+0]},n.x.set=function(e){this._structArray.int16[this._pos2+0]=e},n.y.get=function(){return this._structArray.int16[this._pos2+1]},n.y.set=function(e){this._structArray.int16[this._pos2+1]=e},n.tileUnitDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+2]},n.tileUnitDistanceFromAnchor.set=function(e){this._structArray.int16[this._pos2+2]=e},Object.defineProperties(t.prototype,n),t}(a);I.prototype.size=6;var N=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getx=function(e){return this.int16[3*e+0]},t.prototype.gety=function(e){return this.int16[3*e+1]},t.prototype.gettileUnitDistanceFromAnchor=function(e){return this.int16[3*e+2]},t.prototype.get=function(e){return new I(this,e)},t}(w);u("SymbolLineVertexArray",N);var L=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={featureIndex:{},sourceLayerIndex:{},bucketIndex:{}};return n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},n.featureIndex.set=function(e){this._structArray.uint32[this._pos4+0]=e},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.sourceLayerIndex.set=function(e){this._structArray.uint16[this._pos2+2]=e},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},n.bucketIndex.set=function(e){this._structArray.uint16[this._pos2+3]=e},Object.defineProperties(t.prototype,n),t}(a);L.prototype.size=8;var z=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e){return new L(this,e)},t}(S);u("FeatureIndexArray",z),t.exports={StructArrayLayout2i4:c,StructArrayLayout4i8:p,StructArrayLayout2i4i12:d,StructArrayLayout4i4ub12:f,StructArrayLayout4i4ui16:h,StructArrayLayout3f12:m,StructArrayLayout1ul4:g,StructArrayLayout6i1ul2ui2i24:y,StructArrayLayout2i2i2i12:v,StructArrayLayout2ub4:_,StructArrayLayout2i2ui3ul3ui2f2ub40:b,StructArrayLayout1f4:x,StructArrayLayout3i6:w,StructArrayLayout1ul2ui8:S,StructArrayLayout3ui6:k,StructArrayLayout2ui4:E,StructArrayLayout2f8:T,StructArrayLayout4f16:M,PosArray:c,RasterBoundsArray:p,CircleLayoutArray:c,FillLayoutArray:c,FillExtrusionLayoutArray:d,HeatmapLayoutArray:c,LineLayoutArray:f,SymbolLayoutArray:h,SymbolDynamicLayoutArray:m,SymbolOpacityArray:g,CollisionBoxLayoutArray:v,CollisionCircleLayoutArray:v,CollisionVertexArray:_,TriangleIndexArray:k,LineIndexArray:E,CollisionBoxArray:O,PlacedSymbolArray:P,GlyphOffsetArray:D,SymbolLineVertexArray:N,FeatureIndexArray:z}},{"../util/struct_array":272,"../util/web_worker_transfer":279,"@mapbox/point-geometry":4}],39:[function(e,t,n){"use strict";t.exports={deserialize:function(e,t){var n={};if(!t)return n;for(var r=0,i=e;r<i.length;r+=1){var o=i[r],a=o.layerIds.map(function(e){return t.getLayer(e)}).filter(Boolean);if(0!==a.length){o.layers=a;for(var s=0,u=a;s<u.length;s+=1)n[u[s].id]=o}}return n}}},{}],40:[function(e,t,n){"use strict";var r=e("../../util/struct_array"),i=r.createLayout;t.exports=i([{name:"a_pos",components:2,type:"Int16"}],4)},{"../../util/struct_array":272}],41:[function(e,t,n){"use strict";function r(e,t,n,r,i){e.emplaceBack(2*t+(r+1)/2,2*n+(i+1)/2)}var i=e("../array_types"),o=i.CircleLayoutArray,a=e("./circle_attributes").members,s=e("../segment"),u=s.SegmentVector,l=e("../program_configuration"),c=l.ProgramConfigurationSet,p=e("../index_array_type"),d=p.TriangleIndexArray,f=e("../load_geometry"),h=e("../extent"),m=e("../../util/web_worker_transfer"),g=m.register,y=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=e.index,this.layoutVertexArray=new o,this.indexArray=new d,this.segments=new u,this.programConfigurations=new c(a,e.layers,e.zoom)};y.prototype.populate=function(e,t){for(var n=this,r=0,i=e;r<i.length;r+=1){var o=i[r],a=o.feature,s=o.index,u=o.sourceLayerIndex;if(n.layers[0]._featureFilter({zoom:n.zoom},a)){var l=f(a);n.addFeature(a,l),t.featureIndex.insert(a,l,s,u,n.index)}}},y.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},y.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,a),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.programConfigurations.upload(e)},y.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},y.prototype.addFeature=function(e,t){for(var n=this,i=0,o=t;i<o.length;i+=1)for(var a=o[i],s=0,u=a;s<u.length;s+=1){var l=u[s],c=l.x,p=l.y;if(!(c<0||c>=h||p<0||p>=h)){var d=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),f=d.vertexLength;r(n.layoutVertexArray,c,p,-1,-1),r(n.layoutVertexArray,c,p,1,-1),r(n.layoutVertexArray,c,p,1,1),r(n.layoutVertexArray,c,p,-1,1),n.indexArray.emplaceBack(f,f+1,f+2),n.indexArray.emplaceBack(f,f+3,f+2),d.vertexLength+=4,d.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e)},g("CircleBucket",y,{omit:["layers"]}),t.exports=y},{"../../util/web_worker_transfer":279,"../array_types":38,"../extent":52,"../index_array_type":54,"../load_geometry":55,"../program_configuration":57,"../segment":59,"./circle_attributes":40}],42:[function(e,t,n){arguments[4][40][0].apply(n,arguments)},{"../../util/struct_array":272,dup:40}],43:[function(e,t,n){"use strict";var r=e("../array_types"),i=r.FillLayoutArray,o=e("./fill_attributes").members,a=e("../segment"),s=a.SegmentVector,u=e("../program_configuration"),l=u.ProgramConfigurationSet,c=e("../index_array_type"),p=c.LineIndexArray,d=c.TriangleIndexArray,f=e("../load_geometry"),h=e("earcut"),m=e("../../util/classify_rings"),g=e("../../util/web_worker_transfer"),y=g.register,v=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=e.index,this.layoutVertexArray=new i,this.indexArray=new d,this.indexArray2=new p,this.programConfigurations=new l(o,e.layers,e.zoom),this.segments=new s,this.segments2=new s};v.prototype.populate=function(e,t){for(var n=this,r=0,i=e;r<i.length;r+=1){var o=i[r],a=o.feature,s=o.index,u=o.sourceLayerIndex;if(n.layers[0]._featureFilter({zoom:n.zoom},a)){var l=f(a);n.addFeature(a,l),t.featureIndex.insert(a,l,s,u,n.index)}}},v.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},v.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,o),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2),this.programConfigurations.upload(e)},v.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},v.prototype.addFeature=function(e,t){for(var n=this,r=0,i=m(t,500);r<i.length;r+=1){for(var o=i[r],a=0,s=0,u=o;s<u.length;s+=1)a+=u[s].length;for(var l=n.segments.prepareSegment(a,n.layoutVertexArray,n.indexArray),c=l.vertexLength,p=[],d=[],f=0,g=o;f<g.length;f+=1){var y=g[f];if(0!==y.length){y!==o[0]&&d.push(p.length/2);var v=n.segments2.prepareSegment(y.length,n.layoutVertexArray,n.indexArray2),_=v.vertexLength;n.layoutVertexArray.emplaceBack(y[0].x,y[0].y),n.indexArray2.emplaceBack(_+y.length-1,_),p.push(y[0].x),p.push(y[0].y);for(var b=1;b<y.length;b++)n.layoutVertexArray.emplaceBack(y[b].x,y[b].y),n.indexArray2.emplaceBack(_+b-1,_+b),p.push(y[b].x),p.push(y[b].y);v.vertexLength+=y.length,v.primitiveLength+=y.length}}for(var x=h(p,d),w=0;w<x.length;w+=3)n.indexArray.emplaceBack(c+x[w],c+x[w+1],c+x[w+2]);l.vertexLength+=a,l.primitiveLength+=x.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e)},y("FillBucket",v,{omit:["layers"]}),t.exports=v},{"../../util/classify_rings":256,"../../util/web_worker_transfer":279,"../array_types":38,"../index_array_type":54,"../load_geometry":55,"../program_configuration":57,"../segment":59,"./fill_attributes":42,earcut:13}],44:[function(e,t,n){"use strict";var r=e("../../util/struct_array"),i=r.createLayout;t.exports=i([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4)},{"../../util/struct_array":272}],45:[function(e,t,n){"use strict";function r(e,t,n,r,i,o,a,s){e.emplaceBack(t,n,2*Math.floor(r*w)+a,i*w*2,o*w*2,Math.round(s))}function i(e,t){return e.x===t.x&&(e.x<0||e.x>y)||e.y===t.y&&(e.y<0||e.y>y)}function o(e){return e.every(function(e){return e.x<0})||e.every(function(e){return e.x>y})||e.every(function(e){return e.y<0})||e.every(function(e){return e.y>y})}var a=e("../array_types"),s=a.FillExtrusionLayoutArray,u=e("./fill_extrusion_attributes").members,l=e("../segment"),c=l.SegmentVector,p=l.MAX_VERTEX_ARRAY_LENGTH,d=e("../program_configuration"),f=d.ProgramConfigurationSet,h=e("../index_array_type"),m=h.TriangleIndexArray,g=e("../load_geometry"),y=e("../extent"),v=e("earcut"),_=e("../../util/classify_rings"),b=e("../../util/web_worker_transfer"),x=b.register,w=Math.pow(2,13),S=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=e.index,this.layoutVertexArray=new s,this.indexArray=new m,this.programConfigurations=new f(u,e.layers,e.zoom),this.segments=new c};S.prototype.populate=function(e,t){for(var n=this,r=0,i=e;r<i.length;r+=1){var o=i[r],a=o.feature,s=o.index,u=o.sourceLayerIndex;if(n.layers[0]._featureFilter({zoom:n.zoom},a)){var l=g(a);n.addFeature(a,l),t.featureIndex.insert(a,l,s,u,n.index)}}},S.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},S.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,u),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.programConfigurations.upload(e)},S.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},S.prototype.addFeature=function(e,t){for(var n=this,a=0,s=_(t,500);a<s.length;a+=1){for(var u=s[a],l=0,c=0,d=u;c<d.length;c+=1)l+=d[c].length;for(var f=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),h=0,m=u;h<m.length;h+=1){var g=m[h];if(0!==g.length&&!o(g))for(var y=0,b=0;b<g.length;b++){var x=g[b];if(b>=1){var w=g[b-1];if(!i(x,w)){f.vertexLength+4>p&&(f=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray));var S=x.sub(w)._perp()._unit(),k=w.dist(x);y+k>32768&&(y=0),r(n.layoutVertexArray,x.x,x.y,S.x,S.y,0,0,y),r(n.layoutVertexArray,x.x,x.y,S.x,S.y,0,1,y),y+=k,r(n.layoutVertexArray,w.x,w.y,S.x,S.y,0,0,y),r(n.layoutVertexArray,w.x,w.y,S.x,S.y,0,1,y);var E=f.vertexLength;n.indexArray.emplaceBack(E,E+1,E+2),n.indexArray.emplaceBack(E+1,E+2,E+3),f.vertexLength+=4,f.primitiveLength+=2}}}}f.vertexLength+l>p&&(f=n.segments.prepareSegment(l,n.layoutVertexArray,n.indexArray));for(var T=[],M=[],C=f.vertexLength,O=0,A=u;O<A.length;O+=1){var P=A[O];if(0!==P.length){P!==u[0]&&M.push(T.length/2);for(var R=0;R<P.length;R++){var D=P[R];r(n.layoutVertexArray,D.x,D.y,0,0,1,1,0),T.push(D.x),T.push(D.y)}}}for(var I=v(T,M),N=0;N<I.length;N+=3)n.indexArray.emplaceBack(C+I[N],C+I[N+1],C+I[N+2]);f.primitiveLength+=I.length/3,f.vertexLength+=l}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e)},x("FillExtrusionBucket",S,{omit:["layers"]}),t.exports=S},{"../../util/classify_rings":256,"../../util/web_worker_transfer":279,"../array_types":38,"../extent":52,"../index_array_type":54,"../load_geometry":55,"../program_configuration":57,"../segment":59,"./fill_extrusion_attributes":44,earcut:13}],46:[function(e,t,n){"use strict";var r=e("./circle_bucket"),i=e("../../util/web_worker_transfer"),o=i.register,a=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(r);o("HeatmapBucket",a,{omit:["layers"]}),t.exports=a},{"../../util/web_worker_transfer":279,"./circle_bucket":41}],47:[function(e,t,n){"use strict";var r=e("../../util/struct_array"),i=r.createLayout;t.exports=i([{name:"a_pos_normal",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4)},{"../../util/struct_array":272}],48:[function(e,t,n){"use strict";function r(e,t,n,r,i,o,a){e.emplaceBack(t.x,t.y,r?1:0,i?1:-1,Math.round(v*n.x)+128,Math.round(v*n.y)+128,1+(0===o?0:o<0?-1:1)|(a*b&63)<<2,a*b>>6)}var i=e("../array_types"),o=i.LineLayoutArray,a=e("./line_attributes").members,s=e("../segment"),u=s.SegmentVector,l=e("../program_configuration"),c=l.ProgramConfigurationSet,p=e("../index_array_type"),d=p.TriangleIndexArray,f=e("../load_geometry"),h=e("../extent"),m=e("@mapbox/vector-tile").VectorTileFeature.types,g=e("../../util/web_worker_transfer"),y=g.register,v=63,_=Math.cos(Math.PI/180*37.5),b=.5,x=Math.pow(2,14)/b,w=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=e.index,this.layoutVertexArray=new o,this.indexArray=new d,this.programConfigurations=new c(a,e.layers,e.zoom),this.segments=new u};w.prototype.populate=function(e,t){for(var n=this,r=0,i=e;r<i.length;r+=1){var o=i[r],a=o.feature,s=o.index,u=o.sourceLayerIndex;if(n.layers[0]._featureFilter({zoom:n.zoom},a)){var l=f(a);n.addFeature(a,l),t.featureIndex.insert(a,l,s,u,n.index)}}},w.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},w.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,a),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.programConfigurations.upload(e)},w.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},w.prototype.addFeature=function(e,t){for(var n=this,r=this.layers[0].layout,i=r.get("line-join").evaluate(e),o=r.get("line-cap"),a=r.get("line-miter-limit"),s=r.get("line-round-limit"),u=0,l=t;u<l.length;u+=1){var c=l[u];n.addLine(c,e,i,o,a,s)}},w.prototype.addLine=function(e,t,n,r,i,o){for(var a=this,s="Polygon"===m[t.type],u=e.length;u>=2&&e[u-1].equals(e[u-2]);)u--;for(var l=0;l<u-1&&e[l].equals(e[l+1]);)l++;if(!(u<(s?3:2))){"bevel"===n&&(i=1.05);var c=h/(512*this.overscaling)*15,p=e[l],d=this.segments.prepareSegment(10*u,this.layoutVertexArray,this.indexArray);this.distance=0;var f,g,y,v=r,b=s?"butt":r,x=!0,w=void 0,S=void 0,k=void 0,E=void 0;this.e1=this.e2=this.e3=-1,s&&(f=e[u-2],E=p.sub(f)._unit()._perp());for(var T=l;T<u;T++)if(!(S=s&&T===u-1?e[l+1]:e[T+1])||!e[T].equals(S)){E&&(k=E),f&&(w=f),f=e[T],E=S?S.sub(f)._unit()._perp():k,k=k||E;var M=k.add(E);0===M.x&&0===M.y||M._unit();var C=M.x*E.x+M.y*E.y,O=0!==C?1/C:1/0,A=C<_&&w&&S;if(A&&T>l){var P=f.dist(w);if(P>2*c){var R=f.sub(f.sub(w)._mult(c/P)._round());a.distance+=R.dist(w),a.addCurrentVertex(R,a.distance,k.mult(1),0,0,!1,d),w=R}}var D=w&&S,I=D?n:S?v:b;if(D&&"round"===I&&(O<o?I="miter":O<=2&&(I="fakeround")),"miter"===I&&O>i&&(I="bevel"),"bevel"===I&&(O>2&&(I="flipbevel"),O<i&&(I="miter")),w&&(a.distance+=f.dist(w)),"miter"===I)M._mult(O),a.addCurrentVertex(f,a.distance,M,0,0,!1,d);else if("flipbevel"===I){if(O>100)M=E.clone().mult(-1);else{var N=k.x*E.y-k.y*E.x>0?-1:1,L=O*k.add(E).mag()/k.sub(E).mag();M._perp()._mult(L*N)}a.addCurrentVertex(f,a.distance,M,0,0,!1,d),a.addCurrentVertex(f,a.distance,M.mult(-1),0,0,!1,d)}else if("bevel"===I||"fakeround"===I){var z=k.x*E.y-k.y*E.x>0,j=-Math.sqrt(O*O-1);if(z?(y=0,g=j):(g=0,y=j),x||a.addCurrentVertex(f,a.distance,k,g,y,!1,d),"fakeround"===I){for(var H=Math.floor(8*(.5-(C-.5))),B=void 0,F=0;F<H;F++)B=E.mult((F+1)/(H+1))._add(k)._unit(),a.addPieSliceVertex(f,a.distance,B,z,d);a.addPieSliceVertex(f,a.distance,M,z,d);for(var U=H-1;U>=0;U--)B=k.mult((U+1)/(H+1))._add(E)._unit(),a.addPieSliceVertex(f,a.distance,B,z,d)}S&&a.addCurrentVertex(f,a.distance,E,-g,-y,!1,d)}else"butt"===I?(x||a.addCurrentVertex(f,a.distance,k,0,0,!1,d),S&&a.addCurrentVertex(f,a.distance,E,0,0,!1,d)):"square"===I?(x||(a.addCurrentVertex(f,a.distance,k,1,1,!1,d),a.e1=a.e2=-1),S&&a.addCurrentVertex(f,a.distance,E,-1,-1,!1,d)):"round"===I&&(x||(a.addCurrentVertex(f,a.distance,k,0,0,!1,d),a.addCurrentVertex(f,a.distance,k,1,1,!0,d),a.e1=a.e2=-1),S&&(a.addCurrentVertex(f,a.distance,E,-1,-1,!0,d),a.addCurrentVertex(f,a.distance,E,0,0,!1,d)));if(A&&T<u-1){var V=f.dist(S);if(V>2*c){var Y=f.add(S.sub(f)._mult(c/V)._round());a.distance+=Y.dist(f),a.addCurrentVertex(Y,a.distance,E.mult(1),0,0,!1,d),f=Y}}x=!1}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t)}},w.prototype.addCurrentVertex=function(e,t,n,i,o,a,s){var u,l=this.layoutVertexArray,c=this.indexArray;u=n.clone(),i&&u._sub(n.perp()._mult(i)),r(l,e,u,a,!1,i,t),this.e3=s.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),s.primitiveLength++),this.e1=this.e2,this.e2=this.e3,u=n.mult(-1),o&&u._sub(n.perp()._mult(o)),r(l,e,u,a,!0,-o,t),this.e3=s.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),s.primitiveLength++),this.e1=this.e2,this.e2=this.e3,t>x/2&&(this.distance=0,this.addCurrentVertex(e,this.distance,n,i,o,a,s))},w.prototype.addPieSliceVertex=function(e,t,n,i,o){n=n.mult(i?-1:1);var a=this.layoutVertexArray,s=this.indexArray;r(a,e,n,!1,i,0,t),this.e3=o.vertexLength++,this.e1>=0&&this.e2>=0&&(s.emplaceBack(this.e1,this.e2,this.e3),o.primitiveLength++),i?this.e2=this.e3:this.e1=this.e3},y("LineBucket",w,{omit:["layers"]}),t.exports=w},{"../../util/web_worker_transfer":279,"../array_types":38,"../extent":52,"../index_array_type":54,"../load_geometry":55,"../program_configuration":57,"../segment":59,"./line_attributes":47,"@mapbox/vector-tile":8}],49:[function(e,t,n){"use strict";var r=e("../../util/struct_array"),i=r.createLayout,o=i([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"}]),a=i([{name:"a_projected_pos",components:3,type:"Float32"}],4),s=i([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),u=i([{name:"a_placed",components:2,type:"Uint8"}],4),l={symbolLayoutAttributes:o,dynamicLayoutAttributes:a,placementOpacityAttributes:s,collisionVertexAttributes:u,collisionBox:i([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"radius"},{type:"Int16",name:"signedDistanceFromAnchor"}]),collisionBoxLayout:i([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),collisionCircleLayout:i([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),placement:i([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"hidden"}]),glyphOffset:i([{type:"Float32",name:"offsetX"}]),lineVertex:i([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}])};t.exports=l},{"../../util/struct_array":272}],50:[function(e,t,n){"use strict";function r(e,t,n,r,i,o,a,s){e.emplaceBack(t,n,Math.round(64*r),Math.round(64*i),o,a,s?s[0]:0,s?s[1]:0)}function i(e,t,n){e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n)}var o=e("./symbol_attributes"),a=o.symbolLayoutAttributes,s=o.collisionVertexAttributes,u=o.collisionBoxLayout,l=o.collisionCircleLayout,c=o.dynamicLayoutAttributes,p=e("../array_types"),d=p.SymbolLayoutArray,f=p.SymbolDynamicLayoutArray,h=p.SymbolOpacityArray,m=p.CollisionBoxLayoutArray,g=p.CollisionCircleLayoutArray,y=p.CollisionVertexArray,v=p.PlacedSymbolArray,_=p.GlyphOffsetArray,b=p.SymbolLineVertexArray,x=e("@mapbox/point-geometry"),w=e("../segment"),S=w.SegmentVector,k=e("../program_configuration"),E=k.ProgramConfigurationSet,T=e("../index_array_type"),M=T.TriangleIndexArray,C=T.LineIndexArray,O=e("../../symbol/transform_text"),A=e("../../symbol/mergelines"),P=e("../../util/script_detection"),R=e("../load_geometry"),D=e("@mapbox/vector-tile").VectorTileFeature.types,I=e("../../util/verticalize_punctuation"),N=(e("../../symbol/anchor"),e("../../symbol/symbol_size")),L=N.getSizeData,z=e("../../util/web_worker_transfer"),j=z.register,H=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}],B=function(e){this.layoutVertexArray=new d,this.indexArray=new M,this.programConfigurations=e,this.segments=new S,this.dynamicLayoutVertexArray=new f,this.opacityVertexArray=new h,this.placedSymbolArray=new v};B.prototype.upload=function(e,t){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,a.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.programConfigurations.upload(e),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,c.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,H,!0),this.opacityVertexBuffer.itemSize=1},B.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},j("SymbolBuffers",B);var F=function(e,t,n){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new n,this.segments=new S,this.collisionVertexArray=new y};F.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,s.members,!0)},F.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},j("CollisionBuffers",F);var U=function(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=e.index,this.pixelRatio=e.pixelRatio;var t=this.layers[0],n=t._unevaluatedLayout._values;this.textSizeData=L(this.zoom,n["text-size"]),this.iconSizeData=L(this.zoom,n["icon-size"]);var r=this.layers[0].layout;this.sortFeaturesByY=r.get("text-allow-overlap")||r.get("icon-allow-overlap")||r.get("text-ignore-placement")||r.get("icon-ignore-placement")};U.prototype.createArrays=function(){this.text=new B(new E(a.members,this.layers,this.zoom,function(e){return/^text/.test(e)})),this.icon=new B(new E(a.members,this.layers,this.zoom,function(e){return/^icon/.test(e)})),this.collisionBox=new F(m,u.members,C),this.collisionCircle=new F(g,l.members,M),this.glyphOffsetArray=new _,this.lineVertexArray=new b},U.prototype.populate=function(e,t){var n=this,r=this.layers[0],i=r.layout,o=i.get("text-font"),a=i.get("text-field"),s=i.get("icon-image"),u=("constant"!==a.value.kind||a.value.value.length>0)&&("constant"!==o.value.kind||o.value.value.length>0),l="constant"!==s.value.kind||s.value.value&&s.value.value.length>0;if(this.features=[],u||l){for(var c=t.iconDependencies,p=t.glyphDependencies,d={zoom:this.zoom},f=0,h=e;f<h.length;f+=1){var m=h[f],g=m.feature,y=m.index,v=m.sourceLayerIndex;if(r._featureFilter(d,g)){var _=void 0;u&&(_=r.getValueAndResolveTokens("text-field",g),_=O(_,r,g));var b=void 0;if(l&&(b=r.getValueAndResolveTokens("icon-image",g)),_||b){var x={text:_,icon:b,index:y,sourceLayerIndex:v,geometry:R(g),properties:g.properties,type:D[g.type]};if(void 0!==g.id&&(x.id=g.id),n.features.push(x),b&&(c[b]=!0),_)for(var w=o.evaluate(g).join(","),S=p[w]=p[w]||{},k="map"===i.get("text-rotation-alignment")&&"line"===i.get("symbol-placement"),E=P.allowsVerticalWritingMode(_),T=0;T<_.length;T++)if(S[_.charCodeAt(T)]=!0,k&&E){var M=I.lookup[_.charAt(T)];M&&(S[M.charCodeAt(0)]=!0)}}}}"line"===i.get("symbol-placement")&&(this.features=A(this.features))}},U.prototype.isEmpty=function(){return 0===this.symbolInstances.length},U.prototype.upload=function(e){this.text.upload(e,this.sortFeaturesByY),this.icon.upload(e,this.sortFeaturesByY),this.collisionBox.upload(e),this.collisionCircle.upload(e)},U.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.collisionBox.destroy(),this.collisionCircle.destroy()},U.prototype.addToLineVertexArray=function(e,t){var n=this,r=this.lineVertexArray.length;if(void 0!==e.segment){for(var i=e.dist(t[e.segment+1]),o=e.dist(t[e.segment]),a={},s=e.segment+1;s<t.length;s++)a[s]={x:t[s].x,y:t[s].y,tileUnitDistanceFromAnchor:i},s<t.length-1&&(i+=t[s+1].dist(t[s]));for(var u=e.segment||0;u>=0;u--)a[u]={x:t[u].x,y:t[u].y,tileUnitDistanceFromAnchor:o},u>0&&(o+=t[u-1].dist(t[u]));for(var l=0;l<t.length;l++){var c=a[l];n.lineVertexArray.emplaceBack(c.x,c.y,c.tileUnitDistanceFromAnchor)}}return{lineStartIndex:r,lineLength:this.lineVertexArray.length-r}},U.prototype.addSymbols=function(e,t,n,o,a,s,u,l,c,p){for(var d=this,f=e.indexArray,h=e.layoutVertexArray,m=e.dynamicLayoutVertexArray,g=e.segments.prepareSegment(4*t.length,e.layoutVertexArray,e.indexArray),y=this.glyphOffsetArray.length,v=g.vertexLength,_=0,b=t;_<b.length;_+=1){var x=b[_],w=x.tl,S=x.tr,k=x.bl,E=x.br,T=x.tex,M=g.vertexLength,C=x.glyphOffset[1];r(h,l.x,l.y,w.x,C+w.y,T.x,T.y,n),r(h,l.x,l.y,S.x,C+S.y,T.x+T.w,T.y,n),r(h,l.x,l.y,k.x,C+k.y,T.x,T.y+T.h,n),r(h,l.x,l.y,E.x,C+E.y,T.x+T.w,T.y+T.h,n),i(m,l,0),f.emplaceBack(M,M+1,M+2),f.emplaceBack(M+1,M+2,M+3),g.vertexLength+=4,g.primitiveLength+=2,d.glyphOffsetArray.emplaceBack(x.glyphOffset[0])}e.placedSymbolArray.emplaceBack(l.x,l.y,y,this.glyphOffsetArray.length-y,v,c,p,l.segment,n?n[0]:0,n?n[1]:0,o[0],o[1],u,!1),e.programConfigurations.populatePaintArrays(e.layoutVertexArray.length,s)},U.prototype._addCollisionDebugVertex=function(e,t,n,r,i){return t.emplaceBack(0,0),e.emplaceBack(n.x,n.y,r.x,r.y,Math.round(i.x),Math.round(i.y))},U.prototype.addCollisionDebugVertices=function(e,t,n,r,i,o,a,s){var u=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray),l=u.vertexLength,c=i.layoutVertexArray,p=i.collisionVertexArray;if(this._addCollisionDebugVertex(c,p,o,a.anchor,new x(e,t)),this._addCollisionDebugVertex(c,p,o,a.anchor,new x(n,t)),this._addCollisionDebugVertex(c,p,o,a.anchor,new x(n,r)),this._addCollisionDebugVertex(c,p,o,a.anchor,new x(e,r)),u.vertexLength+=4,s){var d=i.indexArray;d.emplaceBack(l,l+1,l+2),d.emplaceBack(l,l+2,l+3),u.primitiveLength+=2}else{var f=i.indexArray;f.emplaceBack(l,l+1),f.emplaceBack(l+1,l+2),f.emplaceBack(l+2,l+3),f.emplaceBack(l+3,l),u.primitiveLength+=4}},U.prototype.generateCollisionDebugBuffers=function(){for(var e=this,t=0,n=e.symbolInstances;t<n.length;t+=1){var r=n[t];r.textCollisionFeature={boxStartIndex:r.textBoxStartIndex,boxEndIndex:r.textBoxEndIndex},r.iconCollisionFeature={boxStartIndex:r.iconBoxStartIndex,boxEndIndex:r.iconBoxEndIndex};for(var i=0;i<2;i++){var o=r[0===i?"textCollisionFeature":"iconCollisionFeature"];if(o)for(var a=o.boxStartIndex;a<o.boxEndIndex;a++){var s=e.collisionBoxArray.get(a),u=s.x1,l=s.y1,c=s.x2,p=s.y2,d=s.radius>0;e.addCollisionDebugVertices(u,l,c,p,d?e.collisionCircle:e.collisionBox,s.anchorPoint,r,d)}}}},U.prototype.deserializeCollisionBoxes=function(e,t,n,r,i){for(var o={},a=t;a<n;a++){var s=e.get(a);if(0===s.radius){o.textBox={x1:s.x1,y1:s.y1,x2:s.x2,y2:s.y2,anchorPointX:s.anchorPointX,anchorPointY:s.anchorPointY};break}o.textCircles||(o.textCircles=[]),o.textCircles.push(s.anchorPointX,s.anchorPointY,s.radius,s.signedDistanceFromAnchor,1)}for(var u=r;u<i;u++){var l=e.get(u);if(0===l.radius){o.iconBox={x1:l.x1,y1:l.y1,x2:l.x2,y2:l.y2,anchorPointX:l.anchorPointX,anchorPointY:l.anchorPointY};break}}return o},U.prototype.hasTextData=function(){return this.text.segments.get().length>0},U.prototype.hasIconData=function(){return this.icon.segments.get().length>0},U.prototype.hasCollisionBoxData=function(){return this.collisionBox.segments.get().length>0},U.prototype.hasCollisionCircleData=function(){return this.collisionCircle.segments.get().length>0},U.prototype.sortFeatures=function(e){var t=this;if(this.sortFeaturesByY&&this.sortedAngle!==e&&(this.sortedAngle=e,!(this.text.segments.get().length>1||this.icon.segments.get().length>1))){for(var n=[],r=0;r<this.symbolInstances.length;r++)n.push(r);var i=Math.sin(e),o=Math.cos(e);n.sort(function(e,n){var r=t.symbolInstances[e],a=t.symbolInstances[n];return(i*r.anchor.x+o*r.anchor.y|0)-(i*a.anchor.x+o*a.anchor.y|0)||a.featureIndex-r.featureIndex}),this.text.indexArray.clear(),this.icon.indexArray.clear();for(var a=0,s=n;a<s.length;a+=1){for(var u=s[a],l=t.symbolInstances[u],c=0,p=l.placedTextSymbolIndices;c<p.length;c+=1)for(var d=p[c],f=t.text.placedSymbolArray.get(d),h=f.vertexStartIndex+4*f.numGlyphs,m=f.vertexStartIndex;m<h;m+=4)t.text.indexArray.emplaceBack(m,m+1,m+2),t.text.indexArray.emplaceBack(m+1,m+2,m+3);var g=t.icon.placedSymbolArray.get(u);if(g.numGlyphs){var y=g.vertexStartIndex;t.icon.indexArray.emplaceBack(y,y+1,y+2),t.icon.indexArray.emplaceBack(y+1,y+2,y+3)}}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},j("SymbolBucket",U,{omit:["layers","collisionBoxArray","features","compareText"],shallow:["symbolInstances"]}),U.MAX_GLYPHS=65535,U.addDynamicAttributes=i,t.exports=U},{"../../symbol/anchor":214,"../../symbol/mergelines":222,"../../symbol/symbol_size":229,"../../symbol/transform_text":230,"../../util/script_detection":270,"../../util/verticalize_punctuation":278,"../../util/web_worker_transfer":279,"../array_types":38,"../index_array_type":54,"../load_geometry":55,"../program_configuration":57,"../segment":59,"./symbol_attributes":49,"@mapbox/point-geometry":4,"@mapbox/vector-tile":8}],51:[function(e,t,n){"use strict";var r=e("../util/image"),i=r.RGBAImage,o=e("../util/util"),a=e("../util/web_worker_transfer"),s=a.register,u=function(e,t,n){if(e<=0)throw new RangeError("Level must have positive dimension");this.dim=e,this.border=t,this.stride=this.dim+2*this.border,this.data=n||new Int32Array((this.dim+2*this.border)*(this.dim+2*this.border))};u.prototype.set=function(e,t,n){this.data[this._idx(e,t)]=n+65536},u.prototype.get=function(e,t){return this.data[this._idx(e,t)]-65536},u.prototype._idx=function(e,t){if(e<-this.border||e>=this.dim+this.border||t<-this.border||t>=this.dim+this.border)throw new RangeError("out of range source coordinates for DEM data");return(t+this.border)*this.stride+(e+this.border)},s("Level",u);var l=function(e,t,n){this.uid=e,this.scale=t||1,this.level=n||new u(256,512),this.loaded=!!n};l.prototype.loadFromImage=function(e){var t=this;if(e.height!==e.width)throw new RangeError("DEM tiles must be square");for(var n=this.level=new u(e.width,e.width/2),r=e.data,i=0;i<n.dim;i++)for(var o=0;o<n.dim;o++){var a=i*n.dim+o,s=4*a;n.set(o,i,t.scale*((256*r[s]*256+256*r[s+1]+r[s+2])/10-1e4))}for(var l=0;l<n.dim;l++)n.set(-1,l,n.get(0,l)),n.set(n.dim,l,n.get(n.dim-1,l)),n.set(l,-1,n.get(l,0)),n.set(l,n.dim,n.get(l,n.dim-1));n.set(-1,-1,n.get(0,0)),n.set(n.dim,-1,n.get(n.dim-1,0)),n.set(-1,n.dim,n.get(0,n.dim-1)),n.set(n.dim,n.dim,n.get(n.dim-1,n.dim-1)),this.loaded=!0},l.prototype.getPixels=function(){return new i({width:this.level.dim+2*this.level.border,height:this.level.dim+2*this.level.border},new Uint8Array(this.level.data.buffer))},l.prototype.backfillBorder=function(e,t,n){var r=this.level,i=e.level;if(r.dim!==i.dim)throw new Error("level mismatch (dem dimension)");var a=t*r.dim,s=t*r.dim+r.dim,u=n*r.dim,l=n*r.dim+r.dim;switch(t){case-1:a=s-1;break;case 1:s=a+1}switch(n){case-1:u=l-1;break;case 1:l=u+1}for(var c=o.clamp(a,-r.border,r.dim+r.border),p=o.clamp(s,-r.border,r.dim+r.border),d=o.clamp(u,-r.border,r.dim+r.border),f=o.clamp(l,-r.border,r.dim+r.border),h=-t*r.dim,m=-n*r.dim,g=d;g<f;g++)for(var y=c;y<p;y++)r.set(y,g,i.get(y+h,g+m))},s("DEMData",l),t.exports={DEMData:l,Level:u}},{"../util/image":264,"../util/util":276,"../util/web_worker_transfer":279}],52:[function(e,t,n){"use strict";t.exports=8192},{}],53:[function(e,t,n){"use strict";function r(e,t){return t-e}var i=(e("@mapbox/point-geometry"),e("./load_geometry")),o=e("./extent"),a=e("../style-spec/feature_filter"),s=e("grid-index"),u=e("../util/dictionary_coder"),l=e("@mapbox/vector-tile"),c=e("pbf"),p=e("../util/vectortile_to_geojson"),d=e("../util/util").arraysIntersect,f=e("../source/tile_id"),h=(f.OverscaledTileID,e("../util/web_worker_transfer")),m=h.register,g=e("./array_types"),y=g.FeatureIndexArray,v=function(e,t,n,r){this.tileID=e,this.overscaling=t,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=n||new s(o,16,0),this.featureIndexArray=r||new y};v.prototype.insert=function(e,t,n,r,i){var o=this,a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i);for(var s=0;s<t.length;s++){for(var u=t[s],l=[1/0,1/0,-1/0,-1/0],c=0;c<u.length;c++){var p=u[c];l[0]=Math.min(l[0],p.x),l[1]=Math.min(l[1],p.y),l[2]=Math.max(l[2],p.x),l[3]=Math.max(l[3],p.y)}o.grid.insert(a,l[0],l[1],l[2],l[3])}},v.prototype.query=function(e,t){this.vtLayers||(this.vtLayers=new l.VectorTile(new c(this.rawTileData)).layers,this.sourceLayerCoder=new u(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]));for(var n={},i=e.params||{},s=o/e.tileSize/e.scale,p=a(i.filter),d=e.queryGeometry,f=e.additionalRadius*s,h=1/0,m=1/0,g=-1/0,y=-1/0,v=0;v<d.length;v++)for(var _=d[v],b=0;b<_.length;b++){var x=_[b];h=Math.min(h,x.x),m=Math.min(m,x.y),g=Math.max(g,x.x),y=Math.max(y,x.y)}var w=this.grid.query(h-f,m-f,g+f,y+f);w.sort(r),this.filterMatching(n,w,this.featureIndexArray,d,p,i.layers,t,e.bearing,s);var S=e.collisionIndex?e.collisionIndex.queryRenderedSymbols(d,this.tileID,o/e.tileSize,e.collisionBoxArray,e.sourceID,e.bucketInstanceIds):[];return S.sort(),this.filterMatching(n,S,e.collisionBoxArray,d,p,i.layers,t,e.bearing,s),n},v.prototype.filterMatching=function(e,t,n,r,o,a,s,u,l){for(var c,f=this,h=0;h<t.length;h++){var m=t[h];if(m!==c){c=m;var g=n.get(m),y=f.bucketLayerIDs[g.bucketIndex];if(!a||d(a,y)){var v=f.sourceLayerCoder.decode(g.sourceLayerIndex),_=f.vtLayers[v],b=_.feature(g.featureIndex);if(o({zoom:f.tileID.overscaledZ},b))for(var x=null,w=0;w<y.length;w++){var S=y[w];if(!(a&&a.indexOf(S)<0)){var k=s[S];if(k&&("symbol"===k.type||(x||(x=i(b)),k.queryIntersectsFeature(r,b,x,f.z,u,l)))){var E=new p(b,f.z,f.x,f.y);E.layer=k.serialize();var T=e[S];void 0===T&&(T=e[S]=[]),T.push({featureIndex:m,feature:E})}}}}}}},v.prototype.hasLayer=function(e){for(var t=this,n=0,r=t.bucketLayerIDs;n<r.length;n+=1)for(var i=r[n],o=0,a=i;o<a.length;o+=1){var s=a[o];if(e===s)return!0}return!1},m("FeatureIndex",v,{omit:["rawTileData","sourceLayerCoder","collisionIndex"]}),t.exports=v},{"../source/tile_id":113,"../style-spec/feature_filter":147,"../util/dictionary_coder":258,"../util/util":276,"../util/vectortile_to_geojson":277,"../util/web_worker_transfer":279,"./array_types":38,"./extent":52,"./load_geometry":55,"@mapbox/point-geometry":4,"@mapbox/vector-tile":8,"grid-index":23,pbf:29}],54:[function(e,t,n){"use strict";t.exports={LineIndexArray:e("./array_types").LineIndexArray,TriangleIndexArray:e("./array_types").TriangleIndexArray}},{"./array_types":38}],55:[function(e,t,n){"use strict";var r=e("../util/util"),i=e("./extent"),o=function(e){return{min:-1*Math.pow(2,15),max:Math.pow(2,15)-1}}();t.exports=function(e){for(var t=i/e.extent,n=e.loadGeometry(),a=0;a<n.length;a++)for(var s=n[a],u=0;u<s.length;u++){var l=s[u];l.x=Math.round(l.x*t),l.y=Math.round(l.y*t),(l.x<o.min||l.x>o.max||l.y<o.min||l.y>o.max)&&r.warnOnce("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return n}},{"../util/util":276,"./extent":52}],56:[function(e,t,n){"use strict";var r=e("../util/struct_array"),i=r.createLayout;t.exports=i([{name:"a_pos",type:"Int16",components:2}])},{"../util/struct_array":272}],57:[function(e,t,n){"use strict";function r(e){return[o(255*e.r,255*e.g),o(255*e.b,255*e.a)]}function i(e,t){return{"text-opacity":"opacity","icon-opacity":"opacity","text-color":"fill_color","icon-color":"fill_color","text-halo-color":"halo_color","icon-halo-color":"halo_color","text-halo-blur":"halo_blur","icon-halo-blur":"halo_blur","text-halo-width":"halo_width","icon-halo-width":"halo_width","line-gap-width":"gapwidth"}[e]||e.replace(t+"-","").replace(/-/g,"_")}var o=e("../shaders/encode_attribute").packUint8ToFloat,a=(e("../style-spec/util/color"),e("../util/web_worker_transfer")),s=a.register,u=e("../style/properties"),l=u.PossiblyEvaluatedPropertyValue,c=e("./array_types"),p=c.StructArrayLayout1f4,d=c.StructArrayLayout2f8,f=c.StructArrayLayout4f16,h=function(e,t,n){this.value=e,this.name=t,this.type=n,this.statistics={max:-1/0}};h.prototype.defines=function(){return["#define HAS_UNIFORM_u_"+this.name]},h.prototype.populatePaintArray=function(){},h.prototype.upload=function(){},h.prototype.destroy=function(){},h.prototype.setUniforms=function(e,t,n,r){var i=r.constantOr(this.value),o=e.gl;"color"===this.type?o.uniform4f(t.uniforms["u_"+this.name],i.r,i.g,i.b,i.a):o.uniform1f(t.uniforms["u_"+this.name],i)};var m=function(e,t,n){this.expression=e,this.name=t,this.type=n,this.statistics={max:-1/0};var r="color"===n?d:p;this.paintVertexAttributes=[{name:"a_"+t,type:"Float32",components:"color"===n?2:1,offset:0}],this.paintVertexArray=new r};m.prototype.defines=function(){return[]},m.prototype.populatePaintArray=function(e,t){var n=this.paintVertexArray,i=n.length;n.reserve(e);var o=this.expression.evaluate({zoom:0},t);if("color"===this.type)for(var a=r(o),s=i;s<e;s++)n.emplaceBack(a[0],a[1]);else{for(var u=i;u<e;u++)n.emplaceBack(o);this.statistics.max=Math.max(this.statistics.max,o)}},m.prototype.upload=function(e){this.paintVertexArray&&(this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes))},m.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},m.prototype.setUniforms=function(e,t){e.gl.uniform1f(t.uniforms["a_"+this.name+"_t"],0)};var g=function(e,t,n,r,i){this.expression=e,this.name=t,this.type=n,this.useIntegerZoom=r,this.zoom=i,this.statistics={max:-1/0};var o="color"===n?f:d;this.paintVertexAttributes=[{name:"a_"+t,type:"Float32",components:"color"===n?4:2,offset:0}],this.paintVertexArray=new o};g.prototype.defines=function(){return[]},g.prototype.populatePaintArray=function(e,t){var n=this.paintVertexArray,i=n.length;n.reserve(e);var o=this.expression.evaluate({zoom:this.zoom},t),a=this.expression.evaluate({zoom:this.zoom+1},t);if("color"===this.type)for(var s=r(o),u=r(a),l=i;l<e;l++)n.emplaceBack(s[0],s[1],u[0],u[1]);else{for(var c=i;c<e;c++)n.emplaceBack(o,a);this.statistics.max=Math.max(this.statistics.max,o,a)}},g.prototype.upload=function(e){this.paintVertexArray&&(this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes))},g.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},g.prototype.interpolationFactor=function(e){return this.useIntegerZoom?this.expression.interpolationFactor(Math.floor(e),this.zoom,this.zoom+1):this.expression.interpolationFactor(e,this.zoom,this.zoom+1)},g.prototype.setUniforms=function(e,t,n){e.gl.uniform1f(t.uniforms["a_"+this.name+"_t"],this.interpolationFactor(n.zoom))};var y=function(){this.binders={},this.cacheKey="",this._buffers=[]};y.createDynamic=function(e,t,n){var r=new y,o=[];for(var a in e.paint._values)if(n(a)){var s=e.paint.get(a);if(s instanceof l&&s.property.specification["property-function"]){var u=i(a,e.type),c=s.property.specification.type,p=s.property.useIntegerZoom;"constant"===s.value.kind?(r.binders[a]=new h(s.value,u,c),o.push("/u_"+u)):"source"===s.value.kind?(r.binders[a]=new m(s.value,u,c),o.push("/a_"+u)):(r.binders[a]=new g(s.value,u,c,p,t),o.push("/z_"+u))}}return r.cacheKey=o.sort().join(""),r},y.prototype.populatePaintArrays=function(e,t){var n=this;for(var r in n.binders)n.binders[r].populatePaintArray(e,t)},y.prototype.defines=function(){var e=this,t=[];for(var n in e.binders)t.push.apply(t,e.binders[n].defines());return t},y.prototype.setUniforms=function(e,t,n,r){var i=this;for(var o in i.binders)i.binders[o].setUniforms(e,t,r,n.get(o))},y.prototype.getPaintVertexBuffers=function(){return this._buffers},y.prototype.upload=function(e){var t=this;for(var n in t.binders)t.binders[n].upload(e);var r=[];for(var i in t.binders){var o=t.binders[i];(o instanceof m||o instanceof g)&&o.paintVertexBuffer&&r.push(o.paintVertexBuffer)}this._buffers=r},y.prototype.destroy=function(){var e=this;for(var t in e.binders)e.binders[t].destroy()};var v=function(e,t,n,r){var i=this;void 0===r&&(r=function(){return!0}),this.programConfigurations={};for(var o=0,a=t;o<a.length;o+=1){var s=a[o];i.programConfigurations[s.id]=y.createDynamic(s,n,r),i.programConfigurations[s.id].layoutAttributes=e}};v.prototype.populatePaintArrays=function(e,t){var n=this;for(var r in n.programConfigurations)n.programConfigurations[r].populatePaintArrays(e,t)},v.prototype.get=function(e){return this.programConfigurations[e]},v.prototype.upload=function(e){var t=this;for(var n in t.programConfigurations)t.programConfigurations[n].upload(e)},v.prototype.destroy=function(){var e=this;for(var t in e.programConfigurations)e.programConfigurations[t].destroy()},s("ConstantBinder",h),s("SourceExpressionBinder",m),s("CompositeExpressionBinder",g),s("ProgramConfiguration",y,{omit:["_buffers"]}),s("ProgramConfigurationSet",v),t.exports={ProgramConfiguration:y,ProgramConfigurationSet:v}},{"../shaders/encode_attribute":95,"../style-spec/util/color":154,"../style/properties":189,"../util/web_worker_transfer":279,"./array_types":38}],58:[function(e,t,n){"use strict";var r=e("../util/struct_array"),i=r.createLayout;t.exports=i([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}])},{"../util/struct_array":272}],59:[function(e,t,n){"use strict";var r=e("../util/util"),i=r.warnOnce,o=e("../util/web_worker_transfer"),a=o.register,s=Math.pow(2,16)-1,u=function(e){void 0===e&&(e=[]),this.segments=e};u.prototype.prepareSegment=function(e,n,r){var o=this.segments[this.segments.length-1];return e>s&&i("Max vertices per segment is "+s+": bucket requested "+e),(!o||o.vertexLength+e>t.exports.MAX_VERTEX_ARRAY_LENGTH)&&(o={vertexOffset:n.length,primitiveOffset:r.length,vertexLength:0,primitiveLength:0},this.segments.push(o)),o},u.prototype.get=function(){return this.segments},u.prototype.destroy=function(){for(var e=this,t=0,n=e.segments;t<n.length;t+=1){var r=n[t];for(var i in r.vaos)r.vaos[i].destroy()}},a("SegmentVector",u),t.exports={SegmentVector:u,MAX_VERTEX_ARRAY_LENGTH:s}},{"../util/util":276,"../util/web_worker_transfer":279}],60:[function(e,t,n){"use strict";var r=function(e,t,n){this.column=e,this.row=t,this.zoom=n};r.prototype.clone=function(){return new r(this.column,this.row,this.zoom)},r.prototype.zoomTo=function(e){return this.clone()._zoomTo(e)},r.prototype.sub=function(e){return this.clone()._sub(e)},r.prototype._zoomTo=function(e){var t=Math.pow(2,e-this.zoom);return this.column*=t,this.row*=t,this.zoom=e,this},r.prototype._sub=function(e){return e=e.zoomTo(this.zoom),this.column-=e.column,this.row-=e.row,this},t.exports=r},{}],61:[function(e,t,n){"use strict";var r=e("../util/util").wrap,i=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid LngLat object: ("+e+", "+t+")");if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};i.prototype.wrap=function(){return new i(r(this.lng,-180,180),this.lat)},i.prototype.toArray=function(){return[this.lng,this.lat]},i.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},i.prototype.toBounds=function(t){var n=360*t/40075017,r=n/Math.cos(Math.PI/180*this.lat);return new(e("./lng_lat_bounds"))(new i(this.lng-r,this.lat-n),new i(this.lng+r,this.lat+n))},i.convert=function(e){if(e instanceof i)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new i(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new i(Number(e.lng),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")},t.exports=i},{"../util/util":276,"./lng_lat_bounds":62}],62:[function(e,t,n){"use strict";var r=e("./lng_lat"),i=function(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))};i.prototype.setNorthEast=function(e){return this._ne=e instanceof r?new r(e.lng,e.lat):r.convert(e),this},i.prototype.setSouthWest=function(e){return this._sw=e instanceof r?new r(e.lng,e.lat):r.convert(e),this},i.prototype.extend=function(e){var t,n,o=this._sw,a=this._ne;if(e instanceof r)t=e,n=e;else{if(!(e instanceof i))return Array.isArray(e)?e.every(Array.isArray)?this.extend(i.convert(e)):this.extend(r.convert(e)):this;if(t=e._sw,n=e._ne,!t||!n)return this}return o||a?(o.lng=Math.min(t.lng,o.lng),o.lat=Math.min(t.lat,o.lat),a.lng=Math.max(n.lng,a.lng),a.lat=Math.max(n.lat,a.lat)):(this._sw=new r(t.lng,t.lat),this._ne=new r(n.lng,n.lat)),this},i.prototype.getCenter=function(){return new r((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},i.prototype.getSouthWest=function(){return this._sw},i.prototype.getNorthEast=function(){return this._ne},i.prototype.getNorthWest=function(){return new r(this.getWest(),this.getNorth())},i.prototype.getSouthEast=function(){return new r(this.getEast(),this.getSouth())},i.prototype.getWest=function(){return this._sw.lng},i.prototype.getSouth=function(){return this._sw.lat},i.prototype.getEast=function(){return this._ne.lng},i.prototype.getNorth=function(){return this._ne.lat},i.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},i.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},i.prototype.isEmpty=function(){return!(this._sw&&this._ne)},i.convert=function(e){return!e||e instanceof i?e:new i(e)},t.exports=i},{"./lng_lat":61}],63:[function(e,t,n){"use strict";var r=e("./lng_lat"),i=e("@mapbox/point-geometry"),o=e("./coordinate"),a=e("../util/util"),s=e("../style-spec/util/interpolate").number,u=e("../util/tile_cover"),l=e("../source/tile_id"),c=(l.CanonicalTileID,l.UnwrappedTileID),p=e("../data/extent"),d=e("@mapbox/gl-matrix"),f=d.vec4,h=d.mat4,m=d.mat2,g=function(e,t,n){this.tileSize=512,this._renderWorldCopies=void 0===n||n,this._minZoom=e||0,this._maxZoom=t||22,this.latRange=[-85.05113,85.05113],this.width=0,this.height=0,this._center=new r(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._posMatrixCache={},this._alignedPosMatrixCache={}},y={minZoom:{},maxZoom:{},renderWorldCopies:{},worldSize:{},centerPoint:{},size:{},bearing:{},pitch:{},fov:{},zoom:{},center:{},unmodified:{},x:{},y:{},point:{}};g.prototype.clone=function(){var e=new g(this._minZoom,this._maxZoom,this._renderWorldCopies);return e.tileSize=this.tileSize,e.latRange=this.latRange,e.width=this.width,e.height=this.height,e._center=this._center,e.zoom=this.zoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._unmodified=this._unmodified,e._calcMatrices(),e},y.minZoom.get=function(){return this._minZoom},y.minZoom.set=function(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))},y.maxZoom.get=function(){return this._maxZoom},y.maxZoom.set=function(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))},y.renderWorldCopies.get=function(){return this._renderWorldCopies},y.worldSize.get=function(){return this.tileSize*this.scale},y.centerPoint.get=function(){return this.size._div(2)},y.size.get=function(){return new i(this.width,this.height)},y.bearing.get=function(){return-this.angle/Math.PI*180},y.bearing.set=function(e){var t=-a.wrap(e,-180,180)*Math.PI/180;this.angle!==t&&(this._unmodified=!1,this.angle=t,this._calcMatrices(),this.rotationMatrix=m.create(),m.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},y.pitch.get=function(){return this._pitch/Math.PI*180},y.pitch.set=function(e){var t=a.clamp(e,0,60)/180*Math.PI;this._pitch!==t&&(this._unmodified=!1,this._pitch=t,this._calcMatrices())},y.fov.get=function(){return this._fov/Math.PI*180},y.fov.set=function(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())},y.zoom.get=function(){return this._zoom},y.zoom.set=function(e){var t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=Math.floor(t),this.zoomFraction=t-this.tileZoom,this._constrain(),this._calcMatrices())},y.center.get=function(){return this._center},y.center.set=function(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())},g.prototype.coveringZoomLevel=function(e){return(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize))},g.prototype.getVisibleUnwrappedCoordinates=function(e){var t=this.pointCoordinate(new i(0,0),0),n=this.pointCoordinate(new i(this.width,0),0),r=Math.floor(t.column),o=Math.floor(n.column),a=[new c(0,e)];if(this._renderWorldCopies)for(var s=r;s<=o;s++)0!==s&&a.push(new c(s,e));return a},g.prototype.coveringTiles=function(e){var t=this.coveringZoomLevel(e),n=t;if(void 0!==e.minzoom&&t<e.minzoom)return[];void 0!==e.maxzoom&&t>e.maxzoom&&(t=e.maxzoom);var r=this.pointCoordinate(this.centerPoint,t),o=new i(r.column-.5,r.row-.5),a=[this.pointCoordinate(new i(0,0),t),this.pointCoordinate(new i(this.width,0),t),this.pointCoordinate(new i(this.width,this.height),t),this.pointCoordinate(new i(0,this.height),t)];return u(t,a,e.reparseOverscaled?n:t,this._renderWorldCopies).sort(function(e,t){return o.dist(e.canonical)-o.dist(t.canonical)})},g.prototype.resize=function(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()},y.unmodified.get=function(){return this._unmodified},g.prototype.zoomScale=function(e){return Math.pow(2,e)},g.prototype.scaleZoom=function(e){return Math.log(e)/Math.LN2},g.prototype.project=function(e){return new i(this.lngX(e.lng),this.latY(e.lat))},g.prototype.unproject=function(e){return new r(this.xLng(e.x),this.yLat(e.y))},y.x.get=function(){return this.lngX(this.center.lng)},y.y.get=function(){return this.latY(this.center.lat)},y.point.get=function(){return new i(this.x,this.y)},g.prototype.lngX=function(e){return(180+e)*this.worldSize/360},g.prototype.latY=function(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))*this.worldSize/360},g.prototype.xLng=function(e){return 360*e/this.worldSize-180},g.prototype.yLat=function(e){var t=180-360*e/this.worldSize;return 360/Math.PI*Math.atan(Math.exp(t*Math.PI/180))-90},g.prototype.setLocationAtPoint=function(e,t){var n=this.pointCoordinate(t)._sub(this.pointCoordinate(this.centerPoint));this.center=this.coordinateLocation(this.locationCoordinate(e)._sub(n)),this._renderWorldCopies&&(this.center=this.center.wrap())},g.prototype.locationPoint=function(e){return this.coordinatePoint(this.locationCoordinate(e))},g.prototype.pointLocation=function(e){return this.coordinateLocation(this.pointCoordinate(e))},g.prototype.locationCoordinate=function(e){return new o(this.lngX(e.lng)/this.tileSize,this.latY(e.lat)/this.tileSize,this.zoom).zoomTo(this.tileZoom)},g.prototype.coordinateLocation=function(e){var t=e.zoomTo(this.zoom);return new r(this.xLng(t.column*this.tileSize),this.yLat(t.row*this.tileSize))},g.prototype.pointCoordinate=function(e,t){void 0===t&&(t=this.tileZoom);var n=[e.x,e.y,0,1],r=[e.x,e.y,1,1];f.transformMat4(n,n,this.pixelMatrixInverse),f.transformMat4(r,r,this.pixelMatrixInverse);var i=n[3],a=r[3],u=n[0]/i,l=r[0]/a,c=n[1]/i,p=r[1]/a,d=n[2]/i,h=r[2]/a,m=d===h?0:(0-d)/(h-d);return new o(s(u,l,m)/this.tileSize,s(c,p,m)/this.tileSize,this.zoom)._zoomTo(t)},g.prototype.coordinatePoint=function(e){var t=e.zoomTo(this.zoom),n=[t.column*this.tileSize,t.row*this.tileSize,0,1];return f.transformMat4(n,n,this.pixelMatrix),new i(n[0]/n[3],n[1]/n[3])},g.prototype.calculatePosMatrix=function(e,t){void 0===t&&(t=!1);var n=e.key,r=t?this._alignedPosMatrixCache:this._posMatrixCache;if(r[n])return r[n];var i=e.canonical,o=this.worldSize/this.zoomScale(i.z),a=i.x+Math.pow(2,i.z)*e.wrap,s=h.identity(new Float64Array(16));return h.translate(s,s,[a*o,i.y*o,0]),h.scale(s,s,[o/p,o/p,1]),h.multiply(s,t?this.alignedProjMatrix:this.projMatrix,s),r[n]=new Float32Array(s),r[n]},g.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e,t,n,r,o=-90,a=90,s=-180,u=180,l=this.size,c=this._unmodified;if(this.latRange){var p=this.latRange;o=this.latY(p[1]),a=this.latY(p[0]),e=a-o<l.y?l.y/(a-o):0}if(this.lngRange){var d=this.lngRange;s=this.lngX(d[0]),u=this.lngX(d[1]),t=u-s<l.x?l.x/(u-s):0}var f=Math.max(t||0,e||0);if(f)return this.center=this.unproject(new i(t?(u+s)/2:this.x,e?(a+o)/2:this.y)),this.zoom+=this.scaleZoom(f),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var h=this.y,m=l.y/2;h-m<o&&(r=o+m),h+m>a&&(r=a-m)}if(this.lngRange){var g=this.x,y=l.x/2;g-y<s&&(n=s+y),g+y>u&&(n=u-y)}void 0===n&&void 0===r||(this.center=this.unproject(new i(void 0!==n?n:this.x,void 0!==r?r:this.y))),this._unmodified=c,this._constraining=!1}},g.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var e=this._fov/2,t=Math.PI/2+this._pitch,n=Math.sin(e)*this.cameraToCenterDistance/Math.sin(Math.PI-t-e),r=this.x,i=this.y,o=Math.cos(Math.PI/2-this._pitch)*n+this.cameraToCenterDistance,a=1.01*o,s=new Float64Array(16);h.perspective(s,this._fov,this.width/this.height,1,a),h.scale(s,s,[1,-1,1]),h.translate(s,s,[0,0,-this.cameraToCenterDistance]),h.rotateX(s,s,this._pitch),h.rotateZ(s,s,this.angle),h.translate(s,s,[-r,-i,0]);var u=this.worldSize/(2*Math.PI*6378137*Math.abs(Math.cos(this.center.lat*(Math.PI/180))));h.scale(s,s,[1,1,u,1]),this.projMatrix=s;var l=this.width%2/2,c=this.height%2/2,p=Math.cos(this.angle),d=Math.sin(this.angle),f=r-Math.round(r)+p*l+d*c,m=i-Math.round(i)+p*c+d*l,g=new Float64Array(s);if(h.translate(g,g,[f>.5?f-1:f,m>.5?m-1:m,0]),this.alignedProjMatrix=g,s=h.create(),h.scale(s,s,[this.width/2,-this.height/2,1]),h.translate(s,s,[1,-1,0]),this.pixelMatrix=h.multiply(new Float64Array(16),s,this.projMatrix),!(s=h.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=s,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Object.defineProperties(g.prototype,y),t.exports=g},{"../data/extent":52,"../source/tile_id":113,"../style-spec/util/interpolate":159,"../util/tile_cover":274,"../util/util":276,"./coordinate":60,"./lng_lat":61,"@mapbox/gl-matrix":2,"@mapbox/point-geometry":4}],64:[function(e,t,n){"use strict";var r=e("../style-spec/util/color"),i=function(e,t,n){this.blendFunction=e,this.blendColor=t,this.mask=n};i.Replace=[1,0],i.disabled=new i(i.Replace,r.transparent,[!1,!1,!1,!1]),i.unblended=new i(i.Replace,r.transparent,[!0,!0,!0,!0]),i.alphaBlended=new i([1,771],r.transparent,[!0,!0,!0,!0]),t.exports=i},{"../style-spec/util/color":154}],65:[function(e,t,n){"use strict";var r=e("./index_buffer"),i=e("./vertex_buffer"),o=e("./framebuffer"),a=(e("./depth_mode"),e("./stencil_mode"),e("./color_mode")),s=e("../util/util"),u=e("./value"),l=u.ClearColor,c=u.ClearDepth,p=u.ClearStencil,d=u.ColorMask,f=u.DepthMask,h=u.StencilMask,m=u.StencilFunc,g=u.StencilOp,y=u.StencilTest,v=u.DepthRange,_=u.DepthTest,b=u.DepthFunc,x=u.Blend,w=u.BlendFunc,S=u.BlendColor,k=u.Program,E=u.LineWidth,T=u.ActiveTextureUnit,M=u.Viewport,C=u.BindFramebuffer,O=u.BindRenderbuffer,A=u.BindTexture,P=u.BindVertexBuffer,R=u.BindElementBuffer,D=u.BindVertexArrayOES,I=u.PixelStoreUnpack,N=u.PixelStoreUnpackPremultiplyAlpha,L=function(e){this.gl=e,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.lineWidthRange=e.getParameter(e.ALIASED_LINE_WIDTH_RANGE),this.clearColor=new l(this),this.clearDepth=new c(this),this.clearStencil=new p(this),this.colorMask=new d(this),this.depthMask=new f(this),this.stencilMask=new h(this),this.stencilFunc=new m(this),this.stencilOp=new g(this),this.stencilTest=new y(this),this.depthRange=new v(this),this.depthTest=new _(this),this.depthFunc=new b(this),this.blend=new x(this),this.blendFunc=new w(this),this.blendColor=new S(this),this.program=new k(this),this.lineWidth=new E(this),this.activeTexture=new T(this),this.viewport=new M(this),this.bindFramebuffer=new C(this),this.bindRenderbuffer=new O(this),this.bindTexture=new A(this),this.bindVertexBuffer=new P(this),this.bindElementBuffer=new R(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new D(this),this.pixelStoreUnpack=new I(this),this.pixelStoreUnpackPremultiplyAlpha=new N(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=e.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&e.getExtension("OES_texture_half_float_linear")};L.prototype.createIndexBuffer=function(e,t){return new r(this,e,t)},L.prototype.createVertexBuffer=function(e,t,n){return new i(this,e,t,n)},L.prototype.createRenderbuffer=function(e,t,n){var r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,e,t,n),this.bindRenderbuffer.set(null),i},L.prototype.createFramebuffer=function(e,t){return new o(this,e,t)},L.prototype.clear=function(e){var t=e.color,n=e.depth,r=this.gl,i=0;t&&(i|=r.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(i|=r.DEPTH_BUFFER_BIT,this.clearDepth.set(n),this.depthMask.set(!0)),r.clear(i)},L.prototype.setDepthMode=function(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)},L.prototype.setStencilMode=function(e){e.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)},L.prototype.setColorMode=function(e){s.deepEqual(e.blendFunction,a.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)},t.exports=L},{"../util/util":276,"./color_mode":64,"./depth_mode":66,"./framebuffer":67,"./index_buffer":68,"./stencil_mode":69,"./value":70,"./vertex_buffer":71}],66:[function(e,t,n){"use strict";var r=function(e,t,n){this.func=e,this.mask=t,this.range=n};r.ReadOnly=!1,r.ReadWrite=!0,r.disabled=new r(519,r.ReadOnly,[0,1]),t.exports=r},{}],67:[function(e,t,n){"use strict";var r=e("./value"),i=r.ColorAttachment,o=r.DepthAttachment,a=function(e,t,n){this.context=e,this.width=t,this.height=n;var r=e.gl,a=this.framebuffer=r.createFramebuffer();this.colorAttachment=new i(e,a),this.depthAttachment=new o(e,a)};a.prototype.destroy=function(){var e=this.context.gl,t=this.colorAttachment.get();t&&e.deleteTexture(t);var n=this.depthAttachment.get();n&&e.deleteRenderbuffer(n),e.deleteFramebuffer(this.framebuffer)},t.exports=a},{"./value":70}],68:[function(e,t,n){"use strict";var r=function(e,t,n){this.context=e;var r=e.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(n),this.unbindVAO(),e.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer};r.prototype.unbindVAO=function(){this.context.extVertexArrayObject&&this.context.bindVertexArrayOES.set(null)},r.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},r.prototype.updateData=function(e){var t=this.context.gl;this.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)},r.prototype.destroy=function(){var e=this.context.gl;this.buffer&&(e.deleteBuffer(this.buffer),delete this.buffer)},t.exports=r},{}],69:[function(e,t,n){"use strict";var r=function(e,t,n,r,i,o){this.test=e,this.ref=t,this.mask=n,this.fail=r,this.depthFail=i,this.pass=o};r.disabled=new r({func:519,mask:0},0,0,7680,7680,7680),t.exports=r},{}],70:[function(e,t,n){"use strict";var r=e("../style-spec/util/color"),i=e("../util/util"),o=function(e){this.context=e,this.current=r.transparent};o.prototype.get=function(){return this.current},o.prototype.set=function(e){var t=this.current;e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a||(this.context.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e)};var a=function(e){this.context=e,this.current=1};a.prototype.get=function(){return this.current},a.prototype.set=function(e){this.current!==e&&(this.context.gl.clearDepth(e),this.current=e)};var s=function(e){this.context=e,this.current=0};s.prototype.get=function(){return this.current},s.prototype.set=function(e){this.current!==e&&(this.context.gl.clearStencil(e),this.current=e)};var u=function(e){this.context=e,this.current=[!0,!0,!0,!0]};u.prototype.get=function(){return this.current},u.prototype.set=function(e){var t=this.current;e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]||(this.context.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e)};var l=function(e){this.context=e,this.current=!0};l.prototype.get=function(){return this.current},l.prototype.set=function(e){this.current!==e&&(this.context.gl.depthMask(e),this.current=e)};var c=function(e){this.context=e,this.current=255};c.prototype.get=function(){return this.current},c.prototype.set=function(e){this.current!==e&&(this.context.gl.stencilMask(e),this.current=e)};var p=function(e){this.context=e,this.current={func:e.gl.ALWAYS,ref:0,mask:255}};p.prototype.get=function(){return this.current},p.prototype.set=function(e){var t=this.current;e.func===t.func&&e.ref===t.ref&&e.mask===t.mask||(this.context.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e)};var d=function(e){this.context=e;var t=this.context.gl;this.current=[t.KEEP,t.KEEP,t.KEEP]};d.prototype.get=function(){return this.current},d.prototype.set=function(e){var t=this.current;e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]||(this.context.gl.stencilOp(e[0],e[1],e[2]),this.current=e)};var f=function(e){this.context=e,this.current=!1};f.prototype.get=function(){return this.current},f.prototype.set=function(e){if(this.current!==e){var t=this.context.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e}};var h=function(e){this.context=e,this.current=[0,1]};h.prototype.get=function(){return this.current},h.prototype.set=function(e){var t=this.current;e[0]===t[0]&&e[1]===t[1]||(this.context.gl.depthRange(e[0],e[1]),this.current=e)};var m=function(e){this.context=e,this.current=!1};m.prototype.get=function(){return this.current},m.prototype.set=function(e){if(this.current!==e){var t=this.context.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e}};var g=function(e){this.context=e,this.current=e.gl.LESS};g.prototype.get=function(){return this.current},g.prototype.set=function(e){this.current!==e&&(this.context.gl.depthFunc(e),this.current=e)};var y=function(e){this.context=e,this.current=!1};y.prototype.get=function(){return this.current},y.prototype.set=function(e){if(this.current!==e){var t=this.context.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e}};var v=function(e){this.context=e;var t=this.context.gl;this.current=[t.ONE,t.ZERO]};v.prototype.get=function(){return this.current},v.prototype.set=function(e){var t=this.current;e[0]===t[0]&&e[1]===t[1]||(this.context.gl.blendFunc(e[0],e[1]),this.current=e)};var _=function(e){this.context=e,this.current=r.transparent};_.prototype.get=function(){return this.current},_.prototype.set=function(e){var t=this.current;e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a||(this.context.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e)};var b=function(e){this.context=e,this.current=null};b.prototype.get=function(){return this.current},b.prototype.set=function(e){this.current!==e&&(this.context.gl.useProgram(e),this.current=e)};var x=function(e){this.context=e,this.current=1};x.prototype.get=function(){return this.current},x.prototype.set=function(e){var t=this.context.lineWidthRange,n=i.clamp(e,t[0],t[1]);this.current!==n&&(this.context.gl.lineWidth(n),this.current=e)};var w=function(e){this.context=e,this.current=e.gl.TEXTURE0};w.prototype.get=function(){return this.current},w.prototype.set=function(e){this.current!==e&&(this.context.gl.activeTexture(e),this.current=e)};var S=function(e){this.context=e;var t=this.context.gl;this.current=[0,0,t.drawingBufferWidth,t.drawingBufferHeight]};S.prototype.get=function(){return this.current},S.prototype.set=function(e){var t=this.current;e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]||(this.context.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e)};var k=function(e){this.context=e,this.current=null};k.prototype.get=function(){return this.current},k.prototype.set=function(e){if(this.current!==e){var t=this.context.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e}};var E=function(e){this.context=e,this.current=null};E.prototype.get=function(){return this.current},E.prototype.set=function(e){if(this.current!==e){var t=this.context.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e}};var T=function(e){this.context=e,this.current=null};T.prototype.get=function(){return this.current},T.prototype.set=function(e){if(this.current!==e){var t=this.context.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e}};var M=function(e){this.context=e,this.current=null};M.prototype.get=function(){return this.current},M.prototype.set=function(e){if(this.current!==e){var t=this.context.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e}};var C=function(e){this.context=e,this.current=null};C.prototype.get=function(){return this.current},C.prototype.set=function(e){var t=this.context.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e};var O=function(e){this.context=e,this.current=null};O.prototype.get=function(){return this.current},O.prototype.set=function(e){this.current!==e&&this.context.extVertexArrayObject&&(this.context.extVertexArrayObject.bindVertexArrayOES(e),this.current=e)};var A=function(e){this.context=e,this.current=4};A.prototype.get=function(){return this.current},A.prototype.set=function(e){if(this.current!==e){var t=this.context.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e}};var P=function(e){this.context=e,this.current=!1};P.prototype.get=function(){return this.current},P.prototype.set=function(e){if(this.current!==e){var t=this.context.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e}};var R=function(e,t){this.context=e,this.current=null,this.parent=t};R.prototype.get=function(){return this.current};var D=function(e){function t(t,n){e.call(this,t,n),this.dirty=!1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.set=function(e){if(this.dirty||this.current!==e){var t=this.context.gl;this.context.bindFramebuffer.set(this.parent),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}},t.prototype.setDirty=function(){this.dirty=!0},t}(R),I=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.set=function(e){if(this.current!==e){var t=this.context.gl;this.context.bindFramebuffer.set(this.parent),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e),this.current=e}},t}(R);t.exports={ClearColor:o,ClearDepth:a,ClearStencil:s,ColorMask:u,DepthMask:l,StencilMask:c,StencilFunc:p,StencilOp:d,StencilTest:f,DepthRange:h,DepthTest:m,DepthFunc:g,Blend:y,BlendFunc:v,BlendColor:_,Program:b,LineWidth:x,ActiveTextureUnit:w,Viewport:S,BindFramebuffer:k,BindRenderbuffer:E,BindTexture:T,BindVertexBuffer:M,BindElementBuffer:C,BindVertexArrayOES:O,PixelStoreUnpack:A,PixelStoreUnpackPremultiplyAlpha:P,ColorAttachment:D,DepthAttachment:I}},{"../style-spec/util/color":154,"../util/util":276}],71:[function(e,t,n){"use strict";var r={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},i=function(e,t,n,r){this.length=t.length,this.attributes=n,this.itemSize=t.bytesPerElement,this.dynamicDraw=r,this.context=e;var i=e.gl;this.buffer=i.createBuffer(),e.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer};i.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},i.prototype.updateData=function(e){var t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)},i.prototype.enableAttributes=function(e,t){for(var n=this,r=0;r<this.attributes.length;r++){var i=n.attributes[r],o=t.attributes[i.name];void 0!==o&&e.enableVertexAttribArray(o)}},i.prototype.setVertexAttribPointers=function(e,t,n){for(var i=this,o=0;o<this.attributes.length;o++){var a=i.attributes[o],s=t.attributes[a.name];void 0!==s&&e.vertexAttribPointer(s,a.components,e[r[a.type]],!1,i.itemSize,a.offset+i.itemSize*(n||0))}},i.prototype.destroy=function(){var e=this.context.gl;this.buffer&&(e.deleteBuffer(this.buffer),delete this.buffer)},t.exports=i},{}],72:[function(e,t,n){"use strict";var r=e("@mapbox/mapbox-gl-supported"),i=e("./util/browser"),o=e("../package.json").version,a=e("./ui/map"),s=e("./ui/control/navigation_control"),u=e("./ui/control/geolocate_control"),l=e("./ui/control/attribution_control"),c=e("./ui/control/scale_control"),p=e("./ui/control/fullscreen_control"),d=e("./ui/popup"),f=e("./ui/marker"),h=e("./style/style"),m=e("./geo/lng_lat"),g=e("./geo/lng_lat_bounds"),y=e("@mapbox/point-geometry"),v=e("./util/evented"),_=e("./util/config"),b=e("./source/rtl_text_plugin");t.exports={version:o,supported:r,workerCount:Math.max(Math.floor(i.hardwareConcurrency/2),1),setRTLTextPlugin:b.setRTLTextPlugin,Map:a,NavigationControl:s,GeolocateControl:u,AttributionControl:l,ScaleControl:c,FullscreenControl:p,Popup:d,Marker:f,Style:h,LngLat:m,LngLatBounds:g,Point:y,Evented:v,config:_,get accessToken(){return _.ACCESS_TOKEN},set accessToken(e){_.ACCESS_TOKEN=e}}},{"../package.json":37,"./geo/lng_lat":61,"./geo/lng_lat_bounds":62,"./source/rtl_text_plugin":108,"./style/style":191,"./ui/control/attribution_control":233,"./ui/control/fullscreen_control":234,"./ui/control/geolocate_control":235,"./ui/control/navigation_control":237,"./ui/control/scale_control":238,"./ui/map":248,"./ui/marker":249,"./ui/popup":250,"./util/browser":253,"./util/config":257,"./util/evented":261,"@mapbox/mapbox-gl-supported":3,"@mapbox/point-geometry":4}],73:[function(e,t,n){"use strict";function r(e,t,n){var r=n.paint.get("background-color"),s=n.paint.get("background-opacity");if(0!==s){var u=e.context,l=u.gl,c=e.transform,p=c.tileSize,d=n.paint.get("background-pattern"),f=d||1!==r.a||1!==s?"translucent":"opaque";if(e.renderPass===f){u.setStencilMode(o.disabled),u.setDepthMode(e.depthModeForSublayer(0,"opaque"===f?a.ReadWrite:a.ReadOnly)),u.setColorMode(e.colorModeForRenderPass());var h;if(d){if(i.isPatternMissing(d,e))return;h=e.useProgram("backgroundPattern"),i.prepare(d,e,h),e.tileExtentPatternVAO.bind(u,h,e.tileExtentBuffer,[])}else h=e.useProgram("background"),l.uniform4fv(h.uniforms.u_color,[r.r,r.g,r.b,r.a]),e.tileExtentVAO.bind(u,h,e.tileExtentBuffer,[]);l.uniform1f(h.uniforms.u_opacity,s);for(var m=c.coveringTiles({tileSize:p}),g=0,y=m;g<y.length;g+=1){var v=y[g];d&&i.setTile({tileID:v,tileSize:p},e,h),l.uniformMatrix4fv(h.uniforms.u_matrix,!1,e.transform.calculatePosMatrix(v.toUnwrapped())),l.drawArrays(l.TRIANGLE_STRIP,0,e.tileExtentBuffer.length)}}}}var i=e("./pattern"),o=e("../gl/stencil_mode"),a=e("../gl/depth_mode");t.exports=r},{"../gl/depth_mode":66,"../gl/stencil_mode":69,"./pattern":90}],74:[function(e,t,n){"use strict";function r(e,t,n,r){if("translucent"===e.renderPass){var s=n.paint.get("circle-opacity"),u=n.paint.get("circle-stroke-width"),l=n.paint.get("circle-stroke-opacity");if(0!==s.constantOr(1)||0!==u.constantOr(1)&&0!==l.constantOr(1)){var c=e.context,p=c.gl;c.setDepthMode(e.depthModeForSublayer(0,a.ReadOnly)),c.setStencilMode(o.disabled),c.setColorMode(e.colorModeForRenderPass());for(var d=!0,f=0;f<r.length;f++){var h=r[f],m=t.getTile(h),g=m.getBucket(n);if(g){var y=e.context.program.get(),v=g.programConfigurations.get(n.id),_=e.useProgram("circle",v);if((d||_.program!==y)&&(v.setUniforms(c,_,n.paint,{zoom:e.transform.zoom}),d=!1),p.uniform1f(_.uniforms.u_camera_to_center_distance,e.transform.cameraToCenterDistance),p.uniform1i(_.uniforms.u_scale_with_map,"map"===n.paint.get("circle-pitch-scale")?1:0),"map"===n.paint.get("circle-pitch-alignment")){p.uniform1i(_.uniforms.u_pitch_with_map,1);var b=i(m,1,e.transform.zoom);p.uniform2f(_.uniforms.u_extrude_scale,b,b)}else p.uniform1i(_.uniforms.u_pitch_with_map,0),p.uniform2fv(_.uniforms.u_extrude_scale,e.transform.pixelsToGLUnits);p.uniformMatrix4fv(_.uniforms.u_matrix,!1,e.translatePosMatrix(h.posMatrix,m,n.paint.get("circle-translate"),n.paint.get("circle-translate-anchor"))),_.draw(c,p.TRIANGLES,n.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,v)}}}}}var i=e("../source/pixels_to_tile_units"),o=e("../gl/stencil_mode"),a=e("../gl/depth_mode");t.exports=r},{"../gl/depth_mode":66,"../gl/stencil_mode":69,"../source/pixels_to_tile_units":103}],75:[function(e,t,n){"use strict";function r(e,t,n,r,i){var u=e.context,l=u.gl,c=i?e.useProgram("collisionCircle"):e.useProgram("collisionBox");u.setDepthMode(a.disabled),u.setStencilMode(s.disabled),u.setColorMode(e.colorModeForRenderPass());for(var p=0;p<r.length;p++){var d=r[p],f=t.getTile(d),h=f.getBucket(n);if(h){var m=i?h.collisionCircle:h.collisionBox;if(m){l.uniformMatrix4fv(c.uniforms.u_matrix,!1,d.posMatrix),i||u.lineWidth.set(1),l.uniform1f(c.uniforms.u_camera_to_center_distance,e.transform.cameraToCenterDistance);var g=o(f,1,e.transform.zoom),y=Math.pow(2,e.transform.zoom-f.tileID.overscaledZ);l.uniform1f(c.uniforms.u_pixels_to_tile_units,g),l.uniform2f(c.uniforms.u_extrude_scale,e.transform.pixelsToGLUnits[0]/(g*y),e.transform.pixelsToGLUnits[1]/(g*y)),c.draw(u,i?l.TRIANGLES:l.LINES,n.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,null,m.collisionVertexBuffer,null)}}}}function i(e,t,n,i){r(e,t,n,i,!1),r(e,t,n,i,!0)}var o=e("../source/pixels_to_tile_units"),a=e("../gl/depth_mode"),s=e("../gl/stencil_mode");t.exports=i},{"../gl/depth_mode":66,"../gl/stencil_mode":69,"../source/pixels_to_tile_units":103}],76:[function(e,t,n){"use strict";function r(e,t,n){for(var r=0;r<n.length;r++)i(e,t,n[r])}function i(e,t,n){var r=e.context,i=r.gl;r.lineWidth.set(1*a.devicePixelRatio);var c=n.posMatrix,m=e.useProgram("debug");r.setDepthMode(f.disabled),r.setStencilMode(h.disabled),r.setColorMode(e.colorModeForRenderPass()),i.uniformMatrix4fv(m.uniforms.u_matrix,!1,c),i.uniform4f(m.uniforms.u_color,1,0,0,1),e.debugVAO.bind(r,m,e.debugBuffer,[]),i.drawArrays(i.LINE_STRIP,0,e.debugBuffer.length);for(var g=o(n.toString(),50,200,5),y=new p,v=0;v<g.length;v+=2)y.emplaceBack(g[v],g[v+1]);var _=r.createVertexBuffer(y,d.members);(new l).bind(r,m,_,[]),i.uniform4f(m.uniforms.u_color,1,1,1,1);for(var b=t.getTile(n).tileSize,x=u/(Math.pow(2,e.transform.zoom-n.overscaledZ)*b),w=[[-1,-1],[-1,1],[1,-1],[1,1]],S=0;S<w.length;S++){var k=w[S];i.uniformMatrix4fv(m.uniforms.u_matrix,!1,s.translate([],c,[x*k[0],x*k[1],0])),i.drawArrays(i.LINES,0,_.length)}i.uniform4f(m.uniforms.u_color,0,0,0,1),i.uniformMatrix4fv(m.uniforms.u_matrix,!1,c),i.drawArrays(i.LINES,0,_.length)}function o(e,t,n,r){r=r||1;var i,o,a,s,u,l,c,p,d=[];for(i=0,o=e.length;i<o;i++)if(u=m[e[i]]){for(p=null,a=0,s=u[1].length;a<s;a+=2)-1===u[1][a]&&-1===u[1][a+1]?p=null:(l=t+u[1][a]*r,c=n-u[1][a+1]*r,p&&d.push(p.x,p.y,l,c),p={x:l,y:c});t+=u[0]*r}return d}var a=e("../util/browser"),s=e("@mapbox/gl-matrix").mat4,u=e("../data/extent"),l=e("./vertex_array_object"),c=e("../data/array_types"),p=c.PosArray,d=e("../data/pos_attributes"),f=e("../gl/depth_mode"),h=e("../gl/stencil_mode");t.exports=r;var m={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]}},{"../data/array_types":38,"../data/extent":52,"../data/pos_attributes":56,"../gl/depth_mode":66,"../gl/stencil_mode":69,"../util/browser":253,"./vertex_array_object":94,"@mapbox/gl-matrix":2}],77:[function(e,t,n){"use strict";function r(e,t,n,r){var s=n.paint.get("fill-color"),u=n.paint.get("fill-opacity");if(0!==u.constantOr(1)){var p=e.context;p.setColorMode(e.colorModeForRenderPass());var d=n.paint.get("fill-pattern")||1!==s.constantOr(l.transparent).a||1!==u.constantOr(0)?"translucent":"opaque";e.renderPass===d&&(p.setDepthMode(e.depthModeForSublayer(1,"opaque"===e.renderPass?c.ReadWrite:c.ReadOnly)),i(e,t,n,r,o)),"translucent"===e.renderPass&&n.paint.get("fill-antialias")&&(p.lineWidth.set(2),p.setDepthMode(e.depthModeForSublayer(n.getPaintProperty("fill-outline-color")?2:0,c.ReadOnly)),i(e,t,n,r,a))}}function i(e,t,n,r,i){if(!u.isPatternMissing(n.paint.get("fill-pattern"),e))for(var o=!0,a=0,s=r;a<s.length;a+=1){var l=s[a],c=t.getTile(l),p=c.getBucket(n);p&&(e.context.setStencilMode(e.stencilModeForClipping(l)),i(e,t,n,c,l,p,o),o=!1)}}function o(e,t,n,r,i,o,a){var u=e.context.gl,l=o.programConfigurations.get(n.id);s("fill",n.paint.get("fill-pattern"),e,l,n,r,i,a).draw(e.context,u.TRIANGLES,n.id,o.layoutVertexBuffer,o.indexBuffer,o.segments,l)}function a(e,t,n,r,i,o,a){var u=e.context.gl,l=o.programConfigurations.get(n.id),c=n.getPaintProperty("fill-outline-color")?null:n.paint.get("fill-pattern"),p=s("fillOutline",c,e,l,n,r,i,a);u.uniform2f(p.uniforms.u_world,u.drawingBufferWidth,u.drawingBufferHeight),p.draw(e.context,u.LINES,n.id,o.layoutVertexBuffer,o.indexBuffer2,o.segments2,l)}function s(e,t,n,r,i,o,a,s){var l,c=n.context.program.get();return t?(l=n.useProgram(e+"Pattern",r),(s||l.program!==c)&&(r.setUniforms(n.context,l,i.paint,{zoom:n.transform.zoom}),u.prepare(t,n,l)),u.setTile(o,n,l)):(l=n.useProgram(e,r),(s||l.program!==c)&&r.setUniforms(n.context,l,i.paint,{zoom:n.transform.zoom})),n.context.gl.uniformMatrix4fv(l.uniforms.u_matrix,!1,n.translatePosMatrix(a.posMatrix,o,i.paint.get("fill-translate"),i.paint.get("fill-translate-anchor"))),l}var u=e("./pattern"),l=e("../style-spec/util/color"),c=e("../gl/depth_mode");t.exports=r},{"../gl/depth_mode":66,"../style-spec/util/color":154,"./pattern":90}],78:[function(e,t,n){"use strict";function r(e,t,n,r){if(0!==n.paint.get("fill-extrusion-opacity"))if("offscreen"===e.renderPass){i(e,n);for(var s=!0,u=0,l=r;u<l.length;u+=1){var c=l[u],p=t.getTile(c),d=p.getBucket(n);d&&(a(e,t,n,p,c,d,s),s=!1)}}else"translucent"===e.renderPass&&o(e,n)}function i(e,t){var n=e.context,r=n.gl,i=t.viewportFrame;if(e.depthRboNeedsClear&&e.setupOffscreenDepthRenderbuffer(),!i){var o=new c(n,{width:e.width,height:e.height,data:null},r.RGBA);o.bind(r.LINEAR,r.CLAMP_TO_EDGE),i=t.viewportFrame=n.createFramebuffer(e.width,e.height),i.colorAttachment.set(o.texture)}n.bindFramebuffer.set(i.framebuffer),i.depthAttachment.set(e.depthRbo),e.depthRboNeedsClear&&(n.clear({depth:1}),e.depthRboNeedsClear=!1),n.clear({color:p.transparent}),n.setStencilMode(g.disabled),n.setDepthMode(new d(r.LEQUAL,d.ReadWrite,[0,1])),n.setColorMode(e.colorModeForRenderPass())}function o(e,t){var n=t.viewportFrame;if(n){var r=e.context,i=r.gl,o=e.useProgram("extrusionTexture");r.setStencilMode(g.disabled),r.setDepthMode(d.disabled),r.setColorMode(e.colorModeForRenderPass()),r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,n.colorAttachment.get()),i.uniform1f(o.uniforms.u_opacity,t.paint.get("fill-extrusion-opacity")),i.uniform1i(o.uniforms.u_image,0);var a=h.create();h.ortho(a,0,e.width,e.height,0,0,1),i.uniformMatrix4fv(o.uniforms.u_matrix,!1,a),i.uniform2f(o.uniforms.u_world,i.drawingBufferWidth,i.drawingBufferHeight),e.viewportVAO.bind(r,o,e.viewportBuffer,[]),i.drawArrays(i.TRIANGLE_STRIP,0,4)}}function a(e,t,n,r,i,o,a){var u=e.context,c=u.gl,p=n.paint.get("fill-extrusion-pattern"),d=e.context.program.get(),f=o.programConfigurations.get(n.id),h=e.useProgram(p?"fillExtrusionPattern":"fillExtrusion",f);if((a||h.program!==d)&&f.setUniforms(u,h,n.paint,{zoom:e.transform.zoom}),p){if(l.isPatternMissing(p,e))return;l.prepare(p,e,h),l.setTile(r,e,h),c.uniform1f(h.uniforms.u_height_factor,-Math.pow(2,i.overscaledZ)/r.tileSize/8)}e.context.gl.uniformMatrix4fv(h.uniforms.u_matrix,!1,e.translatePosMatrix(i.posMatrix,r,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor"))),s(h,e),h.draw(u,c.TRIANGLES,n.id,o.layoutVertexBuffer,o.indexBuffer,o.segments,f)}function s(e,t){var n=t.context.gl,r=t.style.light,i=r.properties.get("position"),o=[i.x,i.y,i.z],a=f.create();"viewport"===r.properties.get("anchor")&&f.fromRotation(a,-t.transform.angle),m.transformMat3(o,o,a);var s=r.properties.get("color");n.uniform3fv(e.uniforms.u_lightpos,o),n.uniform1f(e.uniforms.u_lightintensity,r.properties.get("intensity")),n.uniform3f(e.uniforms.u_lightcolor,s.r,s.g,s.b)}var u=e("@mapbox/gl-matrix"),l=e("./pattern"),c=e("./texture"),p=e("../style-spec/util/color"),d=e("../gl/depth_mode"),f=u.mat3,h=u.mat4,m=u.vec3,g=e("../gl/stencil_mode");t.exports=r},{"../gl/depth_mode":66,"../gl/stencil_mode":69,"../style-spec/util/color":154,"./pattern":90,"./texture":92,"@mapbox/gl-matrix":2}],79:[function(e,t,n){"use strict";function r(e,t,n,r){if(0!==n.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){var o=e.context,s=o.gl;o.setDepthMode(e.depthModeForSublayer(0,p.ReadOnly)),o.setStencilMode(d.disabled),i(o,e,n),o.clear({color:c.transparent}),o.setColorMode(new f([s.ONE,s.ONE],c.transparent,[!0,!0,!0,!0]));for(var u=!0,h=0;h<r.length;h++){var m=r[h];if(!t.hasRenderableParent(m)){var g=t.getTile(m),y=g.getBucket(n);if(y){var v=e.context.program.get(),_=y.programConfigurations.get(n.id),b=e.useProgram("heatmap",_),x=e.transform,w=x.zoom;(u||b.program!==v)&&(_.setUniforms(e.context,b,n.paint,{zoom:w}),u=!1),s.uniform1f(b.uniforms.u_extrude_scale,l(g,1,w)),s.uniform1f(b.uniforms.u_intensity,n.paint.get("heatmap-intensity")),s.uniformMatrix4fv(b.uniforms.u_matrix,!1,m.posMatrix),b.draw(o,s.TRIANGLES,n.id,y.layoutVertexBuffer,y.indexBuffer,y.segments,_)}}}o.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),a(e,n))}function i(e,t,n){var r=e.gl;e.activeTexture.set(r.TEXTURE1),e.viewport.set([0,0,t.width/4,t.height/4]);var i=n.heatmapFbo;if(i)r.bindTexture(r.TEXTURE_2D,i.colorAttachment.get()),e.bindFramebuffer.set(i.framebuffer);else{var a=r.createTexture();r.bindTexture(r.TEXTURE_2D,a),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),i=n.heatmapFbo=e.createFramebuffer(t.width/4,t.height/4),o(e,t,a,i)}}function o(e,t,n,r){var i=e.gl;i.texImage2D(i.TEXTURE_2D,0,i.RGBA,t.width/4,t.height/4,0,i.RGBA,e.extTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:i.UNSIGNED_BYTE,null),r.colorAttachment.set(n),e.extTextureHalfFloat&&i.checkFramebufferStatus(i.FRAMEBUFFER)!==i.FRAMEBUFFER_COMPLETE&&(e.extTextureHalfFloat=null,r.colorAttachment.setDirty(),o(e,t,n,r))}function a(e,t){var n=e.context,r=n.gl,i=t.heatmapFbo;if(i){n.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,i.colorAttachment.get()),n.activeTexture.set(r.TEXTURE1);var o=t.colorRampTexture;o||(o=t.colorRampTexture=new u(n,t.colorRamp,r.RGBA)),o.bind(r.LINEAR,r.CLAMP_TO_EDGE),n.setDepthMode(p.disabled);var a=e.useProgram("heatmapTexture"),l=t.paint.get("heatmap-opacity");r.uniform1f(a.uniforms.u_opacity,l),r.uniform1i(a.uniforms.u_image,0),r.uniform1i(a.uniforms.u_color_ramp,1);var c=s.create();s.ortho(c,0,e.width,e.height,0,0,1),r.uniformMatrix4fv(a.uniforms.u_matrix,!1,c),r.uniform2f(a.uniforms.u_world,r.drawingBufferWidth,r.drawingBufferHeight),e.viewportVAO.bind(e.context,a,e.viewportBuffer,[]),r.drawArrays(r.TRIANGLE_STRIP,0,4)}}var s=e("@mapbox/gl-matrix").mat4,u=e("./texture"),l=e("../source/pixels_to_tile_units"),c=e("../style-spec/util/color"),p=e("../gl/depth_mode"),d=e("../gl/stencil_mode"),f=e("../gl/color_mode");t.exports=r},{"../gl/color_mode":64,"../gl/depth_mode":66,"../gl/stencil_mode":69,"../source/pixels_to_tile_units":103,"../style-spec/util/color":154,"./texture":92,"@mapbox/gl-matrix":2}],80:[function(e,t,n){"use strict";function r(e,t,n,r){if("offscreen"===e.renderPass||"translucent"===e.renderPass){var i=e.context;i.setDepthMode(e.depthModeForSublayer(0,f.ReadOnly)),i.setStencilMode(d.disabled),i.setColorMode(e.colorModeForRenderPass());for(var o=0,u=r;o<u.length;o+=1){var l=u[o],c=t.getTile(l);c.needsHillshadePrepare&&"offscreen"===e.renderPass?s(e,c):"translucent"===e.renderPass&&a(e,c,n)}i.viewport.set([0,0,e.width,e.height])}}function i(e,t,n){var r=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(r-=t.transform.angle),t.context.gl.uniform2f(e.uniforms.u_light,n.paint.get("hillshade-exaggeration"),r)}function o(e,t){var n=t.toCoordinate(),r=new u(n.column,n.row+1,n.zoom);return[e.transform.coordinateLocation(n).lat,e.transform.coordinateLocation(r).lat]}function a(e,t,n){var r=e.context,a=r.gl,s=t.fbo;if(s){var u=e.useProgram("hillshade"),l=e.transform.calculatePosMatrix(t.tileID.toUnwrapped());i(u,e,n);var c=o(e,t.tileID);r.activeTexture.set(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,s.colorAttachment.get()),a.uniformMatrix4fv(u.uniforms.u_matrix,!1,l),a.uniform2fv(u.uniforms.u_latrange,c),a.uniform1i(u.uniforms.u_image,0);var p=n.paint.get("hillshade-shadow-color");a.uniform4f(u.uniforms.u_shadow,p.r,p.g,p.b,p.a);var d=n.paint.get("hillshade-highlight-color");a.uniform4f(u.uniforms.u_highlight,d.r,d.g,d.b,d.a);var f=n.paint.get("hillshade-accent-color");if(a.uniform4f(u.uniforms.u_accent,f.r,f.g,f.b,f.a),t.maskedBoundsBuffer&&t.maskedIndexBuffer&&t.segments)u.draw(r,a.TRIANGLES,n.id,t.maskedBoundsBuffer,t.maskedIndexBuffer,t.segments);else{var h=e.rasterBoundsBuffer;e.rasterBoundsVAO.bind(r,u,h,[]),a.drawArrays(a.TRIANGLE_STRIP,0,h.length)}}}function s(e,t){var n=e.context,r=n.gl;if(t.dem&&t.dem.level){var i=t.dem.level.dim,o=t.dem.getPixels();if(n.activeTexture.set(r.TEXTURE1),n.pixelStoreUnpackPremultiplyAlpha.set(!1),t.demTexture=t.demTexture||e.getTileTexture(t.tileSize),t.demTexture){var a=t.demTexture;a.update(o,!1),a.bind(r.NEAREST,r.CLAMP_TO_EDGE)}else t.demTexture=new l(n,o,r.RGBA,!1),t.demTexture.bind(r.NEAREST,r.CLAMP_TO_EDGE);n.activeTexture.set(r.TEXTURE0);var s=t.fbo;if(!s){var u=new l(n,{width:i,height:i,data:null},r.RGBA);u.bind(r.LINEAR,r.CLAMP_TO_EDGE),s=t.fbo=n.createFramebuffer(i,i),s.colorAttachment.set(u.texture)}n.bindFramebuffer.set(s.framebuffer),n.viewport.set([0,0,i,i]);var d=p.create();p.ortho(d,0,c,-c,0,0,1),p.translate(d,d,[0,-c,0]);var f=e.useProgram("hillshadePrepare");r.uniformMatrix4fv(f.uniforms.u_matrix,!1,d),r.uniform1f(f.uniforms.u_zoom,t.tileID.overscaledZ),r.uniform2fv(f.uniforms.u_dimension,[2*i,2*i]),r.uniform1i(f.uniforms.u_image,1);var h=e.rasterBoundsBuffer;e.rasterBoundsVAO.bind(n,f,h,[]),r.drawArrays(r.TRIANGLE_STRIP,0,h.length),t.needsHillshadePrepare=!1}}var u=e("../geo/coordinate"),l=e("./texture"),c=e("../data/extent"),p=e("@mapbox/gl-matrix").mat4,d=e("../gl/stencil_mode"),f=e("../gl/depth_mode");t.exports=r},{"../data/extent":52,"../geo/coordinate":60,"../gl/depth_mode":66,"../gl/stencil_mode":69,"./texture":92,"@mapbox/gl-matrix":2}],81:[function(e,t,n){"use strict";function r(e,t,n,r,a,s,u,l,c){var p,d,f,h,m=t.context,g=m.gl,y=a.paint.get("line-dasharray"),v=a.paint.get("line-pattern");if(l||c){var _=1/o(n,1,t.transform.tileZoom);if(y){p=t.lineAtlas.getDash(y.from,"round"===a.layout.get("line-cap")),d=t.lineAtlas.getDash(y.to,"round"===a.layout.get("line-cap"));var b=p.width*y.fromScale,x=d.width*y.toScale;g.uniform2f(e.uniforms.u_patternscale_a,_/b,-p.height/2),g.uniform2f(e.uniforms.u_patternscale_b,_/x,-d.height/2),g.uniform1f(e.uniforms.u_sdfgamma,t.lineAtlas.width/(256*Math.min(b,x)*i.devicePixelRatio)/2)}else if(v){if(f=t.imageManager.getPattern(v.from),h=t.imageManager.getPattern(v.to),!f||!h)return;g.uniform2f(e.uniforms.u_pattern_size_a,f.displaySize[0]*v.fromScale/_,h.displaySize[1]),g.uniform2f(e.uniforms.u_pattern_size_b,h.displaySize[0]*v.toScale/_,h.displaySize[1]);var w=t.imageManager.getPixelSize(),S=w.width,k=w.height;g.uniform2fv(e.uniforms.u_texsize,[S,k])}g.uniform2f(e.uniforms.u_gl_units_to_pixels,1/t.transform.pixelsToGLUnits[0],1/t.transform.pixelsToGLUnits[1])}l&&(y?(g.uniform1i(e.uniforms.u_image,0),m.activeTexture.set(g.TEXTURE0),t.lineAtlas.bind(m),g.uniform1f(e.uniforms.u_tex_y_a,p.y),g.uniform1f(e.uniforms.u_tex_y_b,d.y),g.uniform1f(e.uniforms.u_mix,y.t)):v&&(g.uniform1i(e.uniforms.u_image,0),m.activeTexture.set(g.TEXTURE0),t.imageManager.bind(m),g.uniform2fv(e.uniforms.u_pattern_tl_a,f.tl),g.uniform2fv(e.uniforms.u_pattern_br_a,f.br),g.uniform2fv(e.uniforms.u_pattern_tl_b,h.tl),g.uniform2fv(e.uniforms.u_pattern_br_b,h.br),g.uniform1f(e.uniforms.u_fade,v.t))),m.setStencilMode(t.stencilModeForClipping(s));var E=t.translatePosMatrix(s.posMatrix,n,a.paint.get("line-translate"),a.paint.get("line-translate-anchor"));g.uniformMatrix4fv(e.uniforms.u_matrix,!1,E),g.uniform1f(e.uniforms.u_ratio,1/o(n,1,t.transform.zoom)),e.draw(m,g.TRIANGLES,a.id,r.layoutVertexBuffer,r.indexBuffer,r.segments,u)}var i=e("../util/browser"),o=e("../source/pixels_to_tile_units"),a=e("../gl/depth_mode");t.exports=function(e,t,n,i){if("translucent"===e.renderPass&&0!==n.paint.get("line-opacity").constantOr(1)){var o=e.context;o.setDepthMode(e.depthModeForSublayer(0,a.ReadOnly)),o.setColorMode(e.colorModeForRenderPass());for(var s,u=n.paint.get("line-dasharray")?"lineSDF":n.paint.get("line-pattern")?"linePattern":"line",l=!0,c=0,p=i;c<p.length;c+=1){var d=p[c],f=t.getTile(d),h=f.getBucket(n);if(h){var m=h.programConfigurations.get(n.id),g=e.context.program.get(),y=e.useProgram(u,m),v=l||y.program!==g,_=s!==f.tileID.overscaledZ;v&&m.setUniforms(e.context,y,n.paint,{zoom:e.transform.zoom}),r(y,e,f,h,n,d,m,v,_),s=f.tileID.overscaledZ,l=!1}}}}},{"../gl/depth_mode":66,"../source/pixels_to_tile_units":103,"../util/browser":253}],82:[function(e,t,n){"use strict";function r(e,t,n,r){if("translucent"===e.renderPass&&0!==n.paint.get("raster-opacity")){var u=e.context,c=u.gl,f=t.getSource(),h=e.useProgram("raster");u.setStencilMode(p.disabled),u.setColorMode(e.colorModeForRenderPass()),c.uniform1f(h.uniforms.u_brightness_low,n.paint.get("raster-brightness-min")),c.uniform1f(h.uniforms.u_brightness_high,n.paint.get("raster-brightness-max")),c.uniform1f(h.uniforms.u_saturation_factor,a(n.paint.get("raster-saturation"))),c.uniform1f(h.uniforms.u_contrast_factor,o(n.paint.get("raster-contrast"))),c.uniform3fv(h.uniforms.u_spin_weights,i(n.paint.get("raster-hue-rotate"))),c.uniform1f(h.uniforms.u_buffer_scale,1),c.uniform1i(h.uniforms.u_image0,0),c.uniform1i(h.uniforms.u_image1,1);for(var m=r.length&&r[0].overscaledZ,g=0,y=r;g<y.length;g+=1){var v=y[g];u.setDepthMode(e.depthModeForSublayer(v.overscaledZ-m,1===n.paint.get("raster-opacity")?d.ReadWrite:d.ReadOnly,c.LESS));var _=t.getTile(v),b=e.transform.calculatePosMatrix(v.toUnwrapped(),!0);_.registerFadeDuration(n.paint.get("raster-fade-duration")),c.uniformMatrix4fv(h.uniforms.u_matrix,!1,b);var x=t.findLoadedParent(v,0,{}),w=s(_,x,t,n,e.transform),S=void 0,k=void 0;if(u.activeTexture.set(c.TEXTURE0),_.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE,c.LINEAR_MIPMAP_NEAREST),u.activeTexture.set(c.TEXTURE1),x?(x.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE,c.LINEAR_MIPMAP_NEAREST),S=Math.pow(2,x.tileID.overscaledZ-_.tileID.overscaledZ),k=[_.tileID.canonical.x*S%1,_.tileID.canonical.y*S%1]):_.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE,c.LINEAR_MIPMAP_NEAREST),c.uniform2fv(h.uniforms.u_tl_parent,k||[0,0]),c.uniform1f(h.uniforms.u_scale_parent,S||1),c.uniform1f(h.uniforms.u_fade_t,w.mix),c.uniform1f(h.uniforms.u_opacity,w.opacity*n.paint.get("raster-opacity")),f instanceof l){var E=f.boundsBuffer;f.boundsVAO.bind(u,h,E,[]),c.drawArrays(c.TRIANGLE_STRIP,0,E.length)}else if(_.maskedBoundsBuffer&&_.maskedIndexBuffer&&_.segments)h.draw(u,c.TRIANGLES,n.id,_.maskedBoundsBuffer,_.maskedIndexBuffer,_.segments);else{var T=e.rasterBoundsBuffer,M=e.rasterBoundsVAO;M.bind(u,h,T,[]),c.drawArrays(c.TRIANGLE_STRIP,0,T.length)}}}}function i(e){e*=Math.PI/180;var t=Math.sin(e),n=Math.cos(e);return[(2*n+1)/3,(-Math.sqrt(3)*t-n+1)/3,(Math.sqrt(3)*t-n+1)/3]}function o(e){return e>0?1/(1-e):1+e}function a(e){return e>0?1-1/(1.001-e):-e}function s(e,t,n,r,i){var o=r.paint.get("raster-fade-duration");if(o>0){var a=c.now(),s=(a-e.timeAdded)/o,l=t?(a-t.timeAdded)/o:-1,p=n.getSource(),d=i.coveringZoomLevel({tileSize:p.tileSize,roundZoom:p.roundZoom}),f=!t||Math.abs(t.tileID.overscaledZ-d)>Math.abs(e.tileID.overscaledZ-d),h=f&&e.refreshedUponExpiration?1:u.clamp(f?s:1-l,0,1);return e.refreshedUponExpiration&&s>=1&&(e.refreshedUponExpiration=!1),t?{opacity:1,mix:1-h}:{opacity:h,mix:0}}return{opacity:1,mix:0}}var u=e("../util/util"),l=e("../source/image_source"),c=e("../util/browser"),p=e("../gl/stencil_mode"),d=e("../gl/depth_mode");t.exports=r},{"../gl/depth_mode":66,"../gl/stencil_mode":69,"../source/image_source":101,"../util/browser":253,"../util/util":276}],83:[function(e,t,n){"use strict";function r(e,t,n,r){if("translucent"===e.renderPass){var o=e.context;o.setStencilMode(m.disabled),o.setColorMode(e.colorModeForRenderPass()),0!==n.paint.get("icon-opacity").constantOr(1)&&i(e,t,n,r,!1,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),n.layout.get("icon-rotation-alignment"),n.layout.get("icon-pitch-alignment"),n.layout.get("icon-keep-upright")),0!==n.paint.get("text-opacity").constantOr(1)&&i(e,t,n,r,!0,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),n.layout.get("text-keep-upright")),t.map.showCollisionBoxes&&u(e,t,n,r)}}function i(e,t,n,r,i,s,u,p,d,h){var m=e.context,y=m.gl,v=e.transform,_="map"===p,b="map"===d,x=_&&"line"===n.layout.get("symbol-placement"),w=_&&!b&&!x,S=b;m.setDepthMode(S?e.depthModeForSublayer(0,g.ReadOnly):g.disabled);for(var k,E=0,T=r;E<T.length;E+=1){var M=T[E],C=t.getTile(M),O=C.getBucket(n);if(O){var A=i?O.text:O.icon;if(A&&A.segments.get().length){var P=A.programConfigurations.get(n.id),R=i||O.sdfIcons,D=i?O.textSizeData:O.iconSizeData;if(k||(k=e.useProgram(R?"symbolSDF":"symbolIcon",P),P.setUniforms(e.context,k,n.paint,{zoom:e.transform.zoom}),o(k,e,n,i,w,b,D)),m.activeTexture.set(y.TEXTURE0),y.uniform1i(k.uniforms.u_texture,0),i)C.glyphAtlasTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE),y.uniform2fv(k.uniforms.u_texsize,C.glyphAtlasTexture.size);else{var I=1!==n.layout.get("icon-size").constantOr(0)||O.iconsNeedLinear,N=b||0!==v.pitch;C.iconAtlasTexture.bind(R||e.options.rotating||e.options.zooming||I||N?y.LINEAR:y.NEAREST,y.CLAMP_TO_EDGE),y.uniform2fv(k.uniforms.u_texsize,C.iconAtlasTexture.size)}y.uniformMatrix4fv(k.uniforms.u_matrix,!1,e.translatePosMatrix(M.posMatrix,C,s,u));var L=l(C,1,e.transform.zoom),z=c.getLabelPlaneMatrix(M.posMatrix,b,_,e.transform,L),j=c.getGlCoordMatrix(M.posMatrix,b,_,e.transform,L);y.uniformMatrix4fv(k.uniforms.u_gl_coord_matrix,!1,e.translatePosMatrix(j,C,s,u,!0)),x?(y.uniformMatrix4fv(k.uniforms.u_label_plane_matrix,!1,f),c.updateLineLabels(O,M.posMatrix,e,i,z,j,b,h)):y.uniformMatrix4fv(k.uniforms.u_label_plane_matrix,!1,z),y.uniform1f(k.uniforms.u_fade_change,e.options.fadeDuration?e.symbolFadeChange:1),a(k,P,e,n,C,A,i,R,b)}}}}function o(e,t,n,r,i,o,a){var s=t.context.gl,u=t.transform;s.uniform1i(e.uniforms.u_pitch_with_map,o?1:0),s.uniform1f(e.uniforms.u_is_text,r?1:0),s.uniform1f(e.uniforms.u_pitch,u.pitch/360*2*Math.PI);var l="constant"===a.functionType||"source"===a.functionType,c="constant"===a.functionType||"camera"===a.functionType;s.uniform1i(e.uniforms.u_is_size_zoom_constant,l?1:0),s.uniform1i(e.uniforms.u_is_size_feature_constant,c?1:0),s.uniform1f(e.uniforms.u_camera_to_center_distance,u.cameraToCenterDistance);var d=p.evaluateSizeForZoom(a,u.zoom,h.properties[r?"text-size":"icon-size"]);void 0!==d.uSizeT&&s.uniform1f(e.uniforms.u_size_t,d.uSizeT),void 0!==d.uSize&&s.uniform1f(e.uniforms.u_size,d.uSize),s.uniform1f(e.uniforms.u_aspect_ratio,u.width/u.height),s.uniform1i(e.uniforms.u_rotate_symbol,i?1:0)}function a(e,t,n,r,i,o,a,u,l){var c=n.context,p=c.gl,d=n.transform;if(u){var f=0!==r.paint.get(a?"text-halo-width":"icon-halo-width").constantOr(1),h=l?Math.cos(d._pitch)*d.cameraToCenterDistance:1;p.uniform1f(e.uniforms.u_gamma_scale,h),f&&(p.uniform1f(e.uniforms.u_is_halo,1),s(o,r,c,e)),p.uniform1f(e.uniforms.u_is_halo,0)}s(o,r,c,e)}function s(e,t,n,r){r.draw(n,n.gl.TRIANGLES,t.id,e.layoutVertexBuffer,e.indexBuffer,e.segments,e.programConfigurations.get(t.id),e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer)}var u=e("./draw_collision_debug"),l=e("../source/pixels_to_tile_units"),c=e("../symbol/projection"),p=e("../symbol/symbol_size"),d=e("@mapbox/gl-matrix").mat4,f=d.identity(new Float32Array(16)),h=e("../style/style_layer/symbol_style_layer_properties").layout,m=e("../gl/stencil_mode"),g=e("../gl/depth_mode");t.exports=r},{"../gl/depth_mode":66,"../gl/stencil_mode":69,"../source/pixels_to_tile_units":103,"../style/style_layer/symbol_style_layer_properties":210,"../symbol/projection":225,"../symbol/symbol_size":229,"./draw_collision_debug":75,"@mapbox/gl-matrix":2}],84:[function(e,t,n){"use strict";function r(e){var t=new a({width:0,height:0}),n={},r=new i(0,0,{autoResize:!0});for(var o in e){var u=e[o],l=n[o]={};for(var c in u){var p=u[+c];if(p&&0!==p.bitmap.width&&0!==p.bitmap.height){var d=r.packOne(p.bitmap.width+2*s,p.bitmap.height+2*s);t.resize({width:r.w,height:r.h}),a.copy(p.bitmap,t,{x:0,y:0},{x:d.x+s,y:d.y+s},p.bitmap),l[c]={rect:d,metrics:p.metrics}}}}return r.shrink(),t.resize({width:r.w,height:r.h}),{image:t,positions:n}}var i=e("@mapbox/shelf-pack"),o=e("../util/image"),a=o.AlphaImage,s=1;t.exports={makeGlyphAtlas:r}},{"../util/image":264,"@mapbox/shelf-pack":5}],85:[function(e,t,n){"use strict";var r=e("../style/load_glyph_range"),i=e("@mapbox/tiny-sdf"),o=e("../util/is_char_in_unicode_block"),a=e("../util/util"),s=a.asyncAll,u=e("../util/image"),l=u.AlphaImage,c=function(e,t){this.requestTransform=e,this.localIdeographFontFamily=t,this.entries={}};c.prototype.setURL=function(e){this.url=e},c.prototype.getGlyphs=function(e,t){var n=this,i=[];for(var o in e)for(var a=0,u=e[o];a<u.length;a+=1){var l=u[a];i.push({stack:o,id:l})}s(i,function(e,t){var i=e.stack,o=e.id,a=n.entries[i];a||(a=n.entries[i]={glyphs:{},requests:{}});var s=a.glyphs[o];if(void 0!==s)return void t(null,{stack:i,id:o,glyph:s});if(s=n._tinySDF(a,i,o))return void t(null,{stack:i,id:o,glyph:s});var u=Math.floor(o/256);if(256*u>65535)return void t(new Error("glyphs > 65535 not supported"));var l=a.requests[u];l||(l=a.requests[u]=[],r(i,u,n.url,n.requestTransform,function(e,t){if(t)for(var n in t)a.glyphs[+n]=t[+n];for(var r=0,i=l;r<i.length;r+=1)(0,i[r])(e,t);delete a.requests[u]})),l.push(function(e,n){e?t(e):n&&t(null,{stack:i,id:o,glyph:n[o]||null})})},function(e,n){if(e)t(e);else if(n){for(var r={},i=0,o=n;i<o.length;i+=1){var a=o[i],s=a.stack,u=a.id,l=a.glyph;(r[s]||(r[s]={}))[u]=l&&{id:l.id,bitmap:l.bitmap.clone(),metrics:l.metrics}}t(null,r)}})},c.prototype._tinySDF=function(e,t,n){var r=this.localIdeographFontFamily;if(r&&(o["CJK Unified Ideographs"](n)||o["Hangul Syllables"](n))){var a=e.tinySDF;if(!a){var s="400";/bold/i.test(t)?s="900":/medium/i.test(t)?s="500":/light/i.test(t)&&(s="200"),a=e.tinySDF=new i(24,3,8,.25,r,s)}return{id:n,bitmap:new l({width:30,height:30},a.draw(String.fromCharCode(n))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},t.exports=c},{"../style/load_glyph_range":185,"../util/image":264,"../util/is_char_in_unicode_block":266,"../util/util":276,"@mapbox/tiny-sdf":6}],86:[function(e,t,n){"use strict";function r(e,t){var n=t.pixelRatio,r={x:e.x+u,y:e.y+u,w:e.w-2*u,h:e.h-2*u};return{pixelRatio:n,textureRect:r,tl:[r.x,r.y],br:[r.x+r.w,r.y+r.h],displaySize:[r.w/n,r.h/n]}}function i(e){var t=new s({width:0,height:0}),n={},i=new o(0,0,{autoResize:!0});for(var a in e){var l=e[a],c=i.packOne(l.data.width+2*u,l.data.height+2*u);t.resize({width:i.w,height:i.h}),s.copy(l.data,t,{x:0,y:0},{x:c.x+u,y:c.y+u},l.data),n[a]=r(c,l)}return i.shrink(),t.resize({width:i.w,height:i.h}),{image:t,positions:n}}var o=e("@mapbox/shelf-pack"),a=e("../util/image"),s=a.RGBAImage,u=1;t.exports={imagePosition:r,makeImageAtlas:i}},{"../util/image":264,"@mapbox/shelf-pack":5}],87:[function(e,t,n){"use strict";var r=e("@mapbox/shelf-pack"),i=e("../util/image"),o=i.RGBAImage,a=e("./image_atlas"),s=a.imagePosition,u=e("./texture"),l=function(){this.images={},this.loaded=!1,this.requestors=[],this.shelfPack=new r(64,64,{autoResize:!0}),this.patterns={},this.atlasImage=new o({width:64,height:64}),this.dirty=!0};l.prototype.isLoaded=function(){return this.loaded},l.prototype.setLoaded=function(e){var t=this;if(this.loaded!==e&&(this.loaded=e,e)){for(var n=0,r=t.requestors;n<r.length;n+=1){var i=r[n],o=i.ids,a=i.callback;t._notify(o,a)}this.requestors=[]}},l.prototype.getImage=function(e){return this.images[e]},l.prototype.addImage=function(e,t){this.images[e]=t},l.prototype.removeImage=function(e){delete this.images[e];var t=this.patterns[e];t&&(this.shelfPack.unref(t.bin),delete this.patterns[e])},l.prototype.getImages=function(e,t){var n=this,r=!0;if(!this.isLoaded())for(var i=0,o=e;i<o.length;i+=1){var a=o[i];n.images[a]||(r=!1)}this.isLoaded()||r?this._notify(e,t):this.requestors.push({ids:e,callback:t})},l.prototype._notify=function(e,t){for(var n=this,r={},i=0,o=e;i<o.length;i+=1){var a=o[i],s=n.images[a];s&&(r[a]={data:s.data.clone(),pixelRatio:s.pixelRatio,sdf:s.sdf})}t(null,r)},l.prototype.getPixelSize=function(){return{width:this.shelfPack.w,height:this.shelfPack.h}},l.prototype.getPattern=function(e){var t=this.patterns[e];if(t)return t.position;var n=this.getImage(e);if(!n)return null;var r=n.data.width+2,i=n.data.height+2,a=this.shelfPack.packOne(r,i);if(!a)return null;this.atlasImage.resize(this.getPixelSize());var u=n.data,l=this.atlasImage,c=a.x+1,p=a.y+1,d=u.width,f=u.height;o.copy(u,l,{x:0,y:0},{x:c,y:p},{width:d,height:f}),o.copy(u,l,{x:0,y:f-1},{x:c,y:p-1},{width:d,height:1}),o.copy(u,l,{x:0,y:0},{x:c,y:p+f},{width:d,height:1}),o.copy(u,l,{x:d-1,y:0},{x:c-1,y:p},{width:1,height:f}),o.copy(u,l,{x:0,y:0},{x:c+d,y:p},{width:1,height:f}),this.dirty=!0;var h=s(a,n);return this.patterns[e]={bin:a,position:h},h},l.prototype.bind=function(e){var t=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new u(e,this.atlasImage,t.RGBA),this.atlasTexture.bind(t.LINEAR,t.CLAMP_TO_EDGE)},t.exports=l},{"../util/image":264,"./image_atlas":86,"./texture":92,"@mapbox/shelf-pack":5}],88:[function(e,t,n){"use strict";var r=e("../util/util"),i=function(e,t){this.width=e,this.height=t,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}};i.prototype.getDash=function(e,t){var n=e.join(",")+String(t);return this.positions[n]||(this.positions[n]=this.addDash(e,t)),this.positions[n]},i.prototype.addDash=function(e,t){var n=this,i=t?7:0,o=2*i+1;if(this.nextRow+o>this.height)return r.warnOnce("LineAtlas out of space"),null;for(var a=0,s=0;s<e.length;s++)a+=e[s];for(var u=this.width/a,l=u/2,c=e.length%2==1,p=-i;p<=i;p++)for(var d=n.nextRow+i+p,f=n.width*d,h=c?-e[e.length-1]:0,m=e[0],g=1,y=0;y<this.width;y++){for(;m<y/u;)h=m,m+=e[g],c&&g===e.length-1&&(m+=e[0]),g++;var v=Math.abs(y-h*u),_=Math.abs(y-m*u),b=Math.min(v,_),x=g%2==1,w=void 0;if(t){var S=i?p/i*(l+1):0;if(x){var k=l-Math.abs(S);w=Math.sqrt(b*b+k*k)}else w=l-Math.sqrt(b*b+S*S)}else w=(x?1:-1)*b;n.data[3+4*(f+y)]=Math.max(0,Math.min(255,w+128))}var E={y:(this.nextRow+i+.5)/this.height,height:2*i/this.height,width:a};return this.nextRow+=o,this.dirty=!0,E},i.prototype.bind=function(e){var t=e.gl;this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.RGBA,t.UNSIGNED_BYTE,this.data))):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.width,this.height,0,t.RGBA,t.UNSIGNED_BYTE,this.data))},t.exports=i},{"../util/util":276}],89:[function(e,t,n){"use strict";var r=e("../util/browser"),i=e("@mapbox/gl-matrix").mat4,o=e("../source/source_cache"),a=e("../data/extent"),s=e("../source/pixels_to_tile_units"),u=e("../util/util"),l=e("./vertex_array_object"),c=e("../data/array_types"),p=c.RasterBoundsArray,d=c.PosArray,f=e("../data/raster_bounds_attributes"),h=e("../data/pos_attributes"),m=e("../data/program_configuration"),g=m.ProgramConfiguration,y=e("../symbol/cross_tile_symbol_index"),v=e("../shaders"),_=e("./program"),b=e("../gl/context"),x=e("../gl/depth_mode"),w=e("../gl/stencil_mode"),S=e("../gl/color_mode"),k=(e("./texture"),e("./tile_mask")),E=e("../style-spec/util/color"),T={symbol:e("./draw_symbol"),circle:e("./draw_circle"),heatmap:e("./draw_heatmap"),line:e("./draw_line"),fill:e("./draw_fill"),"fill-extrusion":e("./draw_fill_extrusion"),hillshade:e("./draw_hillshade"),raster:e("./draw_raster"),background:e("./draw_background"),debug:e("./draw_debug")},M=function(e,t){this.context=new b(e),this.transform=t,this._tileTextures={},this.setup(),this.numSublayers=o.maxUnderzooming+o.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.depthRboNeedsClear=!0,this.emptyProgramConfiguration=new g,this.crossTileSymbolIndex=new y};M.prototype.resize=function(e,t){var n=this,i=this.context.gl;if(this.width=e*r.devicePixelRatio,this.height=t*r.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var o=0,a=n.style._order;o<a.length;o+=1){var s=a[o];n.style._layers[s].resize()}this.depthRbo&&(i.deleteRenderbuffer(this.depthRbo),this.depthRbo=null)},M.prototype.setup=function(){var e=this.context,t=new d;t.emplaceBack(0,0),t.emplaceBack(a,0),t.emplaceBack(0,a),t.emplaceBack(a,a),this.tileExtentBuffer=e.createVertexBuffer(t,h.members),this.tileExtentVAO=new l,this.tileExtentPatternVAO=new l;var n=new d;n.emplaceBack(0,0),n.emplaceBack(a,0),n.emplaceBack(a,a),n.emplaceBack(0,a),n.emplaceBack(0,0),this.debugBuffer=e.createVertexBuffer(n,h.members),this.debugVAO=new l;var r=new p;r.emplaceBack(0,0,0,0),r.emplaceBack(a,0,a,0),r.emplaceBack(0,a,0,a),r.emplaceBack(a,a,a,a),this.rasterBoundsBuffer=e.createVertexBuffer(r,f.members),this.rasterBoundsVAO=new l;var i=new d;i.emplaceBack(0,0),i.emplaceBack(1,0),i.emplaceBack(0,1),i.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(i,h.members),this.viewportVAO=new l},M.prototype.clearStencil=function(){var e=this.context,t=e.gl;e.setColorMode(S.disabled),e.setDepthMode(x.disabled),e.setStencilMode(new w({func:t.ALWAYS,mask:0},0,255,t.ZERO,t.ZERO,t.ZERO));var n=i.create();i.ortho(n,0,this.width,this.height,0,0,1),i.scale(n,n,[t.drawingBufferWidth,t.drawingBufferHeight,0]);var r=this.useProgram("clippingMask");t.uniformMatrix4fv(r.uniforms.u_matrix,!1,n),this.viewportVAO.bind(e,r,this.viewportBuffer,[]),t.drawArrays(t.TRIANGLE_STRIP,0,4)},M.prototype._renderTileClippingMasks=function(e){var t=this,n=this.context,r=n.gl;n.setColorMode(S.disabled),n.setDepthMode(x.disabled);var i=1;this._tileClippingMaskIDs={};for(var o=0,a=e;o<a.length;o+=1){var s=a[o],u=t._tileClippingMaskIDs[s.key]=i++;n.setStencilMode(new w({func:r.ALWAYS,mask:0},u,255,r.KEEP,r.KEEP,r.REPLACE));var l=t.useProgram("clippingMask");r.uniformMatrix4fv(l.uniforms.u_matrix,!1,s.posMatrix),t.tileExtentVAO.bind(t.context,l,t.tileExtentBuffer,[]),r.drawArrays(r.TRIANGLE_STRIP,0,t.tileExtentBuffer.length)}},M.prototype.stencilModeForClipping=function(e){var t=this.context.gl;return new w({func:t.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,t.KEEP,t.KEEP,t.REPLACE)},M.prototype.colorModeForRenderPass=function(){var e=this.context.gl;return this._showOverdrawInspector?new S([e.CONSTANT_COLOR,e.ONE],new E(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?S.unblended:S.alphaBlended},M.prototype.depthModeForSublayer=function(e,t,n){var r=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon,i=r-1+this.depthRange;return new x(n||this.context.gl.LEQUAL,t,[i,r])},M.prototype.render=function(e,t){var n=this;this.style=e,this.options=t,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(r.now());for(var i in e.sourceCaches){var o=n.style.sourceCaches[i];o.used&&o.prepare(n.context)}var a=this.style._order,s=u.filterObject(this.style.sourceCaches,function(e){return"raster"===e.getSource().type||"raster-dem"===e.getSource().type});for(var l in s)!function(e){var t=s[e],r=t.getVisibleCoordinates(),i=r.map(function(e){return t.getTile(e)});k(i,n.context)}(l);this.renderPass="offscreen";var c,p=[];this.depthRboNeedsClear=!0;for(var d=0;d<a.length;d++){var f=n.style._layers[a[d]];f.hasOffscreenPass()&&!f.isHidden(n.transform.zoom)&&(f.source!==(c&&c.id)&&(c=n.style.sourceCaches[f.source],p=[],c&&(p=c.getVisibleCoordinates(),p.reverse())),p.length&&n.renderLayer(n,c,f,p))}this.context.bindFramebuffer.set(null),this.context.clear({color:t.showOverdrawInspector?E.black:E.transparent,depth:1}),this._showOverdrawInspector=t.showOverdrawInspector,this.depthRange=(e._order.length+2)*this.numSublayers*this.depthEpsilon,this.renderPass="opaque";var h,m=[];for(this.currentLayer=a.length-1,this.currentLayer;this.currentLayer>=0;this.currentLayer--){var g=n.style._layers[a[n.currentLayer]];g.source!==(h&&h.id)&&(h=n.style.sourceCaches[g.source],m=[],h&&(n.clearStencil(),m=h.getVisibleCoordinates(),h.getSource().isTileClipped&&n._renderTileClippingMasks(m))),n.renderLayer(n,h,g,m)}this.renderPass="translucent";var y,v=[];for(this.currentLayer=0,this.currentLayer;this.currentLayer<a.length;this.currentLayer++){var _=n.style._layers[a[n.currentLayer]];_.source!==(y&&y.id)&&(y=n.style.sourceCaches[_.source],v=[],y&&(n.clearStencil(),v=y.getVisibleCoordinates(),y.getSource().isTileClipped&&n._renderTileClippingMasks(v)),v.reverse()),n.renderLayer(n,y,_,v)}if(this.options.showTileBoundaries){var b=this.style.sourceCaches[Object.keys(this.style.sourceCaches)[0]];b&&T.debug(this,b,b.getVisibleCoordinates())}},M.prototype.setupOffscreenDepthRenderbuffer=function(){var e=this.context;this.depthRbo||(this.depthRbo=e.createRenderbuffer(e.gl.DEPTH_COMPONENT16,this.width,this.height))},M.prototype.renderLayer=function(e,t,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||r.length)&&(this.id=n.id,T[n.type](e,t,n,r))},M.prototype.translatePosMatrix=function(e,t,n,r,o){if(!n[0]&&!n[1])return e;var a=o?"map"===r?this.transform.angle:0:"viewport"===r?-this.transform.angle:0;if(a){var u=Math.sin(a),l=Math.cos(a);n=[n[0]*l-n[1]*u,n[0]*u+n[1]*l]}var c=[o?n[0]:s(t,n[0],this.transform.zoom),o?n[1]:s(t,n[1],this.transform.zoom),0],p=new Float32Array(16);return i.translate(p,e,c),p},M.prototype.saveTileTexture=function(e){var t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]},M.prototype.getTileTexture=function(e){var t=this._tileTextures[e];return t&&t.length>0?t.pop():null},M.prototype._createProgramCached=function(e,t){this.cache=this.cache||{};var n=""+e+(t.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[n]||(this.cache[n]=new _(this.context,v[e],t,this._showOverdrawInspector)),this.cache[n]},M.prototype.useProgram=function(e,t){var n=this._createProgramCached(e,t||this.emptyProgramConfiguration);return this.context.program.set(n.program),n},t.exports=M},{"../data/array_types":38,"../data/extent":52,"../data/pos_attributes":56,"../data/program_configuration":57,"../data/raster_bounds_attributes":58,"../gl/color_mode":64,"../gl/context":65,"../gl/depth_mode":66,"../gl/stencil_mode":69,"../shaders":96,"../source/pixels_to_tile_units":103,"../source/source_cache":110,"../style-spec/util/color":154,"../symbol/cross_tile_symbol_index":219,"../util/browser":253,"../util/util":276,"./draw_background":73,"./draw_circle":74,"./draw_debug":76,"./draw_fill":77,"./draw_fill_extrusion":78,"./draw_heatmap":79,"./draw_hillshade":80,"./draw_line":81,"./draw_raster":82,"./draw_symbol":83,"./program":91,"./texture":92,"./tile_mask":93,"./vertex_array_object":94,"@mapbox/gl-matrix":2}],90:[function(e,t,n){"use strict";var r=e("../source/pixels_to_tile_units");n.isPatternMissing=function(e,t){if(!e)return!1;var n=t.imageManager.getPattern(e.from),r=t.imageManager.getPattern(e.to);return!n||!r},n.prepare=function(e,t,n){var r=t.context,i=r.gl,o=t.imageManager.getPattern(e.from),a=t.imageManager.getPattern(e.to);i.uniform1i(n.uniforms.u_image,0),i.uniform2fv(n.uniforms.u_pattern_tl_a,o.tl),i.uniform2fv(n.uniforms.u_pattern_br_a,o.br),i.uniform2fv(n.uniforms.u_pattern_tl_b,a.tl),i.uniform2fv(n.uniforms.u_pattern_br_b,a.br);var s=t.imageManager.getPixelSize(),u=s.width,l=s.height;i.uniform2fv(n.uniforms.u_texsize,[u,l]),i.uniform1f(n.uniforms.u_mix,e.t),i.uniform2fv(n.uniforms.u_pattern_size_a,o.displaySize),i.uniform2fv(n.uniforms.u_pattern_size_b,a.displaySize),i.uniform1f(n.uniforms.u_scale_a,e.fromScale),i.uniform1f(n.uniforms.u_scale_b,e.toScale),r.activeTexture.set(i.TEXTURE0),t.imageManager.bind(t.context)},n.setTile=function(e,t,n){var i=t.context.gl;i.uniform1f(n.uniforms.u_tile_units_to_pixels,1/r(e,1,t.transform.tileZoom));var o=Math.pow(2,e.tileID.overscaledZ),a=e.tileSize*Math.pow(2,t.transform.tileZoom)/o,s=a*(e.tileID.canonical.x+e.tileID.wrap*o),u=a*e.tileID.canonical.y;i.uniform2f(n.uniforms.u_pixel_coord_upper,s>>16,u>>16),i.uniform2f(n.uniforms.u_pixel_coord_lower,65535&s,65535&u)}},{"../source/pixels_to_tile_units":103}],91:[function(e,t,n){"use strict";var r=e("../util/browser"),i=e("../shaders"),o=e("../data/program_configuration"),a=(o.ProgramConfiguration,e("./vertex_array_object")),s=(e("../gl/context"),function(e,t,n,o){var a=this,s=e.gl;this.program=s.createProgram();var u=n.defines().concat("#define DEVICE_PIXEL_RATIO "+r.devicePixelRatio.toFixed(1));o&&u.push("#define OVERDRAW_INSPECTOR;");var l=u.concat(i.prelude.fragmentSource,t.fragmentSource).join("\n"),c=u.concat(i.prelude.vertexSource,t.vertexSource).join("\n"),p=s.createShader(s.FRAGMENT_SHADER);s.shaderSource(p,l),s.compileShader(p),s.attachShader(this.program,p);var d=s.createShader(s.VERTEX_SHADER);s.shaderSource(d,c),s.compileShader(d),s.attachShader(this.program,d);for(var f=n.layoutAttributes||[],h=0;h<f.length;h++)s.bindAttribLocation(a.program,h,f[h].name);s.linkProgram(this.program),this.numAttributes=s.getProgramParameter(this.program,s.ACTIVE_ATTRIBUTES),this.attributes={},this.uniforms={};for(var m=0;m<this.numAttributes;m++){var g=s.getActiveAttrib(a.program,m);g&&(a.attributes[g.name]=s.getAttribLocation(a.program,g.name))}for(var y=s.getProgramParameter(this.program,s.ACTIVE_UNIFORMS),v=0;v<y;v++){var _=s.getActiveUniform(a.program,v);_&&(a.uniforms[_.name]=s.getUniformLocation(a.program,_.name))}});s.prototype.draw=function(e,t,n,r,i,o,s,u,l){for(var c,p=this,d=e.gl,f=(c={},c[d.LINES]=2,c[d.TRIANGLES]=3,c)[t],h=0,m=o.get();h<m.length;h+=1){var g=m[h],y=g.vaos||(g.vaos={});(y[n]||(y[n]=new a)).bind(e,p,r,s?s.getPaintVertexBuffers():[],i,g.vertexOffset,u,l),d.drawElements(t,g.primitiveLength*f,d.UNSIGNED_SHORT,g.primitiveOffset*f*2)}},t.exports=s},{"../data/program_configuration":57,"../gl/context":65,"../shaders":96,"../util/browser":253,"./vertex_array_object":94}],92:[function(e,t,n){"use strict";var r=e("../util/window"),i=r.HTMLImageElement,o=r.HTMLCanvasElement,a=r.HTMLVideoElement,s=r.ImageData,u=function(e,t,n,r){this.context=e;var i=t.width,o=t.height;this.size=[i,o],this.format=n,this.texture=e.gl.createTexture(),this.update(t,r)};u.prototype.update=function(e,t){var n=e.width,r=e.height;this.size=[n,r];var u=this,l=u.context,c=l.gl;c.bindTexture(c.TEXTURE_2D,this.texture),l.pixelStoreUnpack.set(1),this.format===c.RGBA&&!1!==t&&l.pixelStoreUnpackPremultiplyAlpha.set(!0),e instanceof i||e instanceof o||e instanceof a||e instanceof s?c.texImage2D(c.TEXTURE_2D,0,this.format,this.format,c.UNSIGNED_BYTE,e):c.texImage2D(c.TEXTURE_2D,0,this.format,n,r,0,this.format,c.UNSIGNED_BYTE,e.data)},u.prototype.bind=function(e,t,n){var r=this,i=r.context,o=i.gl;o.bindTexture(o.TEXTURE_2D,this.texture),e!==this.filter&&(o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,e),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,n||e),this.filter=e),t!==this.wrap&&(o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,t),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,t),this.wrap=t)},u.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null},t.exports=u},{"../util/window":255}],93:[function(e,t,n){"use strict";function r(e,t,n,i,o){for(var s=0;s<n.length;s++){var u=n[s];if(i.isLessThan(u.tileID))break;if(t.key===u.tileID.key)return;if(u.tileID.isChildOf(t)){for(var l=t.children(1/0),c=0;c<l.length;c++)r(e,l[c],n.slice(s),i,o);return}}var p=t.overscaledZ-e.overscaledZ,d=new a(p,t.canonical.x-(e.canonical.x<<p),t.canonical.y-(e.canonical.y<<p));o[d.key]=o[d.key]||d}var i=e("../source/tile_id"),o=i.OverscaledTileID,a=i.CanonicalTileID;t.exports=function(e,t){for(var n=e.sort(function(e,t){return e.tileID.isLessThan(t.tileID)?-1:t.tileID.isLessThan(e.tileID)?1:0}),i=0;i<n.length;i++){var a={},s=n[i],u=n.slice(i+1);r(s.tileID.wrapped(),s.tileID,u,new o(0,s.tileID.wrap+1,0,0,0),a),s.setMask(a,t)}}},{"../source/tile_id":113}],94:[function(e,t,n){"use strict";var r=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};r.prototype.bind=function(e,t,n,r,i,o,a,s){var u=this;this.context=e;for(var l=this.boundPaintVertexBuffers.length!==r.length,c=0;!l&&c<r.length;c++)u.boundPaintVertexBuffers[c]!==r[c]&&(l=!0);var p=!this.vao||this.boundProgram!==t||this.boundLayoutVertexBuffer!==n||l||this.boundIndexBuffer!==i||this.boundVertexOffset!==o||this.boundDynamicVertexBuffer!==a||this.boundDynamicVertexBuffer2!==s;!e.extVertexArrayObject||p?this.freshBind(t,n,r,i,o,a,s):(e.bindVertexArrayOES.set(this.vao),a&&a.bind(),i&&i.dynamicDraw&&i.bind(),s&&s.bind())},r.prototype.freshBind=function(e,t,n,r,i,o,a){var s,u=e.numAttributes,l=this.context,c=l.gl;if(l.extVertexArrayObject)this.vao&&this.destroy(),this.vao=l.extVertexArrayObject.createVertexArrayOES(),l.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a;else{s=l.currentNumAttributes||0;for(var p=u;p<s;p++)c.disableVertexAttribArray(p)}t.enableAttributes(c,e);for(var d=0,f=n;d<f.length;d+=1)f[d].enableAttributes(c,e);o&&o.enableAttributes(c,e),a&&a.enableAttributes(c,e),t.bind(),t.setVertexAttribPointers(c,e,i);for(var h=0,m=n;h<m.length;h+=1){var g=m[h];g.bind(),g.setVertexAttribPointers(c,e,i)}o&&(o.bind(),o.setVertexAttribPointers(c,e,i)),r&&r.bind(),a&&(a.bind(),a.setVertexAttribPointers(c,e,i)),l.currentNumAttributes=u},r.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)},t.exports=r},{}],95:[function(e,t,n){"use strict";var r=e("../util/util");n.packUint8ToFloat=function(e,t){return e=r.clamp(Math.floor(e),0,255),t=r.clamp(Math.floor(t),0,255),256*e+t}},{"../util/util":276}],96:[function(e,t,n){"use strict";var r={prelude:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n\n// Unpack a pair of values that have been packed into a single float.\n// The packed values are assumed to be 8-bit unsigned integers, and are\n// packed like so:\n// packedValue = floor(input[0]) * 256 + input[1],\nvec2 unpack_float(const float packedValue) {\n    int packedIntValue = int(packedValue);\n    int v0 = packedIntValue / 256;\n    return vec2(v0, packedIntValue - v0 * 256);\n}\n\nvec2 unpack_opacity(const float packedOpacity) {\n    int intOpacity = int(packedOpacity) / 2;\n    return vec2(float(intOpacity) / 127.0, mod(packedOpacity, 2.0));\n}\n\n// To minimize the number of attributes needed, we encode a 4-component\n// color into a pair of floats (i.e. a vec2) as follows:\n// [ floor(color.r * 255) * 256 + color.g * 255,\n//   floor(color.b * 255) * 256 + color.g * 255 ]\nvec4 decode_color(const vec2 encodedColor) {\n    return vec4(\n        unpack_float(encodedColor[0]) / 255.0,\n        unpack_float(encodedColor[1]) / 255.0\n    );\n}\n\n// Unpack a pair of paint values and interpolate between them.\nfloat unpack_mix_vec2(const vec2 packedValue, const float t) {\n    return mix(packedValue[0], packedValue[1], t);\n}\n\n// Unpack a pair of paint values and interpolate between them.\nvec4 unpack_mix_vec4(const vec4 packedColors, const float t) {\n    vec4 minColor = decode_color(vec2(packedColors[0], packedColors[1]));\n    vec4 maxColor = decode_color(vec2(packedColors[2], packedColors[3]));\n    return mix(minColor, maxColor, t);\n}\n\n// The offset depends on how many pixels are between the world origin and the edge of the tile:\n// vec2 offset = mod(pixel_coord, size)\n//\n// At high zoom levels there are a ton of pixels between the world origin and the edge of the tile.\n// The glsl spec only guarantees 16 bits of precision for highp floats. We need more than that.\n//\n// The pixel_coord is passed in as two 16 bit values:\n// pixel_coord_upper = floor(pixel_coord / 2^16)\n// pixel_coord_lower = mod(pixel_coord, 2^16)\n//\n// The offset is calculated in a series of steps that should preserve this precision:\nvec2 get_pattern_pos(const vec2 pixel_coord_upper, const vec2 pixel_coord_lower,\n    const vec2 pattern_size, const float tile_units_to_pixels, const vec2 pos) {\n\n    vec2 offset = mod(mod(mod(pixel_coord_upper, pattern_size) * 256.0, pattern_size) * 256.0 + pixel_coord_lower, pattern_size);\n    return (tile_units_to_pixels * pos + offset) / pattern_size;\n}\n"},background:{fragmentSource:"uniform vec4 u_color;\nuniform float u_opacity;\n\nvoid main() {\n    gl_FragColor = u_color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},backgroundPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\nuniform float u_opacity;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n"},circle:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    vec2 extrude = v_data.xy;\n    float extrude_length = length(extrude);\n\n    lowp float antialiasblur = v_data.z;\n    float antialiased_blur = -max(blur, antialiasblur);\n\n    float opacity_t = smoothstep(0.0, antialiased_blur, extrude_length - 1.0);\n\n    float color_t = stroke_width < 0.01 ? 0.0 : smoothstep(\n        antialiased_blur,\n        0.0,\n        extrude_length - radius / (radius + stroke_width)\n    );\n\n    gl_FragColor = opacity_t * mix(color * opacity, stroke_color * stroke_opacity, color_t);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform bool u_scale_with_map;\nuniform bool u_pitch_with_map;\nuniform vec2 u_extrude_scale;\nuniform highp float u_camera_to_center_distance;\n\nattribute vec2 a_pos;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main(void) {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec2 circle_center = floor(a_pos * 0.5);\n    if (u_pitch_with_map) {\n        vec2 corner_position = circle_center;\n        if (u_scale_with_map) {\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale;\n        } else {\n            // Pitching the circle with the map effectively scales it with the map\n            // To counteract the effect for pitch-scale: viewport, we rescale the\n            // whole circle based on the pitch scaling effect at its central point\n            vec4 projected_center = u_matrix * vec4(circle_center, 0, 1);\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale * (projected_center.w / u_camera_to_center_distance);\n        }\n\n        gl_Position = u_matrix * vec4(corner_position, 0, 1);\n    } else {\n        gl_Position = u_matrix * vec4(circle_center, 0, 1);\n\n        if (u_scale_with_map) {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * u_camera_to_center_distance;\n        } else {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * gl_Position.w;\n        }\n    }\n\n    // This is a minimum blur distance that serves as a faux-antialiasing for\n    // the circle. since blur is a ratio of the circle's size and the intent is\n    // to keep the blur at roughly 1px, the two are inversely related.\n    lowp float antialiasblur = 1.0 / DEVICE_PIXEL_RATIO / (radius + stroke_width);\n\n    v_data = vec3(extrude.x, extrude.y, antialiasblur);\n}\n"},clippingMask:{fragmentSource:"void main() {\n    gl_FragColor = vec4(1.0);\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},heatmap:{fragmentSource:"#pragma mapbox: define highp float weight\n\nuniform highp float u_intensity;\nvarying vec2 v_extrude;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main() {\n    #pragma mapbox: initialize highp float weight\n\n    // Kernel density estimation with a Gaussian kernel of size 5x5\n    float d = -0.5 * 3.0 * 3.0 * dot(v_extrude, v_extrude);\n    float val = weight * u_intensity * GAUSS_COEF * exp(d);\n\n    gl_FragColor = vec4(val, 1.0, 1.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\n\nuniform mat4 u_matrix;\nuniform float u_extrude_scale;\nuniform float u_opacity;\nuniform float u_intensity;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_extrude;\n\n// Effective \"0\" in the kernel density texture to adjust the kernel size to;\n// this empirically chosen number minimizes artifacts on overlapping kernels\n// for typical heatmap cases (assuming clustered source)\nconst highp float ZERO = 1.0 / 255.0 / 16.0;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main(void) {\n    #pragma mapbox: initialize highp float weight\n    #pragma mapbox: initialize mediump float radius\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 unscaled_extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // This 'extrude' comes in ranging from [-1, -1], to [1, 1].  We'll use\n    // it to produce the vertices of a square mesh framing the point feature\n    // we're adding to the kernel density texture.  We'll also pass it as\n    // a varying, so that the fragment shader can determine the distance of\n    // each fragment from the point feature.\n    // Before we do so, we need to scale it up sufficiently so that the\n    // kernel falls effectively to zero at the edge of the mesh.\n    // That is, we want to know S such that\n    // weight * u_intensity * GAUSS_COEF * exp(-0.5 * 3.0^2 * S^2) == ZERO\n    // Which solves to:\n    // S = sqrt(-2.0 * log(ZERO / (weight * u_intensity * GAUSS_COEF))) / 3.0\n    float S = sqrt(-2.0 * log(ZERO / weight / u_intensity / GAUSS_COEF)) / 3.0;\n\n    // Pass the varying in units of radius\n    v_extrude = S * unscaled_extrude;\n\n    // Scale by radius and the zoom-based scale factor to produce actual\n    // mesh position\n    vec2 extrude = v_extrude * radius * u_extrude_scale;\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec4 pos = vec4(floor(a_pos * 0.5) + extrude, 0, 1);\n\n    gl_Position = u_matrix * pos;\n}\n"},heatmapTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform sampler2D u_color_ramp;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    float t = texture2D(u_image, v_pos).r;\n    vec4 color = texture2D(u_color_ramp, vec2(t, 0.5));\n    gl_FragColor = color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n"},collisionBox:{fragmentSource:"\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n\n    float alpha = 0.5;\n\n    // Red = collision, hide label\n    gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue = no collision, label is showing\n    if (v_placed > 0.5) {\n        gl_FragColor = vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed > 0.5) {\n        // This box not used, fade it out\n        gl_FragColor *= .1;\n    }\n}",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = 0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance);\n\n    gl_Position = u_matrix * vec4(a_pos, 0.0, 1.0);\n    gl_Position.xy += a_extrude * u_extrude_scale * gl_Position.w * collision_perspective_ratio;\n\n    v_placed = a_placed.x;\n    v_notUsed = a_placed.y;\n}\n"},collisionCircle:{fragmentSource:"\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    float alpha = 0.5;\n\n    // Red = collision, hide label\n    vec4 color = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue = no collision, label is showing\n    if (v_placed > 0.5) {\n        color = vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed > 0.5) {\n        // This box not used, fade it out\n        color *= .2;\n    }\n\n    float extrude_scale_length = length(v_extrude_scale);\n    float extrude_length = length(v_extrude) * extrude_scale_length;\n    float stroke_width = 15.0 * extrude_scale_length;\n    float radius = v_radius * extrude_scale_length;\n\n    float distance_to_edge = abs(extrude_length - radius);\n    float opacity_t = smoothstep(-stroke_width, 0.0, -distance_to_edge);\n\n    gl_FragColor = opacity_t * color;\n}\n",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\n\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = 0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance);\n\n    gl_Position = u_matrix * vec4(a_pos, 0.0, 1.0);\n\n    highp float padding_factor = 1.2; // Pad the vertices slightly to make room for anti-alias blur\n    gl_Position.xy += a_extrude * u_extrude_scale * padding_factor * gl_Position.w * collision_perspective_ratio;\n\n    v_placed = a_placed.x;\n    v_notUsed = a_placed.y;\n    v_radius = abs(a_extrude.y); // We don't pitch the circles, so both units of the extrusion vector are equal in magnitude to the radius\n\n    v_extrude = a_extrude * padding_factor;\n    v_extrude_scale = u_extrude_scale * u_camera_to_center_distance * collision_perspective_ratio;\n}\n"},debug:{fragmentSource:"uniform highp vec4 u_color;\n\nvoid main() {\n    gl_FragColor = u_color;\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fill:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_FragColor = color * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fillOutline:{fragmentSource:"#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_pos;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n    gl_FragColor = outline_color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_world;\n\nvarying vec2 v_pos;\n\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillOutlinePattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    // find distance to outline for alpha interpolation\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n\n\n    gl_FragColor = mix(color1, color2, u_mix) * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n"},fillExtrusion:{fragmentSource:"varying vec4 v_color;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    gl_FragColor = v_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec4 a_normal_ed;\n\nvarying vec4 v_color;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    vec3 normal = a_normal_ed.xyz;\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = mod(normal.x, 2.0);\n\n    gl_Position = u_matrix * vec4(a_pos, t > 0.0 ? height : base, 1);\n\n    // Relative luminance (how dark/bright is the surface color?)\n    float colorvalue = color.r * 0.2126 + color.g * 0.7152 + color.b * 0.0722;\n\n    v_color = vec4(0.0, 0.0, 0.0, 1.0);\n\n    // Add slight ambient lighting so no extrusions are totally black\n    vec4 ambientlight = vec4(0.03, 0.03, 0.03, 1.0);\n    color += ambientlight;\n\n    // Calculate cos(theta), where theta is the angle between surface normal and diffuse light ray\n    float directional = clamp(dot(normal / 16384.0, u_lightpos), 0.0, 1.0);\n\n    // Adjust directional so that\n    // the range of values for highlight/shading is narrower\n    // with lower light intensity\n    // and with lighter/brighter surface colors\n    directional = mix((1.0 - u_lightintensity), max((1.0 - colorvalue + u_lightintensity), 1.0), directional);\n\n    // Add gradient along z axis of side surfaces\n    if (normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    // Assign final color based on surface + ambient light color, diffuse light directional, and light color\n    // with lower bounds adjusted to hue of light\n    // so that shading is tinted with the complementary (opposite) color to the light color\n    v_color.r += clamp(color.r * directional * u_lightcolor.r, mix(0.0, 0.3, 1.0 - u_lightcolor.r), 1.0);\n    v_color.g += clamp(color.g * directional * u_lightcolor.g, mix(0.0, 0.3, 1.0 - u_lightcolor.g), 1.0);\n    v_color.b += clamp(color.b * directional * u_lightcolor.b, mix(0.0, 0.3, 1.0 - u_lightcolor.b), 1.0);\n}\n"},fillExtrusionPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    vec4 mixedColor = mix(color1, color2, u_mix);\n\n    gl_FragColor = mixedColor * v_lighting;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\nuniform float u_height_factor;\n\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec4 a_normal_ed;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\nvarying float v_directional;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    vec3 normal = a_normal_ed.xyz;\n    float edgedistance = a_normal_ed.w;\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = mod(normal.x, 2.0);\n    float z = t > 0.0 ? height : base;\n\n    gl_Position = u_matrix * vec4(a_pos, z, 1);\n\n    vec2 pos = normal.x == 1.0 && normal.y == 0.0 && normal.z == 16384.0\n        ? a_pos // extrusion top\n        : vec2(edgedistance, z * u_height_factor); // extrusion side\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, pos);\n\n    v_lighting = vec4(0.0, 0.0, 0.0, 1.0);\n    float directional = clamp(dot(normal / 16383.0, u_lightpos), 0.0, 1.0);\n    directional = mix((1.0 - u_lightintensity), max((0.5 + u_lightintensity), 1.0), directional);\n\n    if (normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    v_lighting.rgb += clamp(directional * u_lightcolor, mix(vec3(0.0), vec3(0.3), 1.0 - u_lightcolor), vec3(1.0));\n}\n"},extrusionTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_FragColor = texture2D(u_image, v_pos) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n"},hillshadePrepare:{fragmentSource:"#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D u_image;\nvarying vec2 v_pos;\nuniform vec2 u_dimension;\nuniform float u_zoom;\n\nfloat getElevation(vec2 coord, float bias) {\n    // Convert encoded elevation value to meters\n    vec4 data = texture2D(u_image, coord) * 255.0;\n    return (data.r + data.g * 256.0 + data.b * 256.0 * 256.0) / 4.0;\n}\n\nvoid main() {\n    vec2 epsilon = 1.0 / u_dimension;\n\n    // queried pixels:\n    // +-----------+\n    // |   |   |   |\n    // | a | b | c |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | d | e | f |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | g | h | i |\n    // |   |   |   |\n    // +-----------+\n\n    float a = getElevation(v_pos + vec2(-epsilon.x, -epsilon.y), 0.0);\n    float b = getElevation(v_pos + vec2(0, -epsilon.y), 0.0);\n    float c = getElevation(v_pos + vec2(epsilon.x, -epsilon.y), 0.0);\n    float d = getElevation(v_pos + vec2(-epsilon.x, 0), 0.0);\n    float e = getElevation(v_pos, 0.0);\n    float f = getElevation(v_pos + vec2(epsilon.x, 0), 0.0);\n    float g = getElevation(v_pos + vec2(-epsilon.x, epsilon.y), 0.0);\n    float h = getElevation(v_pos + vec2(0, epsilon.y), 0.0);\n    float i = getElevation(v_pos + vec2(epsilon.x, epsilon.y), 0.0);\n\n    // here we divide the x and y slopes by 8 * pixel size\n    // where pixel size (aka meters/pixel) is:\n    // circumference of the world / (pixels per tile * number of tiles)\n    // which is equivalent to: 8 * 40075016.6855785 / (512 * pow(2, u_zoom))\n    // which can be reduced to: pow(2, 19.25619978527 - u_zoom)\n    // we want to vertically exaggerate the hillshading though, because otherwise\n    // it is barely noticeable at low zooms. to do this, we multiply this by some\n    // scale factor pow(2, (u_zoom - 14) * a) where a is an arbitrary value and 14 is the\n    // maxzoom of the tile source. here we use a=0.3 which works out to the\n    // expression below. see nickidlugash's awesome breakdown for more info\n    // https://github.com/mapbox/mapbox-gl-js/pull/5286#discussion_r148419556\n    float exaggeration = u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;\n\n    vec2 deriv = vec2(\n        (c + f + f + i) - (a + d + d + g),\n        (g + h + h + i) - (a + b + b + c)\n    ) /  pow(2.0, (u_zoom - 14.0) * exaggeration + 19.2562 - u_zoom);\n\n    gl_FragColor = clamp(vec4(\n        deriv.x / 2.0 + 0.5,\n        deriv.y / 2.0 + 0.5,\n        1.0,\n        1.0), 0.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (a_texture_pos / 8192.0) / 2.0 + 0.25;\n}\n"},hillshade:{fragmentSource:"uniform sampler2D u_image;\nvarying vec2 v_pos;\n\nuniform vec2 u_latrange;\nuniform vec2 u_light;\nuniform vec4 u_shadow;\nuniform vec4 u_highlight;\nuniform vec4 u_accent;\n\n#define PI 3.141592653589793\n\nvoid main() {\n    vec4 pixel = texture2D(u_image, v_pos);\n\n    vec2 deriv = ((pixel.rg * 2.0) - 1.0);\n\n    // We divide the slope by a scale factor based on the cosin of the pixel's approximate latitude\n    // to account for mercator projection distortion. see #4807 for details\n    float scaleFactor = cos(radians((u_latrange[0] - u_latrange[1]) * (1.0 - v_pos.y) + u_latrange[1]));\n    // We also multiply the slope by an arbitrary z-factor of 1.25\n    float slope = atan(1.25 * length(deriv) / scaleFactor);\n    float aspect = deriv.x != 0.0 ? atan(deriv.y, -deriv.x) : PI / 2.0 * (deriv.y > 0.0 ? 1.0 : -1.0);\n\n    float intensity = u_light.x;\n    // We add PI to make this property match the global light object, which adds PI/2 to the light's azimuthal\n    // position property to account for 0deg corresponding to north/the top of the viewport in the style spec\n    // and the original shader was written to accept (-illuminationDirection - 90) as the azimuthal.\n    float azimuth = u_light.y + PI;\n\n    // We scale the slope exponentially based on intensity, using a calculation similar to\n    // the exponential interpolation function in the style spec:\n    // https://github.com/mapbox/mapbox-gl-js/blob/master/src/style-spec/expression/definitions/interpolate.js#L217-L228\n    // so that higher intensity values create more opaque hillshading.\n    float base = 1.875 - intensity * 1.75;\n    float maxValue = 0.5 * PI;\n    float scaledSlope = intensity != 0.5 ? ((pow(base, slope) - 1.0) / (pow(base, maxValue) - 1.0)) * maxValue : slope;\n\n    // The accent color is calculated with the cosine of the slope while the shade color is calculated with the sine\n    // so that the accent color's rate of change eases in while the shade color's eases out.\n    float accent = cos(scaledSlope);\n    // We multiply both the accent and shade color by a clamped intensity value\n    // so that intensities >= 0.5 do not additionally affect the color values\n    // while intensity values < 0.5 make the overall color more transparent.\n    vec4 accent_color = (1.0 - accent) * u_accent * clamp(intensity * 2.0, 0.0, 1.0);\n    float shade = abs(mod((aspect + azimuth) / PI + 0.5, 2.0) - 1.0);\n    vec4 shade_color = mix(u_shadow, u_highlight, shade) * sin(scaledSlope) * clamp(intensity * 2.0, 0.0, 1.0);\n    gl_FragColor = accent_color * (1.0 - shade_color.a) + shade_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = a_texture_pos / 8192.0;\n}\n"},line:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_width2 = vec2(outset, inset);\n}\n"},linePattern:{fragmentSource:"uniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_fade;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float x_a = mod(v_linesofar / u_pattern_size_a.x, 1.0);\n    float x_b = mod(v_linesofar / u_pattern_size_b.x, 1.0);\n    float y_a = 0.5 + (v_normal.y * v_width2.s / u_pattern_size_a.y);\n    float y_b = 0.5 + (v_normal.y * v_width2.s / u_pattern_size_b.y);\n    vec2 pos_a = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, vec2(x_a, y_a));\n    vec2 pos_b = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, vec2(x_b, y_b));\n\n    vec4 color = mix(texture2D(u_image, pos_a), texture2D(u_image, pos_b), u_fade);\n\n    gl_FragColor = color * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_linesofar = a_linesofar;\n    v_width2 = vec2(outset, inset);\n}\n"},lineSDF:{fragmentSource:"\nuniform sampler2D u_image;\nuniform float u_sdfgamma;\nuniform float u_mix;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float sdfdist_a = texture2D(u_image, v_tex_a).a;\n    float sdfdist_b = texture2D(u_image, v_tex_b).a;\n    float sdfdist = mix(sdfdist_a, sdfdist_b, u_mix);\n    alpha *= smoothstep(0.5 - u_sdfgamma / floorwidth, 0.5 + u_sdfgamma / floorwidth, sdfdist);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_patternscale_a;\nuniform float u_tex_y_a;\nuniform vec2 u_patternscale_b;\nuniform float u_tex_y_b;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist =outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_tex_a = vec2(a_linesofar * u_patternscale_a.x / floorwidth, normal.y * u_patternscale_a.y + u_tex_y_a);\n    v_tex_b = vec2(a_linesofar * u_patternscale_b.x / floorwidth, normal.y * u_patternscale_b.y + u_tex_y_b);\n\n    v_width2 = vec2(outset, inset);\n}\n"},raster:{fragmentSource:"uniform float u_fade_t;\nuniform float u_opacity;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nuniform float u_brightness_low;\nuniform float u_brightness_high;\n\nuniform float u_saturation_factor;\nuniform float u_contrast_factor;\nuniform vec3 u_spin_weights;\n\nvoid main() {\n\n    // read and cross-fade colors from the main and parent tiles\n    vec4 color0 = texture2D(u_image0, v_pos0);\n    vec4 color1 = texture2D(u_image1, v_pos1);\n    if (color0.a > 0.0) {\n        color0.rgb = color0.rgb / color0.a;\n    }\n    if (color1.a > 0.0) {\n        color1.rgb = color1.rgb / color1.a;\n    }\n    vec4 color = mix(color0, color1, u_fade_t);\n    color.a *= u_opacity;\n    vec3 rgb = color.rgb;\n\n    // spin\n    rgb = vec3(\n        dot(rgb, u_spin_weights.xyz),\n        dot(rgb, u_spin_weights.zxy),\n        dot(rgb, u_spin_weights.yzx));\n\n    // saturation\n    float average = (color.r + color.g + color.b) / 3.0;\n    rgb += (average - rgb) * u_saturation_factor;\n\n    // contrast\n    rgb = (rgb - 0.5) * u_contrast_factor + 0.5;\n\n    // brightness\n    vec3 u_high_vec = vec3(u_brightness_low, u_brightness_low, u_brightness_low);\n    vec3 u_low_vec = vec3(u_brightness_high, u_brightness_high, u_brightness_high);\n\n    gl_FragColor = vec4(mix(u_high_vec, u_low_vec, rgb) * color.a, color.a);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_tl_parent;\nuniform float u_scale_parent;\nuniform float u_buffer_scale;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    // We are using Int16 for texture position coordinates to give us enough precision for\n    // fractional coordinates. We use 8192 to scale the texture coordinates in the buffer\n    // as an arbitrarily high number to preserve adequate precision when rendering.\n    // This is also the same value as the EXTENT we are using for our tile buffer pos coordinates,\n    // so math for modifying either is consistent.\n    v_pos0 = (((a_texture_pos / 8192.0) - 0.5) / u_buffer_scale ) + 0.5;\n    v_pos1 = (v_pos0 * u_scale_parent) + u_tl_parent;\n}\n"},symbolIcon:{fragmentSource:"uniform sampler2D u_texture;\n\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    lowp float alpha = opacity * v_fade_opacity;\n    gl_FragColor = texture2D(u_texture, v_tex) * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\nuniform highp float u_camera_to_center_distance;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform float u_fade_change;\n\n#pragma mapbox: define lowp float opacity\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    highp float segment_angle = -a_projected_pos[2];\n\n    float size;\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 10.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 10.0;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // See comments in symbol_sdf.vertex\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = 0.5 + 0.5 * distance_ratio;\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // See comments in symbol_sdf.vertex\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 64.0 * fontScale), 0.0, 1.0);\n\n    v_tex = a_tex / u_texsize;\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    v_fade_opacity = max(0.0, min(1.0, fade_opacity[0] + fade_change));\n}\n"},symbolSDF:{fragmentSource:"#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105/DEVICE_PIXEL_RATIO\n\nuniform bool u_is_halo;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform sampler2D u_texture;\nuniform highp float u_gamma_scale;\nuniform bool u_is_text;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 tex = v_data0.xy;\n    float gamma_scale = v_data1.x;\n    float size = v_data1.y;\n    float fade_opacity = v_data1[2];\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    lowp vec4 color = fill_color;\n    highp float gamma = EDGE_GAMMA / (fontScale * u_gamma_scale);\n    lowp float buff = (256.0 - 64.0) / 256.0;\n    if (u_is_halo) {\n        color = halo_color;\n        gamma = (halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (fontScale * u_gamma_scale);\n        buff = (6.0 - halo_width / fontScale) / SDF_PX;\n    }\n\n    lowp float dist = texture2D(u_texture, tex).a;\n    highp float gamma_scaled = gamma * gamma_scale;\n    highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);\n\n    gl_FragColor = color * (alpha * opacity * fade_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\n// contents of a_size vary based on the type of property value\n// used for {text,icon}-size.\n// For constants, a_size is disabled.\n// For source functions, we bind only one value per vertex: the value of {text,icon}-size evaluated for the current feature.\n// For composite functions:\n// [ text-size(lowerZoomStop, feature),\n//   text-size(upperZoomStop, feature) ]\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\n\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform highp float u_camera_to_center_distance;\nuniform float u_fade_change;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    highp float segment_angle = -a_projected_pos[2];\n    float size;\n\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 10.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 10.0;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // If the label is pitched with the map, layout is done in pitched space,\n    // which makes labels in the distance smaller relative to viewport space.\n    // We counteract part of that effect by multiplying by the perspective ratio.\n    // If the label isn't pitched with the map, we do layout in viewport space,\n    // which makes labels in the distance larger relative to the features around\n    // them. We counteract part of that effect by dividing by the perspective ratio.\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = 0.5 + 0.5 * distance_ratio;\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // Point labels with 'rotation-alignment: map' are horizontal with respect to tile units\n        // To figure out that angle in projected space, we draw a short horizontal line in tile\n        // space, project it, and measure its angle in projected space.\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 64.0 * fontScale), 0.0, 1.0);\n    float gamma_scale = gl_Position.w;\n\n    vec2 tex = a_tex / u_texsize;\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    float interpolated_fade_opacity = max(0.0, min(1.0, fade_opacity[0] + fade_change));\n\n    v_data0 = vec2(tex.x, tex.y);\n    v_data1 = vec3(gamma_scale, size, interpolated_fade_opacity);\n}\n"}},i=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g;for(var o in r)!function(e){var t=r[e],n={};t.fragmentSource=t.fragmentSource.replace(i,function(e,t,r,i,o){return n[o]=!0,"define"===t?"\n#ifndef HAS_UNIFORM_u_"+o+"\nvarying "+r+" "+i+" "+o+";\n#else\nuniform "+r+" "+i+" u_"+o+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+o+"\n    "+r+" "+i+" "+o+" = u_"+o+";\n#endif\n"}),t.vertexSource=t.vertexSource.replace(i,function(e,t,r,i,o){var a="float"===i?"vec2":"vec4";return n[o]?"define"===t?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float a_"+o+"_t;\nattribute "+r+" "+a+" a_"+o+";\nvarying "+r+" "+i+" "+o+";\n#else\nuniform "+r+" "+i+" u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+o+" = unpack_mix_"+a+"(a_"+o+", a_"+o+"_t);\n#else\n    "+r+" "+i+" "+o+" = u_"+o+";\n#endif\n":"define"===t?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float a_"+o+"_t;\nattribute "+r+" "+a+" a_"+o+";\n#else\nuniform "+r+" "+i+" u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+r+" "+i+" "+o+" = unpack_mix_"+a+"(a_"+o+", a_"+o+"_t);\n#else\n    "+r+" "+i+" "+o+" = u_"+o+";\n#endif\n"})}(o);t.exports=r},{}],97:[function(e,t,n){"use strict";var r=e("./image_source"),i=e("../util/window"),o=e("../data/raster_bounds_attributes"),a=e("../render/vertex_array_object"),s=e("../render/texture"),u=function(e){function t(t,n,r,i){e.call(this,t,n,r,i),this.options=n,this.animate=void 0===n.animate||n.animate}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(){if(this.canvas=this.canvas||i.document.getElementById(this.options.canvas),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions())return void this.fire("error",new Error("Canvas dimensions cannot be less than or equal to zero."));this.play=function(){this._playing=!0,this.map._rerender()},this.pause=function(){this._playing=!1},this._finishLoading()},t.prototype.getCanvas=function(){return this.canvas},t.prototype.onAdd=function(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()},t.prototype.onRemove=function(){this.pause()},t.prototype.prepare=function(){var e=this,t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var n=this.map.painter.context,r=n.gl;this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,o.members)),this.boundsVAO||(this.boundsVAO=new a),this.texture?t?this.texture.update(this.canvas):this._playing&&(this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE),r.texSubImage2D(r.TEXTURE_2D,0,0,0,r.RGBA,r.UNSIGNED_BYTE,this.canvas)):(this.texture=new s(n,this.canvas,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE));for(var i in e.tiles){var u=e.tiles[i];"loaded"!==u.state&&(u.state="loaded",u.texture=e.texture)}}},t.prototype.serialize=function(){return{type:"canvas",canvas:this.canvas,coordinates:this.coordinates}},t.prototype.hasTransition=function(){return this._playing},t.prototype._hasInvalidDimensions=function(){for(var e=this,t=0,n=[e.canvas.width,e.canvas.height];t<n.length;t+=1){var r=n[t];if(isNaN(r)||r<=0)return!0}return!1},t}(r);t.exports=u},{"../data/raster_bounds_attributes":58,"../render/texture":92,"../render/vertex_array_object":94,"../util/window":255,"./image_source":101}],98:[function(e,t,n){"use strict";function r(e){var t=a.document.createElement("a");return t.href=e,t.href}var i=e("../util/evented"),o=e("../util/util"),a=e("../util/window"),s=e("../data/extent"),u=e("../util/ajax").ResourceType,l=e("../util/browser"),c=function(e){function t(t,n,r,i){e.call(this),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this.dispatcher=r,this.setEventedParent(i),this._data=n.data,this._options=o.extend({},n),this._collectResourceTiming=n.collectResourceTiming,this._resourceTiming=[],void 0!==n.maxzoom&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type);var a=s/this.tileSize;this.workerOptions=o.extend({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(void 0!==n.buffer?n.buffer:128)*a,tolerance:(void 0!==n.tolerance?n.tolerance:.375)*a,extent:s,maxZoom:this.maxzoom},superclusterOptions:{maxZoom:void 0!==n.clusterMaxZoom?Math.min(n.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:s,radius:(n.clusterRadius||50)*a,log:!1}},n.workerOptions)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(){var e=this;this.fire("dataloading",{dataType:"source"}),this._updateWorkerData(function(t){if(t)return void e.fire("error",{error:t});var n={dataType:"source",sourceDataType:"metadata"};e._collectResourceTiming&&e._resourceTiming&&e._resourceTiming.length>0&&(n.resourceTiming=e._resourceTiming,e._resourceTiming=[]),e.fire("data",n)})},t.prototype.onAdd=function(e){this.map=e,this.load()},t.prototype.setData=function(e){var t=this;return this._data=e,this.fire("dataloading",{dataType:"source"}),this._updateWorkerData(function(e){if(e)return t.fire("error",{error:e});var n={dataType:"source",sourceDataType:"content"};t._collectResourceTiming&&t._resourceTiming&&t._resourceTiming.length>0&&(n.resourceTiming=t._resourceTiming,t._resourceTiming=[]),t.fire("data",n)}),this},t.prototype._updateWorkerData=function(e){var t=this,n=o.extend({},this.workerOptions),i=this._data;"string"==typeof i?(n.request=this.map._transformRequest(r(i),u.Source),n.request.collectResourceTiming=this._collectResourceTiming):n.data=JSON.stringify(i),this.workerID=this.dispatcher.send(this.type+".loadData",n,function(n,r){t._loaded=!0,r&&r.resourceTiming&&r.resourceTiming[t.id]&&(t._resourceTiming=r.resourceTiming[t.id].slice(0)),e(n)},this.workerID)},t.prototype.loadTile=function(e,t){var n=this,r=void 0===e.workerID||"expired"===e.state?"loadTile":"reloadTile",i={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:l.devicePixelRatio,overscaling:e.tileID.overscaleFactor(),showCollisionBoxes:this.map.showCollisionBoxes};e.workerID=this.dispatcher.send(r,i,function(i,o){return e.unloadVectorData(),e.aborted?t(null):i?t(i):(e.loadVectorData(o,n.map.painter,"reloadTile"===r),t(null))},this.workerID)},t.prototype.abortTile=function(e){e.aborted=!0},t.prototype.unloadTile=function(e){e.unloadVectorData(),this.dispatcher.send("removeTile",{uid:e.uid,type:this.type,source:this.id},null,e.workerID)},t.prototype.onRemove=function(){this.dispatcher.broadcast("removeSource",{type:this.type,source:this.id})},t.prototype.serialize=function(){return o.extend({},this._options,{type:this.type,data:this._data})},t.prototype.hasTransition=function(){return!1},t}(i);t.exports=c},{"../data/extent":52,"../util/ajax":252,"../util/browser":253,"../util/evented":261,"../util/util":276,"../util/window":255}],99:[function(e,t,n){"use strict";function r(e,t){var n=e.source,r=e.tileID.canonical;if(!this._geoJSONIndexes[n])return t(null,null);var i=this._geoJSONIndexes[n].getTile(r.z,r.x,r.y);if(!i)return t(null,null);var o=new s(i.features),a=u(o);0===a.byteOffset&&a.byteLength===a.buffer.byteLength||(a=new Uint8Array(a)),t(null,{vectorTile:o,rawData:a.buffer})}var i=e("../util/ajax"),o=e("../util/performance"),a=e("geojson-rewind"),s=e("./geojson_wrapper"),u=e("vt-pbf"),l=e("supercluster"),c=e("geojson-vt"),p=e("./vector_tile_worker_source"),d=function(e){function t(t,n,i){e.call(this,t,n,r),i&&(this.loadGeoJSON=i),this._geoJSONIndexes={}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.loadData=function(e,t){var n=this;this.loadGeoJSON(e,function(r,i){if(r||!i)return t(r);if("object"!=typeof i)return t(new Error("Input data is not a valid GeoJSON object."));a(i,!0);try{n._geoJSONIndexes[e.source]=e.cluster?l(e.superclusterOptions).load(i.features):c(i,e.geojsonVtOptions)}catch(r){return t(r)}n.loaded[e.source]={};var s={};if(e.request&&e.request.collectResourceTiming){var u=o.getEntriesByName(e.request.url);u&&(s.resourceTiming={},s.resourceTiming[e.source]=JSON.parse(JSON.stringify(u)))}t(null,s)})},t.prototype.reloadTile=function(t,n){var r=this.loaded[t.source],i=t.uid;return r&&r[i]?e.prototype.reloadTile.call(this,t,n):this.loadTile(t,n)},t.prototype.loadGeoJSON=function(e,t){if(e.request)i.getJSON(e.request,t);else{if("string"!=typeof e.data)return t(new Error("Input data is not a valid GeoJSON object."));try{return t(null,JSON.parse(e.data))}catch(e){return t(new Error("Input data is not a valid GeoJSON object."))}}},t.prototype.removeSource=function(e,t){this._geoJSONIndexes[e.source]&&delete this._geoJSONIndexes[e.source],t()},t}(p);t.exports=d},{"../util/ajax":252,"../util/performance":269,"./geojson_wrapper":100,"./vector_tile_worker_source":115,"geojson-rewind":14,"geojson-vt":18,supercluster:31,"vt-pbf":33}],100:[function(e,t,n){"use strict";var r=e("@mapbox/point-geometry"),i=e("@mapbox/vector-tile").VectorTileFeature.prototype.toGeoJSON,o=e("../data/extent"),a=function(e){this._feature=e,this.extent=o,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))};a.prototype.loadGeometry=function(){var e=this;if(1===this._feature.type){for(var t=[],n=0,i=e._feature.geometry;n<i.length;n+=1){var o=i[n];t.push([new r(o[0],o[1])])}return t}for(var a=[],s=0,u=e._feature.geometry;s<u.length;s+=1){for(var l=u[s],c=[],p=0,d=l;p<d.length;p+=1){var f=d[p];c.push(new r(f[0],f[1]))}a.push(c)}return a},a.prototype.toGeoJSON=function(e,t,n){return i.call(this,e,t,n)};var s=function(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o,this.length=e.length,this._features=e};s.prototype.feature=function(e){return new a(this._features[e])},t.exports=s},{"../data/extent":52,"@mapbox/point-geometry":4,"@mapbox/vector-tile":8}],101:[function(e,t,n){"use strict";var r=e("../util/util"),i=e("./tile_id"),o=i.CanonicalTileID,a=e("../geo/lng_lat"),s=e("@mapbox/point-geometry"),u=e("../util/evented"),l=e("../util/ajax"),c=e("../util/browser"),p=e("../data/extent"),d=e("../data/array_types"),f=d.RasterBoundsArray,h=e("../data/raster_bounds_attributes"),m=e("../render/vertex_array_object"),g=e("../render/texture"),y=function(e){function t(t,n,r,i){e.call(this),this.id=t,this.dispatcher=r,this.coordinates=n.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this.setEventedParent(i),this.options=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(){var e=this;this.fire("dataloading",{dataType:"source"}),this.url=this.options.url,l.getImage(this.map._transformRequest(this.url,l.ResourceType.Image),function(t,n){t?e.fire("error",{error:t}):n&&(e.image=c.getImageData(n),e._finishLoading())})},t.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire("data",{dataType:"source",sourceDataType:"metadata"}))},t.prototype.onAdd=function(e){this.map=e,this.load()},t.prototype.setCoordinates=function(e){this.coordinates=e;var t=this.map,n=e.map(function(e){return t.transform.locationCoordinate(a.convert(e)).zoomTo(0)}),i=this.centerCoord=r.getCoordinatesCenter(n);i.column=Math.floor(i.column),i.row=Math.floor(i.row),this.tileID=new o(i.zoom,i.column,i.row),this.minzoom=this.maxzoom=i.zoom;var u=n.map(function(e){var t=e.zoomTo(i.zoom);return new s(Math.round((t.column-i.column)*p),Math.round((t.row-i.row)*p))});return this._boundsArray=new f,this._boundsArray.emplaceBack(u[0].x,u[0].y,0,0),this._boundsArray.emplaceBack(u[1].x,u[1].y,p,0),this._boundsArray.emplaceBack(u[3].x,u[3].y,0,p),this._boundsArray.emplaceBack(u[2].x,u[2].y,p,p),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire("data",{dataType:"source",sourceDataType:"content"}),this},t.prototype.prepare=function(){var e=this;if(0!==Object.keys(this.tiles).length&&this.image){var t=this.map.painter.context,n=t.gl;this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,h.members)),this.boundsVAO||(this.boundsVAO=new m),this.texture||(this.texture=new g(t,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));for(var r in e.tiles){var i=e.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=e.texture)}}},t.prototype.loadTile=function(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},t(null)):(e.state="errored",t(null))},t.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},t.prototype.hasTransition=function(){return!1},t}(u);t.exports=y},{"../data/array_types":38,"../data/extent":52,"../data/raster_bounds_attributes":58,"../geo/lng_lat":61,"../render/texture":92,"../render/vertex_array_object":94,"../util/ajax":252,"../util/browser":253,"../util/evented":261,"../util/util":276,"./tile_id":113,"@mapbox/point-geometry":4}],102:[function(e,t,n){"use strict";var r=e("../util/util"),i=e("../util/ajax"),o=e("../util/browser"),a=e("../util/mapbox").normalizeSourceURL;t.exports=function(e,t,n){var s=function(e,t){if(e)return n(e);if(t){var i=r.pick(t,["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds"]);t.vector_layers&&(i.vectorLayers=t.vector_layers,i.vectorLayerIds=i.vectorLayers.map(function(e){return e.id})),n(null,i)}};e.url?i.getJSON(t(a(e.url),i.ResourceType.Source),s):o.frame(function(){return s(null,e)})}},{"../util/ajax":252,"../util/browser":253,"../util/mapbox":268,"../util/util":276}],103:[function(e,t,n){"use strict";var r=e("../data/extent");t.exports=function(e,t,n){return t*(r/(e.tileSize*Math.pow(2,n-e.tileID.overscaledZ)))}},{"../data/extent":52}],104:[function(e,t,n){"use strict";function r(e,t){var n=e.tileID,r=t.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}function i(e){for(var t={},n={},r=0,i=e;r<i.length;r+=1){var o=i[r],a=o.queryResults,s=o.wrappedTileID,u=n[s]=n[s]||{};for(var l in a)for(var c=a[l],p=u[l]=u[l]||{},d=t[l]=t[l]||[],f=0,h=c;f<h.length;f+=1){var m=h[f];p[m.featureIndex]||(p[m.featureIndex]=!0,d.push(m.feature))}}return t}n.rendered=function(e,t,n,o,a,s,u){var l=e.tilesIn(n);l.sort(r);for(var c=[],p=0,d=l;p<d.length;p+=1){var f=d[p];c.push({wrappedTileID:f.tileID.wrapped().key,queryResults:f.tile.queryRenderedFeatures(t,f.queryGeometry,f.scale,o,s,e.id,u)})}return i(c)},n.source=function(e,t){for(var n=e.getRenderableIds().map(function(t){return e.getTileByID(t)}),r=[],i={},o=0;o<n.length;o++){var a=n[o],s=a.tileID.canonical.key;i[s]||(i[s]=!0,a.querySourceFeatures(r,t))}return r}},{}],105:[function(e,t,n){"use strict";var r=e("../util/ajax"),i=e("../util/util"),o=(e("../util/evented"),e("../util/mapbox").normalizeTileURL),a=e("../util/browser"),s=e("./tile_id"),u=s.OverscaledTileID,l=e("./raster_tile_source"),c=function(e){function t(t,n,r,o){e.call(this,t,n,r,o),this.type="raster-dem",this.maxzoom=22,this._options=i.extend({},n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds}},t.prototype.loadTile=function(e,t){function n(n,r){if(delete e.request,e.aborted)e.state="unloaded",t(null);else if(n)e.state="errored",t(n);else if(r){this.map._refreshExpiredTiles&&e.setExpiryData(r),delete r.cacheControl,delete r.expires;var o=a.getImageData(r),s={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:o};e.workerID&&"expired"!==e.state||(e.workerID=this.dispatcher.send("loadDEMTile",s,i.bind(this)))}}function i(n,r){n&&(e.state="errored",t(n)),r&&(e.dem=r,e.needsHillshadePrepare=!0,e.state="loaded",t(null))}var s=o(e.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);e.request=r.getImage(this.map._transformRequest(s,r.ResourceType.Tile),n.bind(this)),e.neighboringTiles=this._getNeighboringTiles(e.tileID)},t.prototype._getNeighboringTiles=function(e){var t=e.canonical,n=Math.pow(2,t.z),r=(t.x-1+n)%n,i=0===t.x?e.wrap-1:e.wrap,o=(t.x+1+n)%n,a=t.x+1===n?e.wrap+1:e.wrap,s={};return s[new u(e.overscaledZ,i,t.z,r,t.y).key]={backfilled:!1},s[new u(e.overscaledZ,a,t.z,o,t.y).key]={backfilled:!1},t.y>0&&(s[new u(e.overscaledZ,i,t.z,r,t.y-1).key]={backfilled:!1},s[new u(e.overscaledZ,e.wrap,t.z,t.x,t.y-1).key]={backfilled:!1},s[new u(e.overscaledZ,a,t.z,o,t.y-1).key]={backfilled:!1}),t.y+1<n&&(s[new u(e.overscaledZ,i,t.z,r,t.y+1).key]={backfilled:!1},s[new u(e.overscaledZ,e.wrap,t.z,t.x,t.y+1).key]={backfilled:!1},s[new u(e.overscaledZ,a,t.z,o,t.y+1).key]={backfilled:!1}),s},t.prototype.unloadTile=function(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded",this.dispatcher.send("removeDEMTile",{uid:e.uid,source:this.id},void 0,e.workerID)},t}(l);t.exports=c},{"../util/ajax":252,"../util/browser":253,"../util/evented":261,"../util/mapbox":268,"../util/util":276,"./raster_tile_source":107,"./tile_id":113}],106:[function(e,t,n){"use strict";var r=e("../data/dem_data"),i=r.DEMData,o=function(){this.loading={},this.loaded={}};o.prototype.loadTile=function(e,t){var n=e.source,r=e.uid;this.loading[n]||(this.loading[n]={});var o=new i(r);this.loading[n][r]=o,o.loadFromImage(e.rawImageData),delete this.loading[n][r],this.loaded[n]=this.loaded[n]||{},this.loaded[n][r]=o,t(null,o)},o.prototype.removeTile=function(e){var t=this.loaded[e.source],n=e.uid;t&&t[n]&&delete t[n]},t.exports=o},{"../data/dem_data":51}],107:[function(e,t,n){"use strict";var r=e("../util/util"),i=e("../util/ajax"),o=e("../util/evented"),a=e("./load_tilejson"),s=e("../util/mapbox").normalizeTileURL,u=e("./tile_bounds"),l=e("../render/texture"),c=function(e){function t(t,n,i,o){e.call(this),this.id=t,this.dispatcher=i,this.setEventedParent(o),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=r.extend({},n),r.extend(this,r.pick(n,["url","scheme","tileSize"]))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(){var e=this;this.fire("dataloading",{dataType:"source"}),a(this._options,this.map._transformRequest,function(t,n){t?e.fire("error",t):n&&(r.extend(e,n),n.bounds&&(e.tileBounds=new u(n.bounds,e.minzoom,e.maxzoom)),e.fire("data",{dataType:"source",sourceDataType:"metadata"}),e.fire("data",{dataType:"source",sourceDataType:"content"}))})},t.prototype.onAdd=function(e){this.map=e,this.load()},t.prototype.serialize=function(){return r.extend({},this._options)},t.prototype.hasTile=function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)},t.prototype.loadTile=function(e,t){var n=this,r=s(e.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);e.request=i.getImage(this.map._transformRequest(r,i.ResourceType.Tile),function(r,i){if(delete e.request,e.aborted)e.state="unloaded",t(null);else if(r)e.state="errored",t(r);else if(i){n.map._refreshExpiredTiles&&e.setExpiryData(i),delete i.cacheControl,delete i.expires;var o=n.map.painter.context,a=o.gl;e.texture=n.map.painter.getTileTexture(i.width),e.texture?(e.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,i)):(e.texture=new l(o,i,a.RGBA),e.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),o.extTextureFilterAnisotropic&&a.texParameterf(a.TEXTURE_2D,o.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,o.extTextureFilterAnisotropicMax)),a.generateMipmap(a.TEXTURE_2D),e.state="loaded",t(null)}})},t.prototype.abortTile=function(e,t){e.request&&(e.request.abort(),delete e.request),t()},t.prototype.unloadTile=function(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t()},t.prototype.hasTransition=function(){return!1},t}(o);t.exports=c},{"../render/texture":92,"../util/ajax":252,"../util/evented":261,"../util/mapbox":268,"../util/util":276,"./load_tilejson":102,"./tile_bounds":112}],108:[function(e,t,n){"use strict";var r=e("../util/ajax"),i=e("../util/evented"),o=e("../util/window"),a=!1,s=null;t.exports.evented=new i,t.exports.registerForPluginAvailability=function(e){return s?e({pluginBlobURL:s,errorCallback:t.exports.errorCallback}):t.exports.evented.once("pluginAvailable",e),e},t.exports.createBlobURL=function(e){return o.URL.createObjectURL(new o.Blob([e.data],{type:"text/javascript"}))},t.exports.clearRTLTextPlugin=function(){a=!1,s=null},t.exports.setRTLTextPlugin=function(e,n){if(a)throw new Error("setRTLTextPlugin cannot be called multiple times.");a=!0,t.exports.errorCallback=n,r.getArrayBuffer({url:e},function(e,r){e?n(e):r&&(s=t.exports.createBlobURL(r),t.exports.evented.fire("pluginAvailable",{pluginBlobURL:s,errorCallback:n}))})},t.exports.applyArabicShaping=null,t.exports.processBidirectionalText=null},{"../util/ajax":252,"../util/evented":261,"../util/window":255}],109:[function(e,t,n){"use strict";var r=e("../util/util"),i={vector:e("../source/vector_tile_source"),raster:e("../source/raster_tile_source"),"raster-dem":e("../source/raster_dem_tile_source"),geojson:e("../source/geojson_source"),video:e("../source/video_source"),image:e("../source/image_source"),canvas:e("../source/canvas_source")};n.create=function(e,t,n,o){var a=new i[t.type](e,t,n,o);if(a.id!==e)throw new Error("Expected Source id to be "+e+" instead of "+a.id);return r.bindAll(["load","abort","unload","serialize","prepare"],a),a},n.getType=function(e){return i[e]},n.setType=function(e,t){i[e]=t}},{"../source/canvas_source":97,"../source/geojson_source":98,"../source/image_source":101,"../source/raster_dem_tile_source":105,"../source/raster_tile_source":107,"../source/vector_tile_source":114,"../source/video_source":116,"../util/util":276}],110:[function(e,t,n){"use strict";function r(e,t){var n=t.zoomTo(e.canonical.z);return new d((n.column-(e.canonical.x+e.wrap*Math.pow(2,e.canonical.z)))*p,(n.row-e.canonical.y)*p)}function i(e){return"raster"===e||"image"===e||"video"===e}var o=e("./source").create,a=e("./tile"),s=e("../util/evented"),u=e("../util/lru_cache"),l=e("../geo/coordinate"),c=e("../util/util"),p=e("../data/extent"),d=(e("../gl/context"),e("@mapbox/point-geometry")),f=e("../util/browser"),h=e("./tile_id"),m=h.OverscaledTileID,g=function(e){function t(t,n,r){var i=this;e.call(this),this.id=t,this.dispatcher=r,this.on("data",function(e){"source"===e.dataType&&"metadata"===e.sourceDataType&&(i._sourceLoaded=!0),i._sourceLoaded&&!i._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(i.reload(),i.transform&&i.update(i.transform))}),this.on("error",function(){i._sourceErrored=!0}),this._source=o(t,n,r,this),this._tiles={},this._cache=new u(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._isIdRenderable=this._isIdRenderable.bind(this),this._coveredTiles={}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.onAdd=function(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(e)},t.prototype.onRemove=function(e){this._source&&this._source.onRemove&&this._source.onRemove(e)},t.prototype.loaded=function(){var e=this;if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var t in e._tiles){var n=e._tiles[t];if("loaded"!==n.state&&"errored"!==n.state)return!1}return!0},t.prototype.getSource=function(){return this._source},t.prototype.pause=function(){this._paused=!0},t.prototype.resume=function(){if(this._paused){var e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}},t.prototype._loadTile=function(e,t){return this._source.loadTile(e,t)},t.prototype._unloadTile=function(e){if(this._source.unloadTile)return this._source.unloadTile(e,function(){})},t.prototype._abortTile=function(e){if(this._source.abortTile)return this._source.abortTile(e,function(){})},t.prototype.serialize=function(){return this._source.serialize()},t.prototype.prepare=function(e){var t=this;this._source.prepare&&this._source.prepare();for(var n in t._tiles)t._tiles[n].upload(e)},t.prototype.getIds=function(){var e=this,t=function(t,n){var r=e._tiles[t].tileID,i=e._tiles[n].tileID,o=new d(r.canonical.x,r.canonical.y).rotate(e.transform.angle),a=new d(i.canonical.x,i.canonical.y).rotate(e.transform.angle);return r.overscaledZ-i.overscaledZ||a.y-o.y||a.x-o.x};return Object.keys(this._tiles).map(Number).sort(t)},t.prototype.getRenderableIds=function(){return this.getIds().filter(this._isIdRenderable)},t.prototype.hasRenderableParent=function(e){var t=this.findLoadedParent(e,0,{});return!!t&&this._isIdRenderable(t.tileID.key)},t.prototype._isIdRenderable=function(e){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]},t.prototype.reload=function(){var e=this;if(this._paused)return void(this._shouldReloadOnResume=!0);this._resetCache();for(var t in e._tiles)e._reloadTile(t,"reloading")},t.prototype._reloadTile=function(e,t){var n=this._tiles[e];n&&("loading"!==n.state&&(n.state=t),this._loadTile(n,this._tileLoaded.bind(this,n,e,t)))},t.prototype._tileLoaded=function(e,t,n,r){if(r)return e.state="errored",void(404!==r.status?this._source.fire("error",{tile:e,error:r}):this.update(this.transform));e.timeAdded=f.now(),"expired"===n&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(t,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._source.fire("data",{dataType:"source",tile:e,coord:e.tileID}),this.map&&(this.map.painter.tileExtentVAO.vao=null)},t.prototype._backfillDEM=function(e){function t(e,t){e.needsHillshadePrepare=!0;var n=t.tileID.canonical.x-e.tileID.canonical.x,r=t.tileID.canonical.y-e.tileID.canonical.y,i=Math.pow(2,e.tileID.canonical.z),o=t.tileID.key;0===n&&0===r||Math.abs(r)>1||(Math.abs(n)>1&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,n,r),e.neighboringTiles&&e.neighboringTiles[o]&&(e.neighboringTiles[o].backfilled=!0)))}for(var n=this,r=this.getRenderableIds(),i=0;i<r.length;i++){var o=r[i];if(e.neighboringTiles&&e.neighboringTiles[o]){var a=n.getTileByID(o);t(e,a),t(a,e)}}},t.prototype.getTile=function(e){return this.getTileByID(e.key)},t.prototype.getTileByID=function(e){return this._tiles[e]},t.prototype.getZoom=function(e){return e.zoom+e.scaleZoom(e.tileSize/this._source.tileSize)},t.prototype._findLoadedChildren=function(e,t,n){var r=this,i=!1;for(var o in r._tiles){var a=r._tiles[o];if(!(n[o]||!a.hasData()||a.tileID.overscaledZ<=e.overscaledZ||a.tileID.overscaledZ>t)){var s=Math.pow(2,a.tileID.canonical.z-e.canonical.z);if(Math.floor(a.tileID.canonical.x/s)===e.canonical.x&&Math.floor(a.tileID.canonical.y/s)===e.canonical.y)for(n[o]=a.tileID,i=!0;a&&a.tileID.overscaledZ-1>e.overscaledZ;){var u=a.tileID.scaledTo(a.tileID.overscaledZ-1);if(!u)break;(a=r._tiles[u.key])&&a.hasData()&&(delete n[o],n[u.key]=u)}}}return i},t.prototype.findLoadedParent=function(e,t,n){for(var r=this,i=e.overscaledZ-1;i>=t;i--){var o=e.scaledTo(i);if(!o)return;var a=String(o.key),s=r._tiles[a];if(s&&s.hasData())return n[a]=o,s;if(r._cache.has(a))return n[a]=o,r._cache.get(a)}},t.prototype.updateCacheSize=function(e){var t=Math.ceil(e.width/this._source.tileSize)+1,n=Math.ceil(e.height/this._source.tileSize)+1,r=t*n,i=Math.floor(5*r),o="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,i):i;this._cache.setMaxSize(o)},t.prototype.update=function(e){var n=this;if(this.transform=e,this._sourceLoaded&&!this._paused){this.updateCacheSize(e),this._coveredTiles={};var r;this.used?this._source.tileID?r=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(e){return new m(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)}):(r=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(r=r.filter(function(e){return n._source.hasTile(e)}))):r=[];var o=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(e)),a=Math.max(o-t.maxOverzooming,this._source.minzoom),s=Math.max(o+t.maxUnderzooming,this._source.minzoom),u=this._updateRetainedTiles(r,o),l={};if(i(this._source.type))for(var p=Object.keys(u),d=0;d<p.length;d++){var h=p[d],g=u[h],y=n._tiles[h];if(y&&(void 0===y.fadeEndTime||y.fadeEndTime>=f.now())){n._findLoadedChildren(g,s,u)&&(u[h]=g);var v=n.findLoadedParent(g,a,l);v&&n._addTile(v.tileID)}}var _;for(_ in l)u[_]||(n._coveredTiles[_]=!0);for(_ in l)u[_]=l[_];for(var b=c.keysDifference(this._tiles,u),x=0;x<b.length;x++)n._removeTile(b[x])}},t.prototype._updateRetainedTiles=function(e,n){for(var r=this,i={},o={},a=Math.max(n-t.maxOverzooming,this._source.minzoom),s=Math.max(n+t.maxUnderzooming,this._source.minzoom),u=0;u<e.length;u++){var l=e[u],c=r._addTile(l),p=!1;if(c.hasData())i[l.key]=l;else{p=c.wasRequested(),i[l.key]=l;var d=!0;if(n+1>r._source.maxzoom){var f=l.children(r._source.maxzoom)[0],h=r.getTile(f);h&&h.hasData()?i[f.key]=f:d=!1}else{r._findLoadedChildren(l,s,i);for(var m=l.children(r._source.maxzoom),g=0;g<m.length;g++)if(!i[m[g].key]){d=!1;break}}if(!d)for(var y=l.overscaledZ-1;y>=a;--y){var v=l.scaledTo(y);if(o[v.key])break;if(o[v.key]=!0,c=r.getTile(v),!c&&p&&(c=r._addTile(v)),c&&(i[v.key]=v,p=c.wasRequested(),c.hasData()))break}}}return i},t.prototype._addTile=function(e){var t=this._tiles[e.key];if(t)return t;(t=this._cache.getAndRemove(e.key))&&this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,t));var n=Boolean(t);return n||(t=new a(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(t,this._tileLoaded.bind(this,t,e.key,t.state))),t?(t.uses++,this._tiles[e.key]=t,n||this._source.fire("dataloading",{tile:t,coord:t.tileID,dataType:"source"}),t):null},t.prototype._setTileReloadTimer=function(e,t){var n=this;e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);var r=t.getExpiryTimeout();r&&(this._timers[e]=setTimeout(function(){n._reloadTile(e,"expired"),delete n._timers[e]},r))},t.prototype._setCacheInvalidationTimer=function(e,t){var n=this;e in this._cacheTimers&&(clearTimeout(this._cacheTimers[e]),delete this._cacheTimers[e]);var r=t.getExpiryTimeout();r&&(this._cacheTimers[e]=setTimeout(function(){n._cache.remove(e),delete n._cacheTimers[e]},r))},t.prototype._removeTile=function(e){var t=this._tiles[e];if(t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),!(t.uses>0)))if(t.hasData()){t.tileID=t.tileID.wrapped();var n=t.tileID.key;this._cache.add(n,t),this._setCacheInvalidationTimer(n,t)}else t.aborted=!0,this._abortTile(t),this._unloadTile(t)},t.prototype.clearTiles=function(){var e=this;this._shouldReloadOnResume=!1,this._paused=!1;for(var t in e._tiles)e._removeTile(t);this._resetCache()},t.prototype._resetCache=function(){var e=this;for(var t in e._cacheTimers)clearTimeout(e._cacheTimers[t]);this._cacheTimers={},this._cache.reset()},t.prototype.tilesIn=function(e){for(var t=this,n=[],i=this.getIds(),o=1/0,a=1/0,s=-1/0,u=-1/0,c=e[0].zoom,d=0;d<e.length;d++){var f=e[d];o=Math.min(o,f.column),a=Math.min(a,f.row),s=Math.max(s,f.column),u=Math.max(u,f.row)}for(var h=0;h<i.length;h++){var m=t._tiles[i[h]],g=m.tileID,y=[r(g,new l(o,a,c)),r(g,new l(s,u,c))];if(y[0].x<p&&y[0].y<p&&y[1].x>=0&&y[1].y>=0){for(var v=[],_=0;_<e.length;_++)v.push(r(g,e[_]));n.push({tile:m,tileID:g,queryGeometry:[v],scale:Math.pow(2,t.transform.zoom-m.tileID.overscaledZ)})}}return n},t.prototype.getVisibleCoordinates=function(){for(var e=this,t=this.getRenderableIds().map(function(t){return e._tiles[t].tileID}),n=0,r=t;n<r.length;n+=1){var i=r[n];i.posMatrix=e.transform.calculatePosMatrix(i.toUnwrapped())}return t},t.prototype.hasTransition=function(){var e=this;if(this._source.hasTransition())return!0;if(i(this._source.type))for(var t in e._tiles){var n=e._tiles[t];if(void 0!==n.fadeEndTime&&n.fadeEndTime>=f.now())return!0}return!1},t}(s);g.maxOverzooming=10,g.maxUnderzooming=3,t.exports=g},{"../data/extent":52,"../geo/coordinate":60,"../gl/context":65,"../util/browser":253,"../util/evented":261,"../util/lru_cache":267,"../util/util":276,"./source":109,"./tile":111,"./tile_id":113,"@mapbox/point-geometry":4}],111:[function(e,t,n){"use strict";var r=e("../util/util"),i=e("../data/bucket").deserialize,o=(e("../data/feature_index"),e("@mapbox/vector-tile")),a=e("pbf"),s=e("../util/vectortile_to_geojson"),u=e("../style-spec/feature_filter"),l=(e("../symbol/collision_index"),e("../data/bucket/symbol_bucket")),c=e("../data/array_types"),p=c.RasterBoundsArray,d=c.CollisionBoxArray,f=e("../data/raster_bounds_attributes"),h=e("../data/extent"),m=e("@mapbox/point-geometry"),g=e("../render/texture"),y=e("../data/segment"),v=y.SegmentVector,_=e("../data/index_array_type"),b=_.TriangleIndexArray,x=e("../util/browser"),w=function(e,t){this.tileID=e,this.uid=r.uniqueId(),this.uses=0,this.tileSize=t,this.buckets={},this.expirationTime=null,this.expiredRequestCount=0,this.state="loading"};w.prototype.registerFadeDuration=function(e){var t=e+this.timeAdded;t<x.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)},w.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},w.prototype.loadVectorData=function(e,t,n){var r=this;if(this.hasData()&&this.unloadVectorData(),this.state="loaded",!e)return void(this.collisionBoxArray=new d);if(e.rawTileData&&(this.rawTileData=e.rawTileData),this.collisionBoxArray=e.collisionBoxArray,this.featureIndex=e.featureIndex,this.featureIndex.rawTileData=this.rawTileData,this.buckets=i(e.buckets,t.style),n)for(var o in r.buckets){var a=r.buckets[o];a instanceof l&&(a.justReloaded=!0)}e.iconAtlasImage&&(this.iconAtlasImage=e.iconAtlasImage),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)},w.prototype.unloadVectorData=function(){var e=this;for(var t in e.buckets)e.buckets[t].destroy();this.buckets={},this.iconAtlasTexture&&this.iconAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.collisionBoxArray=null,this.featureIndex=null,this.state="unloaded"},w.prototype.unloadDEMData=function(){this.dem=null,this.neighboringTiles=null,this.state="unloaded"},w.prototype.getBucket=function(e){return this.buckets[e.id]},w.prototype.upload=function(e){var t=this;for(var n in t.buckets){var r=t.buckets[n];r.uploaded||(r.upload(e),r.uploaded=!0)}var i=e.gl;this.iconAtlasImage&&(this.iconAtlasTexture=new g(e,this.iconAtlasImage,i.RGBA),this.iconAtlasImage=null),this.glyphAtlasImage&&(this.glyphAtlasTexture=new g(e,this.glyphAtlasImage,i.ALPHA),this.glyphAtlasImage=null)},w.prototype.queryRenderedFeatures=function(e,t,n,r,i,o,a){var s=this;if(!this.featureIndex||!this.collisionBoxArray)return{};var u=0,c={};for(var p in e){var d=s.getBucket(e[p]);d&&(u=Math.max(u,e[p].queryRadius(d)),d instanceof l&&void 0!==d.bucketInstanceId&&(c[d.bucketInstanceId]=!0))}return this.featureIndex.query({queryGeometry:t,scale:n,tileSize:this.tileSize,bearing:i,params:r,additionalRadius:u,collisionBoxArray:this.collisionBoxArray,sourceID:o,collisionIndex:a,bucketInstanceIds:c},e)},w.prototype.querySourceFeatures=function(e,t){var n=this;if(this.rawTileData){this.vtLayers||(this.vtLayers=new o.VectorTile(new a(this.rawTileData)).layers);var r=t?t.sourceLayer:"",i=this.vtLayers._geojsonTileLayer||this.vtLayers[r];if(i)for(var l=u(t&&t.filter),c={z:this.tileID.overscaledZ,x:this.tileID.canonical.x,y:this.tileID.canonical.y},p=0;p<i.length;p++){var d=i.feature(p);if(l({zoom:n.tileID.overscaledZ},d)){var f=new s(d,c.z,c.x,c.y);f.tile=c,e.push(f)}}}},w.prototype.clearMask=function(){this.segments&&(this.segments.destroy(),delete this.segments),this.maskedBoundsBuffer&&(this.maskedBoundsBuffer.destroy(),delete this.maskedBoundsBuffer),this.maskedIndexBuffer&&(this.maskedIndexBuffer.destroy(),delete this.maskedIndexBuffer)},w.prototype.setMask=function(e,t){var n=this;if(!r.deepEqual(this.mask,e)&&(this.mask=e,this.clearMask(),!r.deepEqual(e,{0:!0}))){var i=new p,o=new b;this.segments=new v,this.segments.prepareSegment(0,i,o);for(var a=Object.keys(e),s=0;s<a.length;s++){var u=e[a[s]],l=h>>u.z,c=new m(u.x*l,u.y*l),d=new m(c.x+l,c.y+l),g=n.segments.prepareSegment(4,i,o);i.emplaceBack(c.x,c.y,c.x,c.y),i.emplaceBack(d.x,c.y,d.x,c.y),i.emplaceBack(c.x,d.y,c.x,d.y),i.emplaceBack(d.x,d.y,d.x,d.y);var y=g.vertexLength;o.emplaceBack(y,y+1,y+2),o.emplaceBack(y+1,y+2,y+3),g.vertexLength+=4,g.primitiveLength+=2}this.maskedBoundsBuffer=t.createVertexBuffer(i,f.members),this.maskedIndexBuffer=t.createIndexBuffer(o)}},w.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},w.prototype.setExpiryData=function(e){var t=this.expirationTime;if(e.cacheControl){var n=r.parseCacheControl(e.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var i=Date.now(),o=!1;if(this.expirationTime>i)o=!1;else if(t)if(this.expirationTime<t)o=!0;else{var a=this.expirationTime-t;a?this.expirationTime=i+Math.max(a,3e4):o=!0}else o=!0;o?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},w.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},t.exports=w},{"../data/array_types":38,"../data/bucket":39,"../data/bucket/symbol_bucket":50,"../data/extent":52,"../data/feature_index":53,"../data/index_array_type":54,"../data/raster_bounds_attributes":58,"../data/segment":59,"../render/texture":92,"../style-spec/feature_filter":147,"../symbol/collision_index":218,"../util/browser":253,"../util/util":276,"../util/vectortile_to_geojson":277,"@mapbox/point-geometry":4,"@mapbox/vector-tile":8,pbf:29}],112:[function(e,t,n){"use strict";var r=e("../geo/lng_lat_bounds"),i=e("../util/util").clamp,o=function(e,t,n){this.bounds=r.convert(this.validateBounds(e)),this.minzoom=t||0,this.maxzoom=n||24};o.prototype.validateBounds=function(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]},o.prototype.contains=function(e){var t={minX:Math.floor(this.lngX(this.bounds.getWest(),e.z)),minY:Math.floor(this.latY(this.bounds.getNorth(),e.z)),maxX:Math.ceil(this.lngX(this.bounds.getEast(),e.z)),maxY:Math.ceil(this.latY(this.bounds.getSouth(),e.z))};return e.x>=t.minX&&e.x<t.maxX&&e.y>=t.minY&&e.y<t.maxY},o.prototype.lngX=function(e,t){return(e+180)*(Math.pow(2,t)/360)},o.prototype.latY=function(e,t){var n=i(Math.sin(Math.PI/180*e),-.9999,.9999),r=Math.pow(2,t)/(2*Math.PI);return Math.pow(2,t-1)+.5*Math.log((1+n)/(1-n))*-r},t.exports=o},{"../geo/lng_lat_bounds":62,"../util/util":276}],113:[function(e,t,n){"use strict";function r(e,t,n,r){(e*=2)<0&&(e=-1*e-1);var i=1<<t;return 32*(i*i*e+i*r+n)+t}function i(e,t,n){for(var r,i="",o=e;o>0;o--)r=1<<o-1,i+=(t&r?1:0)+(n&r?2:0);return i}var o=e("@mapbox/whoots-js"),a=e("../util/web_worker_transfer"),s=a.register,u=e("../geo/coordinate"),l=function(e,t,n){this.z=e,this.x=t,this.y=n,this.key=r(0,e,t,n)};l.prototype.equals=function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y},l.prototype.url=function(e,t){var n=o.getTileBBox(this.x,this.y,this.z),r=i(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===t?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",r).replace("{bbox-epsg-3857}",n)};var c=function(e,t){this.wrap=e,this.canonical=t,this.key=r(e,t.z,t.x,t.y)},p=function(e,t,n,i,o){this.overscaledZ=e,this.wrap=t,this.canonical=new l(n,+i,+o),this.key=r(t,e,i,o)};p.prototype.scaledTo=function(e){var t=this.canonical.z-e;return e>this.canonical.z?new p(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new p(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)},p.prototype.isChildOf=function(e){var t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t},p.prototype.children=function(e){if(this.overscaledZ>=e)return[new p(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var t=this.canonical.z+1,n=2*this.canonical.x,r=2*this.canonical.y;return[new p(t,this.wrap,t,n,r),new p(t,this.wrap,t,n+1,r),new p(t,this.wrap,t,n,r+1),new p(t,this.wrap,t,n+1,r+1)]},p.prototype.isLessThan=function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))},p.prototype.wrapped=function(){return new p(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},p.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},p.prototype.toUnwrapped=function(){return new c(this.wrap,this.canonical)},p.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},p.prototype.toCoordinate=function(){return new u(this.canonical.x+Math.pow(2,this.wrap),this.canonical.y,this.canonical.z)},s("CanonicalTileID",l),s("OverscaledTileID",p,{omit:["posMatrix"]}),t.exports={CanonicalTileID:l,OverscaledTileID:p,UnwrappedTileID:c}},{"../geo/coordinate":60,"../util/web_worker_transfer":279,"@mapbox/whoots-js":12}],114:[function(e,t,n){"use strict";var r=e("../util/evented"),i=e("../util/util"),o=e("./load_tilejson"),a=e("../util/mapbox").normalizeTileURL,s=e("./tile_bounds"),u=e("../util/ajax").ResourceType,l=e("../util/browser"),c=function(e){function t(t,n,r,o){if(e.call(this),this.id=t,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,i.extend(this,i.pick(n,["url","scheme","tileSize"])),this._options=i.extend({type:"vector"},n),this._collectResourceTiming=n.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(o)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(){var e=this;this.fire("dataloading",{dataType:"source"}),o(this._options,this.map._transformRequest,function(t,n){t?e.fire("error",t):n&&(i.extend(e,n),n.bounds&&(e.tileBounds=new s(n.bounds,e.minzoom,e.maxzoom)),e.fire("data",{dataType:"source",sourceDataType:"metadata"}),e.fire("data",{dataType:"source",sourceDataType:"content"}))})},t.prototype.hasTile=function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)},t.prototype.onAdd=function(e){this.map=e,this.load()},t.prototype.serialize=function(){return i.extend({},this._options)},t.prototype.loadTile=function(e,t){function n(n,r){return e.aborted?t(null):n?t(n):(r&&r.resourceTiming&&(e.resourceTiming=r.resourceTiming),this.map._refreshExpiredTiles&&e.setExpiryData(r),e.loadVectorData(r,this.map.painter),t(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}var r=e.tileID.overscaleFactor(),i=a(e.tileID.canonical.url(this.tiles,this.scheme),this.url),o={request:this.map._transformRequest(i,u.Tile),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*r,type:this.type,source:this.id,pixelRatio:l.devicePixelRatio,overscaling:r,showCollisionBoxes:this.map.showCollisionBoxes};o.request.collectResourceTiming=this._collectResourceTiming,void 0===e.workerID||"expired"===e.state?e.workerID=this.dispatcher.send("loadTile",o,n.bind(this)):"loading"===e.state?e.reloadCallback=t:this.dispatcher.send("reloadTile",o,n.bind(this),e.workerID)},t.prototype.abortTile=function(e){this.dispatcher.send("abortTile",{uid:e.uid,type:this.type,source:this.id},void 0,e.workerID)},t.prototype.unloadTile=function(e){e.unloadVectorData(),this.dispatcher.send("removeTile",{uid:e.uid,type:this.type,source:this.id},void 0,e.workerID)},t.prototype.hasTransition=function(){return!1},t}(r);t.exports=c},{"../util/ajax":252,"../util/browser":253,"../util/evented":261,"../util/mapbox":268,"../util/util":276,"./load_tilejson":102,"./tile_bounds":112}],115:[function(e,t,n){"use strict";function r(e,t){var n=i.getArrayBuffer(e.request,function(e,n){e?t(e):n&&t(null,{vectorTile:new o.VectorTile(new a(n.data)),rawData:n.data,cacheControl:n.cacheControl,expires:n.expires})});return function(){n.abort(),t()}}var i=e("../util/ajax"),o=e("@mapbox/vector-tile"),a=e("pbf"),s=e("./worker_tile"),u=e("../util/util"),l=e("../util/performance"),c=function(e,t,n){this.actor=e,this.layerIndex=t,this.loadVectorData=n||r,this.loading={},this.loaded={}};c.prototype.loadTile=function(e,t){var n=this,r=e.source,i=e.uid;this.loading[r]||(this.loading[r]={});var o=this.loading[r][i]=new s(e);o.abort=this.loadVectorData(e,function(a,s){if(delete n.loading[r][i],a||!s)return t(a);var c=s.rawData,p={};s.expires&&(p.expires=s.expires),s.cacheControl&&(p.cacheControl=s.cacheControl);var d={};if(e.request&&e.request.collectResourceTiming){var f=l.getEntriesByName(e.request.url);f&&(d.resourceTiming=JSON.parse(JSON.stringify(f)))}o.vectorTile=s.vectorTile,o.parse(s.vectorTile,n.layerIndex,n.actor,function(e,n){if(e||!n)return t(e);t(null,u.extend({rawTileData:c.slice(0)},n,p,d))}),n.loaded[r]=n.loaded[r]||{},n.loaded[r][i]=o})},c.prototype.reloadTile=function(e,t){function n(e,n){if(this.reloadCallback){var r=this.reloadCallback;delete this.reloadCallback,this.parse(this.vectorTile,o.layerIndex,o.actor,r)}t(e,n)}var r=this.loaded[e.source],i=e.uid,o=this;if(r&&r[i]){var a=r[i];a.showCollisionBoxes=e.showCollisionBoxes,"parsing"===a.status?a.reloadCallback=t:"done"===a.status&&a.parse(a.vectorTile,this.layerIndex,this.actor,n.bind(a))}},c.prototype.abortTile=function(e,t){var n=this.loading[e.source],r=e.uid;n&&n[r]&&n[r].abort&&(n[r].abort(),delete n[r]),t()},c.prototype.removeTile=function(e,t){var n=this.loaded[e.source],r=e.uid;n&&n[r]&&delete n[r],t()},t.exports=c},{"../util/ajax":252,"../util/performance":269,"../util/util":276,"./worker_tile":118,"@mapbox/vector-tile":8,pbf:29}],116:[function(e,t,n){"use strict";var r=e("../util/ajax"),i=e("./image_source"),o=e("../data/raster_bounds_attributes"),a=e("../render/vertex_array_object"),s=e("../render/texture"),u=function(e){function t(t,n,r,i){e.call(this,t,n,r,i),this.roundZoom=!0,this.type="video",this.options=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(){var e=this,t=this.options;this.urls=t.urls,r.getVideo(t.urls,function(t,n){t?e.fire("error",{error:t}):n&&(e.video=n,e.video.loop=!0,e.video.addEventListener("playing",function(){e.map._rerender()}),e.map&&e.video.play(),e._finishLoading())})},t.prototype.getVideo=function(){return this.video},t.prototype.onAdd=function(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},t.prototype.prepare=function(){var e=this;if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var t=this.map.painter.context,n=t.gl;this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,o.members)),this.boundsVAO||(this.boundsVAO=new a),this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new s(t,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));for(var r in e.tiles){var i=e.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=e.texture)}}},t.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},t.prototype.hasTransition=function(){return this.video&&!this.video.paused},t}(i);t.exports=u},{"../data/raster_bounds_attributes":58,"../render/texture":92,"../render/vertex_array_object":94,"../util/ajax":252,"./image_source":101}],117:[function(e,t,n){"use strict";var r=e("../util/actor"),i=e("../style/style_layer_index"),o=e("./vector_tile_worker_source"),a=e("./raster_dem_tile_worker_source"),s=e("./geojson_worker_source"),u=e("./rtl_text_plugin"),l=function(e){var t=this;this.self=e,this.actor=new r(e,this),this.layerIndexes={},this.workerSourceTypes={vector:o,geojson:s},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(e,n){if(t.workerSourceTypes[e])throw new Error('Worker source with name "'+e+'" already registered.');t.workerSourceTypes[e]=n},this.self.registerRTLTextPlugin=function(e){if(u.applyArabicShaping||u.processBidirectionalText)throw new Error("RTL text plugin already registered.");u.applyArabicShaping=e.applyArabicShaping,u.processBidirectionalText=e.processBidirectionalText}};l.prototype.setLayers=function(e,t,n){this.getLayerIndex(e).replace(t),n()},l.prototype.updateLayers=function(e,t,n){this.getLayerIndex(e).update(t.layers,t.removedIds),n()},l.prototype.loadTile=function(e,t,n){this.getWorkerSource(e,t.type).loadTile(t,n)},l.prototype.loadDEMTile=function(e,t,n){this.getDEMWorkerSource(e).loadTile(t,n)},l.prototype.reloadTile=function(e,t,n){this.getWorkerSource(e,t.type).reloadTile(t,n)},l.prototype.abortTile=function(e,t,n){this.getWorkerSource(e,t.type).abortTile(t,n)},l.prototype.removeTile=function(e,t,n){this.getWorkerSource(e,t.type).removeTile(t,n)},l.prototype.removeDEMTile=function(e,t){this.getDEMWorkerSource(e).removeTile(t)},l.prototype.removeSource=function(e,t,n){var r=this.getWorkerSource(e,t.type);void 0!==r.removeSource?r.removeSource(t,n):n()},l.prototype.loadWorkerSource=function(e,t,n){try{this.self.importScripts(t.url),n()}catch(e){n(e)}},l.prototype.loadRTLTextPlugin=function(e,t,n){try{u.applyArabicShaping||u.processBidirectionalText||(this.self.importScripts(t),u.applyArabicShaping&&u.processBidirectionalText||n(new Error("RTL Text Plugin failed to import scripts from "+t)))}catch(e){n(e)}},l.prototype.getLayerIndex=function(e){var t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new i),t},l.prototype.getWorkerSource=function(e,t){var n=this;if(this.workerSources[e]||(this.workerSources[e]={}),!this.workerSources[e][t]){var r={send:function(t,r,i){n.actor.send(t,r,i,e)}};this.workerSources[e][t]=new this.workerSourceTypes[t](r,this.getLayerIndex(e))}return this.workerSources[e][t]},l.prototype.getDEMWorkerSource=function(e){return this.demWorkerSources[e]||(this.demWorkerSources[e]=new a),this.demWorkerSources[e]},t.exports=function(e){return new l(e)}},{"../style/style_layer_index":211,"../util/actor":251,"./geojson_worker_source":99,"./raster_dem_tile_worker_source":106,"./rtl_text_plugin":108,"./vector_tile_worker_source":115}],118:[function(e,t,n){"use strict";function r(e,t){for(var n=new g(t),r=0,i=e;r<i.length;r+=1)i[r].recalculate(n)}var i=e("../data/feature_index"),o=e("../symbol/symbol_layout"),a=o.performSymbolLayout,s=e("../data/array_types"),u=s.CollisionBoxArray,l=e("../util/dictionary_coder"),c=e("../data/bucket/symbol_bucket"),p=e("../util/util"),d=e("../render/image_atlas"),f=d.makeImageAtlas,h=e("../render/glyph_atlas"),m=h.makeGlyphAtlas,g=e("../style/evaluation_parameters"),y=e("./tile_id"),v=y.OverscaledTileID,_=function(e){this.tileID=new v(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=e.overscaling,this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming};_.prototype.parse=function(e,t,n,o){function s(){var e=this;if(A)return o(A);if(P&&R){var t=m(P),n=f(R);for(var i in y){var s=y[i];s instanceof c&&(r(s.layers,e.zoom),a(s,P,t.positions,R,n.positions,e.showCollisionBoxes))}this.status="done",o(null,{buckets:p.values(y).filter(function(e){return!e.isEmpty()}),featureIndex:g,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:t.image,iconAtlasImage:n.image})}}var d=this;this.status="parsing",this.data=e,this.collisionBoxArray=new u;var h=new l(Object.keys(e.layers).sort()),g=new i(this.tileID,this.overscaling);g.bucketLayerIDs=[];var y={},v={featureIndex:g,iconDependencies:{},glyphDependencies:{}},_=t.familiesBySource[this.source];for(var b in _){var x=e.layers[b];if(x){1===x.version&&p.warnOnce('Vector tile source "'+d.source+'" layer "'+b+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var w=h.encode(b),S=[],k=0;k<x.length;k++){var E=x.feature(k);S.push({feature:E,index:k,sourceLayerIndex:w})}for(var T=0,M=_[b];T<M.length;T+=1){var C=M[T],O=C[0];O.minzoom&&d.zoom<Math.floor(O.minzoom)||O.maxzoom&&d.zoom>=O.maxzoom||"none"===O.visibility||(r(C,d.zoom),(y[O.id]=O.createBucket({index:g.bucketLayerIDs.length,layers:C,zoom:d.zoom,pixelRatio:d.pixelRatio,overscaling:d.overscaling,collisionBoxArray:d.collisionBoxArray})).populate(S,v),g.bucketLayerIDs.push(C.map(function(e){return e.id})))}}}var A,P,R,D=p.mapObject(v.glyphDependencies,function(e){return Object.keys(e).map(Number)});Object.keys(D).length?n.send("getGlyphs",{uid:this.uid,stacks:D},function(e,t){A||(A=e,P=t,s.call(d))}):P={};var I=Object.keys(v.iconDependencies);I.length?n.send("getImages",{icons:I},function(e,t){A||(A=e,R=t,s.call(d))}):R={},s.call(this)},t.exports=_},{"../data/array_types":38,"../data/bucket/symbol_bucket":50,"../data/feature_index":53,"../render/glyph_atlas":84,"../render/image_atlas":86,"../style/evaluation_parameters":183,"../symbol/symbol_layout":228,"../util/dictionary_coder":258,"../util/util":276,"./tile_id":113}],119:[function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)"ref"!==r&&(n[r]=e[r]);return o.forEach(function(e){e in t&&(n[e]=t[e])}),n}function i(e){e=e.slice();for(var t=Object.create(null),n=0;n<e.length;n++)t[e[n].id]=e[n];for(var i=0;i<e.length;i++)"ref"in e[i]&&(e[i]=r(e[i],t[e[i].ref]));return e}var o=e("./util/ref_properties");t.exports=i},{"./util/ref_properties":160}],120:[function(e,t,n){"use strict";function r(e,t,n){n.push({command:h.addSource,args:[e,t[e]]})}function i(e,t,n){t.push({command:h.removeSource,args:[e]}),n[e]=!0}function o(e,t,n,o){i(e,n,o),r(e,t,n)}function a(e,t,n){var r;for(r in e[n])if(e[n].hasOwnProperty(r)&&"data"!==r&&!f(e[n][r],t[n][r]))return!1;for(r in t[n])if(t[n].hasOwnProperty(r)&&"data"!==r&&!f(e[n][r],t[n][r]))return!1;return!0}function s(e,t,n,s){e=e||{},t=t||{};var u;for(u in e)e.hasOwnProperty(u)&&(t.hasOwnProperty(u)||i(u,n,s));for(u in t)t.hasOwnProperty(u)&&(e.hasOwnProperty(u)?f(e[u],t[u])||("geojson"===e[u].type&&"geojson"===t[u].type&&a(e,t,u)?n.push({command:h.setGeoJSONSourceData,args:[u,t[u].data]}):o(u,t,n,s)):r(u,t,n))}function u(e,t,n,r,i,o){e=e||{},t=t||{};var a;for(a in e)e.hasOwnProperty(a)&&(f(e[a],t[a])||n.push({command:o,args:[r,a,t[a],i]}));for(a in t)t.hasOwnProperty(a)&&!e.hasOwnProperty(a)&&(f(e[a],t[a])||n.push({command:o,args:[r,a,t[a],i]}))}function l(e){return e.id}function c(e,t){return e[t.id]=t,e}function p(e,t,n){e=e||[],t=t||[];var r,i,o,a,s,p,d,m=e.map(l),g=t.map(l),y=e.reduce(c,{}),v=t.reduce(c,{}),_=m.slice(),b=Object.create(null);for(r=0,i=0;r<m.length;r++)o=m[r],v.hasOwnProperty(o)?i++:(n.push({command:h.removeLayer,args:[o]}),_.splice(_.indexOf(o,i),1));for(r=0,i=0;r<g.length;r++)o=g[g.length-1-r],_[_.length-1-r]!==o&&(y.hasOwnProperty(o)?(n.push({command:h.removeLayer,args:[o]}),_.splice(_.lastIndexOf(o,_.length-i),1)):i++,p=_[_.length-r],n.push({command:h.addLayer,args:[v[o],p]}),_.splice(_.length-r,0,o),b[o]=!0);for(r=0;r<g.length;r++)if(o=g[r],a=y[o],s=v[o],!b[o]&&!f(a,s))if(f(a.source,s.source)&&f(a["source-layer"],s["source-layer"])&&f(a.type,s.type)){u(a.layout,s.layout,n,o,null,h.setLayoutProperty),u(a.paint,s.paint,n,o,null,h.setPaintProperty),f(a.filter,s.filter)||n.push({command:h.setFilter,args:[o,s.filter]}),f(a.minzoom,s.minzoom)&&f(a.maxzoom,s.maxzoom)||n.push({command:h.setLayerZoomRange,args:[o,s.minzoom,s.maxzoom]});for(d in a)a.hasOwnProperty(d)&&"layout"!==d&&"paint"!==d&&"filter"!==d&&"metadata"!==d&&"minzoom"!==d&&"maxzoom"!==d&&(0===d.indexOf("paint.")?u(a[d],s[d],n,o,d.slice(6),h.setPaintProperty):f(a[d],s[d])||n.push({command:h.setLayerProperty,args:[o,d,s[d]]}));for(d in s)s.hasOwnProperty(d)&&!a.hasOwnProperty(d)&&"layout"!==d&&"paint"!==d&&"filter"!==d&&"metadata"!==d&&"minzoom"!==d&&"maxzoom"!==d&&(0===d.indexOf("paint.")?u(a[d],s[d],n,o,d.slice(6),h.setPaintProperty):f(a[d],s[d])||n.push({command:h.setLayerProperty,args:[o,d,s[d]]}))}else n.push({command:h.removeLayer,args:[o]}),p=_[_.lastIndexOf(o)+1],n.push({command:h.addLayer,args:[s,p]})}function d(e,t){if(!e)return[{command:h.setStyle,args:[t]}];var n=[];try{if(!f(e.version,t.version))return[{command:h.setStyle,args:[t]}];f(e.center,t.center)||n.push({command:h.setCenter,args:[t.center]}),f(e.zoom,t.zoom)||n.push({command:h.setZoom,args:[t.zoom]}),f(e.bearing,t.bearing)||n.push({command:h.setBearing,args:[t.bearing]}),f(e.pitch,t.pitch)||n.push({command:h.setPitch,args:[t.pitch]}),f(e.sprite,t.sprite)||n.push({command:h.setSprite,args:[t.sprite]}),f(e.glyphs,t.glyphs)||n.push({command:h.setGlyphs,args:[t.glyphs]}),f(e.transition,t.transition)||n.push({command:h.setTransition,args:[t.transition]}),f(e.light,t.light)||n.push({command:h.setLight,args:[t.light]});var r={},i=[];s(e.sources,t.sources,i,r);var o=[];e.layers&&e.layers.forEach(function(e){r[e.source]?n.push({command:h.removeLayer,args:[e.id]}):o.push(e)}),n=n.concat(i),p(o,t.layers,n)}catch(e){console.warn("Unable to compute style diff:",e),n=[{command:h.setStyle,args:[t]}]}return n}var f=e("./util/deep_equal"),h={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};t.exports=d,t.exports.operations=h},{"./util/deep_equal":156}],121:[function(e,t,n){"use strict";function r(e,t,n){this.message=(e?e+": ":"")+n,null!==t&&void 0!==t&&t.__line__&&(this.line=t.__line__)}t.exports=r},{}],122:[function(e,t,n){"use strict";function r(e){return{type:e}}function i(e){return Array.isArray(e)?"("+e.map(a).join(", ")+")":"("+a(e.type)+"...)"}var o=e("./types"),a=o.toString,s=e("./parsing_context"),u=(e("./evaluation_context"),function(e,t,n,r){this.name=e,this.type=t,this._evaluate=n,this.args=r});u.prototype.evaluate=function(e){return this._evaluate(e,this.args)},u.prototype.eachChild=function(e){this.args.forEach(e)},u.prototype.possibleOutputs=function(){return[void 0]},u.parse=function(e,t){var n=e[0],r=u.definitions[n];if(!r)return t.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0);for(var o=Array.isArray(r)?r[0]:r.type,l=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,c=l.filter(function(t){var n=t[0];return!Array.isArray(n)||n.length===e.length-1}),p=[],d=1;d<e.length;d++){var f=e[d],h=void 0;if(1===c.length){var m=c[0][0];h=Array.isArray(m)?m[d-1]:m.type}var g=t.parse(f,1+p.length,h);if(!g)return null;p.push(g)}for(var y=null,v=0,_=c;v<_.length;v+=1){var b=_[v],x=b[0],w=b[1];if(y=new s(t.registry,t.path,null,t.scope),Array.isArray(x)&&x.length!==p.length)y.error("Expected "+x.length+" arguments, but found "+p.length+" instead.");else{for(var S=0;S<p.length;S++){var k=Array.isArray(x)?x[S]:x.type,E=p[S];y.concat(S+1).checkSubtype(k,E.type)}if(0===y.errors.length)return new u(n,o,w,p)}}if(1===c.length)t.errors.push.apply(t.errors,y.errors);else{var T=c.length?c:l,M=T.map(function(e){return i(e[0])}).join(" | "),C=p.map(function(e){return a(e.type)}).join(", ");t.error("Expected arguments of type "+M+", but found ("+C+") instead.")}return null},u.register=function(e,t){u.definitions=t;for(var n in t)e[n]=u},t.exports={CompoundExpression:u,varargs:r}},{"./evaluation_context":137,"./parsing_context":140,"./types":145}],123:[function(e,t,n){"use strict";var r=e("../types"),i=r.toString,o=r.array,a=r.ValueType,s=r.StringType,u=r.NumberType,l=r.BooleanType,c=r.checkSubtype,p=e("../values"),d=p.typeOf,f=e("../runtime_error"),h={string:s,number:u,boolean:l},m=function(e,t){this.type=e,this.input=t};m.parse=function(e,t){if(e.length<2||e.length>4)return t.error("Expected 1, 2, or 3 arguments, but found "+(e.length-1)+" instead.");var n,r;if(e.length>2){var i=e[1];if("string"!=typeof i||!(i in h))return t.error('The item type argument of "array" must be one of string, number, boolean',1);n=h[i]}else n=a;if(e.length>3){if("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2]))return t.error('The length argument to "array" must be a positive integer literal',2);r=e[2]}var s=o(n,r),u=t.parse(e[e.length-1],e.length-1,a);return u?new m(s,u):null},m.prototype.evaluate=function(e){var t=this.input.evaluate(e);if(c(this.type,d(t)))throw new f("Expected value to be of type "+i(this.type)+", but found "+i(d(t))+" instead.");return t},m.prototype.eachChild=function(e){e(this.input)},m.prototype.possibleOutputs=function(){return this.input.possibleOutputs()},t.exports=m},{"../runtime_error":142,"../types":145,"../values":146}],124:[function(e,t,n){"use strict";var r=e("../types"),i=r.ObjectType,o=r.ValueType,a=r.StringType,s=r.NumberType,u=r.BooleanType,l=e("../runtime_error"),c=e("../types"),p=c.checkSubtype,d=c.toString,f=e("../values"),h=f.typeOf,m={string:a,number:s,boolean:u,object:i},g=function(e,t){this.type=e,this.args=t};g.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");for(var n=e[0],r=m[n],i=[],a=1;a<e.length;a++){var s=t.parse(e[a],a,o);if(!s)return null;i.push(s)}return new g(r,i)},g.prototype.evaluate=function(e){for(var t=this,n=0;n<this.args.length;n++){var r=t.args[n].evaluate(e);if(!p(t.type,h(r)))return r;if(n===t.args.length-1)throw new l("Expected value to be of type "+d(t.type)+", but found "+d(h(r))+" instead.")}return null},g.prototype.eachChild=function(e){this.args.forEach(e)},g.prototype.possibleOutputs=function(){return(e=[]).concat.apply(e,this.args.map(function(e){return e.possibleOutputs()}));var e},t.exports=g},{"../runtime_error":142,"../types":145,"../values":146}],125:[function(e,t,n){"use strict";var r=e("../types"),i=r.array,o=r.ValueType,a=r.NumberType,s=e("../runtime_error"),u=function(e,t,n){this.type=e,this.index=t,this.input=n};u.parse=function(e,t){if(3!==e.length)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1,a),r=t.parse(e[2],2,i(t.expectedType||o));if(!n||!r)return null;var s=r.type;return new u(s.itemType,n,r)},u.prototype.evaluate=function(e){var t=this.index.evaluate(e),n=this.input.evaluate(e);if(t<0||t>=n.length)throw new s("Array index out of bounds: "+t+" > "+n.length+".");if(t!==Math.floor(t))throw new s("Array index must be an integer, but found "+t+" instead.");return n[t]},u.prototype.eachChild=function(e){e(this.index),e(this.input)},u.prototype.possibleOutputs=function(){return[void 0]},t.exports=u},{"../runtime_error":142,"../types":145}],126:[function(e,t,n){"use strict";var r=e("../types"),i=r.BooleanType,o=function(e,t,n){this.type=e,this.branches=t,this.otherwise=n};o.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return t.error("Expected an odd number of arguments.");var n;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);for(var r=[],a=1;a<e.length-1;a+=2){var s=t.parse(e[a],a,i);if(!s)return null;var u=t.parse(e[a+1],a+1,n);if(!u)return null;r.push([s,u]),n=n||u.type}var l=t.parse(e[e.length-1],e.length-1,n);return l?new o(n,r,l):null},o.prototype.evaluate=function(e){for(var t=this,n=0,r=t.branches;n<r.length;n+=1){var i=r[n],o=i[0],a=i[1];if(o.evaluate(e))return a.evaluate(e)}return this.otherwise.evaluate(e)},o.prototype.eachChild=function(e){for(var t=this,n=0,r=t.branches;n<r.length;n+=1){var i=r[n],o=i[0],a=i[1];e(o),e(a)}e(this.otherwise)},o.prototype.possibleOutputs=function(){return(e=[]).concat.apply(e,this.branches.map(function(e){return e[0],e[1].possibleOutputs()})).concat(this.otherwise.possibleOutputs());var e},t.exports=o},{"../types":145}],127:[function(e,t,n){"use strict";var r=e("../types"),i=r.checkSubtype,o=r.ValueType,a=function(e,t){this.type=e,this.args=t};a.parse=function(e,t){if(e.length<2)return t.error("Expectected at least one argument.");var n=null,r=t.expectedType;r&&"value"!==r.kind&&(n=r);for(var s=[],u=0,l=e.slice(1);u<l.length;u+=1){var c=l[u],p=t.parse(c,1+s.length,n,void 0,{omitTypeAnnotations:!0});if(!p)return null;n=n||p.type,s.push(p)}return r&&s.some(function(e){return i(r,e.type)})?new a(o,s):new a(n,s)},a.prototype.evaluate=function(e){for(var t=this,n=null,r=0,i=t.args;r<i.length&&null===(n=i[r].evaluate(e));r+=1);return n},a.prototype.eachChild=function(e){this.args.forEach(e)},a.prototype.possibleOutputs=function(){return(e=[]).concat.apply(e,this.args.map(function(e){return e.possibleOutputs()}));var e},t.exports=a},{"../types":145}],128:[function(e,t,n){"use strict";var r=e("../types"),i=r.ColorType,o=r.ValueType,a=r.NumberType,s=e("../values"),u=s.Color,l=s.validateRGBA,c=e("../runtime_error"),p={"to-number":a,"to-color":i},d=function(e,t){this.type=e,this.args=t};d.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");for(var n=e[0],r=p[n],i=[],a=1;a<e.length;a++){var s=t.parse(e[a],a,o);if(!s)return null;i.push(s)}return new d(r,i)},d.prototype.evaluate=function(e){var t=this;if("color"===this.type.kind){for(var n,r,i=0,o=t.args;i<o.length;i+=1)if(n=o[i].evaluate(e),r=null,"string"==typeof n){var a=e.parseColor(n);if(a)return a}else if(Array.isArray(n)&&!(r=n.length<3||n.length>4?"Invalid rbga value "+JSON.stringify(n)+": expected an array containing either three or four numeric values.":l(n[0],n[1],n[2],n[3])))return new u(n[0]/255,n[1]/255,n[2]/255,n[3]);throw new c(r||"Could not parse color from value '"+("string"==typeof n?n:JSON.stringify(n))+"'")}for(var s=null,p=0,d=t.args;p<d.length;p+=1)if(null!==(s=d[p].evaluate(e))){var f=Number(s);if(!isNaN(f))return f}throw new c("Could not convert "+JSON.stringify(s)+" to number.")},d.prototype.eachChild=function(e){this.args.forEach(e)},d.prototype.possibleOutputs=function(){return(e=[]).concat.apply(e,this.args.map(function(e){return e.possibleOutputs()}));var e},t.exports=d},{"../runtime_error":142,"../types":145,"../values":146}],129:[function(e,t,n){"use strict";function r(e){return"string"===e.kind||"number"===e.kind||"boolean"===e.kind||"null"===e.kind}function i(e){return function(){function t(e,t){this.type=s,this.lhs=e,this.rhs=t}return t.parse=function(e,n){if(3!==e.length)return n.error("Expected two arguments.");var i=n.parse(e[1],1,a);if(!i)return null;var o=n.parse(e[2],2,a);return o?r(i.type)||r(o.type)?i.type.kind!==o.type.kind&&"value"!==i.type.kind&&"value"!==o.type.kind?n.error("Cannot compare "+l(i.type)+" and "+l(o.type)+"."):new t(i,o):n.error("Expected at least one argument to be a string, number, boolean, or null, but found ("+l(i.type)+", "+l(o.type)+") instead."):null},t.prototype.evaluate=function(t){return e(this.lhs.evaluate(t),this.rhs.evaluate(t))},t.prototype.eachChild=function(e){e(this.lhs),e(this.rhs)},t.prototype.possibleOutputs=function(){return[!0,!1]},t}()}var o=e("../types"),a=o.ValueType,s=o.BooleanType,u=e("../types"),l=u.toString;t.exports={Equals:i(function(e,t){return e===t}),NotEquals:i(function(e,t){return e!==t})}},{"../types":145}],130:[function(e,t,n){"use strict";function r(e,t){var n=t[0],r=t[1],i=t[2],o=t[3];n=n.evaluate(e),r=r.evaluate(e),i=i.evaluate(e);var a=o?o.evaluate(e):1,s=E(n,r,i,a);if(s)throw new O(s);return new k(n/255*a,r/255*a,i/255*a,a)}function i(e,t){return e in t}function o(e,t){var n=t[e];return void 0===n?null:n}function a(e,t){return t[0].evaluate(e).length}function s(e,t){var n=t[0],r=t[1];return n.evaluate(e)<r.evaluate(e)}function u(e,t){var n=t[0],r=t[1];return n.evaluate(e)>r.evaluate(e)}function l(e,t){var n=t[0],r=t[1];return n.evaluate(e)<=r.evaluate(e)}function c(e,t){var n=t[0],r=t[1];return n.evaluate(e)>=r.evaluate(e)}function p(e,t,n,r){for(;n<=r;){var i=n+r>>1;if(t[i]===e)return!0;t[i]>e?r=i-1:n=i+1}return!1}var d=e("../types"),f=d.NumberType,h=d.StringType,m=d.BooleanType,g=d.ColorType,y=d.ObjectType,v=d.ValueType,_=d.ErrorType,b=d.array,x=d.toString,w=e("../values"),S=w.typeOf,k=w.Color,E=w.validateRGBA,T=e("../compound_expression"),M=T.CompoundExpression,C=T.varargs,O=e("../runtime_error"),A=e("./let"),P=e("./var"),R=e("./literal"),D=e("./assertion"),I=e("./array"),N=e("./coercion"),L=e("./at"),z=e("./match"),j=e("./case"),H=e("./step"),B=e("./interpolate"),F=e("./coalesce"),U=e("./equals"),V=U.Equals,Y=U.NotEquals,W={"==":V,"!=":Y,array:I,at:L,boolean:D,case:j,coalesce:F,interpolate:B,let:A,literal:R,match:z,number:D,object:D,step:H,string:D,"to-color":N,"to-number":N,var:P};M.register(W,{error:[_,[h],function(e,t){var n=t[0];throw new O(n.evaluate(e))}],typeof:[h,[v],function(e,t){var n=t[0];return x(S(n.evaluate(e)))}],"to-string":[h,[v],function(e,t){var n=t[0];n=n.evaluate(e);var r=typeof n;return null===n||"string"===r||"number"===r||"boolean"===r?String(n):n instanceof k?n.toString():JSON.stringify(n)}],"to-boolean":[m,[v],function(e,t){var n=t[0];return Boolean(n.evaluate(e))}],"to-rgba":[b(f,4),[g],function(e,t){var n=t[0],r=n.evaluate(e),i=r.r,o=r.g,a=r.b,s=r.a;return[255*i/s,255*o/s,255*a/s,s]}],rgb:[g,[f,f,f],r],rgba:[g,[f,f,f,f],r],length:{type:f,overloads:[[[h],a],[[b(v)],a]]},has:{type:m,overloads:[[[h],function(e,t){return i(t[0].evaluate(e),e.properties())}],[[h,y],function(e,t){var n=t[0],r=t[1];return i(n.evaluate(e),r.evaluate(e))}]]},get:{type:v,overloads:[[[h],function(e,t){return o(t[0].evaluate(e),e.properties())}],[[h,y],function(e,t){var n=t[0],r=t[1];return o(n.evaluate(e),r.evaluate(e))}]]},properties:[y,[],function(e){return e.properties()}],"geometry-type":[h,[],function(e){return e.geometryType()}],id:[v,[],function(e){return e.id()}],zoom:[f,[],function(e){return e.globals.zoom}],"heatmap-density":[f,[],function(e){return e.globals.heatmapDensity||0}],"+":[f,C(f),function(e,t){for(var n=0,r=0,i=t;r<i.length;r+=1)n+=i[r].evaluate(e);return n}],"*":[f,C(f),function(e,t){for(var n=1,r=0,i=t;r<i.length;r+=1)n*=i[r].evaluate(e);return n}],"-":{type:f,overloads:[[[f,f],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)-r.evaluate(e)}],[[f],function(e,t){return-t[0].evaluate(e)}]]},"/":[f,[f,f],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)/r.evaluate(e)}],"%":[f,[f,f],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)%r.evaluate(e)}],ln2:[f,[],function(){return Math.LN2}],pi:[f,[],function(){return Math.PI}],e:[f,[],function(){return Math.E}],"^":[f,[f,f],function(e,t){var n=t[0],r=t[1];return Math.pow(n.evaluate(e),r.evaluate(e))}],sqrt:[f,[f],function(e,t){var n=t[0];return Math.sqrt(n.evaluate(e))}],log10:[f,[f],function(e,t){var n=t[0];return Math.log10(n.evaluate(e))}],ln:[f,[f],function(e,t){var n=t[0];return Math.log(n.evaluate(e))}],log2:[f,[f],function(e,t){var n=t[0];return Math.log2(n.evaluate(e))}],sin:[f,[f],function(e,t){var n=t[0];return Math.sin(n.evaluate(e))}],cos:[f,[f],function(e,t){var n=t[0];return Math.cos(n.evaluate(e))}],tan:[f,[f],function(e,t){var n=t[0];return Math.tan(n.evaluate(e))}],asin:[f,[f],function(e,t){var n=t[0];return Math.asin(n.evaluate(e))}],acos:[f,[f],function(e,t){var n=t[0];return Math.acos(n.evaluate(e))}],atan:[f,[f],function(e,t){var n=t[0];return Math.atan(n.evaluate(e))}],min:[f,C(f),function(e,t){return Math.min.apply(Math,t.map(function(t){return t.evaluate(e)}))}],max:[f,C(f),function(e,t){return Math.max.apply(Math,t.map(function(t){return t.evaluate(e)}))}],"filter-==":[m,[h,v],function(e,t){var n=t[0],r=t[1];return e.properties()[n.value]===r.value}],"filter-id-==":[m,[v],function(e,t){var n=t[0];return e.id()===n.value}],"filter-type-==":[m,[h],function(e,t){var n=t[0];return e.geometryType()===n.value}],"filter-<":[m,[h,v],function(e,t){var n=t[0],r=t[1],i=e.properties()[n.value],o=r.value;return typeof i==typeof o&&i<o}],"filter-id-<":[m,[v],function(e,t){var n=t[0],r=e.id(),i=n.value;return typeof r==typeof i&&r<i}],"filter->":[m,[h,v],function(e,t){var n=t[0],r=t[1],i=e.properties()[n.value],o=r.value;return typeof i==typeof o&&i>o}],"filter-id->":[m,[v],function(e,t){var n=t[0],r=e.id(),i=n.value;return typeof r==typeof i&&r>i}],"filter-<=":[m,[h,v],function(e,t){var n=t[0],r=t[1],i=e.properties()[n.value],o=r.value;return typeof i==typeof o&&i<=o}],"filter-id-<=":[m,[v],function(e,t){var n=t[0],r=e.id(),i=n.value;return typeof r==typeof i&&r<=i}],"filter->=":[m,[h,v],function(e,t){var n=t[0],r=t[1],i=e.properties()[n.value],o=r.value;return typeof i==typeof o&&i>=o}],"filter-id->=":[m,[v],function(e,t){var n=t[0],r=e.id(),i=n.value;return typeof r==typeof i&&r>=i}],"filter-has":[m,[v],function(e,t){return t[0].value in e.properties()}],"filter-has-id":[m,[],function(e){return null!==e.id()}],"filter-type-in":[m,[b(h)],function(e,t){return t[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[m,[b(v)],function(e,t){return t[0].value.indexOf(e.id())>=0}],"filter-in-small":[m,[h,b(v)],function(e,t){var n=t[0];return t[1].value.indexOf(e.properties()[n.value])>=0}],"filter-in-large":[m,[h,b(v)],function(e,t){var n=t[0],r=t[1];return p(e.properties()[n.value],r.value,0,r.value.length-1)}],">":{type:m,overloads:[[[f,f],u],[[h,h],u]]},"<":{type:m,overloads:[[[f,f],s],[[h,h],s]]},">=":{type:m,overloads:[[[f,f],c],[[h,h],c]]},"<=":{type:m,overloads:[[[f,f],l],[[h,h],l]]},all:{type:m,overloads:[[[m,m],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)&&r.evaluate(e)}],[C(m),function(e,t){for(var n=0,r=t;n<r.length;n+=1)if(!r[n].evaluate(e))return!1;return!0}]]},any:{type:m,overloads:[[[m,m],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)||r.evaluate(e)}],[C(m),function(e,t){for(var n=0,r=t;n<r.length;n+=1)if(r[n].evaluate(e))return!0;return!1}]]},"!":[m,[m],function(e,t){return!t[0].evaluate(e)}],upcase:[h,[h],function(e,t){return t[0].evaluate(e).toUpperCase()}],downcase:[h,[h],function(e,t){return t[0].evaluate(e).toLowerCase()}],concat:[h,C(h),function(e,t){return t.map(function(t){return t.evaluate(e)}).join("")}]}),t.exports=W},{"../compound_expression":122,"../runtime_error":142,"../types":145,"../values":146,"./array":123,"./assertion":124,"./at":125,"./case":126,"./coalesce":127,"./coercion":128,"./equals":129,"./interpolate":131,"./let":132,"./literal":133,"./match":134,"./step":135,"./var":136}],131:[function(e,t,n){"use strict";function r(e,t,n,r){var i=r-n,o=e-n;return 0===i?0:1===t?o/i:(Math.pow(t,o)-1)/(Math.pow(t,i)-1)}var i=e("@mapbox/unitbezier"),o=e("../../util/interpolate"),a=e("../types"),s=a.toString,u=a.NumberType,l=e("../stops"),c=l.findStopLessThanOrEqualTo,p=function(e,t,n,r){var i=this;this.type=e,this.interpolation=t,this.input=n,this.labels=[],this.outputs=[];for(var o=0,a=r;o<a.length;o+=1){var s=a[o],u=s[0],l=s[1];i.labels.push(u),i.outputs.push(l)}};p.interpolationFactor=function(e,t,n,o){var a=0;if("exponential"===e.name)a=r(t,e.base,n,o);else if("linear"===e.name)a=r(t,1,n,o);else if("cubic-bezier"===e.name){var s=e.controlPoints,u=new i(s[0],s[1],s[2],s[3]);a=u.solve(r(t,1,n,o))}return a},p.parse=function(e,t){var n=e[1],r=e[2],i=e.slice(3);if(!Array.isArray(n)||0===n.length)return t.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){var o=n[1];if("number"!=typeof o)return t.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:o}}else{if("cubic-bezier"!==n[0])return t.error("Unknown interpolation type "+String(n[0]),1,0);var a=n.slice(1);if(4!==a.length||a.some(function(e){return"number"!=typeof e||e<0||e>1}))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:a}}if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(r=t.parse(r,2,u)))return null;var l=[],c=null;t.expectedType&&"value"!==t.expectedType.kind&&(c=t.expectedType);for(var d=0;d<i.length;d+=2){var f=i[d],h=i[d+1],m=d+3,g=d+4;if("number"!=typeof f)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',m);if(l.length&&l[l.length-1][0]>=f)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',m);var y=t.parse(h,g,c);if(!y)return null;c=c||y.type,l.push([f,y])}return"number"===c.kind||"color"===c.kind||"array"===c.kind&&"number"===c.itemType.kind&&"number"==typeof c.N?new p(c,n,r,l):t.error("Type "+s(c)+" is not interpolatable.")},p.prototype.evaluate=function(e){var t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);var r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);var i=t.length;if(r>=t[i-1])return n[i-1].evaluate(e);var a=c(t,r),s=t[a],u=t[a+1],l=p.interpolationFactor(this.interpolation,r,s,u),d=n[a].evaluate(e),f=n[a+1].evaluate(e);return o[this.type.kind.toLowerCase()](d,f,l)},p.prototype.eachChild=function(e){var t=this;e(this.input);for(var n=0,r=t.outputs;n<r.length;n+=1)e(r[n])},p.prototype.possibleOutputs=function(){return(e=[]).concat.apply(e,this.outputs.map(function(e){return e.possibleOutputs()}));var e},t.exports=p},{"../../util/interpolate":159,"../stops":144,"../types":145,"@mapbox/unitbezier":150}],132:[function(e,t,n){"use strict";var r=function(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t};r.prototype.evaluate=function(e){e.pushScope(this.bindings);var t=this.result.evaluate(e);return e.popScope(),t},r.prototype.eachChild=function(e){for(var t=this,n=0,r=t.bindings;n<r.length;n+=1)e(r[n][1]);e(this.result)},r.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var n=[],i=1;i<e.length-1;i+=2){var o=e[i];if("string"!=typeof o)return t.error("Expected string, but found "+typeof o+" instead.",i);if(/[^a-zA-Z0-9_]/.test(o))return t.error("Variable names must contain only alphanumeric characters or '_'.",i);var a=t.parse(e[i+1],i+1);if(!a)return null;n.push([o,a])}var s=t.parse(e[e.length-1],e.length-1,void 0,n);return s?new r(n,s):null},r.prototype.possibleOutputs=function(){return this.result.possibleOutputs()},t.exports=r},{}],133:[function(e,t,n){"use strict";var r=e("../values"),i=r.isValue,o=r.typeOf,a=function(e,t){this.type=e,this.value=t};a.parse=function(e,t){if(2!==e.length)return t.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!i(e[1]))return t.error("invalid value");var n=e[1],r=o(n),s=t.expectedType;return"array"!==r.kind||0!==r.N||!s||"array"!==s.kind||"number"==typeof s.N&&0!==s.N||(r=s),new a(r,n)},a.prototype.evaluate=function(){return this.value},a.prototype.eachChild=function(){},a.prototype.possibleOutputs=function(){return[this.value]},t.exports=a},{"../values":146}],134:[function(e,t,n){"use strict";var r=e("../values"),i=r.typeOf,o=function(e,t,n,r,i,o){this.inputType=e,this.type=t,this.input=n,this.cases=r,this.outputs=i,this.otherwise=o};o.parse=function(e,t){if(e.length<5)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return t.error("Expected an even number of arguments.");var n,r;t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);for(var a={},s=[],u=2;u<e.length-1;u+=2){var l=e[u],c=e[u+1];Array.isArray(l)||(l=[l]);var p=t.concat(u);if(0===l.length)return p.error("Expected at least one branch label.");for(var d=0,f=l;d<f.length;d+=1){var h=f[d];if("number"!=typeof h&&"string"!=typeof h)return p.error("Branch labels must be numbers or strings.");if("number"==typeof h&&Math.abs(h)>Number.MAX_SAFE_INTEGER)return p.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof h&&Math.floor(h)!==h)return p.error("Numeric branch labels must be integer values.");if(n){if(p.checkSubtype(n,i(h)))return null}else n=i(h);if(void 0!==a[String(h)])return p.error("Branch labels must be unique.");a[String(h)]=s.length}var m=t.parse(c,u,r);if(!m)return null;r=r||m.type,s.push(m)}var g=t.parse(e[1],1,n);if(!g)return null;var y=t.parse(e[e.length-1],e.length-1,r);return y?new o(n,r,g,a,s,y):null},o.prototype.evaluate=function(e){var t=this.input.evaluate(e);return(this.outputs[this.cases[t]]||this.otherwise).evaluate(e)},o.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},o.prototype.possibleOutputs=function(){return(e=[]).concat.apply(e,this.outputs.map(function(e){return e.possibleOutputs()})).concat(this.otherwise.possibleOutputs());var e},t.exports=o},{"../values":146}],135:[function(e,t,n){"use strict";var r=e("../types"),i=r.NumberType,o=e("../stops"),a=o.findStopLessThanOrEqualTo,s=function(e,t,n){var r=this;this.type=e,this.input=t,this.labels=[],this.outputs=[];for(var i=0,o=n;i<o.length;i+=1){var a=o[i],s=a[0],u=a[1];r.labels.push(s),r.outputs.push(u)}};s.parse=function(e,t){var n=e[1],r=e.slice(2);if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(n=t.parse(n,1,i)))return null;var o=[],a=null;t.expectedType&&"value"!==t.expectedType.kind&&(a=t.expectedType),r.unshift(-1/0);for(var u=0;u<r.length;u+=2){var l=r[u],c=r[u+1],p=u+1,d=u+2;if("number"!=typeof l)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',p);if(o.length&&o[o.length-1][0]>=l)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',p);var f=t.parse(c,d,a);if(!f)return null;a=a||f.type,o.push([l,f])}return new s(a,n,o)},s.prototype.evaluate=function(e){var t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);var r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);var i=t.length;return r>=t[i-1]?n[i-1].evaluate(e):n[a(t,r)].evaluate(e)},s.prototype.eachChild=function(e){var t=this;e(this.input);for(var n=0,r=t.outputs;n<r.length;n+=1)e(r[n])},s.prototype.possibleOutputs=function(){return(e=[]).concat.apply(e,this.outputs.map(function(e){return e.possibleOutputs()}));var e},t.exports=s},{"../stops":144,"../types":145}],136:[function(e,t,n){"use strict";var r=function(e,t){this.type=t,this.name=e};r.parse=function(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");var n=e[1];return t.scope.has(n)?new r(n,t.scope.get(n).type):t.error('Unknown variable "'+n+'". Make sure "'+n+'" has been bound in an enclosing "let" expression before using it.',1)},r.prototype.evaluate=function(e){return e.scope.get(this.name).evaluate(e)},r.prototype.eachChild=function(){},r.prototype.possibleOutputs=function(){return[void 0]},t.exports=r},{}],137:[function(e,t,n){"use strict";var r=e("./scope"),i=e("./values"),o=i.Color,a=["Unknown","Point","LineString","Polygon"],s=function(){this.scope=new r,this._parseColorCache={}};s.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},s.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?a[this.feature.type]:this.feature.type:null},s.prototype.properties=function(){return this.feature&&this.feature.properties||{}},s.prototype.pushScope=function(e){this.scope=this.scope.concat(e)},s.prototype.popScope=function(){this.scope=this.scope.parent},s.prototype.parseColor=function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=o.parse(e)),t},t.exports=s},{"./scope":143,"./values":146}],138:[function(e,t,n){"use strict";function r(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in b}function i(e,t,n){void 0===n&&(n={});var r=new d(b,[],u(t)),i=r.parse(e);return i?k(!1===n.handleErrors?new T(i):new M(i,t)):E(r.errors)}function o(e,t,n){if(void 0===n&&(n={}),e=i(e,t,n),"error"===e.result)return e;var r=e.value.expression,o=x.isFeatureConstant(r);if(!o&&!t["property-function"])return E([new p("","property expressions not supported")]);var a=x.isGlobalPropertyConstant(r,["zoom"]);if(!a&&!1===t["zoom-function"])return E([new p("","zoom expressions not supported")]);var u=s(r);return u||a?u instanceof p?E([u]):u instanceof y&&"piecewise-constant"===t.function?E([new p("",'"interpolate" expressions cannot be used with this property')]):k(u?o?new O("camera",e.value,u):new O("composite",e.value,u):o?new C("constant",e.value):new C("source",e.value)):E([new p("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}function a(e,t){if(P(e))return new N(e,t);if(r(e)){var n=o(e,t);if("error"===n.result)throw new Error(n.value.map(function(e){return e.key+": "+e.message}).join(", "));return n.value}var i=e;return"string"==typeof e&&"color"===t.type&&(i=I.parse(e)),{kind:"constant",evaluate:function(){return i}}}function s(e){var t=null;if(e instanceof _)t=s(e.result);else if(e instanceof v)for(var n=0,r=e.args;n<r.length;n+=1){var i=r[n];if(t=s(i))break}else(e instanceof g||e instanceof y)&&e.input instanceof m&&"zoom"===e.input.name&&(t=e);return t instanceof p?t:(e.eachChild(function(e){var n=s(e);n instanceof p?t=n:!t&&n?t=new p("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&n&&t!==n&&(t=new p("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t)}function u(e){var t={color:z,string:j,number:H,enum:j,boolean:B};return"array"===e.type?U(t[e.value]||F,e.length):t[e.type]||null}function l(e){return"color"===e.type&&P(e.default)?new I(0,0,0,0):"color"===e.type?I.parse(e.default)||null:void 0===e.default?null:e.default}var c=e("../util/extend"),p=e("./parsing_error"),d=e("./parsing_context"),f=e("./evaluation_context"),h=e("./compound_expression"),m=h.CompoundExpression,g=e("./definitions/step"),y=e("./definitions/interpolate"),v=e("./definitions/coalesce"),_=e("./definitions/let"),b=e("./definitions"),x=e("./is_constant"),w=e("./runtime_error"),S=e("../util/result"),k=S.success,E=S.error,T=function(e){this.expression=e};T.prototype.evaluate=function(e,t){return this._evaluator||(this._evaluator=new f),this._evaluator.globals=e,this._evaluator.feature=t,this.expression.evaluate(this._evaluator)};var M=function(e){function t(t,n){e.call(this,t),this._warningHistory={},this._defaultValue=l(n),"enum"===n.type&&(this._enumValues=n.values)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.evaluate=function(e,t){this._evaluator||(this._evaluator=new f),this._evaluator.globals=e,this._evaluator.feature=t;try{var n=this.expression.evaluate(this._evaluator);if(null===n||void 0===n)return this._defaultValue;if(this._enumValues&&!(n in this._enumValues))throw new w("Expected value to be one of "+Object.keys(this._enumValues).map(function(e){return JSON.stringify(e)}).join(", ")+", but found "+JSON.stringify(n)+" instead.");return n}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}},t}(T),C=function(e,t){this.kind=e,this._styleExpression=t};C.prototype.evaluate=function(e,t){return this._styleExpression.evaluate(e,t)};var O=function(e,t,n){this.kind=e,this.zoomStops=n.labels,this._styleExpression=t,n instanceof y&&(this._interpolationType=n.interpolation)};O.prototype.evaluate=function(e,t){return this._styleExpression.evaluate(e,t)},O.prototype.interpolationFactor=function(e,t,n){return this._interpolationType?y.interpolationFactor(this._interpolationType,e,t,n):0};var A=e("../function"),P=A.isFunction,R=A.createFunction,D=e("./values"),I=D.Color,N=function(e,t){this._parameters=e,this._specification=t,c(this,R(this._parameters,this._specification))};N.deserialize=function(e){return new N(e._parameters,e._specification)},N.serialize=function(e){return{_parameters:e._parameters,_specification:e._specification}},t.exports={StyleExpression:T,StyleExpressionWithErrorHandling:M,isExpression:r,createExpression:i,createPropertyExpression:o,normalizePropertyExpression:a,ZoomConstantExpression:C,ZoomDependentExpression:O,StylePropertyFunction:N};var L=e("./types"),z=L.ColorType,j=L.StringType,H=L.NumberType,B=L.BooleanType,F=L.ValueType,U=L.array},{"../function":148,"../util/extend":157,"../util/result":161,"./compound_expression":122,"./definitions":130,"./definitions/coalesce":127,"./definitions/interpolate":131,"./definitions/let":132,"./definitions/step":135,"./evaluation_context":137,"./is_constant":139,"./parsing_context":140,"./parsing_error":141,"./runtime_error":142,"./types":145,"./values":146}],139:[function(e,t,n){"use strict";function r(e){if(e instanceof a){if("get"===e.name&&1===e.args.length)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}var t=!0;return e.eachChild(function(e){t&&!r(e)&&(t=!1)}),t}function i(e,t){if(e instanceof a&&t.indexOf(e.name)>=0)return!1;var n=!0;return e.eachChild(function(e){n&&!i(e,t)&&(n=!1)}),n}var o=e("./compound_expression"),a=o.CompoundExpression;t.exports={isFeatureConstant:r,isGlobalPropertyConstant:i}},{"./compound_expression":122}],140:[function(e,t,n){"use strict";function r(t){var n=e("./compound_expression"),r=n.CompoundExpression,i=e("./is_constant"),o=i.isGlobalPropertyConstant,a=i.isFeatureConstant;if(t instanceof e("./definitions/var"))return!1;if(t instanceof r&&"error"===t.name)return!1;var s=!0;return t.eachChild(function(e){e instanceof u||(s=!1)}),!!s&&a(t)&&o(t,["zoom","heatmap-density"])}var i=e("./scope"),o=e("./types"),a=o.checkSubtype,s=e("./parsing_error"),u=e("./definitions/literal"),l=e("./definitions/assertion"),c=e("./definitions/array"),p=e("./definitions/coercion"),d=function(e,t,n,r,o){void 0===t&&(t=[]),void 0===r&&(r=new i),void 0===o&&(o=[]),this.registry=e,this.path=t,this.key=t.map(function(e){return"["+e+"]"}).join(""),this.scope=r,this.errors=o,this.expectedType=n};d.prototype.parse=function(t,n,i,o,a){void 0===a&&(a={});var s=this;if(n&&(s=s.concat(n,i,o)),null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return s.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var d=t[0];if("string"!=typeof d)return s.error("Expression name must be a string, but found "+typeof d+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var f=s.registry[d];if(f){var h=f.parse(t,s);if(!h)return null;if(s.expectedType){var m=s.expectedType,g=h.type;if("string"!==m.kind&&"number"!==m.kind&&"boolean"!==m.kind||"value"!==g.kind)if("array"===m.kind&&"value"===g.kind)a.omitTypeAnnotations||(h=new c(m,h));else if("color"!==m.kind||"value"!==g.kind&&"string"!==g.kind){if(s.checkSubtype(s.expectedType,h.type))return null}else a.omitTypeAnnotations||(h=new p(m,[h]));else a.omitTypeAnnotations||(h=new l(m,[h]))}if(!(h instanceof u)&&r(h)){var y=new(e("./evaluation_context"));try{h=new u(h.type,h.evaluate(y))}catch(t){return s.error(t.message),null}}return h}return s.error('Unknown expression "'+d+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===t?s.error("'undefined' value invalid. Use null instead."):"object"==typeof t?s.error('Bare objects invalid. Use ["literal", {...}] instead.'):s.error("Expected an array, but found "+typeof t+" instead.")},d.prototype.concat=function(e,t,n){var r="number"==typeof e?this.path.concat(e):this.path,i=n?this.scope.concat(n):this.scope;return new d(this.registry,r,t||null,i,this.errors)},d.prototype.error=function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];var r=""+this.key+t.map(function(e){return"["+e+"]"}).join("");this.errors.push(new s(r,e))},d.prototype.checkSubtype=function(e,t){var n=a(e,t);return n&&this.error(n),n},t.exports=d},{"./compound_expression":122,"./definitions/array":123,"./definitions/assertion":124,"./definitions/coercion":128,"./definitions/literal":133,"./definitions/var":136,"./evaluation_context":137,"./is_constant":139,"./parsing_error":141,"./scope":143,"./types":145}],141:[function(e,t,n){"use strict";var r=function(e){function t(t,n){e.call(this,n),this.message=n,this.key=t}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error);t.exports=r},{}],142:[function(e,t,n){"use strict";var r=function(e){this.name="ExpressionEvaluationError",this.message=e};r.prototype.toJSON=function(){return this.message},t.exports=r},{}],143:[function(e,t,n){"use strict";var r=function(e,t){var n=this;void 0===t&&(t=[]),this.parent=e,this.bindings={};for(var r=0,i=t;r<i.length;r+=1){var o=i[r],a=o[0],s=o[1];n.bindings[a]=s}};r.prototype.concat=function(e){return new r(this,e)},r.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},r.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)},t.exports=r},{}],144:[function(e,t,n){"use strict";function r(e,t){for(var n,r,o=e.length,a=0,s=o-1,u=0;a<=s;){if(u=Math.floor((a+s)/2),n=e[u],r=e[u+1],t===n||t>n&&t<r)return u;if(n<t)a=u+1;else{if(!(n>t))throw new i("Input is not a number.");s=u-1}}return Math.max(u-1,0)}var i=e("./runtime_error");t.exports={findStopLessThanOrEqualTo:r}},{"./runtime_error":142}],145:[function(e,t,n){"use strict";function r(e,t){return{kind:"array",itemType:e,N:t}}function i(e){if("array"===e.kind){var t=i(e.itemType);return"number"==typeof e.N?"array<"+t+", "+e.N+">":"value"===e.itemType.kind?"array":"array<"+t+">"}return e.kind}function o(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&!o(e.itemType,t.itemType)&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(var n=0,r=h;n<r.length;n+=1){var a=r[n];if(!o(a,t))return null}}return"Expected "+i(e)+" but found "+i(t)+" instead."}var a={kind:"null"},s={kind:"number"},u={kind:"string"},l={kind:"boolean"},c={kind:"color"},p={kind:"object"},d={kind:"value"},f={kind:"error"},h=[a,s,u,l,c,p,r(d)];t.exports={NullType:a,NumberType:s,StringType:u,BooleanType:l,ColorType:c,ObjectType:p,ValueType:d,array:r,ErrorType:f,toString:i,checkSubtype:o}},{}],146:[function(e,t,n){"use strict";function r(e,t,n,r){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value ["+[e,t,n,r].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof r?[e,t,n,r]:[e,t,n]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function i(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof a)return!0;if(Array.isArray(e)){for(var t=0,n=e;t<n.length;t+=1)if(!i(n[t]))return!1;return!0}if("object"==typeof e){for(var r in e)if(!i(e[r]))return!1;return!0}return!1}function o(e){if(null===e)return u;if("string"==typeof e)return c;if("boolean"==typeof e)return p;if("number"==typeof e)return l;if(e instanceof a)return d;if(Array.isArray(e)){for(var t,n=e.length,r=0,i=e;r<i.length;r+=1){var s=i[r],g=o(s);if(t){if(t===g)continue;t=h;break}t=g}return m(t||h,n)}return f}var a=e("../util/color"),s=e("./types"),u=s.NullType,l=s.NumberType,c=s.StringType,p=s.BooleanType,d=s.ColorType,f=s.ObjectType,h=s.ValueType,m=s.array;t.exports={Color:a,validateRGBA:r,isValue:i,typeOf:o}},{"../util/color":154,"./types":145}],147:[function(e,t,n){"use strict";function r(e){if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3===e.length&&(Array.isArray(e[1])||Array.isArray(e[2]));case"any":case"all":for(var t=0,n=e.slice(1);t<n.length;t+=1){var i=n[t];if(!r(i)&&"boolean"!=typeof i)return!1}return!0;default:return!0}}function i(e){if(!e)return function(){return!0};r(e)||(e=a(e));var t=f(e,h);if("error"===t.result)throw new Error(t.value.map(function(e){return e.key+": "+e.message}).join(", "));return function(e,n){return t.value.evaluate(e,n)}}function o(e,t){return e<t?-1:e>t?1:0}function a(e){if(!e)return!0;var t=e[0];return e.length<=1?"any"!==t:"=="===t?s(e[1],e[2],"=="):"!="===t?p(s(e[1],e[2],"==")):"<"===t||">"===t||"<="===t||">="===t?s(e[1],e[2],t):"any"===t?u(e.slice(1)):"all"===t?["all"].concat(e.slice(1).map(a)):"none"===t?["all"].concat(e.slice(1).map(a).map(p)):"in"===t?l(e[1],e.slice(2)):"!in"===t?p(l(e[1],e.slice(2))):"has"===t?c(e[1]):"!has"!==t||p(c(e[1]))}function s(e,t,n){switch(e){case"$type":return["filter-type-"+n,t];case"$id":return["filter-id-"+n,t];default:return["filter-"+n,e,t]}}function u(e){return["any"].concat(e.map(a))}function l(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(function(e){return typeof e!=typeof t[0]})?["filter-in-large",e,["literal",t.sort(o)]]:["filter-in-small",e,["literal",t]]}}function c(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function p(e){return["!",e]}var d=e("../expression"),f=d.createExpression;t.exports=i,t.exports.isExpressionFilter=r;var h={type:"boolean",default:!1,function:!0,"property-function":!0,"zoom-function":!0}},{"../expression":138}],148:[function(e,t,n){"use strict";function r(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function i(e){return e}function o(e,t){var n="color"===t.type,r=e.stops&&"object"==typeof e.stops[0][0],i=r||void 0!==e.property,p=r||!i,d=e.type||("interpolated"===t.function?"exponential":"interval");if(n&&(e=m({},e),e.stops&&(e.stops=e.stops.map(function(e){return[e[0],h.parse(e[1])]})),e.default?e.default=h.parse(e.default):e.default=h.parse(t.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!f[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);var g,y,_;if("exponential"===d)g=l;else if("interval"===d)g=u;else if("categorical"===d){g=s,y=Object.create(null);for(var b=0,x=e.stops;b<x.length;b+=1){var w=x[b];y[w[0]]=w[1]}_=typeof e.stops[0][0]}else{if("identity"!==d)throw new Error('Unknown function type "'+d+'"');g=c}if(r){for(var S={},k=[],E=0;E<e.stops.length;E++){var T=e.stops[E],M=T[0].zoom;void 0===S[M]&&(S[M]={zoom:M,type:e.type,property:e.property,default:e.default,stops:[]},k.push(M)),S[M].stops.push([T[0].value,T[1]])}for(var C=[],O=0,A=k;O<A.length;O+=1){var P=A[O];C.push([S[P].zoom,o(S[P],t)])}return{kind:"composite",interpolationFactor:v.interpolationFactor.bind(void 0,{name:"linear"}),zoomStops:C.map(function(e){return e[0]}),evaluate:function(n,r){var i=n.zoom;return l({stops:C,base:e.base},t,i).evaluate(i,r)}}}return p?{kind:"camera",interpolationFactor:"exponential"===d?v.interpolationFactor.bind(void 0,{name:"exponential",base:void 0!==e.base?e.base:1}):function(){return 0},zoomStops:e.stops.map(function(e){return e[0]}),evaluate:function(n){var r=n.zoom;return g(e,t,r,y,_)}}:{kind:"source",evaluate:function(n,r){var i=r&&r.properties?r.properties[e.property]:void 0;return void 0===i?a(e.default,t.default):g(e,t,i,y,_)}}}function a(e,t,n){return void 0!==e?e:void 0!==t?t:void 0!==n?n:void 0}function s(e,t,n,r,i){return a(typeof n===i?r[n]:void 0,e.default,t.default)}function u(e,t,n){if("number"!==g(n))return a(e.default,t.default);var r=e.stops.length;if(1===r)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[r-1][0])return e.stops[r-1][1];var i=p(e.stops,n);return e.stops[i][1]}function l(e,t,n){var r=void 0!==e.base?e.base:1;if("number"!==g(n))return a(e.default,t.default);var o=e.stops.length;if(1===o)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[o-1][0])return e.stops[o-1][1];var s=p(e.stops,n),u=d(n,r,e.stops[s][0],e.stops[s+1][0]),l=e.stops[s][1],c=e.stops[s+1][1],h=y[t.type]||i;if(e.colorSpace&&"rgb"!==e.colorSpace){var m=f[e.colorSpace];h=function(e,t){return m.reverse(m.interpolate(m.forward(e),m.forward(t),u))}}return"function"==typeof l.evaluate?{evaluate:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=l.evaluate.apply(void 0,e),r=c.evaluate.apply(void 0,e);if(void 0!==n&&void 0!==r)return h(n,r,u)}}:h(l,c,u)}function c(e,t,n){return"color"===t.type?n=h.parse(n):g(n)===t.type||"enum"===t.type&&t.values[n]||(n=void 0),a(n,e.default,t.default)}function p(e,t){for(var n,r,i=e.length,o=0,a=i-1,s=0;o<=a;){if(s=Math.floor((o+a)/2),n=e[s][0],r=e[s+1][0],t===n||t>n&&t<r)return s;n<t?o=s+1:n>t&&(a=s-1)}return Math.max(s-1,0)}function d(e,t,n,r){var i=r-n,o=e-n;return 0===i?0:1===t?o/i:(Math.pow(t,o)-1)/(Math.pow(t,i)-1)}var f=e("../util/color_spaces"),h=e("../util/color"),m=e("../util/extend"),g=e("../util/get_type"),y=e("../util/interpolate"),v=e("../expression/definitions/interpolate");t.exports={createFunction:o,isFunction:r}},{"../expression/definitions/interpolate":131,"../util/color":154,"../util/color_spaces":155,"../util/extend":157,"../util/get_type":158,"../util/interpolate":159}],149:[function(e,t,n){"use strict";function r(e){var t=typeof e;if("number"===t||"boolean"===t||"string"===t||void 0===e||null===e)return JSON.stringify(e);if(Array.isArray(e)){for(var n="[",i=0,o=e;i<o.length;i+=1)n+=r(o[i])+",";return n+"]"}for(var a=Object.keys(e).sort(),s="{",u=0;u<a.length;u++)s+=JSON.stringify(a[u])+":"+r(e[a[u]])+",";return s+"}"}function i(e){for(var t="",n=0,i=a;n<i.length;n+=1)t+="/"+r(e[i[n]]);return t}function o(e){for(var t={},n=0;n<e.length;n++){var r=i(e[n]),o=t[r];o||(o=t[r]=[]),o.push(e[n])}var a=[];for(var s in t)a.push(t[s]);return a}var a=e("./util/ref_properties");t.exports=o},{"./util/ref_properties":160}],150:[function(e,t,n){arguments[4][7][0].apply(n,arguments)},{dup:7}],151:[function(e,t,n){function r(e){return e=Math.round(e),e<0?0:e>255?255:e}function i(e){return e<0?0:e>1?1:e}function o(e){return r("%"===e[e.length-1]?parseFloat(e)/100*255:parseInt(e))}function a(e){return i("%"===e[e.length-1]?parseFloat(e)/100:parseFloat(e))}function s(e,t,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}function u(e){var t=e.replace(/ /g,"").toLowerCase();if(t in l)return l[t].slice();if("#"===t[0]){if(4===t.length){var n=parseInt(t.substr(1),16);return n>=0&&n<=4095?[(3840&n)>>4|(3840&n)>>8,240&n|(240&n)>>4,15&n|(15&n)<<4,1]:null}if(7===t.length){var n=parseInt(t.substr(1),16);return n>=0&&n<=16777215?[(16711680&n)>>16,(65280&n)>>8,255&n,1]:null}return null}var i=t.indexOf("("),u=t.indexOf(")");if(-1!==i&&u+1===t.length){var c=t.substr(0,i),p=t.substr(i+1,u-(i+1)).split(","),d=1;switch(c){case"rgba":if(4!==p.length)return null;d=a(p.pop());case"rgb":return 3!==p.length?null:[o(p[0]),o(p[1]),o(p[2]),d];case"hsla":if(4!==p.length)return null;d=a(p.pop());case"hsl":if(3!==p.length)return null;var f=(parseFloat(p[0])%360+360)%360/360,h=a(p[1]),m=a(p[2]),g=m<=.5?m*(h+1):m+h-m*h,y=2*m-g;return[r(255*s(y,g,f+1/3)),r(255*s(y,g,f)),r(255*s(y,g,f-1/3)),d];default:return null}}return null}var l={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{n.parseCSSColor=u}catch(e){}},{}],152:[function(e,t,n){"use strict";t.exports=e("./v8.json")},{"./v8.json":153}],153:[function(e,t,n){t.exports={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image","source_canvas"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.0511,180,85.0511]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.0511,180,85.0511]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.0511,180,85.0511]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_canvas:{type:{required:!0,type:"enum",values:{canvas:{}}},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}},animate:{type:"boolean",default:"true"},canvas:{type:"string",required:!0}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_fill:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_circle:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_line:{"line-cap":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{butt:{},round:{},square:{}},default:"butt"},"line-join":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{bevel:{},round:{},miter:{}},default:"miter"},"line-miter-limit":{type:"number",default:2,function:"interpolated","zoom-function":!0,requires:[{"line-join":"miter"}]},"line-round-limit":{type:"number",default:1.05,function:"interpolated","zoom-function":!0,requires:[{"line-join":"round"}]},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_symbol:{"symbol-placement":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{point:{},line:{}},default:"point"},"symbol-spacing":{type:"number",default:250,minimum:1,function:"interpolated","zoom-function":!0,units:"pixels",requires:[{"symbol-placement":"line"}]},"symbol-avoid-edges":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1},"icon-allow-overlap":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image"]},"icon-ignore-placement":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image"]},"icon-optional":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image","text-field"]},"icon-rotation-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"]},"icon-size":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,units:"factor of the original icon size",requires:["icon-image"]},"icon-text-fit":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"]},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",function:"interpolated","zoom-function":!0,requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}]},"icon-image":{type:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,tokens:!0},"icon-rotate":{type:"number",default:0,period:360,function:"interpolated","zoom-function":!0,"property-function":!0,units:"degrees",requires:["icon-image"]},"icon-padding":{type:"number",default:2,minimum:0,function:"interpolated","zoom-function":!0,units:"pixels",requires:["icon-image"]},"icon-keep-upright":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":"line"}]},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,"property-function":!0,requires:["icon-image"]},"icon-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"]},"icon-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"]},"text-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"]},"text-rotation-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"]},"text-field":{type:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:"",tokens:!0},"text-font":{type:"array",value:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"]},"text-size":{type:"number",default:16,minimum:0,units:"pixels",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-line-height":{type:"number",default:1.2,units:"ems",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-letter-spacing":{type:"number",default:0,units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-justify":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{left:{},center:{},right:{}},default:"center",requires:["text-field"]},"text-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field"]},"text-max-angle":{type:"number",default:45,units:"degrees",function:"interpolated","zoom-function":!0,requires:["text-field",{"symbol-placement":"line"}]},"text-rotate":{type:"number",default:0,period:360,units:"degrees",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-keep-upright":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":"line"}]},"text-transform":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"]},"text-offset":{type:"array",value:"number",units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,length:2,default:[0,0],requires:["text-field"]},"text-allow-overlap":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field"]},"text-ignore-placement":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field"]},"text-optional":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field","icon-image"]},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},transition:!1,"zoom-function":!0,"property-function":!1,function:"piecewise-constant"},position:{type:"array",default:[1.15,210,30],length:3,value:"number",transition:!0,function:"interpolated","zoom-function":!0,"property-function":!1},color:{type:"color",default:"#ffffff",function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0},intensity:{type:"number",default:.5,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!0},"fill-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:1,minimum:0,maximum:1,transition:!0},"fill-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"}]},"fill-outline-color":{type:"color",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}]},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"fill-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["fill-translate"]},"fill-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!1,default:1,minimum:0,maximum:1,transition:!0},"fill-extrusion-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-extrusion-pattern"}]},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"fill-extrusion-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"]},"fill-extrusion-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0},"fill-extrusion-height":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:0,minimum:0,units:"meters",transition:!0},"fill-extrusion-base":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"]}},paint_line:{"line-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:1,minimum:0,maximum:1,transition:!0},"line-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"line-pattern"}]},"line-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"line-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["line-translate"]},"line-width":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-gap-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-offset":{type:"number",default:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-dasharray":{type:"array",value:"number",function:"piecewise-constant","zoom-function":!0,minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}]},"line-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-blur":{type:"number",default:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"circle-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["circle-translate"]},"circle-pitch-scale":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map"},"circle-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"viewport"},"circle-stroke-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-stroke-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"heatmap-weight":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!1},"heatmap-intensity":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],function:"interpolated","zoom-function":!1,"property-function":!1,transition:!1},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-halo-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"]},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-halo-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-halo-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"]}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-hue-rotate":{type:"number",default:0,period:360,function:"interpolated","zoom-function":!0,transition:!0,units:"degrees"},"raster-brightness-min":{type:"number",function:"interpolated","zoom-function":!0,default:0,minimum:0,maximum:1,transition:!0},"raster-brightness-max":{type:"number",function:"interpolated","zoom-function":!0,default:1,minimum:0,maximum:1,transition:!0},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-fade-duration":{type:"number",default:300,minimum:0,function:"interpolated","zoom-function":!0,transition:!1,units:"milliseconds"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,function:"interpolated","zoom-function":!0,transition:!1},"hillshade-illumination-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"viewport"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"hillshade-shadow-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,transition:!0},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",function:"interpolated","zoom-function":!0,transition:!0},"hillshade-accent-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,transition:!0}},paint_background:{"background-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,transition:!0,requires:[{"!":"background-pattern"}]},"background-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}}}},{}],154:[function(e,t,n){"use strict";var r=e("csscolorparser"),i=r.parseCSSColor,o=function(e,t,n,r){void 0===r&&(r=1),this.r=e,this.g=t,this.b=n,this.a=r};o.parse=function(e){if(e){if(e instanceof o)return e;if("string"==typeof e){var t=i(e);if(t)return new o(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}}},o.prototype.toString=function(){var e=this,t=function(t){return Math.round(255*t/e.a)};return"rgba("+[this.r,this.g,this.b].map(t).concat(this.a).join(",")+")"},o.black=new o(0,0,0,1),o.white=new o(1,1,1,1),o.transparent=new o(0,0,0,0),t.exports=o},{csscolorparser:151}],155:[function(e,t,n){"use strict";function r(e){return e>w?Math.pow(e,1/3):e/x+_}function i(e){return e>b?e*e*e:x*(e-_)}function o(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function a(e){return e/=255,e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function s(e){var t=a(e.r),n=a(e.g),i=a(e.b),o=r((.4124564*t+.3575761*n+.1804375*i)/g),s=r((.2126729*t+.7151522*n+.072175*i)/y);return{l:116*s-16,a:500*(o-s),b:200*(s-r((.0193339*t+.119192*n+.9503041*i)/v)),alpha:e.a}}function u(e){var t=(e.l+16)/116,n=isNaN(e.a)?t:t+e.a/500,r=isNaN(e.b)?t:t-e.b/200;return t=y*i(t),n=g*i(n),r=v*i(r),new h(o(3.2404542*n-1.5371385*t-.4985314*r),o(-.969266*n+1.8760108*t+.041556*r),o(.0556434*n-.2040259*t+1.0572252*r),e.alpha)}function l(e,t,n){return{l:m(e.l,t.l,n),a:m(e.a,t.a,n),b:m(e.b,t.b,n),alpha:m(e.alpha,t.alpha,n)}}function c(e){var t=s(e),n=t.l,r=t.a,i=t.b,o=Math.atan2(i,r)*k;return{h:o<0?o+360:o,c:Math.sqrt(r*r+i*i),l:n,alpha:e.a}}function p(e){var t=e.h*S,n=e.c;return u({l:e.l,a:Math.cos(t)*n,b:Math.sin(t)*n,alpha:e.alpha})}function d(e,t,n){var r=t-e;return e+n*(r>180||r<-180?r-360*Math.round(r/360):r)}function f(e,t,n){return{h:d(e.h,t.h,n),c:m(e.c,t.c,n),l:m(e.l,t.l,n),alpha:m(e.alpha,t.alpha,n)}}var h=e("./color"),m=e("./interpolate").number,g=.95047,y=1,v=1.08883,_=4/29,b=6/29,x=3*b*b,w=b*b*b,S=Math.PI/180,k=180/Math.PI;t.exports={lab:{forward:s,reverse:u,interpolate:l},hcl:{forward:c,reverse:p,interpolate:f}}},{"./color":154,"./interpolate":159}],156:[function(e,t,n){"use strict";function r(e,t){if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!r(e[n],t[n]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==t){if("object"!=typeof t)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var i in e)if(!r(e[i],t[i]))return!1;return!0}return e===t}t.exports=r},{}],157:[function(e,t,n){"use strict";t.exports=function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];for(var r=0,i=t;r<i.length;r+=1){var o=i[r];for(var a in o)e[a]=o[a]}return e}},{}],158:[function(e,t,n){"use strict";t.exports=function(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}},{}],159:[function(e,t,n){"use strict";function r(e,t,n){return e*(1-n)+t*n}function i(e,t,n){return new a(r(e.r,t.r,n),r(e.g,t.g,n),r(e.b,t.b,n),r(e.a,t.a,n))}function o(e,t,n){return e.map(function(e,i){return r(e,t[i],n)})}var a=e("./color");t.exports={number:r,color:i,array:o}},{"./color":154}],160:[function(e,t,n){"use strict";t.exports=["type","source","source-layer","minzoom","maxzoom","filter","layout"]},{}],161:[function(e,t,n){"use strict";function r(e){return{result:"success",value:e}}function i(e){return{result:"error",value:e}}t.exports={success:r,error:i}},{}],162:[function(e,t,n){"use strict";function r(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function i(e){return Array.isArray(e)?e.map(i):r(e)}t.exports=r,t.exports.deep=i},{}],163:[function(e,t,n){"use strict";var r=e("../util/extend"),i=e("../util/unbundle_jsonlint"),o=e("../expression"),a=o.isExpression,s=e("../function"),u=s.isFunction;t.exports=function(t){var n=e("./validate_function"),o=e("./validate_expression"),s=e("./validate_object"),l={"*":function(){return[]},array:e("./validate_array"),boolean:e("./validate_boolean"),number:e("./validate_number"),color:e("./validate_color"),constants:e("./validate_constants"),enum:e("./validate_enum"),filter:e("./validate_filter"),function:e("./validate_function"),layer:e("./validate_layer"),object:e("./validate_object"),source:e("./validate_source"),light:e("./validate_light"),string:e("./validate_string")},c=t.value,p=t.valueSpec,d=t.styleSpec;return p.function&&u(i(c))?n(t):p.function&&a(i.deep(c))?o(t):p.type&&l[p.type]?l[p.type](t):s(r({},t,{valueSpec:p.type?d[p.type]:p}))}},{"../expression":138,"../function":148,"../util/extend":157,"../util/unbundle_jsonlint":162,"./validate_array":164,"./validate_boolean":165,"./validate_color":166,"./validate_constants":167,"./validate_enum":168,"./validate_expression":169,"./validate_filter":170,"./validate_function":171,"./validate_layer":173,"./validate_light":175,"./validate_number":176,"./validate_object":177,"./validate_source":180,"./validate_string":181}],164:[function(e,t,n){"use strict";var r=e("../util/get_type"),i=e("./validate"),o=e("../error/validation_error");t.exports=function(e){var t=e.value,n=e.valueSpec,a=e.style,s=e.styleSpec,u=e.key,l=e.arrayElementValidator||i;if("array"!==r(t))return[new o(u,t,"array expected, "+r(t)+" found")];if(n.length&&t.length!==n.length)return[new o(u,t,"array length "+n.length+" expected, length "+t.length+" found")];if(n["min-length"]&&t.length<n["min-length"])return[new o(u,t,"array length at least "+n["min-length"]+" expected, length "+t.length+" found")];var c={type:n.value};s.$version<7&&(c.function=n.function),"object"===r(n.value)&&(c=n.value);for(var p=[],d=0;d<t.length;d++)p=p.concat(l({array:t,arrayIndex:d,value:t[d],valueSpec:c,style:a,styleSpec:s,key:u+"["+d+"]"}));return p}},{"../error/validation_error":121,"../util/get_type":158,"./validate":163}],165:[function(e,t,n){"use strict";var r=e("../util/get_type"),i=e("../error/validation_error");t.exports=function(e){var t=e.value,n=e.key,o=r(t);return"boolean"!==o?[new i(n,t,"boolean expected, "+o+" found")]:[]}},{"../error/validation_error":121,"../util/get_type":158}],166:[function(e,t,n){"use strict";var r=e("../error/validation_error"),i=e("../util/get_type"),o=e("csscolorparser").parseCSSColor;t.exports=function(e){var t=e.key,n=e.value,a=i(n);return"string"!==a?[new r(t,n,"color expected, "+a+" found")]:null===o(n)?[new r(t,n,'color expected, "'+n+'" found')]:[]}},{"../error/validation_error":121,"../util/get_type":158,csscolorparser:151}],167:[function(e,t,n){"use strict";var r=e("../error/validation_error");t.exports=function(e){var t=e.key,n=e.value;return n?[new r(t,n,"constants have been deprecated as of v8")]:[]}},{"../error/validation_error":121}],168:[function(e,t,n){"use strict";var r=e("../error/validation_error"),i=e("../util/unbundle_jsonlint");t.exports=function(e){var t=e.key,n=e.value,o=e.valueSpec,a=[];return Array.isArray(o.values)?-1===o.values.indexOf(i(n))&&a.push(new r(t,n,"expected one of ["+o.values.join(", ")+"], "+JSON.stringify(n)+" found")):-1===Object.keys(o.values).indexOf(i(n))&&a.push(new r(t,n,"expected one of ["+Object.keys(o.values).join(", ")+"], "+JSON.stringify(n)+" found")),a}},{"../error/validation_error":121,"../util/unbundle_jsonlint":162}],169:[function(e,t,n){"use strict";var r=e("../error/validation_error"),i=e("../expression"),o=i.createExpression,a=i.createPropertyExpression,s=e("../util/unbundle_jsonlint");t.exports=function(e){var t=("property"===e.expressionContext?a:o)(s.deep(e.value),e.valueSpec);return"error"===t.result?t.value.map(function(t){return new r(""+e.key+t.key,e.value,t.message)}):"property"===e.expressionContext&&"text-font"===e.propertyKey&&-1!==t.value._styleExpression.expression.possibleOutputs().indexOf(void 0)?[new r(e.key,e.value,'Invalid data expression for "text-font". Output values must be contained as literals within the expression.')]:[]}},{"../error/validation_error":121,"../expression":138,"../util/unbundle_jsonlint":162}],170:[function(e,t,n){"use strict";function r(e){var t=e.value,n=e.key;if("array"!==s(t))return[new i(n,t,"array expected, "+s(t)+" found")];var o,l=e.styleSpec,c=[];if(t.length<1)return[new i(n,t,"filter array must have at least 1 element")];switch(c=c.concat(a({key:n+"[0]",value:t[0],valueSpec:l.filter_operator,style:e.style,styleSpec:e.styleSpec})),u(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&"$type"===u(t[1])&&c.push(new i(n,t,'"$type" cannot be use with operator "'+t[0]+'"'));case"==":case"!=":3!==t.length&&c.push(new i(n,t,'filter array for operator "'+t[0]+'" must have 3 elements'));case"in":case"!in":t.length>=2&&"string"!==(o=s(t[1]))&&c.push(new i(n+"[1]",t[1],"string expected, "+o+" found"));for(var p=2;p<t.length;p++)o=s(t[p]),"$type"===u(t[1])?c=c.concat(a({key:n+"["+p+"]",value:t[p],valueSpec:l.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==o&&"number"!==o&&"boolean"!==o&&c.push(new i(n+"["+p+"]",t[p],"string, number, or boolean expected, "+o+" found"));break;case"any":case"all":case"none":for(var d=1;d<t.length;d++)c=c.concat(r({key:n+"["+d+"]",value:t[d],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":o=s(t[1]),2!==t.length?c.push(new i(n,t,'filter array for "'+t[0]+'" operator must have 2 elements')):"string"!==o&&c.push(new i(n+"[1]",t[1],"string expected, "+o+" found"))}return c}var i=e("../error/validation_error"),o=e("./validate_expression"),a=e("./validate_enum"),s=e("../util/get_type"),u=e("../util/unbundle_jsonlint"),l=e("../util/extend"),c=e("../feature_filter"),p=c.isExpressionFilter;t.exports=function(e){return p(u.deep(e.value))?o(l({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):r(e)}},{"../error/validation_error":121,"../feature_filter":147,"../util/extend":157,"../util/get_type":158,"../util/unbundle_jsonlint":162,"./validate_enum":168,"./validate_expression":169}],171:[function(e,t,n){"use strict";var r=e("../error/validation_error"),i=e("../util/get_type"),o=e("./validate"),a=e("./validate_object"),s=e("./validate_array"),u=e("./validate_number"),l=e("../util/unbundle_jsonlint");t.exports=function(e){function t(e){if("identity"===g)return[new r(e.key,e.value,'identity function may not have a "stops" property')];var t=[],o=e.value;return t=t.concat(s({key:e.key,value:o,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:n})),"array"===i(o)&&0===o.length&&t.push(new r(e.key,o,"array must have at least one stop")),t}function n(e){var t=[],n=e.value,s=e.key;if("array"!==i(n))return[new r(s,n,"array expected, "+i(n)+" found")];if(2!==n.length)return[new r(s,n,"array length 2 expected, length "+n.length+" found")];if(b){if("object"!==i(n[0]))return[new r(s,n,"object expected, "+i(n[0])+" found")];if(void 0===n[0].zoom)return[new r(s,n,"object stop key must have zoom")];if(void 0===n[0].value)return[new r(s,n,"object stop key must have value")];if(h&&h>l(n[0].zoom))return[new r(s,n[0].zoom,"stop zoom values must appear in ascending order")];l(n[0].zoom)!==h&&(h=l(n[0].zoom),f=void 0,y={}),t=t.concat(a({key:s+"[0]",value:n[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:u,value:c}}))}else t=t.concat(c({key:s+"[0]",value:n[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},n));return t.concat(o({key:s+"[1]",value:n[1],valueSpec:m,style:e.style,styleSpec:e.styleSpec}))}function c(e,t){var n=i(e.value),o=l(e.value),a=null!==e.value?e.value:t;if(d){if(n!==d)return[new r(e.key,a,n+" stop domain type must match previous stop domain type "+d)]}else d=n;if("number"!==n&&"string"!==n&&"boolean"!==n)return[new r(e.key,a,"stop domain value must be a number, string, or boolean")];if("number"!==n&&"categorical"!==g){var s="number expected, "+n+" found";return m["property-function"]&&void 0===g&&(s+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new r(e.key,a,s)]}return"categorical"!==g||"number"!==n||isFinite(o)&&Math.floor(o)===o?"categorical"!==g&&"number"===n&&void 0!==f&&o<f?[new r(e.key,a,"stop domain values must appear in ascending order")]:(f=o,"categorical"===g&&o in y?[new r(e.key,a,"stop domain values must be unique")]:(y[o]=!0,[])):[new r(e.key,a,"integer expected, found "+o)]}function p(e){return o({key:e.key,value:e.value,valueSpec:m,style:e.style,styleSpec:e.styleSpec})}var d,f,h,m=e.valueSpec,g=l(e.value.type),y={},v="categorical"!==g&&void 0===e.value.property,_=!v,b="array"===i(e.value.stops)&&"array"===i(e.value.stops[0])&&"object"===i(e.value.stops[0][0]),x=a({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:t,default:p}});return"identity"===g&&v&&x.push(new r(e.key,e.value,'missing required property "property"')),"identity"===g||e.value.stops||x.push(new r(e.key,e.value,'missing required property "stops"')),"exponential"===g&&"piecewise-constant"===e.valueSpec.function&&x.push(new r(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(_&&!e.valueSpec["property-function"]?x.push(new r(e.key,e.value,"property functions not supported")):v&&!e.valueSpec["zoom-function"]&&"heatmap-color"!==e.objectKey&&x.push(new r(e.key,e.value,"zoom functions not supported"))),"categorical"!==g&&!b||void 0!==e.value.property||x.push(new r(e.key,e.value,'"property" property is required')),x}},{"../error/validation_error":121,"../util/get_type":158,"../util/unbundle_jsonlint":162,"./validate":163,"./validate_array":164,"./validate_number":176,"./validate_object":177}],172:[function(e,t,n){"use strict";var r=e("../error/validation_error"),i=e("./validate_string");t.exports=function(e){var t=e.value,n=e.key,o=i(e);return o.length?o:(-1===t.indexOf("{fontstack}")&&o.push(new r(n,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&o.push(new r(n,t,'"glyphs" url must include a "{range}" token')),o)}},{"../error/validation_error":121,"./validate_string":181}],173:[function(e,t,n){"use strict";var r=e("../error/validation_error"),i=e("../util/unbundle_jsonlint"),o=e("./validate_object"),a=e("./validate_filter"),s=e("./validate_paint_property"),u=e("./validate_layout_property"),l=e("./validate"),c=e("../util/extend");t.exports=function(e){var t=[],n=e.value,p=e.key,d=e.style,f=e.styleSpec;n.type||n.ref||t.push(new r(p,n,'either "type" or "ref" is required'));var h=i(n.type),m=i(n.ref);if(n.id)for(var g=i(n.id),y=0;y<e.arrayIndex;y++){var v=d.layers[y];i(v.id)===g&&t.push(new r(p,n.id,'duplicate layer id "'+n.id+'", previously used at line '+v.id.__line__))}if("ref"in n){["type","source","source-layer","filter","layout"].forEach(function(e){e in n&&t.push(new r(p,n[e],'"'+e+'" is prohibited for ref layers'))});var _;d.layers.forEach(function(e){i(e.id)===m&&(_=e)}),_?_.ref?t.push(new r(p,n.ref,"ref cannot reference another ref layer")):h=i(_.type):t.push(new r(p,n.ref,'ref layer "'+m+'" not found'))}else if("background"!==h)if(n.source){var b=d.sources&&d.sources[n.source],x=b&&i(b.type);b?"vector"===x&&"raster"===h?t.push(new r(p,n.source,'layer "'+n.id+'" requires a raster source')):"raster"===x&&"raster"!==h?t.push(new r(p,n.source,'layer "'+n.id+'" requires a vector source')):"vector"!==x||n["source-layer"]?"raster-dem"===x&&"hillshade"!==h&&t.push(new r(p,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):t.push(new r(p,n,'layer "'+n.id+'" must specify a "source-layer"')):t.push(new r(p,n.source,'source "'+n.source+'" not found'))}else t.push(new r(p,n,'missing required property "source"'));return t=t.concat(o({key:p,value:n,valueSpec:f.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return l({key:p+".type",value:n.type,valueSpec:f.layer.type,style:e.style,styleSpec:e.styleSpec,object:n,objectKey:"type"})},filter:a,layout:function(e){return o({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return u(c({layerType:h},e))}}})},paint:function(e){return o({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return s(c({layerType:h},e))}}})}}}))}},{"../error/validation_error":121,"../util/extend":157,"../util/unbundle_jsonlint":162,"./validate":163,"./validate_filter":170,"./validate_layout_property":174,"./validate_object":177,"./validate_paint_property":178}],174:[function(e,t,n){"use strict";var r=e("./validate_property");t.exports=function(e){return r(e,"layout")}},{"./validate_property":179}],175:[function(e,t,n){"use strict";var r=e("../error/validation_error"),i=e("../util/get_type"),o=e("./validate");t.exports=function(e){var t=e.value,n=e.styleSpec,a=n.light,s=e.style,u=[],l=i(t);if(void 0===t)return u;if("object"!==l)return u=u.concat([new r("light",t,"object expected, "+l+" found")]);for(var c in t){var p=c.match(/^(.*)-transition$/);u=p&&a[p[1]]&&a[p[1]].transition?u.concat(o({key:c,value:t[c],valueSpec:n.transition,style:s,styleSpec:n})):a[c]?u.concat(o({key:c,value:t[c],valueSpec:a[c],style:s,styleSpec:n})):u.concat([new r(c,t[c],'unknown property "'+c+'"')])}return u}},{"../error/validation_error":121,"../util/get_type":158,"./validate":163}],176:[function(e,t,n){"use strict";var r=e("../util/get_type"),i=e("../error/validation_error");t.exports=function(e){var t=e.key,n=e.value,o=e.valueSpec,a=r(n);return"number"!==a?[new i(t,n,"number expected, "+a+" found")]:"minimum"in o&&n<o.minimum?[new i(t,n,n+" is less than the minimum value "+o.minimum)]:"maximum"in o&&n>o.maximum?[new i(t,n,n+" is greater than the maximum value "+o.maximum)]:[]}},{"../error/validation_error":121,"../util/get_type":158}],177:[function(e,t,n){"use strict";var r=e("../error/validation_error"),i=e("../util/get_type"),o=e("./validate");t.exports=function(e){var t=e.key,n=e.value,a=e.valueSpec||{},s=e.objectElementValidators||{},u=e.style,l=e.styleSpec,c=[],p=i(n);if("object"!==p)return[new r(t,n,"object expected, "+p+" found")];for(var d in n){var f=d.split(".")[0],h=a[f]||a["*"],m=void 0;if(s[f])m=s[f];else if(a[f])m=o;else if(s["*"])m=s["*"];else{if(!a["*"]){c.push(new r(t,n[d],'unknown property "'+d+'"'));continue}m=o}c=c.concat(m({key:(t?t+".":t)+d,value:n[d],valueSpec:h,style:u,styleSpec:l,object:n,objectKey:d},n))}for(var g in a)s[g]||a[g].required&&void 0===a[g].default&&void 0===n[g]&&c.push(new r(t,n,'missing required property "'+g+'"'));return c}},{"../error/validation_error":121,"../util/get_type":158,"./validate":163}],178:[function(e,t,n){"use strict";var r=e("./validate_property");t.exports=function(e){return r(e,"paint")}},{"./validate_property":179}],179:[function(e,t,n){"use strict";var r=e("./validate"),i=e("../error/validation_error"),o=e("../util/get_type"),a=e("../function"),s=a.isFunction,u=e("../util/unbundle_jsonlint");t.exports=function(e,t){var n=e.key,a=e.style,l=e.styleSpec,c=e.value,p=e.objectKey,d=l[t+"_"+e.layerType];if(!d)return[];var f=p.match(/^(.*)-transition$/);if("paint"===t&&f&&d[f[1]]&&d[f[1]].transition)return r({key:n,value:c,valueSpec:l.transition,style:a,styleSpec:l});var h=e.valueSpec||d[p];if(!h)return[new i(n,c,'unknown property "'+p+'"')];var m;if("string"===o(c)&&h["property-function"]&&!h.tokens&&(m=/^{([^}]+)}$/.exec(c)))return[new i(n,c,'"'+p+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(m[1])+" }`.")];var g=[];return"symbol"===e.layerType&&("text-field"===p&&a&&!a.glyphs&&g.push(new i(n,c,'use of "text-field" requires a style "glyphs" property')),"text-font"===p&&s(u.deep(c))&&"identity"===u(c.type)&&g.push(new i(n,c,'"text-font" does not support identity functions'))),g.concat(r({key:e.key,value:c,valueSpec:h,style:a,styleSpec:l,expressionContext:"property",propertyKey:p}))}},{"../error/validation_error":121,"../function":148,"../util/get_type":158,"../util/unbundle_jsonlint":162,"./validate":163}],180:[function(e,t,n){"use strict";var r=e("../error/validation_error"),i=e("../util/unbundle_jsonlint"),o=e("./validate_object"),a=e("./validate_enum");t.exports=function(e){var t=e.value,n=e.key,s=e.styleSpec,u=e.style;if(!t.type)return[new r(n,t,'"type" is required')];var l=i(t.type),c=[];switch(l){case"vector":case"raster":case"raster-dem":if(c=c.concat(o({key:n,value:t,valueSpec:s["source_"+l.replace("-","_")],style:e.style,styleSpec:s})),"url"in t)for(var p in t)["type","url","tileSize"].indexOf(p)<0&&c.push(new r(n+"."+p,t[p],'a source with a "url" property may not include a "'+p+'" property'));return c;case"geojson":return o({key:n,value:t,valueSpec:s.source_geojson,style:u,styleSpec:s});case"video":return o({key:n,value:t,valueSpec:s.source_video,style:u,styleSpec:s});case"image":return o({key:n,value:t,valueSpec:s.source_image,style:u,styleSpec:s});case"canvas":return o({key:n,value:t,valueSpec:s.source_canvas,style:u,styleSpec:s});default:return a({key:n+".type",value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image","canvas"]},style:u,styleSpec:s})}}},{"../error/validation_error":121,"../util/unbundle_jsonlint":162,"./validate_enum":168,"./validate_object":177}],181:[function(e,t,n){"use strict";var r=e("../util/get_type"),i=e("../error/validation_error");t.exports=function(e){var t=e.value,n=e.key,o=r(t);return"string"!==o?[new i(n,t,"string expected, "+o+" found")]:[]}},{"../error/validation_error":121,"../util/get_type":158}],182:[function(e,t,n){"use strict";function r(e,t){t=t||u;var n=[];return n=n.concat(s({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:l,"*":function(){return[]}}})),e.constants&&(n=n.concat(a({key:"constants",value:e.constants,style:e,styleSpec:t}))),i(n)}function i(e){return[].concat(e).sort(function(e,t){return e.line-t.line})}function o(e){return function(){return i(e.apply(this,arguments))}}var a=e("./validate/validate_constants"),s=e("./validate/validate"),u=e("./reference/latest"),l=e("./validate/validate_glyphs_url");r.source=o(e("./validate/validate_source")),r.light=o(e("./validate/validate_light")),r.layer=o(e("./validate/validate_layer")),r.filter=o(e("./validate/validate_filter")),r.paintProperty=o(e("./validate/validate_paint_property")),r.layoutProperty=o(e("./validate/validate_layout_property")),t.exports=r},{"./reference/latest":152,"./validate/validate":163,"./validate/validate_constants":167,"./validate/validate_filter":170,"./validate/validate_glyphs_url":172,"./validate/validate_layer":173,"./validate/validate_layout_property":174,"./validate/validate_light":175,"./validate/validate_paint_property":178,"./validate/validate_source":180}],183:[function(e,t,n){"use strict";var r=e("./zoom_history"),i=function(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new r,this.transition={})};i.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},t.exports=i},{"./zoom_history":213}],184:[function(e,t,n){"use strict";var r=e("../style-spec/reference/latest"),i=e("../util/util"),o=e("../util/evented"),a=e("./validate_style"),s=e("../util/util"),u=s.sphericalToCartesian,l=(e("../style-spec/util/color"),e("../style-spec/util/interpolate")),c=e("./properties"),p=c.Properties,d=c.Transitionable,f=(c.Transitioning,c.PossiblyEvaluated,c.DataConstantProperty),h=function(){this.specification=r.light.position};h.prototype.possiblyEvaluate=function(e,t){return u(e.expression.evaluate(t))},h.prototype.interpolate=function(e,t,n){return{x:l.number(e.x,t.x,n),y:l.number(e.y,t.y,n),z:l.number(e.z,t.z,n)}};var m=new p({anchor:new f(r.light.anchor),position:new h,color:new f(r.light.color),intensity:new f(r.light.intensity)}),g=function(e){function t(t){e.call(this),this._transitionable=new d(m),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getLight=function(){return this._transitionable.serialize()},t.prototype.setLight=function(e){var t=this;if(!this._validate(a.light,e))for(var n in e){var r=e[n];i.endsWith(n,"-transition")?t._transitionable.setTransition(n.slice(0,-"-transition".length),r):t._transitionable.setValue(n,r)}},t.prototype.updateTransitions=function(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)},t.prototype.hasTransition=function(){return this._transitioning.hasTransition()},t.prototype.recalculate=function(e){this.properties=this._transitioning.possiblyEvaluate(e)},t.prototype._validate=function(e,t){return a.emitErrors(this,e.call(a,i.extend({value:t,style:{glyphs:!0,sprite:!0},styleSpec:r})))},t}(o);t.exports=g},{"../style-spec/reference/latest":152,"../style-spec/util/color":154,"../style-spec/util/interpolate":159,"../util/evented":261,"../util/util":276,"./properties":189,"./validate_style":212}],185:[function(e,t,n){"use strict";var r=e("../util/mapbox"),i=r.normalizeGlyphsURL,o=e("../util/ajax"),a=e("./parse_glyph_pbf");t.exports=function(e,t,n,r,s){var u=256*t,l=u+255,c=r(i(n).replace("{fontstack}",e).replace("{range}",u+"-"+l),o.ResourceType.Glyphs);o.getArrayBuffer(c,function(e,t){if(e)s(e);else if(t){for(var n={},r=0,i=a(t.data);r<i.length;r+=1){var o=i[r];n[o.id]=o}s(null,n)}})}},{"../util/ajax":252,"../util/mapbox":268,"./parse_glyph_pbf":187}],186:[function(e,t,n){"use strict";var r=e("../util/ajax"),i=e("../util/browser"),o=e("../util/mapbox"),a=o.normalizeSpriteURL,s=e("../util/image"),u=s.RGBAImage;t.exports=function(e,t,n){function o(){if(c)n(c);else if(s&&l){var e=i.getImageData(l),t={};for(var r in s){var o=s[r],a=o.width,p=o.height,d=o.x,f=o.y,h=o.sdf,m=o.pixelRatio,g=new u({width:a,height:p});u.copy(e,g,{x:d,y:f},{x:0,y:0},{width:a,height:p}),t[r]={data:g,pixelRatio:m,sdf:h}}n(null,t)}}var s,l,c,p=i.devicePixelRatio>1?"@2x":"";r.getJSON(t(a(e,p,".json"),r.ResourceType.SpriteJSON),function(e,t){c||(c=e,s=t,o())}),r.getImage(t(a(e,p,".png"),r.ResourceType.SpriteImage),function(e,t){c||(c=e,l=t,o())})}},{"../util/ajax":252,"../util/browser":253,"../util/image":264,"../util/mapbox":268}],187:[function(e,t,n){"use strict";function r(e,t,n){1===e&&n.readMessage(i,t)}function i(e,t,n){if(3===e){var r=n.readMessage(o,{}),i=r.id,a=r.bitmap,u=r.width,c=r.height,p=r.left,d=r.top,f=r.advance;t.push({id:i,bitmap:new s({width:u+2*l,height:c+2*l},a),metrics:{width:u,height:c,left:p,top:d,advance:f}})}}function o(e,t,n){1===e?t.id=n.readVarint():2===e?t.bitmap=n.readBytes():3===e?t.width=n.readVarint():4===e?t.height=n.readVarint():5===e?t.left=n.readSVarint():6===e?t.top=n.readSVarint():7===e&&(t.advance=n.readVarint())}var a=e("../util/image"),s=a.AlphaImage,u=e("pbf"),l=3;t.exports=function(e){return new u(e).readFields(r,[])},t.exports.GLYPH_PBF_BORDER=l},{"../util/image":264,pbf:29}],188:[function(e,t,n){"use strict";var r=e("../util/browser"),i=e("../symbol/placement"),o=function(){this._currentTileIndex=0,this._seenCrossTileIDs={}};o.prototype.continuePlacement=function(e,t,n,r,i){for(var o=this;this._currentTileIndex<e.length;){var a=e[o._currentTileIndex];if(t.placeLayerTile(r,a,n,o._seenCrossTileIDs),o._currentTileIndex++,i())return!0}};var a=function(e,t,n,r,o){this.placement=new i(e,o),this._currentPlacementIndex=t.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=r,this._done=!1};a.prototype.isDone=function(){return this._done},a.prototype.continuePlacement=function(e,t,n){for(var i=this,a=r.now(),s=function(){var e=r.now()-a;return!i._forceFullPlacement&&e>2};this._currentPlacementIndex>=0;){var u=e[i._currentPlacementIndex],l=t[u],c=i.placement.collisionIndex.transform.zoom;if("symbol"===l.type&&(!l.minzoom||l.minzoom<=c)&&(!l.maxzoom||l.maxzoom>c)){if(i._inProgressLayer||(i._inProgressLayer=new o),i._inProgressLayer.continuePlacement(n[l.source],i.placement,i._showCollisionBoxes,l,s))return;delete i._inProgressLayer}i._currentPlacementIndex--}this._done=!0},t.exports=a},{"../symbol/placement":224,"../util/browser":253}],189:[function(e,t,n){"use strict";var r=e("../util/util"),i=r.clone,o=r.extend,a=r.easeCubicInOut,s=e("../style-spec/util/interpolate"),u=e("../style-spec/expression"),l=u.normalizePropertyExpression,c=(e("../style-spec/util/color"),e("../util/web_worker_transfer")),p=c.register,d=function(e,t){this.property=e,this.value=t,this.expression=l(void 0===t?e.specification.default:t,e.specification)};d.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},d.prototype.possiblyEvaluate=function(e){return this.property.possiblyEvaluate(this,e)};var f=function(e){this.property=e,this.value=new d(e,void 0)};f.prototype.transitioned=function(e,t){return new m(this.property,this.value,t,o({},e.transition,this.transition),e.now)},f.prototype.untransitioned=function(){return new m(this.property,this.value,null,{},0)};var h=function(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)};h.prototype.getValue=function(e){return i(this._values[e].value.value)},h.prototype.setValue=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new f(this._values[e].property)),this._values[e].value=new d(this._values[e].property,null===t?void 0:i(t))},h.prototype.getTransition=function(e){return i(this._values[e].transition)},h.prototype.setTransition=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new f(this._values[e].property)),this._values[e].transition=i(t)||void 0},h.prototype.serialize=function(){for(var e=this,t={},n=0,r=Object.keys(e._values);n<r.length;n+=1){var i=r[n],o=e.getValue(i);void 0!==o&&(t[i]=o);var a=e.getTransition(i);void 0!==a&&(t[i+"-transition"]=a)}return t},h.prototype.transitioned=function(e,t){for(var n=this,r=new g(this._properties),i=0,o=Object.keys(n._values);i<o.length;i+=1){var a=o[i];r._values[a]=n._values[a].transitioned(e,t._values[a])}return r},h.prototype.untransitioned=function(){for(var e=this,t=new g(this._properties),n=0,r=Object.keys(e._values);n<r.length;n+=1){var i=r[n];t._values[i]=e._values[i].untransitioned()}return t};var m=function(e,t,n,r,i){this.property=e,this.value=t,this.begin=i+r.delay||0,this.end=this.begin+r.duration||0,e.specification.transition&&(r.delay||r.duration)&&(this.prior=n)};m.prototype.possiblyEvaluate=function(e){var t=e.now||0,n=this.value.possiblyEvaluate(e),r=this.prior;if(r){if(t>this.end)return this.prior=null,n;if(this.value.isDataDriven())return this.prior=null,n;if(t<this.begin)return r.possiblyEvaluate(e);var i=(t-this.begin)/(this.end-this.begin);return this.property.interpolate(r.possiblyEvaluate(e),n,a(i))}return n};var g=function(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)};g.prototype.possiblyEvaluate=function(e){for(var t=this,n=new _(this._properties),r=0,i=Object.keys(t._values);r<i.length;r+=1){var o=i[r];n._values[o]=t._values[o].possiblyEvaluate(e)}return n},g.prototype.hasTransition=function(){for(var e=this,t=0,n=Object.keys(e._values);t<n.length;t+=1){var r=n[t];if(e._values[r].prior)return!0}return!1};var y=function(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)};y.prototype.getValue=function(e){return i(this._values[e].value)},y.prototype.setValue=function(e,t){this._values[e]=new d(this._values[e].property,null===t?void 0:i(t))},y.prototype.serialize=function(){for(var e=this,t={},n=0,r=Object.keys(e._values);n<r.length;n+=1){var i=r[n],o=e.getValue(i);void 0!==o&&(t[i]=o)}return t},y.prototype.possiblyEvaluate=function(e){for(var t=this,n=new _(this._properties),r=0,i=Object.keys(t._values);r<i.length;r+=1){var o=i[r];n._values[o]=t._values[o].possiblyEvaluate(e)}return n};var v=function(e,t,n){this.property=e,this.value=t,this.globals=n};v.prototype.isConstant=function(){return"constant"===this.value.kind},v.prototype.constantOr=function(e){return"constant"===this.value.kind?this.value.value:e},v.prototype.evaluate=function(e){return this.property.evaluate(this.value,this.globals,e)};var _=function(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)};_.prototype.get=function(e){return this._values[e]};var b=function(e){this.specification=e};b.prototype.possiblyEvaluate=function(e,t){return e.expression.evaluate(t)},b.prototype.interpolate=function(e,t,n){var r=s[this.specification.type];return r?r(e,t,n):e};var x=function(e){this.specification=e};x.prototype.possiblyEvaluate=function(e,t){return"constant"===e.expression.kind||"camera"===e.expression.kind?new v(this,{kind:"constant",value:e.expression.evaluate(t)},t):new v(this,e.expression,t)},x.prototype.interpolate=function(e,t,n){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0!==e.value.value&&void 0!==t.value.value){var r=s[this.specification.type];return r?new v(this,{kind:"constant",value:r(e.value.value,t.value.value,n)},e.globals):e}},x.prototype.evaluate=function(e,t,n){return"constant"===e.kind?e.value:e.evaluate(t,n)};var w=function(e){this.specification=e};w.prototype.possiblyEvaluate=function(e,t){if(void 0!==e.value){if("constant"===e.expression.kind){var n=e.expression.evaluate(t);return this._calculate(n,n,n,t)}return this._calculate(e.expression.evaluate({zoom:t.zoom-1}),e.expression.evaluate({zoom:t.zoom}),e.expression.evaluate({zoom:t.zoom+1}),t)}},w.prototype._calculate=function(e,t,n,r){var i=r.zoom,o=i-Math.floor(i),a=r.crossFadingFactor();return i>r.zoomHistory.lastIntegerZoom?{from:e,to:t,fromScale:2,toScale:1,t:o+(1-o)*a}:{from:n,to:t,fromScale:.5,toScale:1,t:1-(1-a)*o}},w.prototype.interpolate=function(e){return e};var S=function(e){this.specification=e};S.prototype.possiblyEvaluate=function(){},S.prototype.interpolate=function(){};var k=function(e){var t=this;this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={};for(var n in e){var r=e[n],i=t.defaultPropertyValues[n]=new d(r,void 0),o=t.defaultTransitionablePropertyValues[n]=new f(r);t.defaultTransitioningPropertyValues[n]=o.untransitioned(),t.defaultPossiblyEvaluatedValues[n]=i.possiblyEvaluate({})}};p("DataDrivenProperty",x),p("DataConstantProperty",b),p("CrossFadedProperty",w),p("HeatmapColorProperty",S),t.exports={PropertyValue:d,Transitionable:h,Transitioning:g,Layout:y,PossiblyEvaluatedPropertyValue:v,PossiblyEvaluated:_,DataConstantProperty:b,DataDrivenProperty:x,CrossFadedProperty:w,HeatmapColorProperty:S,Properties:k}},{"../style-spec/expression":138,"../style-spec/util/color":154,"../style-spec/util/interpolate":159,"../util/util":276,"../util/web_worker_transfer":279}],190:[function(e,t,n){"use strict";function r(e,t,n){var r=t.paint.get(e).value;return"constant"===r.kind?r.value:n.programConfigurations.get(t.id).binders[e].statistics.max}function i(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function o(e,t,n,r,i){if(!t[0]&&!t[1])return e;var o=a.convert(t);"viewport"===n&&o._rotate(-r);for(var s=[],u=0;u<e.length;u++){for(var l=e[u],c=[],p=0;p<l.length;p++)c.push(l[p].sub(o._mult(i)));s.push(c)}return s}var a=e("@mapbox/point-geometry");t.exports={getMaximumPaintValue:r,translateDistance:i,translate:o}},{"@mapbox/point-geometry":4}],191:[function(e,t,n){"use strict";var r=e("../util/evented"),i=e("./style_layer"),o=e("./load_sprite"),a=e("../render/image_manager"),s=e("../render/glyph_manager"),u=e("./light"),l=e("../render/line_atlas"),c=e("../util/util"),p=e("../util/ajax"),d=e("../util/mapbox"),f=e("../util/browser"),h=e("../util/dispatcher"),m=e("./validate_style"),g=e("../source/source").getType,y=e("../source/source").setType,v=e("../source/query_features"),_=e("../source/source_cache"),b=(e("../source/geojson_source"),e("../style-spec/reference/latest")),x=e("../util/global_worker_pool"),w=e("../style-spec/deref"),S=e("../style-spec/diff"),k=e("../source/rtl_text_plugin"),E=e("./pauseable_placement"),T=e("./zoom_history"),M=e("../symbol/cross_tile_symbol_index"),C=c.pick(S.operations,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),O=c.pick(S.operations,["setCenter","setZoom","setBearing","setPitch"]),A=function(e){function t(t,n){var r=this;void 0===n&&(n={}),e.call(this),this.map=t,this.dispatcher=new h(x(),this),this.imageManager=new a,this.glyphManager=new s(t._transformRequest,n.localIdeographFontFamily),this.lineAtlas=new l(256,512),this.crossTileSymbolIndex=new M,this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new T,this._loaded=!1,this._resetUpdates();var i=this;this._rtlTextPluginCallback=k.registerForPluginAvailability(function(e){i.dispatcher.broadcast("loadRTLTextPlugin",e.pluginBlobURL,e.errorCallback);for(var t in i.sourceCaches)i.sourceCaches[t].reload()}),this.on("data",function(e){if("source"===e.dataType&&"metadata"===e.sourceDataType){var t=r.sourceCaches[e.sourceId];if(t){var n=t.getSource();if(n&&n.vectorLayerIds)for(var i in r._layers){var o=r._layers[i];o.source===n.id&&r._validateLayer(o)}}}})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.loadURL=function(e,t){var n=this;void 0===t&&(t={}),this.fire("dataloading",{dataType:"style"});var r="boolean"==typeof t.validate?t.validate:!d.isMapboxURL(e);e=d.normalizeStyleURL(e,t.accessToken);var i=this.map._transformRequest(e,p.ResourceType.Style);p.getJSON(i,function(e,t){e?n.fire("error",{error:e}):t&&n._load(t,r)})},t.prototype.loadJSON=function(e,t){var n=this;void 0===t&&(t={}),this.fire("dataloading",{dataType:"style"}),f.frame(function(){n._load(e,!1!==t.validate)})},t.prototype._load=function(e,t){var n=this;if(!t||!m.emitErrors(this,m(e))){this._loaded=!0,this.stylesheet=e;for(var r in e.sources)n.addSource(r,e.sources[r],{validate:!1});e.sprite?o(e.sprite,this.map._transformRequest,function(e,t){if(e)n.fire("error",e);else if(t)for(var r in t)n.imageManager.addImage(r,t[r]);n.imageManager.setLoaded(!0),n.fire("data",{dataType:"style"})}):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);var a=w(this.stylesheet.layers);this._order=a.map(function(e){return e.id}),this._layers={};for(var s=0,l=a;s<l.length;s+=1){var c=l[s];c=i.create(c),c.setEventedParent(n,{layer:{id:c.id}}),n._layers[c.id]=c}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new u(this.stylesheet.light),this.fire("data",{dataType:"style"}),this.fire("style.load")}},t.prototype._validateLayer=function(e){var t=this.sourceCaches[e.source];if(t){var n=e.sourceLayer;if(n){var r=t.getSource();("geojson"===r.type||r.vectorLayerIds&&-1===r.vectorLayerIds.indexOf(n))&&this.fire("error",{error:new Error('Source layer "'+n+'" does not exist on source "'+r.id+'" as specified by style layer "'+e.id+'"')})}}},t.prototype.loaded=function(){var e=this;if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in e.sourceCaches)if(!e.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},t.prototype._serializeLayers=function(e){var t=this;return e.map(function(e){return t._layers[e].serialize()})},t.prototype.hasTransitions=function(){var e=this;if(this.light&&this.light.hasTransition())return!0;for(var t in e.sourceCaches)if(e.sourceCaches[t].hasTransition())return!0;for(var n in e._layers)if(e._layers[n].hasTransition())return!0;return!1},t.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},t.prototype.update=function(e){var t=this;if(this._loaded){if(this._changed){var n=Object.keys(this._updatedLayers),r=Object.keys(this._removedLayers);(n.length||r.length)&&this._updateWorkerLayers(n,r);for(var i in t._updatedSources){var o=t._updatedSources[i];"reload"===o?t._reloadSource(i):"clear"===o&&t._clearSource(i)}for(var a in t._updatedPaintProps)t._layers[a].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates(),this.fire("data",{dataType:"style"})}for(var s in t.sourceCaches)t.sourceCaches[s].used=!1;for(var u=0,l=t._order;u<l.length;u+=1){var c=l[u],p=t._layers[c];p.recalculate(e),!p.isHidden(e.zoom)&&p.source&&(t.sourceCaches[p.source].used=!0)}this.light.recalculate(e),this.z=e.zoom}},t.prototype._updateWorkerLayers=function(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t})},t.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={}},t.prototype.setState=function(e){var t=this;if(this._checkLoaded(),m.emitErrors(this,m(e)))return!1;e=c.clone(e),e.layers=w(e.layers);var n=S(this.serialize(),e).filter(function(e){return!(e.command in O)});if(0===n.length)return!1;var r=n.filter(function(e){return!(e.command in C)});if(r.length>0)throw new Error("Unimplemented: "+r.map(function(e){return e.command}).join(", ")+".");return n.forEach(function(e){"setTransition"!==e.command&&t[e.command].apply(t,e.args)}),this.stylesheet=e,!0},t.prototype.addImage=function(e,t){if(this.getImage(e))return this.fire("error",{error:new Error("An image with this name already exists.")});this.imageManager.addImage(e,t),this.fire("data",{dataType:"style"})},t.prototype.getImage=function(e){return this.imageManager.getImage(e)},t.prototype.removeImage=function(e){if(!this.getImage(e))return this.fire("error",{error:new Error("No image with this name exists.")});this.imageManager.removeImage(e),this.fire("data",{dataType:"style"})},t.prototype.addSource=function(e,t,n){var r=this;if(this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error("There is already a source with this ID");if(!t.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(t).join(", ")+".");if(!(["vector","raster","geojson","video","image","canvas"].indexOf(t.type)>=0&&this._validate(m.source,"sources."+e,t,null,n))){this.map&&this.map._collectResourceTiming&&(t.collectResourceTiming=!0);var i=this.sourceCaches[e]=new _(e,t,this.dispatcher);i.style=this,i.setEventedParent(this,function(){return{isSourceLoaded:r.loaded(),source:i.serialize(),sourceId:e}}),i.onAdd(this.map),this._changed=!0}},t.prototype.removeSource=function(e){var t=this;if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(var n in t._layers)if(t._layers[n].source===e)return t.fire("error",{error:new Error('Source "'+e+'" cannot be removed while layer "'+n+'" is using it.')});var r=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],r.fire("data",{sourceDataType:"metadata",dataType:"source",sourceId:e}),r.setEventedParent(null),r.clearTiles(),r.onRemove&&r.onRemove(this.map),this._changed=!0},t.prototype.setGeoJSONSourceData=function(e,t){this._checkLoaded(),this.sourceCaches[e].getSource().setData(t),this._changed=!0},t.prototype.getSource=function(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()},t.prototype.addLayer=function(e,t,n){this._checkLoaded();var r=e.id;if("object"==typeof e.source&&(this.addSource(r,e.source),e=c.clone(e),e=c.extend(e,{source:r})),!this._validate(m.layer,"layers."+r,e,{arrayIndex:-1},n)){var o=i.create(e);this._validateLayer(o),o.setEventedParent(this,{layer:{id:r}});var a=t?this._order.indexOf(t):this._order.length;if(t&&-1===a)return void this.fire("error",{error:new Error('Layer with id "'+t+'" does not exist on this map.')});if(this._order.splice(a,0,r),this._layerOrderChanged=!0,this._layers[r]=o,this._removedLayers[r]&&o.source){var s=this._removedLayers[r];delete this._removedLayers[r],s.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause())}this._updateLayer(o)}},t.prototype.moveLayer=function(e,t){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire("error",{error:new Error("The layer '"+e+"' does not exist in the map's style and cannot be moved.")});var n=this._order.indexOf(e);this._order.splice(n,1);var r=t?this._order.indexOf(t):this._order.length;if(t&&-1===r)return void this.fire("error",{error:new Error('Layer with id "'+t+'" does not exist on this map.')});this._order.splice(r,0,e),this._layerOrderChanged=!0},t.prototype.removeLayer=function(e){this._checkLoaded();var t=this._layers[e];if(!t)return void this.fire("error",{error:new Error("The layer '"+e+"' does not exist in the map's style and cannot be removed.")});t.setEventedParent(null);var n=this._order.indexOf(e);this._order.splice(n,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=t,delete this._layers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e]},t.prototype.getLayer=function(e){return this._layers[e]},t.prototype.setLayerZoomRange=function(e,t,n){this._checkLoaded();var r=this.getLayer(e);if(!r)return void this.fire("error",{error:new Error("The layer '"+e+"' does not exist in the map's style and cannot have zoom extent.")});r.minzoom===t&&r.maxzoom===n||(null!=t&&(r.minzoom=t),null!=n&&(r.maxzoom=n),this._updateLayer(r))},t.prototype.setFilter=function(e,t){this._checkLoaded();var n=this.getLayer(e);return n?c.deepEqual(n.filter,t)?void 0:null===t||void 0===t?(n.filter=void 0,void this._updateLayer(n)):void(this._validate(m.filter,"layers."+n.id+".filter",t)||(n.filter=c.clone(t),this._updateLayer(n))):void this.fire("error",{error:new Error("The layer '"+e+"' does not exist in the map's style and cannot be filtered.")})},t.prototype.getFilter=function(e){return c.clone(this.getLayer(e).filter)},t.prototype.setLayoutProperty=function(e,t,n){this._checkLoaded();var r=this.getLayer(e);if(!r)return void this.fire("error",{error:new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")});c.deepEqual(r.getLayoutProperty(t),n)||(r.setLayoutProperty(t,n),this._updateLayer(r))},t.prototype.getLayoutProperty=function(e,t){return this.getLayer(e).getLayoutProperty(t)},t.prototype.setPaintProperty=function(e,t,n){this._checkLoaded();var r=this.getLayer(e);if(!r)return void this.fire("error",{error:new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")});if(!c.deepEqual(r.getPaintProperty(t),n)){var i=r._transitionablePaint._values[t].value.isDataDriven();r.setPaintProperty(t,n),(r._transitionablePaint._values[t].value.isDataDriven()||i)&&this._updateLayer(r),this._changed=!0,this._updatedPaintProps[e]=!0}},t.prototype.getPaintProperty=function(e,t){return this.getLayer(e).getPaintProperty(t)},t.prototype.getTransition=function(){return c.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},t.prototype.serialize=function(){var e=this;return c.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:c.mapObject(this.sourceCaches,function(e){return e.serialize()}),layers:this._order.map(function(t){return e._layers[t].serialize()})},function(e){return void 0!==e})},t.prototype._updateLayer=function(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause()),this._changed=!0},t.prototype._flattenRenderedFeatures=function(e){for(var t=this,n=[],r=this._order.length-1;r>=0;r--)for(var i=t._order[r],o=0,a=e;o<a.length;o+=1){var s=a[o],u=s[i];if(u)for(var l=0,c=u;l<c.length;l+=1){var p=c[l];n.push(p)}}return n},t.prototype.queryRenderedFeatures=function(e,t,n,r){var i=this;t&&t.filter&&this._validate(m.filter,"queryRenderedFeatures.filter",t.filter);var o={};if(t&&t.layers){if(!Array.isArray(t.layers))return this.fire("error",{error:"parameters.layers must be an Array."}),[];for(var a=0,s=t.layers;a<s.length;a+=1){var u=s[a],l=i._layers[u];if(!l)return i.fire("error",{error:"The layer '"+u+"' does not exist in the map's style and cannot be queried for features."}),[];o[l.source]=!0}}var c=[];for(var p in i.sourceCaches)if(!t.layers||o[p]){var d=v.rendered(i.sourceCaches[p],i._layers,e,t,n,r,i.collisionIndex);c.push(d)}return this._flattenRenderedFeatures(c)},t.prototype.querySourceFeatures=function(e,t){t&&t.filter&&this._validate(m.filter,"querySourceFeatures.filter",t.filter);var n=this.sourceCaches[e];return n?v.source(n,t):[]},t.prototype.addSourceType=function(e,t,n){return g(e)?n(new Error('A source type called "'+e+'" already exists.')):(y(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},n):n(null,null))},t.prototype.getLight=function(){return this.light.getLight()},t.prototype.setLight=function(e){this._checkLoaded();var t=this.light.getLight(),n=!1;for(var r in e)if(!c.deepEqual(e[r],t[r])){n=!0;break}if(n){var i={now:f.now(),transition:c.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e),this.light.updateTransitions(i)}},t.prototype._validate=function(e,t,n,r,i){return(!i||!1!==i.validate)&&m.emitErrors(this,e.call(m,c.extend({key:t,style:this.serialize(),value:n,styleSpec:b},r)))},t.prototype._remove=function(){var e=this;k.evented.off("pluginAvailable",this._rtlTextPluginCallback);for(var t in e.sourceCaches)e.sourceCaches[t].clearTiles();this.dispatcher.remove()},t.prototype._clearSource=function(e){this.sourceCaches[e].clearTiles()},t.prototype._reloadSource=function(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()},t.prototype._updateSources=function(e){var t=this;for(var n in t.sourceCaches)t.sourceCaches[n].update(e)},t.prototype._generateCollisionBoxes=function(){var e=this;for(var t in e.sourceCaches)e._reloadSource(t)},t.prototype._updatePlacement=function(e,t,n){for(var r=this,i=!1,o=!1,a={},s=0,u=r._order;s<u.length;s+=1){var l=u[s],c=r._layers[l];if("symbol"===c.type){if(!a[c.source]){var p=r.sourceCaches[c.source];a[c.source]=p.getRenderableIds().map(function(e){return p.getTileByID(e)}).sort(function(e,t){return t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)})}var d=r.crossTileSymbolIndex.addLayer(c,a[c.source]);i=i||d}}this.crossTileSymbolIndex.pruneUnusedLayers(this._order);var h=this._layerOrderChanged;if((h||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(f.now()))&&(this.pauseablePlacement=new E(e,this._order,h,t,n),this._layerOrderChanged=!1),this.pauseablePlacement.isDone())this.placement.setStale();else{if(this.pauseablePlacement.continuePlacement(this._order,this._layers,a),this.pauseablePlacement.isDone()){var m=this.pauseablePlacement.placement;o=m.commit(this.placement,f.now()),(!this.placement||o||i)&&(this.placement=m,this.collisionIndex=this.placement.collisionIndex),this.placement.setRecent(f.now(),m.stale)}i&&this.pauseablePlacement.placement.setStale()}if(o||i)for(var g=0,y=r._order;g<y.length;g+=1){var v=y[g],_=r._layers[v];"symbol"===_.type&&r.placement.updateLayerOpacities(_,a[_.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(f.now())},t.prototype.getImages=function(e,t,n){this.imageManager.getImages(t.icons,n)},t.prototype.getGlyphs=function(e,t,n){this.glyphManager.getGlyphs(t.stacks,n)},t}(r);t.exports=A},{"../render/glyph_manager":85,"../render/image_manager":87,"../render/line_atlas":88,"../source/geojson_source":98,"../source/query_features":104,"../source/rtl_text_plugin":108,"../source/source":109,"../source/source_cache":110,"../style-spec/deref":119,"../style-spec/diff":120,"../style-spec/reference/latest":152,"../symbol/cross_tile_symbol_index":219,"../util/ajax":252,"../util/browser":253,"../util/dispatcher":259,"../util/evented":261,"../util/global_worker_pool":263,"../util/mapbox":268,"../util/util":276,"./light":184,"./load_sprite":186,"./pauseable_placement":188,"./style_layer":192,"./validate_style":212,"./zoom_history":213}],192:[function(e,t,n){"use strict";var r=e("../util/util"),i=e("../style-spec/reference/latest"),o=e("./validate_style"),a=e("../util/evented"),s=e("./properties"),u=s.Layout,l=s.Transitionable,c=(s.Transitioning,s.Properties,function(e){function t(t,n){var r=this;e.call(this),this.id=t.id,this.metadata=t.metadata,this.type=t.type,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,this.visibility="visible","background"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),this._featureFilter=function(){return!0},n.layout&&(this._unevaluatedLayout=new u(n.layout)),this._transitionablePaint=new l(n.paint);for(var i in t.paint)r.setPaintProperty(i,t.paint[i],{validate:!1});for(var o in t.layout)r.setLayoutProperty(o,t.layout[o],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getLayoutProperty=function(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)},t.prototype.setLayoutProperty=function(e,t,n){if(null!==t&&void 0!==t){var r="layers."+this.id+".layout."+e;if(this._validate(o.layoutProperty,r,e,t,n))return}if("visibility"===e)return void(this.visibility="none"===t?t:"visible");this._unevaluatedLayout.setValue(e,t)},t.prototype.getPaintProperty=function(e){return r.endsWith(e,"-transition")?this._transitionablePaint.getTransition(e.slice(0,-"-transition".length)):this._transitionablePaint.getValue(e)},t.prototype.setPaintProperty=function(e,t,n){if(null!==t&&void 0!==t){var i="layers."+this.id+".paint."+e;if(this._validate(o.paintProperty,i,e,t,n))return}r.endsWith(e,"-transition")?this._transitionablePaint.setTransition(e.slice(0,-"-transition".length),t||void 0):this._transitionablePaint.setValue(e,t)},t.prototype.isHidden=function(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility},t.prototype.updateTransitions=function(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)},t.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},t.prototype.recalculate=function(e){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e)),this.paint=this._transitioningPaint.possiblyEvaluate(e)},t.prototype.serialize=function(){var e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return"none"===this.visibility&&(e.layout=e.layout||{},e.layout.visibility="none"),r.filterObject(e,function(e,t){return!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length)})},t.prototype._validate=function(e,t,n,r,a){return(!a||!1!==a.validate)&&o.emitErrors(this,e.call(o,{key:t,layerType:this.type,objectKey:n,value:r,styleSpec:i,style:{glyphs:!0,sprite:!0}}))},t.prototype.hasOffscreenPass=function(){return!1},t.prototype.resize=function(){},t}(a));t.exports=c;var p={circle:e("./style_layer/circle_style_layer"),heatmap:e("./style_layer/heatmap_style_layer"),hillshade:e("./style_layer/hillshade_style_layer"),fill:e("./style_layer/fill_style_layer"),"fill-extrusion":e("./style_layer/fill_extrusion_style_layer"),line:e("./style_layer/line_style_layer"),symbol:e("./style_layer/symbol_style_layer"),background:e("./style_layer/background_style_layer"),raster:e("./style_layer/raster_style_layer")};c.create=function(e){return new p[e.type](e)}},{"../style-spec/reference/latest":152,"../util/evented":261,"../util/util":276,"./properties":189,"./style_layer/background_style_layer":193,"./style_layer/circle_style_layer":195,"./style_layer/fill_extrusion_style_layer":197,"./style_layer/fill_style_layer":199,"./style_layer/heatmap_style_layer":201,"./style_layer/hillshade_style_layer":203,"./style_layer/line_style_layer":205,"./style_layer/raster_style_layer":207,"./style_layer/symbol_style_layer":209,"./validate_style":212}],193:[function(e,t,n){"use strict";var r=e("../style_layer"),i=e("./background_style_layer_properties"),o=e("../properties"),a=(o.Transitionable,o.Transitioning,o.PossiblyEvaluated,function(e){function t(t){e.call(this,t,i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(r));t.exports=a},{"../properties":189,"../style_layer":192,"./background_style_layer_properties":194}],194:[function(e,t,n){"use strict";var r=e("../../style-spec/reference/latest"),i=e("../properties"),o=i.Properties,a=i.DataConstantProperty,s=(i.DataDrivenProperty,i.CrossFadedProperty),u=(i.HeatmapColorProperty,new o({"background-color":new a(r.paint_background["background-color"]),"background-pattern":new s(r.paint_background["background-pattern"]),"background-opacity":new a(r.paint_background["background-opacity"])}));t.exports={paint:u}},{"../../style-spec/reference/latest":152,"../properties":189}],195:[function(e,t,n){"use strict";var r=e("../style_layer"),i=e("../../data/bucket/circle_bucket"),o=e("../../util/intersection_tests"),a=o.multiPolygonIntersectsBufferedMultiPoint,s=e("../query_utils"),u=s.getMaximumPaintValue,l=s.translateDistance,c=s.translate,p=e("./circle_style_layer_properties"),d=e("../properties"),f=(d.Transitionable,d.Transitioning,d.PossiblyEvaluated,function(e){function t(t){e.call(this,t,p)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createBucket=function(e){return new i(e)},t.prototype.queryRadius=function(e){var t=e;return u("circle-radius",this,t)+u("circle-stroke-width",this,t)+l(this.paint.get("circle-translate"))},t.prototype.queryIntersectsFeature=function(e,t,n,r,i,o){var s=c(e,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),i,o),u=this.paint.get("circle-radius").evaluate(t)*o,l=this.paint.get("circle-stroke-width").evaluate(t)*o;return a(s,n,u+l)},t}(r));t.exports=f},{"../../data/bucket/circle_bucket":41,"../../util/intersection_tests":265,"../properties":189,"../query_utils":190,"../style_layer":192,"./circle_style_layer_properties":196}],196:[function(e,t,n){"use strict";var r=e("../../style-spec/reference/latest"),i=e("../properties"),o=i.Properties,a=i.DataConstantProperty,s=i.DataDrivenProperty,u=(i.CrossFadedProperty,i.HeatmapColorProperty,new o({"circle-radius":new s(r.paint_circle["circle-radius"]),"circle-color":new s(r.paint_circle["circle-color"]),"circle-blur":new s(r.paint_circle["circle-blur"]),"circle-opacity":new s(r.paint_circle["circle-opacity"]),"circle-translate":new a(r.paint_circle["circle-translate"]),"circle-translate-anchor":new a(r.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new a(r.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new a(r.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new s(r.paint_circle["circle-stroke-width"]),"circle-stroke-color":new s(r.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new s(r.paint_circle["circle-stroke-opacity"])}));t.exports={paint:u}},{"../../style-spec/reference/latest":152,"../properties":189}],197:[function(e,t,n){"use strict";var r=e("../style_layer"),i=e("../../data/bucket/fill_extrusion_bucket"),o=e("../../util/intersection_tests"),a=o.multiPolygonIntersectsMultiPolygon,s=e("../query_utils"),u=s.translateDistance,l=s.translate,c=e("./fill_extrusion_style_layer_properties"),p=e("../properties"),d=(p.Transitionable,p.Transitioning,p.PossiblyEvaluated,function(e){function t(t){e.call(this,t,c)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createBucket=function(e){return new i(e)},t.prototype.queryRadius=function(){return u(this.paint.get("fill-extrusion-translate"))},t.prototype.queryIntersectsFeature=function(e,t,n,r,i,o){var s=l(e,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),i,o);return a(s,n)},t.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("fill-extrusion-opacity")&&"none"!==this.visibility},t.prototype.resize=function(){this.viewportFrame&&(this.viewportFrame.destroy(),this.viewportFrame=null)},t}(r));t.exports=d},{"../../data/bucket/fill_extrusion_bucket":45,"../../util/intersection_tests":265,"../properties":189,"../query_utils":190,"../style_layer":192,"./fill_extrusion_style_layer_properties":198}],198:[function(e,t,n){"use strict";var r=e("../../style-spec/reference/latest"),i=e("../properties"),o=i.Properties,a=i.DataConstantProperty,s=i.DataDrivenProperty,u=i.CrossFadedProperty,l=(i.HeatmapColorProperty,new o({"fill-extrusion-opacity":new a(r["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new s(r["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new a(r["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new a(r["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new u(r["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new s(r["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new s(r["paint_fill-extrusion"]["fill-extrusion-base"])}));t.exports={paint:l}},{"../../style-spec/reference/latest":152,"../properties":189}],199:[function(e,t,n){"use strict";var r=e("../style_layer"),i=e("../../data/bucket/fill_bucket"),o=e("../../util/intersection_tests"),a=o.multiPolygonIntersectsMultiPolygon,s=e("../query_utils"),u=s.translateDistance,l=s.translate,c=e("./fill_style_layer_properties"),p=e("../properties"),d=(p.Transitionable,p.Transitioning,p.PossiblyEvaluated,function(e){function t(t){e.call(this,t,c)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.recalculate=function(e){this.paint=this._transitioningPaint.possiblyEvaluate(e),void 0===this._transitionablePaint.getValue("fill-outline-color")&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},t.prototype.createBucket=function(e){return new i(e)},t.prototype.queryRadius=function(){return u(this.paint.get("fill-translate"))},t.prototype.queryIntersectsFeature=function(e,t,n,r,i,o){var s=l(e,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),i,o);return a(s,n)},t}(r));t.exports=d},{"../../data/bucket/fill_bucket":43,"../../util/intersection_tests":265,"../properties":189,"../query_utils":190,"../style_layer":192,"./fill_style_layer_properties":200}],200:[function(e,t,n){"use strict";var r=e("../../style-spec/reference/latest"),i=e("../properties"),o=i.Properties,a=i.DataConstantProperty,s=i.DataDrivenProperty,u=i.CrossFadedProperty,l=(i.HeatmapColorProperty,new o({"fill-antialias":new a(r.paint_fill["fill-antialias"]),"fill-opacity":new s(r.paint_fill["fill-opacity"]),"fill-color":new s(r.paint_fill["fill-color"]),"fill-outline-color":new s(r.paint_fill["fill-outline-color"]),"fill-translate":new a(r.paint_fill["fill-translate"]),"fill-translate-anchor":new a(r.paint_fill["fill-translate-anchor"]),"fill-pattern":new u(r.paint_fill["fill-pattern"])}));t.exports={paint:l}},{"../../style-spec/reference/latest":152,"../properties":189}],201:[function(e,t,n){"use strict";var r=e("../style_layer"),i=e("../../data/bucket/heatmap_bucket"),o=e("../../util/image").RGBAImage,a=e("./heatmap_style_layer_properties"),s=e("../properties"),u=(s.Transitionable,s.Transitioning,s.PossiblyEvaluated,function(e){function t(t){e.call(this,t,a),this._updateColorRamp()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createBucket=function(e){return new i(e)},t.prototype.setPaintProperty=function(t,n,r){e.prototype.setPaintProperty.call(this,t,n,r),"heatmap-color"===t&&this._updateColorRamp()},t.prototype._updateColorRamp=function(){for(var e=this._transitionablePaint._values["heatmap-color"].value.expression,t=new Uint8Array(1024),n=t.length,r=4;r<n;r+=4){var i=e.evaluate({heatmapDensity:r/n});t[r+0]=Math.floor(255*i.r/i.a),t[r+1]=Math.floor(255*i.g/i.a),t[r+2]=Math.floor(255*i.b/i.a),t[r+3]=Math.floor(255*i.a)}this.colorRamp=new o({width:256,height:1},t),this.colorRampTexture=null},t.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},t}(r));t.exports=u},{"../../data/bucket/heatmap_bucket":46,"../../util/image":264,"../properties":189,"../style_layer":192,"./heatmap_style_layer_properties":202}],202:[function(e,t,n){"use strict";var r=e("../../style-spec/reference/latest"),i=e("../properties"),o=i.Properties,a=i.DataConstantProperty,s=i.DataDrivenProperty,u=(i.CrossFadedProperty,i.HeatmapColorProperty),l=new o({"heatmap-radius":new s(r.paint_heatmap["heatmap-radius"]),"heatmap-weight":new s(r.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new a(r.paint_heatmap["heatmap-intensity"]),"heatmap-color":new u(r.paint_heatmap["heatmap-color"]),"heatmap-opacity":new a(r.paint_heatmap["heatmap-opacity"])});t.exports={paint:l}},{"../../style-spec/reference/latest":152,"../properties":189}],203:[function(e,t,n){"use strict";var r=e("../style_layer"),i=e("./hillshade_style_layer_properties"),o=e("../properties"),a=(o.Transitionable,o.Transitioning,o.PossiblyEvaluated,function(e){function t(t){e.call(this,t,i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},t}(r));t.exports=a},{"../properties":189,"../style_layer":192,"./hillshade_style_layer_properties":204}],204:[function(e,t,n){"use strict";var r=e("../../style-spec/reference/latest"),i=e("../properties"),o=i.Properties,a=i.DataConstantProperty,s=(i.DataDrivenProperty,i.CrossFadedProperty,i.HeatmapColorProperty,new o({"hillshade-illumination-direction":new a(r.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new a(r.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new a(r.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new a(r.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new a(r.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new a(r.paint_hillshade["hillshade-accent-color"])}));t.exports={paint:s}},{"../../style-spec/reference/latest":152,"../properties":189}],205:[function(e,t,n){"use strict";function r(e,t){return t>0?t+2*e:e}function i(e,t){for(var n=[],r=new o(0,0),i=0;i<e.length;i++){for(var a=e[i],s=[],u=0;u<a.length;u++){var l=a[u-1],c=a[u],p=a[u+1],d=0===u?r:c.sub(l)._unit()._perp(),f=u===a.length-1?r:p.sub(c)._unit()._perp(),h=d._add(f)._unit(),m=h.x*f.x+h.y*f.y;h._mult(1/m),s.push(h._mult(t)._add(c))}n.push(s)}return n}var o=e("@mapbox/point-geometry"),a=e("../style_layer"),s=e("../../data/bucket/line_bucket"),u=e("../../util/intersection_tests"),l=u.multiPolygonIntersectsBufferedMultiLine,c=e("../query_utils"),p=c.getMaximumPaintValue,d=c.translateDistance,f=c.translate,h=e("./line_style_layer_properties"),m=e("../../util/util"),g=m.extend,y=e("../evaluation_parameters"),v=e("../properties"),_=(v.Transitionable,v.Transitioning,v.Layout,v.PossiblyEvaluated,v.DataDrivenProperty),b=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.possiblyEvaluate=function(t,n){return n=new y(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),e.prototype.possiblyEvaluate.call(this,t,n)},t.prototype.evaluate=function(t,n,r){return n=g({},n,{zoom:Math.floor(n.zoom)}),e.prototype.evaluate.call(this,t,n,r)},t}(_),x=new b(h.paint.properties["line-width"].specification);x.useIntegerZoom=!0;var w=function(e){function t(t){e.call(this,t,h)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.recalculate=function(t){e.prototype.recalculate.call(this,t),this.paint._values["line-floorwidth"]=x.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)},t.prototype.createBucket=function(e){return new s(e)},t.prototype.queryRadius=function(e){var t=e,n=r(p("line-width",this,t),p("line-gap-width",this,t)),i=p("line-offset",this,t);return n/2+Math.abs(i)+d(this.paint.get("line-translate"))},t.prototype.queryIntersectsFeature=function(e,t,n,o,a,s){var u=f(e,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a,s),c=s/2*r(this.paint.get("line-width").evaluate(t),this.paint.get("line-gap-width").evaluate(t)),p=this.paint.get("line-offset").evaluate(t);return p&&(n=i(n,p*s)),l(u,n,c)},t}(a);t.exports=w},{"../../data/bucket/line_bucket":48,"../../util/intersection_tests":265,"../../util/util":276,"../evaluation_parameters":183,"../properties":189,"../query_utils":190,"../style_layer":192,"./line_style_layer_properties":206,"@mapbox/point-geometry":4}],206:[function(e,t,n){"use strict";var r=e("../../style-spec/reference/latest"),i=e("../properties"),o=i.Properties,a=i.DataConstantProperty,s=i.DataDrivenProperty,u=i.CrossFadedProperty,l=(i.HeatmapColorProperty,new o({"line-cap":new a(r.layout_line["line-cap"]),"line-join":new s(r.layout_line["line-join"]),"line-miter-limit":new a(r.layout_line["line-miter-limit"]),"line-round-limit":new a(r.layout_line["line-round-limit"])})),c=new o({"line-opacity":new s(r.paint_line["line-opacity"]),"line-color":new s(r.paint_line["line-color"]),"line-translate":new a(r.paint_line["line-translate"]),"line-translate-anchor":new a(r.paint_line["line-translate-anchor"]),"line-width":new s(r.paint_line["line-width"]),"line-gap-width":new s(r.paint_line["line-gap-width"]),"line-offset":new s(r.paint_line["line-offset"]),"line-blur":new s(r.paint_line["line-blur"]),"line-dasharray":new u(r.paint_line["line-dasharray"]),"line-pattern":new u(r.paint_line["line-pattern"])});t.exports={paint:c,layout:l}},{"../../style-spec/reference/latest":152,"../properties":189}],207:[function(e,t,n){"use strict";var r=e("../style_layer"),i=e("./raster_style_layer_properties"),o=e("../properties"),a=(o.Transitionable,o.Transitioning,o.PossiblyEvaluated,function(e){function t(t){e.call(this,t,i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(r));t.exports=a},{"../properties":189,"../style_layer":192,"./raster_style_layer_properties":208}],208:[function(e,t,n){"use strict";var r=e("../../style-spec/reference/latest"),i=e("../properties"),o=i.Properties,a=i.DataConstantProperty,s=(i.DataDrivenProperty,i.CrossFadedProperty,i.HeatmapColorProperty,new o({"raster-opacity":new a(r.paint_raster["raster-opacity"]),"raster-hue-rotate":new a(r.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new a(r.paint_raster["raster-brightness-min"]),"raster-brightness-max":new a(r.paint_raster["raster-brightness-max"]),"raster-saturation":new a(r.paint_raster["raster-saturation"]),"raster-contrast":new a(r.paint_raster["raster-contrast"]),"raster-fade-duration":new a(r.paint_raster["raster-fade-duration"])}));t.exports={paint:s}},{"../../style-spec/reference/latest":152,"../properties":189}],209:[function(e,t,n){"use strict";var r=e("../style_layer"),i=e("../../data/bucket/symbol_bucket"),o=e("../../util/token"),a=e("../../style-spec/expression"),s=a.isExpression,u=e("./symbol_style_layer_properties"),l=e("../properties"),c=(l.Transitionable,l.Transitioning,l.Layout,l.PossiblyEvaluated,function(e){function t(t){e.call(this,t,u)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.recalculate=function(t){e.prototype.recalculate.call(this,t),"auto"===this.layout.get("icon-rotation-alignment")&&("line"===this.layout.get("symbol-placement")?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-rotation-alignment")&&("line"===this.layout.get("symbol-placement")?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"))},t.prototype.getValueAndResolveTokens=function(e,t){var n=this.layout.get(e).evaluate(t),r=this._unevaluatedLayout._values[e];return r.isDataDriven()||s(r.value)?n:o(t.properties,n)},t.prototype.createBucket=function(e){return new i(e)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t}(r));t.exports=c},{"../../data/bucket/symbol_bucket":50,"../../style-spec/expression":138,"../../util/token":275,"../properties":189,"../style_layer":192,"./symbol_style_layer_properties":210}],210:[function(e,t,n){"use strict";var r=e("../../style-spec/reference/latest"),i=e("../properties"),o=i.Properties,a=i.DataConstantProperty,s=i.DataDrivenProperty,u=(i.CrossFadedProperty,i.HeatmapColorProperty,new o({"symbol-placement":new a(r.layout_symbol["symbol-placement"]),"symbol-spacing":new a(r.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new a(r.layout_symbol["symbol-avoid-edges"]),"icon-allow-overlap":new a(r.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new a(r.layout_symbol["icon-ignore-placement"]),"icon-optional":new a(r.layout_symbol["icon-optional"]),"icon-rotation-alignment":new a(r.layout_symbol["icon-rotation-alignment"]),"icon-size":new s(r.layout_symbol["icon-size"]),"icon-text-fit":new a(r.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new a(r.layout_symbol["icon-text-fit-padding"]),"icon-image":new s(r.layout_symbol["icon-image"]),"icon-rotate":new s(r.layout_symbol["icon-rotate"]),"icon-padding":new a(r.layout_symbol["icon-padding"]),"icon-keep-upright":new a(r.layout_symbol["icon-keep-upright"]),"icon-offset":new s(r.layout_symbol["icon-offset"]),"icon-anchor":new s(r.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new a(r.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new a(r.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new a(r.layout_symbol["text-rotation-alignment"]),"text-field":new s(r.layout_symbol["text-field"]),"text-font":new s(r.layout_symbol["text-font"]),"text-size":new s(r.layout_symbol["text-size"]),"text-max-width":new s(r.layout_symbol["text-max-width"]),"text-line-height":new a(r.layout_symbol["text-line-height"]),"text-letter-spacing":new s(r.layout_symbol["text-letter-spacing"]),"text-justify":new s(r.layout_symbol["text-justify"]),"text-anchor":new s(r.layout_symbol["text-anchor"]),"text-max-angle":new a(r.layout_symbol["text-max-angle"]),"text-rotate":new s(r.layout_symbol["text-rotate"]),"text-padding":new a(r.layout_symbol["text-padding"]),"text-keep-upright":new a(r.layout_symbol["text-keep-upright"]),"text-transform":new s(r.layout_symbol["text-transform"]),"text-offset":new s(r.layout_symbol["text-offset"]),"text-allow-overlap":new a(r.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new a(r.layout_symbol["text-ignore-placement"]),"text-optional":new a(r.layout_symbol["text-optional"])})),l=new o({"icon-opacity":new s(r.paint_symbol["icon-opacity"]),"icon-color":new s(r.paint_symbol["icon-color"]),"icon-halo-color":new s(r.paint_symbol["icon-halo-color"]),"icon-halo-width":new s(r.paint_symbol["icon-halo-width"]),"icon-halo-blur":new s(r.paint_symbol["icon-halo-blur"]),"icon-translate":new a(r.paint_symbol["icon-translate"]),"icon-translate-anchor":new a(r.paint_symbol["icon-translate-anchor"]),"text-opacity":new s(r.paint_symbol["text-opacity"]),"text-color":new s(r.paint_symbol["text-color"]),"text-halo-color":new s(r.paint_symbol["text-halo-color"]),"text-halo-width":new s(r.paint_symbol["text-halo-width"]),"text-halo-blur":new s(r.paint_symbol["text-halo-blur"]),"text-translate":new a(r.paint_symbol["text-translate"]),"text-translate-anchor":new a(r.paint_symbol["text-translate-anchor"])});t.exports={paint:l,layout:u}},{"../../style-spec/reference/latest":152,"../properties":189}],211:[function(e,t,n){"use strict";var r=e("./style_layer"),i=e("../util/util"),o=e("../style-spec/feature_filter"),a=e("../style-spec/group_by_layout"),s=function(e){e&&this.replace(e)};s.prototype.replace=function(e){this._layerConfigs={},this._layers={},this.update(e,[])},s.prototype.update=function(e,t){for(var n=this,s=0,u=e;s<u.length;s+=1){var l=u[s];n._layerConfigs[l.id]=l;var c=n._layers[l.id]=r.create(l);c._featureFilter=o(c.filter)}for(var p=0,d=t;p<d.length;p+=1){var f=d[p];delete n._layerConfigs[f],delete n._layers[f]}this.familiesBySource={};for(var h=a(i.values(this._layerConfigs)),m=0,g=h;m<g.length;m+=1){var y=g[m],v=y.map(function(e){return n._layers[e.id]}),_=v[0];if("none"!==_.visibility){var b=_.source||"",x=n.familiesBySource[b];x||(x=n.familiesBySource[b]={});var w=_.sourceLayer||"_geojsonTileLayer",S=x[w];S||(S=x[w]=[]),S.push(v)}}},t.exports=s},{"../style-spec/feature_filter":147,"../style-spec/group_by_layout":149,"../util/util":276,"./style_layer":192}],212:[function(e,t,n){"use strict";t.exports=e("../style-spec/validate_style.min"),t.exports.emitErrors=function(e,t){if(t&&t.length){for(var n=0,r=t;n<r.length;n+=1){var i=r[n],o=i.message;e.fire("error",{error:new Error(o)})}return!0}return!1}},{"../style-spec/validate_style.min":182}],213:[function(e,t,n){"use strict";var r=function(){this.first=!0};r.prototype.update=function(e,t){var n=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=n,!0))},t.exports=r},{}],214:[function(e,t,n){"use strict";var r=e("@mapbox/point-geometry"),i=e("../util/web_worker_transfer"),o=i.register,a=function(e){function t(t,n,r,i){e.call(this,t,n),this.angle=r,void 0!==i&&(this.segment=i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.clone=function(){return new t(this.x,this.y,this.angle,this.segment)},t}(r);o("Anchor",a),t.exports=a},{"../util/web_worker_transfer":279,"@mapbox/point-geometry":4}],215:[function(e,t,n){"use strict";function r(e,t,n,r,i){if(void 0===t.segment)return!0;for(var o=t,a=t.segment+1,s=0;s>-n/2;){if(--a<0)return!1;s-=e[a].dist(o),o=e[a]}s+=e[a].dist(e[a+1]),a++;for(var u=[],l=0;s<n/2;){var c=e[a-1],p=e[a],d=e[a+1];if(!d)return!1;var f=c.angleTo(p)-p.angleTo(d);for(f=Math.abs((f+3*Math.PI)%(2*Math.PI)-Math.PI),u.push({distance:s,angleDelta:f}),l+=f;s-u[0].distance>r;)l-=u.shift().angleDelta;if(l>i)return!1;a++,s+=p.dist(d)}return!0}t.exports=r},{}],216:[function(e,t,n){"use strict";function r(e,t,n,r,o){for(var a=[],s=0;s<e.length;s++)for(var u=e[s],l=void 0,c=0;c<u.length-1;c++){var p=u[c],d=u[c+1];p.x<t&&d.x<t||(p.x<t?p=new i(t,p.y+(d.y-p.y)*((t-p.x)/(d.x-p.x)))._round():d.x<t&&(d=new i(t,p.y+(d.y-p.y)*((t-p.x)/(d.x-p.x)))._round()),p.y<n&&d.y<n||(p.y<n?p=new i(p.x+(d.x-p.x)*((n-p.y)/(d.y-p.y)),n)._round():d.y<n&&(d=new i(p.x+(d.x-p.x)*((n-p.y)/(d.y-p.y)),n)._round()),p.x>=r&&d.x>=r||(p.x>=r?p=new i(r,p.y+(d.y-p.y)*((r-p.x)/(d.x-p.x)))._round():d.x>=r&&(d=new i(r,p.y+(d.y-p.y)*((r-p.x)/(d.x-p.x)))._round()),p.y>=o&&d.y>=o||(p.y>=o?p=new i(p.x+(d.x-p.x)*((o-p.y)/(d.y-p.y)),o)._round():d.y>=o&&(d=new i(p.x+(d.x-p.x)*((o-p.y)/(d.y-p.y)),o)._round()),l&&p.equals(l[l.length-1])||(l=[p],a.push(l)),l.push(d)))))}return a}var i=e("@mapbox/point-geometry");t.exports=r},{"@mapbox/point-geometry":4}],217:[function(e,t,n){"use strict";var r=function(e,t,n,r,i,o,a,s,u,l,c){var p=a.top*s-u,d=a.bottom*s+u,f=a.left*s-u,h=a.right*s+u;if(this.boxStartIndex=e.length,l){var m=d-p,g=h-f;m>0&&(m=Math.max(10*s,m),this._addLineCollisionCircles(e,t,n,n.segment,g,m,r,i,o,c))}else e.emplaceBack(n.x,n.y,f,p,h,d,r,i,o,0,0);this.boxEndIndex=e.length};r.prototype._addLineCollisionCircles=function(e,t,n,r,i,o,a,s,u,l){var c=o/2,p=Math.floor(i/c),d=1+.4*Math.log(l)/Math.LN2,f=Math.floor(p*d/2),h=-o/2,m=n,g=r+1,y=h,v=-i/2,_=v-i/4;do{if(--g<0){if(y>v)return;g=0;break}y-=t[g].dist(m),m=t[g]}while(y>_);for(var b=t[g].dist(t[g+1]),x=-f;x<p+f;x++){var w=x*c,S=v+w;if(w<0&&(S+=w),w>i&&(S+=w-i),!(S<y)){for(;y+b<S;){if(y+=b,++g+1>=t.length)return;b=t[g].dist(t[g+1])}var k=S-y,E=t[g],T=t[g+1],M=T.sub(E)._unit()._mult(k)._add(E)._round(),C=Math.abs(S-h)<c?0:.8*(S-h);e.emplaceBack(M.x,M.y,-o/2,-o/2,o/2,o/2,a,s,u,o/2,C)}}},t.exports=r},{}],218:[function(e,t,n){"use strict";function r(e,t,n){e[t+4]=n?1:0}var i=e("@mapbox/point-geometry"),o=e("../util/intersection_tests"),a=e("./grid_index"),s=e("@mapbox/gl-matrix"),u=(s.mat4,e("../symbol/projection")),l=function(e,t,n){void 0===t&&(t=new a(e.width+200,e.height+200,25)),void 0===n&&(n=new a(e.width+200,e.height+200,25)),this.transform=e,this.grid=t,this.ignoredGrid=n,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+100,this.screenBottomBoundary=e.height+100};l.prototype.placeCollisionBox=function(e,t,n,r){var i=this.projectAndGetPerspectiveRatio(r,e.anchorPointX,e.anchorPointY),o=n*i.perspectiveRatio,a=e.x1*o+i.point.x,s=e.y1*o+i.point.y,u=e.x2*o+i.point.x,l=e.y2*o+i.point.y;return!t&&this.grid.hitTest(a,s,u,l)?{box:[],offscreen:!1}:{box:[a,s,u,l],offscreen:this.isOffscreen(a,s,u,l)}},l.prototype.approximateTileDistance=function(e,t,n,r,i){var o=i?1:r/this.pitchfactor,a=e.lastSegmentViewportDistance*n;return e.prevTileDistance+a+(o-1)*a*Math.abs(Math.sin(t))},l.prototype.placeCollisionCircles=function(e,t,n,o,a,s,l,c,p,d,f,h,m){var g=this,y=[],v=this.projectAnchor(d,s.anchorX,s.anchorY),_={},b=p/24,x=s.lineOffsetX*p,w=s.lineOffsetY*p,S=new i(s.anchorX,s.anchorY),k=u.project(S,f).point,E=u.placeFirstAndLastGlyph(b,c,x,w,!1,k,S,s,l,f,_,!0),T=!1,M=!0,C=v.perspectiveRatio*o,O=1/(o*n),A=0,P=0;E&&(A=this.approximateTileDistance(E.first.tileDistance,E.first.angle,O,v.cameraDistance,m),P=this.approximateTileDistance(E.last.tileDistance,E.last.angle,O,v.cameraDistance,m));for(var R=0;R<e.length;R+=5){var D=e[R],I=e[R+1],N=e[R+2],L=e[R+3];if(!E||L<-A||L>P)r(e,R,!1);else{var z=g.projectPoint(d,D,I),j=N*C;if(y.length>0){var H=z.x-y[y.length-4],B=z.y-y[y.length-3];if(j*j*2>H*H+B*B&&R+8<e.length){var F=e[R+8];if(F>-A&&F<P){r(e,R,!1);continue}}}var U=R/5;if(y.push(z.x,z.y,j,U),r(e,R,!0),M=M&&g.isOffscreen(z.x-j,z.y-j,z.x+j,z.y+j),!t&&g.grid.hitTestCircle(z.x,z.y,j)){if(!h)return{circles:[],offscreen:!1};T=!0}}}return{circles:T?[]:y,offscreen:M}},l.prototype.queryRenderedSymbols=function(e,t,n,r,a,s){var u=this,l={},c=[];if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return c;for(var p=this.transform.calculatePosMatrix(t.toUnwrapped()),d=[],f=1/0,h=1/0,m=-1/0,g=-1/0,y=0;y<e.length;y++)for(var v=e[y],_=0;_<v.length;_++){var b=u.projectPoint(p,v[_].x,v[_].y);f=Math.min(f,b.x),h=Math.min(h,b.y),m=Math.max(m,b.x),g=Math.max(g,b.y),d.push(b)}for(var x=t.key,w=[],S=this.grid.query(f,h,m,g),k=0;k<S.length;k++)S[k].sourceID===a&&S[k].tileID===x&&s[S[k].bucketInstanceId]&&w.push(S[k].boxIndex);for(var E=this.ignoredGrid.query(f,h,m,g),T=0;T<E.length;T++)E[T].sourceID===a&&E[T].tileID===x&&s[E[T].bucketInstanceId]&&w.push(E[T].boxIndex);for(var M=0;M<w.length;M++){var C=r.get(w[M]),O=C.sourceLayerIndex,A=C.featureIndex,P=C.bucketIndex;if(void 0===l[O]&&(l[O]={}),void 0===l[O][A]&&(l[O][A]={}),!l[O][A][P]){var R=u.projectAndGetPerspectiveRatio(p,C.anchorPointX,C.anchorPointY),D=n*R.perspectiveRatio,I=C.x1*D+R.point.x,N=C.y1*D+R.point.y,L=C.x2*D+R.point.x,z=C.y2*D+R.point.y,j=[new i(I,N),new i(L,N),new i(L,z),new i(I,z)];o.polygonIntersectsPolygon(d,j)&&(l[O][A][P]=!0,c.push(w[M]))}}return c},l.prototype.insertCollisionBox=function(e,t,n,r,i,o){var a=t?this.ignoredGrid:this.grid,s={tileID:n,sourceID:r,bucketInstanceId:i,boxIndex:o};a.insert(s,e[0],e[1],e[2],e[3])},l.prototype.insertCollisionCircles=function(e,t,n,r,i,o){for(var a=t?this.ignoredGrid:this.grid,s=0;s<e.length;s+=4){var u={tileID:n,sourceID:r,bucketInstanceId:i,boxIndex:o+e[s+3]};a.insertCircle(u,e[s],e[s+1],e[s+2])}},l.prototype.projectAnchor=function(e,t,n){var r=[t,n,0,1];return u.xyTransformMat4(r,r,e),{perspectiveRatio:.5+this.transform.cameraToCenterDistance/r[3]*.5,cameraDistance:r[3]}},l.prototype.projectPoint=function(e,t,n){var r=[t,n,0,1];return u.xyTransformMat4(r,r,e),new i((r[0]/r[3]+1)/2*this.transform.width+100,(-r[1]/r[3]+1)/2*this.transform.height+100)},l.prototype.projectAndGetPerspectiveRatio=function(e,t,n){var r=[t,n,0,1];return u.xyTransformMat4(r,r,e),{point:new i((r[0]/r[3]+1)/2*this.transform.width+100,(-r[1]/r[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/r[3]*.5}},l.prototype.isOffscreen=function(e,t,n,r){return n<100||e>=this.screenRightBoundary||r<100||t>this.screenBottomBoundary},t.exports=l},{"../symbol/projection":225,"../util/intersection_tests":265,"./grid_index":221,"@mapbox/gl-matrix":2,"@mapbox/point-geometry":4}],219:[function(e,t,n){"use strict";var r=e("../data/extent"),i=512/r/2,o=function(e,t,n){var r=this;this.tileID=e,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(var i=0,o=t;i<o.length;i+=1){var a=o[i],s=a.key;r.indexedSymbolInstances[s]||(r.indexedSymbolInstances[s]=[]),r.indexedSymbolInstances[s].push({crossTileID:a.crossTileID,coord:r.getScaledCoordinates(a,e)})}};o.prototype.getScaledCoordinates=function(e,t){var n=t.canonical.z-this.tileID.canonical.z,o=i/Math.pow(2,n),a=e.anchor;return{x:Math.floor((t.canonical.x*r+a.x)*o),y:Math.floor((t.canonical.y*r+a.y)*o)}},o.prototype.findMatches=function(e,t,n){for(var r=this,i=this.tileID.canonical.z<t.canonical.z?1:Math.pow(2,this.tileID.canonical.z-t.canonical.z),o=0,a=e;o<a.length;o+=1){var s=a[o];if(!s.crossTileID){var u=r.indexedSymbolInstances[s.key];if(u)for(var l=r.getScaledCoordinates(s,t),c=0,p=u;c<p.length;c+=1){var d=p[c];if(Math.abs(d.coord.x-l.x)<=i&&Math.abs(d.coord.y-l.y)<=i&&!n[d.crossTileID]){n[d.crossTileID]=!0,s.crossTileID=d.crossTileID;break}}}}};var a=function(){this.maxCrossTileID=0};a.prototype.generate=function(){return++this.maxCrossTileID};var s=function(){this.indexes={},this.usedCrossTileIDs={}};s.prototype.addBucket=function(e,t,n){var r=this;if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(var i=0,a=t.symbolInstances;i<a.length;i+=1)a[i].crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});var s=this.usedCrossTileIDs[e.overscaledZ];for(var u in r.indexes){var l=r.indexes[u];if(Number(u)>e.overscaledZ)for(var c in l){var p=l[c];p.tileID.isChildOf(e)&&p.findMatches(t.symbolInstances,e,s)}else{var d=e.scaledTo(Number(u)),f=l[d.key];f&&f.findMatches(t.symbolInstances,e,s)}}for(var h=0,m=t.symbolInstances;h<m.length;h+=1){var g=m[h];g.crossTileID||(g.crossTileID=n.generate(),s[g.crossTileID]=!0)}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new o(e,t.symbolInstances,t.bucketInstanceId),!0},s.prototype.removeBucketCrossTileIDs=function(e,t){var n=this;for(var r in t.indexedSymbolInstances)for(var i=0,o=t.indexedSymbolInstances[r];i<o.length;i+=1){var a=o[i];delete n.usedCrossTileIDs[e][a.crossTileID]}},s.prototype.removeStaleBuckets=function(e){var t=this,n=!1;for(var r in t.indexes){var i=t.indexes[r];for(var o in i)e[i[o].bucketInstanceId]||(t.removeBucketCrossTileIDs(r,i[o]),delete i[o],n=!0)}return n};var u=function(){this.layerIndexes={},this.crossTileIDs=new a,this.maxBucketInstanceId=0};u.prototype.addLayer=function(e,t){var n=this,r=this.layerIndexes[e.id];void 0===r&&(r=this.layerIndexes[e.id]=new s);for(var i=!1,o={},a=0,u=t;a<u.length;a+=1){var l=u[a],c=l.getBucket(e);c&&(c.bucketInstanceId||(c.bucketInstanceId=++n.maxBucketInstanceId),r.addBucket(l.tileID,c,n.crossTileIDs)&&(i=!0),o[c.bucketInstanceId]=!0)}return r.removeStaleBuckets(o)&&(i=!0),i},u.prototype.pruneUnusedLayers=function(e){var t=this,n={};e.forEach(function(e){n[e]=!0});for(var r in t.layerIndexes)n[r]||delete t.layerIndexes[r]},t.exports=u},{"../data/extent":52}],220:[function(e,t,n){"use strict";function r(e,t,n,r,o,a,s,u,l){var c=r?.6*a*s:0,p=Math.max(r?r.right-r.left:0,o?o.right-o.left:0),d=0===e[0].x||e[0].x===l||0===e[0].y||e[0].y===l;t-p*s<t/4&&(t=p*s+t/4);var f=2*a;return i(e,d?t/2*u%t:(p/2+f)*s*u%t,t,c,n,p*s,d,!1,l)}function i(e,t,n,r,u,l,c,p,d){for(var f=l/2,h=0,m=0;m<e.length-1;m++)h+=e[m].dist(e[m+1]);for(var g=0,y=t-n,v=[],_=0;_<e.length-1;_++){for(var b=e[_],x=e[_+1],w=b.dist(x),S=x.angleTo(b);y+n<g+w;){y+=n;var k=(y-g)/w,E=o(b.x,x.x,k),T=o(b.y,x.y,k);if(E>=0&&E<d&&T>=0&&T<d&&y-f>=0&&y+f<=h){var M=new a(E,T,S,_);M._round(),r&&!s(e,M,l,r,u)||v.push(M)}}g+=w}return p||v.length||c||(v=i(e,g/2,n,r,u,l,c,!0,d)),v}var o=e("../style-spec/util/interpolate").number,a=e("../symbol/anchor"),s=e("./check_max_angle");t.exports=r},{"../style-spec/util/interpolate":159,"../symbol/anchor":214,"./check_max_angle":215}],221:[function(e,t,n){"use strict";var r=function(e,t,n){var r=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(e/n),this.yCellCount=Math.ceil(t/n);for(var o=0;o<this.xCellCount*this.yCellCount;o++)r.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0};r.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},r.prototype.insert=function(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},r.prototype.insertCircle=function(e,t,n,r){this._forEachCell(t-r,n-r,t+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(n),this.circles.push(r)},r.prototype._insertBoxCell=function(e,t,n,r,i,o){this.boxCells[i].push(o)},r.prototype._insertCircleCell=function(e,t,n,r,i,o){this.circleCells[i].push(o)},r.prototype._query=function(e,t,n,r,i){if(n<0||e>this.width||r<0||t>this.height)return!i&&[];var o=[];if(e<=0&&t<=0&&this.width<=n&&this.height<=r)o=Array.prototype.slice.call(this.boxKeys).concat(this.circleKeys);else{var a={hitTest:i,seenUids:{box:{},circle:{}}};this._forEachCell(e,t,n,r,this._queryCell,o,a)}return i?o.length>0:o},r.prototype._queryCircle=function(e,t,n,r){var i=e-n,o=e+n,a=t-n,s=t+n;if(o<0||i>this.width||s<0||a>this.height)return!r&&[];var u=[],l={hitTest:r,circle:{x:e,y:t,radius:n},seenUids:{box:{},circle:{}}};return this._forEachCell(i,a,o,s,this._queryCellCircle,u,l),r?u.length>0:u},r.prototype.query=function(e,t,n,r){return this._query(e,t,n,r,!1)},r.prototype.hitTest=function(e,t,n,r){return this._query(e,t,n,r,!0)},r.prototype.hitTestCircle=function(e,t,n){return this._queryCircle(e,t,n,!0)},r.prototype._queryCell=function(e,t,n,r,i,o,a){var s=this,u=a.seenUids,l=this.boxCells[i];if(null!==l)for(var c=this.bboxes,p=0,d=l;p<d.length;p+=1){var f=d[p];if(!u.box[f]){u.box[f]=!0;var h=4*f;if(e<=c[h+2]&&t<=c[h+3]&&n>=c[h+0]&&r>=c[h+1]){if(a.hitTest)return o.push(!0),!0;o.push(s.boxKeys[f])}}}var m=this.circleCells[i];if(null!==m)for(var g=this.circles,y=0,v=m;y<v.length;y+=1){var _=v[y];if(!u.circle[_]){u.circle[_]=!0;var b=3*_;if(s._circleAndRectCollide(g[b],g[b+1],g[b+2],e,t,n,r)){if(a.hitTest)return o.push(!0),!0;o.push(s.circleKeys[_])}}}},r.prototype._queryCellCircle=function(e,t,n,r,i,o,a){var s=this,u=a.circle,l=a.seenUids,c=this.boxCells[i];if(null!==c)for(var p=this.bboxes,d=0,f=c;d<f.length;d+=1){var h=f[d];if(!l.box[h]){l.box[h]=!0;var m=4*h;if(s._circleAndRectCollide(u.x,u.y,u.radius,p[m+0],p[m+1],p[m+2],p[m+3]))return o.push(!0),!0}}var g=this.circleCells[i];if(null!==g)for(var y=this.circles,v=0,_=g;v<_.length;v+=1){var b=_[v];if(!l.circle[b]){l.circle[b]=!0;var x=3*b;if(s._circlesCollide(y[x],y[x+1],y[x+2],u.x,u.y,u.radius))return o.push(!0),!0}}},r.prototype._forEachCell=function(e,t,n,r,i,o,a){for(var s=this,u=this._convertToXCellCoord(e),l=this._convertToYCellCoord(t),c=this._convertToXCellCoord(n),p=this._convertToYCellCoord(r),d=u;d<=c;d++)for(var f=l;f<=p;f++){var h=s.xCellCount*f+d;if(i.call(s,e,t,n,r,h,o,a))return}},r.prototype._convertToXCellCoord=function(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))},r.prototype._convertToYCellCoord=function(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))},r.prototype._circlesCollide=function(e,t,n,r,i,o){var a=r-e,s=i-t,u=n+o;return u*u>a*a+s*s},r.prototype._circleAndRectCollide=function(e,t,n,r,i,o,a){var s=(o-r)/2,u=Math.abs(e-(r+s));if(u>s+n)return!1;var l=(a-i)/2,c=Math.abs(t-(i+l));if(c>l+n)return!1;if(u<=s||c<=l)return!0;var p=u-s,d=c-l;return p*p+d*d<=n*n},t.exports=r},{}],222:[function(e,t,n){"use strict";t.exports=function(e){function t(t){s.push(e[t]),u++}function n(e,t,n){var r=a[e];return delete a[e],a[t]=r,s[r].geometry[0].pop(),s[r].geometry[0]=s[r].geometry[0].concat(n[0]),r}function r(e,t,n){var r=o[t];return delete o[t],o[e]=r,s[r].geometry[0].shift(),s[r].geometry[0]=n[0].concat(s[r].geometry[0]),r}function i(e,t,n){var r=n?t[0][t[0].length-1]:t[0][0];return e+":"+r.x+":"+r.y}for(var o={},a={},s=[],u=0,l=0;l<e.length;l++){var c=e[l],p=c.geometry,d=c.text;if(d){var f=i(d,p),h=i(d,p,!0);if(f in a&&h in o&&a[f]!==o[h]){var m=r(f,h,p),g=n(f,h,s[m].geometry);delete o[f],delete a[h],a[i(d,s[g].geometry,!0)]=g,s[m].geometry=null}else f in a?n(f,h,p):h in o?r(f,h,p):(t(l),o[f]=u-1,a[h]=u-1)}else t(l)}return s.filter(function(e){return e.geometry})}},{}],223:[function(e,t,n){"use strict";var r=e("../util/web_worker_transfer"),i=r.register,o=function(){this.opacity=0,this.targetOpacity=0,this.time=0};o.prototype.clone=function(){var e=new o;return e.opacity=this.opacity,e.targetOpacity=this.targetOpacity,e.time=this.time,e},i("OpacityState",o),t.exports=o},{"../util/web_worker_transfer":279}],224:[function(e,t,n){"use strict";function r(e,t,n){e.emplaceBack(t?1:0,n?1:0),e.emplaceBack(t?1:0,n?1:0),e.emplaceBack(t?1:0,n?1:0),e.emplaceBack(t?1:0,n?1:0)}function i(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;var t=e.placed?1:0,n=Math.floor(127*e.opacity);return n*m+t*g+n*y+t*v+n*_+t*b+n*x+t}var o=e("./collision_index"),a=e("../data/extent"),s=e("./symbol_size"),u=e("./projection"),l=e("../style/style_layer/symbol_style_layer_properties").layout,c=e("../source/pixels_to_tile_units"),p=function(e,t,n,r){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?t:-t))):r&&n?1:0,this.placed=n};p.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var d=function(e,t,n,r,i){this.text=new p(e?e.text:null,t,n,i),this.icon=new p(e?e.icon:null,t,r,i)};d.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var f=function(e,t,n){this.text=e,this.icon=t,this.skipFade=n},h=function(e,t){this.transform=e.clone(),this.collisionIndex=new o(this.transform),this.recentUntil=-1/0,this.placements={},this.opacities={},this.stale=!1,this.fadeDuration=t};h.prototype.placeLayerTile=function(e,t,n,r){var i=t.getBucket(e);if(i){var o=i.layers[0].layout,s=Math.pow(2,this.transform.zoom-t.tileID.overscaledZ),l=t.tileSize/a,p=this.transform.calculatePosMatrix(t.tileID.toUnwrapped()),d=u.getLabelPlaneMatrix(p,"map"===o.get("text-pitch-alignment"),"map"===o.get("text-rotation-alignment"),this.transform,c(t,1,this.transform.zoom)),f=u.getLabelPlaneMatrix(p,"map"===o.get("icon-pitch-alignment"),"map"===o.get("icon-rotation-alignment"),this.transform,c(t,1,this.transform.zoom));this.placeLayerBucket(i,p,d,f,s,l,n,r,t.collisionBoxArray,t.tileID.key,e.source)}},h.prototype.placeLayerBucket=function(e,t,n,r,i,o,a,u,c,p,d){for(var h=this,m=e.layers[0].layout,g=s.evaluateSizeForZoom(e.textSizeData,this.transform.zoom,l.properties["text-size"]),y=!e.hasTextData()||m.get("text-optional"),v=!e.hasIconData()||m.get("icon-optional"),_=0,b=e.symbolInstances;_<b.length;_+=1){var x=b[_];if(!u[x.crossTileID]){var w=!1,S=!1,k=!0,E=null,T=null,M=null;x.collisionArrays||(x.collisionArrays=e.deserializeCollisionBoxes(c,x.textBoxStartIndex,x.textBoxEndIndex,x.iconBoxStartIndex,x.iconBoxEndIndex)),x.collisionArrays.textBox&&(E=h.collisionIndex.placeCollisionBox(x.collisionArrays.textBox,m.get("text-allow-overlap"),o,t),w=E.box.length>0,k=k&&E.offscreen);var C=x.collisionArrays.textCircles;if(C){var O=e.text.placedSymbolArray.get(x.placedTextSymbolIndices[0]),A=s.evaluateSizeForFeature(e.textSizeData,g,O);T=h.collisionIndex.placeCollisionCircles(C,m.get("text-allow-overlap"),i,o,x.key,O,e.lineVertexArray,e.glyphOffsetArray,A,t,n,a,"map"===m.get("text-pitch-alignment")),w=m.get("text-allow-overlap")||T.circles.length>0,k=k&&T.offscreen}x.collisionArrays.iconBox&&(M=h.collisionIndex.placeCollisionBox(x.collisionArrays.iconBox,m.get("icon-allow-overlap"),o,t),S=M.box.length>0,k=k&&M.offscreen),y||v?v?y||(S=S&&w):w=S&&w:S=w=S&&w,w&&E&&h.collisionIndex.insertCollisionBox(E.box,m.get("text-ignore-placement"),p,d,e.bucketInstanceId,x.textBoxStartIndex),S&&M&&h.collisionIndex.insertCollisionBox(M.box,m.get("icon-ignore-placement"),p,d,e.bucketInstanceId,x.iconBoxStartIndex),w&&T&&h.collisionIndex.insertCollisionCircles(T.circles,m.get("text-ignore-placement"),p,d,e.bucketInstanceId,x.textBoxStartIndex),h.placements[x.crossTileID]=new f(w,S,k||e.justReloaded),u[x.crossTileID]=!0}}e.justReloaded=!1},h.prototype.commit=function(e,t){var n=this;this.commitTime=t;var r=!1,i=e&&0!==this.fadeDuration?(this.commitTime-e.commitTime)/this.fadeDuration:1,o=e?e.opacities:{};for(var a in n.placements){var s=n.placements[a],u=o[a];u?(n.opacities[a]=new d(u,i,s.text,s.icon),r=r||s.text!==u.text.placed||s.icon!==u.icon.placed):(n.opacities[a]=new d(null,i,s.text,s.icon,s.skipFade),r=r||s.text||s.icon)}for(var l in o){var c=o[l];if(!n.opacities[l]){var p=new d(c,i,!1,!1);p.isHidden()||(n.opacities[l]=p,r=r||c.text.placed||c.icon.placed)}}return r},h.prototype.updateLayerOpacities=function(e,t){for(var n=this,r={},i=0,o=t;i<o.length;i+=1){var a=o[i],s=a.getBucket(e);s&&n.updateBucketOpacities(s,r,a.collisionBoxArray)}},h.prototype.updateBucketOpacities=function(e,t,n){var o=this;e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasCollisionBoxData()&&e.collisionBox.collisionVertexArray.clear(),e.hasCollisionCircleData()&&e.collisionCircle.collisionVertexArray.clear();for(var a=e.layers[0].layout,s=new d(null,0,a.get("text-allow-overlap"),a.get("icon-allow-overlap"),!0),u=0;u<e.symbolInstances.length;u++){var l=e.symbolInstances[u],c=t[l.crossTileID],p=o.opacities[l.crossTileID];p?c&&(p=s):(p=s,o.opacities[l.crossTileID]=p),t[l.crossTileID]=!0;var f=l.numGlyphVertices>0||l.numVerticalGlyphVertices>0,h=l.numIconVertices>0;if(f){for(var m=i(p.text),g=(l.numGlyphVertices+l.numVerticalGlyphVertices)/4,y=0;y<g;y++)e.text.opacityVertexArray.emplaceBack(m);for(var v=0,_=l.placedTextSymbolIndices;v<_.length;v+=1){var b=_[v];e.text.placedSymbolArray.get(b).hidden=p.text.isHidden()}}if(h){for(var x=i(p.icon),w=0;w<l.numIconVertices/4;w++)e.icon.opacityVertexArray.emplaceBack(x);e.icon.placedSymbolArray.get(u).hidden=p.icon.isHidden()}l.collisionArrays||(l.collisionArrays=e.deserializeCollisionBoxes(n,l.textBoxStartIndex,l.textBoxEndIndex,l.iconBoxStartIndex,l.iconBoxEndIndex));var S=l.collisionArrays;if(S){S.textBox&&e.hasCollisionBoxData()&&r(e.collisionBox.collisionVertexArray,p.text.placed,!1),S.iconBox&&e.hasCollisionBoxData()&&r(e.collisionBox.collisionVertexArray,p.icon.placed,!1);var k=S.textCircles;if(k&&e.hasCollisionCircleData())for(var E=0;E<k.length;E+=5){var T=c||0===k[E+4];r(e.collisionCircle.collisionVertexArray,p.text.placed,T)}}}e.sortFeatures(this.transform.angle),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasCollisionBoxData()&&e.collisionBox.collisionVertexBuffer&&e.collisionBox.collisionVertexBuffer.updateData(e.collisionBox.collisionVertexArray),e.hasCollisionCircleData()&&e.collisionCircle.collisionVertexBuffer&&e.collisionCircle.collisionVertexBuffer.updateData(e.collisionCircle.collisionVertexArray)},h.prototype.symbolFadeChange=function(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration},h.prototype.hasTransitions=function(e){return this.symbolFadeChange(e)<1||this.stale},h.prototype.stillRecent=function(e){return this.recentUntil>e},h.prototype.setRecent=function(e,t){this.stale=t,this.recentUntil=e+this.fadeDuration},h.prototype.setStale=function(){this.stale=!0};var m=Math.pow(2,25),g=Math.pow(2,24),y=Math.pow(2,17),v=Math.pow(2,16),_=Math.pow(2,9),b=Math.pow(2,8),x=Math.pow(2,1);t.exports=h},{"../data/extent":52,"../source/pixels_to_tile_units":103,"../style/style_layer/symbol_style_layer_properties":210,"./collision_index":218,"./projection":225,"./symbol_size":229}],225:[function(e,t,n){"use strict";function r(e,t,n,r,i){var o=y.identity(new Float32Array(16));return t?(y.identity(o),y.scale(o,o,[1/i,1/i,1]),n||y.rotateZ(o,o,r.angle)):(y.scale(o,o,[r.width/2,-r.height/2,1]),y.translate(o,o,[1,-1,0]),y.multiply(o,o,e)),o}function i(e,t,n,r,i){var o=y.identity(new Float32Array(16));return t?(y.multiply(o,o,e),y.scale(o,o,[i,i,1]),n||y.rotateZ(o,o,-r.angle)):(y.scale(o,o,[1,-1,1]),y.translate(o,o,[-1,-1,0]),y.scale(o,o,[2/r.width,2/r.height,1])),o}function o(e,t){var n=[e.x,e.y,0,1];h(n,n,t);var r=n[3];return{point:new m(n[0]/r,n[1]/r),signedDistanceFromCamera:r}}function a(e,t){var n=e[0]/e[3],r=e[1]/e[3];return n>=-t[0]&&n<=t[0]&&r>=-t[1]&&r<=t[1]}function s(e,t,n,r,i,s,u,l){var p=r?e.textSizeData:e.iconSizeData,d=_.evaluateSizeForZoom(p,n.transform.zoom,w.properties[r?"text-size":"icon-size"]),h=[256/n.width*2+1,256/n.height*2+1],g=r?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;g.clear();for(var y=e.lineVertexArray,b=r?e.text.placedSymbolArray:e.icon.placedSymbolArray,x=n.transform.width/n.transform.height,k=!1,E=0;E<b.length;E++){var T=b.get(E);if(T.hidden||T.writingMode===S.vertical&&!k)f(T.numGlyphs,g);else{k=!1;var M=[T.anchorX,T.anchorY,0,1];if(v.transformMat4(M,M,t),a(M,h)){var C=M[3],O=.5+C/n.transform.cameraToCenterDistance*.5,A=_.evaluateSizeForFeature(p,d,T),P=u?A*O:A/O,R=new m(T.anchorX,T.anchorY),D=o(R,i).point,I={},N=c(T,P,!1,l,t,i,s,e.glyphOffsetArray,y,g,D,R,I,x);k=N.useVertical,(N.notEnoughRoom||k||N.needsFlipping&&c(T,P,!0,l,t,i,s,e.glyphOffsetArray,y,g,D,R,I,x).notEnoughRoom)&&f(T.numGlyphs,g)}else f(T.numGlyphs,g)}}r?e.text.dynamicLayoutVertexBuffer.updateData(g):e.icon.dynamicLayoutVertexBuffer.updateData(g)}function u(e,t,n,r,i,o,a,s,u,l,c,p){var f=s.glyphStartIndex+s.numGlyphs,h=s.lineStartIndex,m=s.lineStartIndex+s.lineLength,g=t.getoffsetX(s.glyphStartIndex),y=t.getoffsetX(f-1),v=d(e*g,n,r,i,o,a,s.segment,h,m,u,l,c,p);if(!v)return null;var _=d(e*y,n,r,i,o,a,s.segment,h,m,u,l,c,p);return _?{first:v,last:_}:null}function l(e,t,n,r){return e===S.horizontal&&Math.abs(n.y-t.y)>Math.abs(n.x-t.x)*r?{useVertical:!0}:(e===S.vertical?t.y<n.y:t.x>n.x)?{needsFlipping:!0}:null}function c(e,t,n,r,i,a,s,c,f,h,g,y,v,_){var b,w=t/24,S=e.lineOffsetX*t,k=e.lineOffsetY*t;if(e.numGlyphs>1){var E=e.glyphStartIndex+e.numGlyphs,T=e.lineStartIndex,M=e.lineStartIndex+e.lineLength,C=u(w,c,S,k,n,g,y,e,f,a,v,!1);if(!C)return{notEnoughRoom:!0};var O=o(C.first.point,s).point,A=o(C.last.point,s).point;if(r&&!n){var P=l(e.writingMode,O,A,_);if(P)return P}b=[C.first];for(var R=e.glyphStartIndex+1;R<E-1;R++)b.push(d(w*c.getoffsetX(R),S,k,n,g,y,e.segment,T,M,f,a,v,!1));b.push(C.last)}else{if(r&&!n){var D=o(y,i).point,I=e.lineStartIndex+e.segment+1,N=new m(f.getx(I),f.gety(I)),L=o(N,i),z=L.signedDistanceFromCamera>0?L.point:p(y,N,D,1,i),j=l(e.writingMode,D,z,_);if(j)return j}var H=d(w*c.getoffsetX(e.glyphStartIndex),S,k,n,g,y,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,f,a,v,!1);if(!H)return{notEnoughRoom:!0};b=[H]}for(var B=0,F=b;B<F.length;B+=1){var U=F[B];x(h,U.point,U.angle)}return{}}function p(e,t,n,r,i){var a=o(e.add(e.sub(t)._unit()),i).point,s=n.sub(a);return n.add(s._mult(r/s.mag()))}function d(e,t,n,r,i,a,s,u,l,c,d,f,h){var g=r?e-t:e+t,y=g>0?1:-1,v=0;r&&(y*=-1,v=Math.PI),y<0&&(v+=Math.PI);for(var _=y>0?u+s:u+s+1,b=_,x=i,w=i,S=0,k=0,E=Math.abs(g);S+k<=E;){if((_+=y)<u||_>=l)return null;if(w=x,void 0===(x=f[_])){var T=new m(c.getx(_),c.gety(_)),M=o(T,d);if(M.signedDistanceFromCamera>0)x=f[_]=M.point;else{var C=_-y;x=p(0===S?a:new m(c.getx(C),c.gety(C)),T,w,E-S+1,d)}}S+=k,k=w.dist(x)}var O=(E-S)/k,A=x.sub(w),P=A.mult(O)._add(w);return P._add(A._unit()._perp()._mult(n*y)),{point:P,angle:v+Math.atan2(x.y-w.y,x.x-w.x),tileDistance:h?{prevTileDistance:_-y===b?0:c.gettileUnitDistanceFromAnchor(_-y),lastSegmentViewportDistance:E-S}:null}}function f(e,t){for(var n=0;n<e;n++){var r=t.length;t.resize(r+4),t.float32.set(k,3*r)}}function h(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e[3]=n[3]*r+n[7]*i+n[15],e}var m=e("@mapbox/point-geometry"),g=e("@mapbox/gl-matrix"),y=g.mat4,v=g.vec4,_=e("./symbol_size"),b=e("../data/bucket/symbol_bucket"),x=b.addDynamicAttributes,w=e("../style/style_layer/symbol_style_layer_properties").layout,S=e("../symbol/shaping").WritingMode;t.exports={updateLineLabels:s,getLabelPlaneMatrix:r,getGlCoordMatrix:i,project:o,placeFirstAndLastGlyph:u,xyTransformMat4:h};var k=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0])},{"../data/bucket/symbol_bucket":50,"../style/style_layer/symbol_style_layer_properties":210,"../symbol/shaping":227,"./symbol_size":229,"@mapbox/gl-matrix":2,"@mapbox/point-geometry":4}],226:[function(e,t,n){"use strict";function r(e,t,n,r,i,a,s){var u,l,c,p,d=t.image,f=n.layout,h=t.top-1/d.pixelRatio,m=t.left-1/d.pixelRatio,g=t.bottom+1/d.pixelRatio,y=t.right+1/d.pixelRatio;if("none"!==f.get("icon-text-fit")&&i){var v=y-m,_=g-h,b=f.get("text-size").evaluate(s)/24,x=i.left*b,w=i.right*b,S=i.top*b,k=i.bottom*b,E=w-x,T=k-S,M=f.get("icon-text-fit-padding")[0],C=f.get("icon-text-fit-padding")[1],O=f.get("icon-text-fit-padding")[2],A=f.get("icon-text-fit-padding")[3],P="width"===f.get("icon-text-fit")?.5*(T-_):0,R="height"===f.get("icon-text-fit")?.5*(E-v):0,D="width"===f.get("icon-text-fit")||"both"===f.get("icon-text-fit")?E:v,I="height"===f.get("icon-text-fit")||"both"===f.get("icon-text-fit")?T:_;u=new o(x+R-A,S+P-M),l=new o(x+R+C+D,S+P-M),c=new o(x+R+C+D,S+P+O+I),p=new o(x+R-A,S+P+O+I)}else u=new o(m,h),l=new o(y,h),c=new o(y,g),p=new o(m,g);var N=n.layout.get("icon-rotate").evaluate(s)*Math.PI/180;if(N){var L=Math.sin(N),z=Math.cos(N),j=[z,-L,L,z];u._matMult(j),l._matMult(j),p._matMult(j),c._matMult(j)}return[{tl:u,tr:l,bl:p,br:c,tex:{x:d.textureRect.x-1,y:d.textureRect.y-1,w:d.textureRect.w+2,h:d.textureRect.h+2},writingMode:void 0,glyphOffset:[0,0]}]}function i(e,t,n,r,i,a,u){for(var l=n.layout.get("text-rotate").evaluate(a)*Math.PI/180,c=n.layout.get("text-offset").evaluate(a).map(function(e){return 24*e}),p=t.positionedGlyphs,d=[],f=0;f<p.length;f++){var h=p[f],m=u[h.glyph];if(m){var g=m.rect;if(g){var y=s+1,v=m.metrics.advance/2,_=r?[h.x+v,h.y]:[0,0],b=r?[0,0]:[h.x+v+c[0],h.y+c[1]],x=m.metrics.left-y-v+b[0],w=-m.metrics.top-y+b[1],S=x+g.w,k=w+g.h,E=new o(x,w),T=new o(S,w),M=new o(x,k),C=new o(S,k);if(r&&h.vertical){var O=new o(-v,v),A=-Math.PI/2,P=new o(5,0);E._rotateAround(A,O)._add(P),T._rotateAround(A,O)._add(P),M._rotateAround(A,O)._add(P),C._rotateAround(A,O)._add(P)}if(l){var R=Math.sin(l),D=Math.cos(l),I=[D,-R,R,D];E._matMult(I),T._matMult(I),M._matMult(I),C._matMult(I)}d.push({tl:E,tr:T,bl:M,br:C,tex:g,writingMode:t.writingMode,glyphOffset:_})}}}return d}var o=e("@mapbox/point-geometry"),a=e("../style/parse_glyph_pbf"),s=a.GLYPH_PBF_BORDER;t.exports={getIconQuads:r,getGlyphQuads:i}},{"../style/parse_glyph_pbf":187,"@mapbox/point-geometry":4}],227:[function(e,t,n){"use strict";function r(e,t){for(var n=[],r=0,i=0,o=t;i<o.length;i+=1){var a=o[i];n.push(e.substring(r,a)),r=a}return r<e.length&&n.push(e.substring(r,e.length)),n}function i(e,t,n,i,o,a,s,u,l,p){var f=e.trim();p===_.vertical&&(f=y(f));var h,m=[],g={positionedGlyphs:m,text:f,top:u[1],bottom:u[1],left:u[0],right:u[0],writingMode:p},b=v.processBidirectionalText;return h=b?b(f,c(f,s,n,t)):r(f,c(f,s,n,t)),d(g,t,h,i,o,a,p,s,l),!!m.length&&g}function o(e,t,n,r){for(var i=0,o=0;o<e.length;o++){var a=r[e.charCodeAt(o)];a&&(i+=a.metrics.advance+t)}return i/Math.max(1,Math.ceil(i/n))}function a(e,t,n,r){var i=Math.pow(e-t,2);return r?e<t?i/2:2*i:i+Math.abs(n)*n}function s(e,t){var n=0;return 10===e&&(n-=1e4),40!==e&&65288!==e||(n+=50),41!==t&&65289!==t||(n+=50),n}function u(e,t,n,r,i,o){for(var s=null,u=a(t,n,i,o),l=0,c=r;l<c.length;l+=1){var p=c[l],d=t-p.x,f=a(d,n,i,o)+p.badness;f<=u&&(s=p,u=f)}return{index:e,x:t,priorBreak:s,badness:u}}function l(e){return e?l(e.priorBreak).concat(e.index):[]}function c(e,t,n,r){if(!n)return[];if(!e)return[];for(var i=[],a=o(e,t,n,r),c=0,p=0;p<e.length;p++){var d=e.charCodeAt(p),f=r[d];f&&!b[d]&&(c+=f.metrics.advance+t),p<e.length-1&&(x[d]||g.charAllowsIdeographicBreaking(d))&&i.push(u(p+1,c,a,i,s(d,e.charCodeAt(p+1)),!1))}return l(u(e.length,c,a,i,0,!0))}function p(e){var t=.5,n=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:t,verticalAlign:n}}function d(e,t,n,r,i,o,a,s,u){for(var l=0,c=-17,d=0,m=e.positionedGlyphs,y="right"===o?1:"left"===o?0:.5,v=0,b=n;v<b.length;v+=1){var x=b[v];if(x=x.trim(),x.length){for(var w=m.length,S=0;S<x.length;S++){var k=x.charCodeAt(S),E=t[k];E&&(g.charHasUprightVerticalOrientation(k)&&a!==_.horizontal?(m.push({glyph:k,x:l,y:0,vertical:!0}),l+=u+s):(m.push({glyph:k,x:l,y:c,vertical:!1}),l+=E.metrics.advance+s))}if(m.length!==w){var T=l-s;d=Math.max(T,d),f(m,t,w,m.length-1,y)}l=0,c+=r}else c+=r}var M=p(i),C=M.horizontalAlign,O=M.verticalAlign;h(m,y,C,O,d,r,n.length);var A=n.length*r;e.top+=-O*A,e.bottom=e.top+A,e.left+=-C*d,e.right=e.left+d}function f(e,t,n,r,i){if(i){var o=t[e[r].glyph];if(o)for(var a=o.metrics.advance,s=(e[r].x+a)*i,u=n;u<=r;u++)e[u].x-=s}}function h(e,t,n,r,i,o,a){for(var s=(t-n)*i,u=(-r*a+.5)*o,l=0;l<e.length;l++)e[l].x+=s,e[l].y+=u}function m(e,t,n){var r=p(n),i=r.horizontalAlign,o=r.verticalAlign,a=t[0],s=t[1],u=a-e.displaySize[0]*i,l=u+e.displaySize[0],c=s-e.displaySize[1]*o;return{image:e,top:c,bottom:c+e.displaySize[1],left:u,right:l}}var g=e("../util/script_detection"),y=e("../util/verticalize_punctuation"),v=e("../source/rtl_text_plugin"),_={horizontal:1,vertical:2,horizontalOnly:3};t.exports={shapeText:i,shapeIcon:m,WritingMode:_};var b={};b[9]=!0,b[10]=!0,b[11]=!0,b[12]=!0,b[13]=!0,b[32]=!0;var x={};x[10]=!0,x[32]=!0,x[38]=!0,x[40]=!0,x[41]=!0,x[43]=!0,x[45]=!0,x[47]=!0,x[173]=!0,x[183]=!0,x[8203]=!0,x[8208]=!0,x[8211]=!0,x[8231]=!0},{"../source/rtl_text_plugin":108,"../util/script_detection":270,"../util/verticalize_punctuation":278}],228:[function(e,t,n){"use strict";function r(e,t,n,r,o,a){e.createArrays(),e.symbolInstances=[];var s=512*e.overscaling;e.tilePixelRatio=k/s,e.compareText={},e.iconsNeedLinear=!1;var u=e.layers[0].layout,l=e.layers[0]._unevaluatedLayout._values,c={};if("composite"===e.textSizeData.functionType){var p=e.textSizeData.zoomRange,d=p.min,g=p.max;c.compositeTextSizes=[l["text-size"].possiblyEvaluate(new T(d)),l["text-size"].possiblyEvaluate(new T(g))]}if("composite"===e.iconSizeData.functionType){var y=e.iconSizeData.zoomRange,v=y.min,_=y.max;c.compositeIconSizes=[l["icon-size"].possiblyEvaluate(new T(v)),l["icon-size"].possiblyEvaluate(new T(_))]}c.layoutTextSize=l["text-size"].possiblyEvaluate(new T(e.zoom+1)),c.layoutIconSize=l["icon-size"].possiblyEvaluate(new T(e.zoom+1)),c.textMaxSize=l["text-size"].possiblyEvaluate(new T(18));for(var w=24*u.get("text-line-height"),S="map"===u.get("text-rotation-alignment")&&"line"===u.get("symbol-placement"),E=u.get("text-keep-upright"),M=0,C=e.features;M<C.length;M+=1){var O=C[M],A=u.get("text-font").evaluate(O).join(","),P=t[A]||{},R=n[A]||{},D={},I=O.text;if(I){var N=x.allowsVerticalWritingMode(I),L=u.get("text-offset").evaluate(O).map(function(e){return 24*e}),z=24*u.get("text-letter-spacing").evaluate(O),j=x.allowsLetterSpacing(I)?z:0,H=u.get("text-anchor").evaluate(O),B=u.get("text-justify").evaluate(O),F="line"!==u.get("symbol-placement")?24*u.get("text-max-width").evaluate(O):0;D.horizontal=f(I,P,F,w,H,B,j,L,24,m.horizontal),N&&S&&E&&(D.vertical=f(I,P,F,w,H,B,j,L,24,m.vertical))}var U=void 0;if(O.icon){var V=r[O.icon];V&&(U=h(o[O.icon],u.get("icon-offset").evaluate(O),u.get("icon-anchor").evaluate(O)),void 0===e.sdfIcons?e.sdfIcons=V.sdf:e.sdfIcons!==V.sdf&&b.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),V.pixelRatio!==e.pixelRatio?e.iconsNeedLinear=!0:0!==u.get("icon-rotate").constantOr(1)&&(e.iconsNeedLinear=!0))}(D.horizontal||U)&&i(e,O,D,U,R,c)}a&&e.generateCollisionDebugBuffers()}function i(e,t,n,r,i,o){var p=o.layoutTextSize.evaluate(t),d=o.layoutIconSize.evaluate(t),f=o.textMaxSize.evaluate(t);void 0===f&&(f=p);var h=e.layers[0].layout,m=h.get("text-offset").evaluate(t),g=h.get("icon-offset").evaluate(t),y=p/24,v=e.tilePixelRatio*y,_=e.tilePixelRatio*f/24,b=e.tilePixelRatio*d,x=e.tilePixelRatio*h.get("symbol-spacing"),E=h.get("text-padding")*e.tilePixelRatio,T=h.get("icon-padding")*e.tilePixelRatio,M=h.get("text-max-angle")/180*Math.PI,C="map"===h.get("text-rotation-alignment")&&"line"===h.get("symbol-placement"),O="map"===h.get("icon-rotation-alignment")&&"line"===h.get("symbol-placement"),A=h.get("symbol-placement"),P=x/2,R=function(s,u){u.x<0||u.x>=k||u.y<0||u.y>=k||e.symbolInstances.push(a(e,u,s,n,r,e.layers[0],e.collisionBoxArray,t.index,t.sourceLayerIndex,e.index,v,E,C,m,b,T,O,g,{zoom:e.zoom},t,i,o))};if("line"===A)for(var D=0,I=c(t.geometry,0,0,k,k);D<I.length;D+=1)for(var N=I[D],L=l(N,x,M,n.vertical||n.horizontal,r,24,_,e.overscaling,k),z=0,j=L;z<j.length;z+=1){var H=j[z],B=n.horizontal;B&&s(e,B.text,P,H)||R(N,H)}else if("Polygon"===t.type)for(var F=0,U=S(t.geometry,0);F<U.length;F+=1){var V=U[F],Y=w(V,16);R(V[0],new u(Y.x,Y.y,0))}else if("LineString"===t.type)for(var W=0,q=t.geometry;W<q.length;W+=1){var G=q[W];R(G,new u(G[0].x,G[0].y,0))}else if("Point"===t.type)for(var Z=0,K=t.geometry;Z<K.length;Z+=1)for(var J=K[Z],X=0,$=J;X<$.length;X+=1){var Q=$[X];R([Q],new u(Q.x,Q.y,0))}}function o(e,t,n,r,i,o,a,s,u,l,c,p,d){var f=y(t,n,r,i,o,a,p),h=e.textSizeData,m=null;return"source"===h.functionType?m=[10*r.layout.get("text-size").evaluate(a)]:"composite"===h.functionType&&(m=[10*d.compositeTextSizes[0].evaluate(a),10*d.compositeTextSizes[1].evaluate(a)]),e.addSymbols(e.text,f,m,s,i,a,l,t,u.lineStartIndex,u.lineLength),c.push(e.text.placedSymbolArray.length-1),4*f.length}function a(e,t,n,r,i,a,s,u,l,c,d,f,h,g,y,x,w,S,k,T,M,C){var O,A,P=e.addToLineVertexArray(t,n),R=0,D=0,I=0,N=r.horizontal?r.horizontal.text:"",L=[];r.horizontal&&(O=new _(s,n,t,u,l,c,r.horizontal,d,f,h,e.overscaling),D+=o(e,t,r.horizontal,a,h,k,T,g,P,r.vertical?m.horizontal:m.horizontalOnly,L,M,C),r.vertical&&(I+=o(e,t,r.vertical,a,h,k,T,g,P,m.vertical,L,M,C)));var z=O?O.boxStartIndex:e.collisionBoxArray.length,j=O?O.boxEndIndex:e.collisionBoxArray.length;if(i){var H=v(t,i,a,w,r.horizontal,k,T);A=new _(s,n,t,u,l,c,i,y,x,!1,e.overscaling),R=4*H.length;var B=e.iconSizeData,F=null;"source"===B.functionType?F=[10*a.layout.get("icon-size").evaluate(T)]:"composite"===B.functionType&&(F=[10*C.compositeIconSizes[0].evaluate(T),10*C.compositeIconSizes[1].evaluate(T)]),e.addSymbols(e.icon,H,F,S,w,T,!1,t,P.lineStartIndex,P.lineLength)}var U=A?A.boxStartIndex:e.collisionBoxArray.length,V=A?A.boxEndIndex:e.collisionBoxArray.length;return e.glyphOffsetArray.length>=E.MAX_GLYPHS&&b.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),{key:N,textBoxStartIndex:z,textBoxEndIndex:j,iconBoxStartIndex:U,iconBoxEndIndex:V,textOffset:g,iconOffset:S,anchor:t,line:n,featureIndex:u,feature:T,numGlyphVertices:D,numVerticalGlyphVertices:I,numIconVertices:R,textOpacityState:new p,iconOpacityState:new p,isDuplicate:!1,placedTextSymbolIndices:L,crossTileID:0}}function s(e,t,n,r){var i=e.compareText;if(t in i){for(var o=i[t],a=o.length-1;a>=0;a--)if(r.dist(o[a])<n)return!0}else i[t]=[];return i[t].push(r),!1}var u=e("./anchor"),l=e("./get_anchors"),c=e("./clip_line"),p=e("./opacity_state"),d=e("./shaping"),f=d.shapeText,h=d.shapeIcon,m=d.WritingMode,g=e("./quads"),y=g.getGlyphQuads,v=g.getIconQuads,_=e("./collision_feature"),b=e("../util/util"),x=e("../util/script_detection"),w=e("../util/find_pole_of_inaccessibility"),S=e("../util/classify_rings"),k=e("../data/extent"),E=e("../data/bucket/symbol_bucket"),T=e("../style/evaluation_parameters");e("@mapbox/point-geometry"),t.exports={performSymbolLayout:r}},{"../data/bucket/symbol_bucket":50,"../data/extent":52,"../style/evaluation_parameters":183,"../util/classify_rings":256,"../util/find_pole_of_inaccessibility":262,"../util/script_detection":270,"../util/util":276,"./anchor":214,"./clip_line":216,"./collision_feature":217,"./get_anchors":220,"./opacity_state":223,"./quads":226,"./shaping":227,"@mapbox/point-geometry":4}],229:[function(e,t,n){"use strict";function r(e,t){var n=t.expression;if("constant"===n.kind)return{functionType:"constant",layoutSize:n.evaluate({zoom:e+1})};if("source"===n.kind)return{functionType:"source"};for(var r=n.zoomStops,i=0;i<r.length&&r[i]<=e;)i++;i=Math.max(0,i-1);for(var o=i;o<r.length&&r[o]<e+1;)o++;o=Math.min(r.length-1,o);var a={min:r[i],max:r[o]};return"composite"===n.kind?{functionType:"composite",zoomRange:a,propertyValue:t.value}:{functionType:"camera",layoutSize:n.evaluate({zoom:e+1}),zoomRange:a,sizeRange:{min:n.evaluate({zoom:a.min}),max:n.evaluate({zoom:a.max})},propertyValue:t.value}}function i(e,t,n){var r=t;return"source"===e.functionType?n.lowerSize/10:"composite"===e.functionType?u.number(n.lowerSize/10,n.upperSize/10,r.uSizeT):r.uSize}function o(e,t,n){if("constant"===e.functionType)return{uSizeT:0,uSize:e.layoutSize};if("source"===e.functionType)return{uSizeT:0,uSize:0};if("camera"===e.functionType){var r=e.propertyValue,i=e.zoomRange,o=e.sizeRange,a=s(r,n.specification),u=l.clamp(a.interpolationFactor(t,i.min,i.max),0,1);return{uSizeT:0,uSize:o.min+u*(o.max-o.min)}}var c=e.propertyValue,p=e.zoomRange,d=s(c,n.specification);return{uSizeT:l.clamp(d.interpolationFactor(t,p.min,p.max),0,1),uSize:0}}var a=e("../style-spec/expression"),s=a.normalizePropertyExpression,u=e("../style-spec/util/interpolate"),l=e("../util/util");t.exports={getSizeData:r,evaluateSizeForFeature:i,evaluateSizeForZoom:o}},{"../style-spec/expression":138,"../style-spec/util/interpolate":159,"../util/util":276}],230:[function(e,t,n){"use strict";var r=e("../source/rtl_text_plugin");t.exports=function(e,t,n){var i=t.layout.get("text-transform").evaluate(n);return"uppercase"===i?e=e.toLocaleUpperCase():"lowercase"===i&&(e=e.toLocaleLowerCase()),r.applyArabicShaping&&(e=r.applyArabicShaping(e)),e}},{"../source/rtl_text_plugin":108}],231:[function(e,t,n){"use strict";var r=e("../util/dom"),i=e("@mapbox/point-geometry"),o={scrollZoom:e("./handler/scroll_zoom"),boxZoom:e("./handler/box_zoom"),dragRotate:e("./handler/drag_rotate"),dragPan:e("./handler/drag_pan"),keyboard:e("./handler/keyboard"),doubleClickZoom:e("./handler/dblclick_zoom"),touchZoomRotate:e("./handler/touch_zoom_rotate")};t.exports=function(e,t){function n(e){v("mouseout",e)}function a(t){e.doubleClickZoom.isActive()||e.stop(),S=r.mousePos(b,t),v("mousedown",t),w=!0}function s(t){var n=e.dragRotate&&e.dragRotate.isActive();x&&!n&&v("contextmenu",x),x=null,w=!1,v("mouseup",t)}function u(t){if(!(e.dragPan&&e.dragPan.isActive()||e.dragRotate&&e.dragRotate.isActive())){for(var n=t.toElement||t.target;n&&n!==b;)n=n.parentNode;n===b&&v("mousemove",t)}}function l(e){for(var t=e.toElement||e.target;t&&t!==b;)t=t.parentNode;t===b&&v("mouseover",e)}function c(t){e.stop(),_("touchstart",t),!t.touches||t.touches.length>1||(k?(clearTimeout(k),k=null,v("dblclick",t)):k=setTimeout(h,300))}function p(e){_("touchmove",e)}function d(e){_("touchend",e)}function f(e){_("touchcancel",e)}function h(){k=null}function m(e){r.mousePos(b,e).equals(S)&&v("click",e)}function g(e){v("dblclick",e),e.preventDefault()}function y(t){var n=e.dragRotate&&e.dragRotate.isActive();w||n?w&&(x=t):v("contextmenu",t),t.preventDefault()}function v(t,n){var i=r.mousePos(b,n);return e.fire(t,{lngLat:e.unproject(i),point:i,originalEvent:n})}function _(t,n){var o=r.touchPos(b,n),a=o.reduce(function(e,t,n,r){return e.add(t.div(r.length))},new i(0,0));return e.fire(t,{lngLat:e.unproject(a),point:a,lngLats:o.map(function(t){return e.unproject(t)},this),points:o,originalEvent:n})}var b=e.getCanvasContainer(),x=null,w=!1,S=null,k=null;for(var E in o)e[E]=new o[E](e,t),t.interactive&&t[E]&&e[E].enable(t[E]);b.addEventListener("mouseout",n,!1),b.addEventListener("mousedown",a,!1),b.addEventListener("mouseup",s,!1),b.addEventListener("mousemove",u,!1),b.addEventListener("mouseover",l,!1),b.addEventListener("touchstart",c,!1),b.addEventListener("touchend",d,!1),b.addEventListener("touchmove",p,!1),b.addEventListener("touchcancel",f,!1),b.addEventListener("click",m,!1),b.addEventListener("dblclick",g,!1),b.addEventListener("contextmenu",y,!1)}},{"../util/dom":260,"./handler/box_zoom":240,"./handler/dblclick_zoom":241,"./handler/drag_pan":242,"./handler/drag_rotate":243,"./handler/keyboard":244,"./handler/scroll_zoom":245,"./handler/touch_zoom_rotate":246,"@mapbox/point-geometry":4}],232:[function(e,t,n){"use strict";var r=e("../util/util"),i=e("../style-spec/util/interpolate").number,o=e("../util/browser"),a=e("../geo/lng_lat"),s=e("../geo/lng_lat_bounds"),u=e("@mapbox/point-geometry"),l=e("../util/evented"),c=function(e){function t(t,n){e.call(this),this.moving=!1,this.transform=t,this._bearingSnap=n.bearingSnap}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getCenter=function(){return this.transform.center},t.prototype.setCenter=function(e,t){return this.jumpTo({center:e},t)},t.prototype.panBy=function(e,t,n){return e=u.convert(e).mult(-1),this.panTo(this.transform.center,r.extend({offset:e},t),n)},t.prototype.panTo=function(e,t,n){return this.easeTo(r.extend({center:e},t),n)},t.prototype.getZoom=function(){return this.transform.zoom},t.prototype.setZoom=function(e,t){return this.jumpTo({zoom:e},t),this},t.prototype.zoomTo=function(e,t,n){return this.easeTo(r.extend({zoom:e},t),n)},t.prototype.zoomIn=function(e,t){return this.zoomTo(this.getZoom()+1,e,t),this},t.prototype.zoomOut=function(e,t){return this.zoomTo(this.getZoom()-1,e,t),this},t.prototype.getBearing=function(){return this.transform.bearing},t.prototype.setBearing=function(e,t){return this.jumpTo({bearing:e},t),this},t.prototype.rotateTo=function(e,t,n){return this.easeTo(r.extend({bearing:e},t),n)},t.prototype.resetNorth=function(e,t){return this.rotateTo(0,r.extend({duration:1e3},e),t),this},t.prototype.snapToNorth=function(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this},t.prototype.getPitch=function(){return this.transform.pitch},t.prototype.setPitch=function(e,t){return this.jumpTo({pitch:e},t),this},t.prototype.fitBounds=function(e,t,n){if(t=r.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},t),"number"==typeof t.padding){var i=t.padding;t.padding={top:i,bottom:i,right:i,left:i}}if(!r.deepEqual(Object.keys(t.padding).sort(function(e,t){return e<t?-1:e>t?1:0}),["bottom","left","right","top"]))return r.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'"),this;e=s.convert(e);var o=[(t.padding.left-t.padding.right)/2,(t.padding.top-t.padding.bottom)/2],a=Math.min(t.padding.right,t.padding.left),l=Math.min(t.padding.top,t.padding.bottom);t.offset=[t.offset[0]+o[0],t.offset[1]+o[1]];var c=u.convert(t.offset),p=this.transform,d=p.project(e.getNorthWest()),f=p.project(e.getSouthEast()),h=f.sub(d),m=(p.width-2*a-2*Math.abs(c.x))/h.x,g=(p.height-2*l-2*Math.abs(c.y))/h.y;return g<0||m<0?(r.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset."),this):(t.center=p.unproject(d.add(f).div(2)),t.zoom=Math.min(p.scaleZoom(p.scale*Math.min(m,g)),t.maxZoom),t.bearing=0,t.linear?this.easeTo(t,n):this.flyTo(t,n))},t.prototype.jumpTo=function(e,t){this.stop();var n=this.transform,r=!1,i=!1,o=!1;return"zoom"in e&&n.zoom!==+e.zoom&&(r=!0,n.zoom=+e.zoom),void 0!==e.center&&(n.center=a.convert(e.center)),"bearing"in e&&n.bearing!==+e.bearing&&(i=!0,n.bearing=+e.bearing),"pitch"in e&&n.pitch!==+e.pitch&&(o=!0,n.pitch=+e.pitch),this.fire("movestart",t).fire("move",t),r&&this.fire("zoomstart",t).fire("zoom",t).fire("zoomend",t),i&&this.fire("rotate",t),o&&this.fire("pitchstart",t).fire("pitch",t).fire("pitchend",t),this.fire("moveend",t)},t.prototype.easeTo=function(e,t){var n=this;this.stop(),e=r.extend({offset:[0,0],duration:500,easing:r.ease},e),!1===e.animate&&(e.duration=0);var o=this.transform,s=this.getZoom(),l=this.getBearing(),c=this.getPitch(),p="zoom"in e?+e.zoom:s,d="bearing"in e?this._normalizeBearing(e.bearing,l):l,f="pitch"in e?+e.pitch:c,h=o.centerPoint.add(u.convert(e.offset)),m=o.pointLocation(h),g=a.convert(e.center||m);this._normalizeCenter(g);var y,v,_=o.project(m),b=o.project(g).sub(_),x=o.zoomScale(p-s);return e.around&&(y=a.convert(e.around),v=o.locationPoint(y)),this.zooming=p!==s,this.rotating=l!==d,this.pitching=f!==c,this._prepareEase(t,e.noMoveStart),clearTimeout(this._onEaseEnd),this._ease(function(e){if(n.zooming&&(o.zoom=i(s,p,e)),n.rotating&&(o.bearing=i(l,d,e)),n.pitching&&(o.pitch=i(c,f,e)),y)o.setLocationAtPoint(y,v);else{var r=o.zoomScale(o.zoom-s),a=p>s?Math.min(2,x):Math.max(.5,x),u=Math.pow(a,1-e),m=o.unproject(_.add(b.mult(e*u)).mult(r));o.setLocationAtPoint(o.renderWorldCopies?m.wrap():m,h)}n._fireMoveEvents(t)},function(){e.delayEndEvents?n._onEaseEnd=setTimeout(function(){return n._afterEase(t)},e.delayEndEvents):n._afterEase(t)},e),this},t.prototype._prepareEase=function(e,t){this.moving=!0,t||this.fire("movestart",e),this.zooming&&this.fire("zoomstart",e),this.pitching&&this.fire("pitchstart",e)},t.prototype._fireMoveEvents=function(e){this.fire("move",e),this.zooming&&this.fire("zoom",e),this.rotating&&this.fire("rotate",e),this.pitching&&this.fire("pitch",e)},t.prototype._afterEase=function(e){var t=this.zooming,n=this.pitching;this.moving=!1,this.zooming=!1,this.rotating=!1,this.pitching=!1,t&&this.fire("zoomend",e),n&&this.fire("pitchend",e),this.fire("moveend",e)},t.prototype.flyTo=function(e,t){function n(e){var t=(T*T-E*E+(e?-1:1)*A*A*M*M)/(2*(e?T:E)*A*M);return Math.log(Math.sqrt(t*t+1)-t)}function o(e){return(Math.exp(e)-Math.exp(-e))/2}function s(e){return(Math.exp(e)+Math.exp(-e))/2}function l(e){return o(e)/s(e)}var c=this;this.stop(),e=r.extend({offset:[0,0],speed:1.2,curve:1.42,easing:r.ease},e);var p=this.transform,d=this.getZoom(),f=this.getBearing(),h=this.getPitch(),m="zoom"in e?r.clamp(+e.zoom,p.minZoom,p.maxZoom):d,g="bearing"in e?this._normalizeBearing(e.bearing,f):f,y="pitch"in e?+e.pitch:h,v=p.zoomScale(m-d),_=p.centerPoint.add(u.convert(e.offset)),b=p.pointLocation(_),x=a.convert(e.center||b);this._normalizeCenter(x);var w=p.project(b),S=p.project(x).sub(w),k=e.curve,E=Math.max(p.width,p.height),T=E/v,M=S.mag();if("minZoom"in e){var C=r.clamp(Math.min(e.minZoom,d,m),p.minZoom,p.maxZoom),O=E/p.zoomScale(C-d);k=Math.sqrt(O/M*2)}var A=k*k,P=n(0),R=function(e){return s(P)/s(P+k*e)},D=function(e){return E*((s(P)*l(P+k*e)-o(P))/A)/M},I=(n(1)-P)/k;if(Math.abs(M)<1e-6||!isFinite(I)){if(Math.abs(E-T)<1e-6)return this.easeTo(e,t);var N=T<E?-1:1;I=Math.abs(Math.log(T/E))/k,D=function(){return 0},R=function(e){return Math.exp(N*k*e)}}if("duration"in e)e.duration=+e.duration;else{var L="screenSpeed"in e?+e.screenSpeed/k:+e.speed;e.duration=1e3*I/L}return e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this.zooming=!0,this.rotating=f!==g,this.pitching=y!==h,this._prepareEase(t,!1),this._ease(function(e){var n=e*I,r=1/R(n);p.zoom=d+p.scaleZoom(r),c.rotating&&(p.bearing=i(f,g,e)),c.pitching&&(p.pitch=i(h,y,e));var o=p.unproject(w.add(S.mult(D(n))).mult(r));p.setLocationAtPoint(p.renderWorldCopies?o.wrap():o,_),c._fireMoveEvents(t)},function(){return c._afterEase(t)},e),this},t.prototype.isEasing=function(){return!!this._isEasing},t.prototype.isMoving=function(){return this.moving},t.prototype.stop=function(){return this._onFrame&&this._finishAnimation(),this},t.prototype._ease=function(e,t,n){var r=this;!1===n.animate||0===n.duration?(e(1),t()):(this._easeStart=o.now(),this._isEasing=!0,this._easeOptions=n,this._startAnimation(function(t){var n=Math.min((o.now()-r._easeStart)/r._easeOptions.duration,1);e(r._easeOptions.easing(n)),1===n&&r.stop()},function(){r._isEasing=!1,t()}))},t.prototype._updateCamera=function(){this._onFrame&&this._onFrame(this.transform)},t.prototype._startAnimation=function(e,t){return void 0===t&&(t=function(){}),this.stop(),this._onFrame=e,this._finishFn=t,this._update(),this},t.prototype._finishAnimation=function(){delete this._onFrame;var e=this._finishFn;delete this._finishFn,e.call(this)},t.prototype._normalizeBearing=function(e,t){e=r.wrap(e,-180,180);var n=Math.abs(e-t);return Math.abs(e-360-t)<n&&(e-=360),Math.abs(e+360-t)<n&&(e+=360),e},t.prototype._normalizeCenter=function(e){var t=this.transform;if(t.renderWorldCopies&&!t.lngRange){var n=e.lng-t.center.lng;e.lng+=n>180?-360:n<-180?360:0}},t}(l);t.exports=c},{"../geo/lng_lat":61,"../geo/lng_lat_bounds":62,"../style-spec/util/interpolate":159,"../util/browser":253,"../util/evented":261,"../util/util":276,"@mapbox/point-geometry":4}],233:[function(e,t,n){"use strict";var r=e("../../util/dom"),i=e("../../util/util"),o=e("../../util/config"),a=function(e){this.options=e,i.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};a.prototype.getDefaultPosition=function(){return"bottom-right"},a.prototype.onAdd=function(e){var t=this.options&&this.options.compact;return this._map=e,this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),t&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===t&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},a.prototype.onRemove=function(){r.remove(this._container),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0},a.prototype._updateEditLink=function(){var e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));var t=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:o.ACCESS_TOKEN}];if(e){var n=t.reduce(function(e,n,r){return n.value&&(e+=n.key+"="+n.value+(r<t.length-1?"&":"")),e},"?");e.href="https://www.mapbox.com/feedback/"+n+(this._map._hash?this._map._hash.getHashString(!0):"")}},a.prototype._updateData=function(e){e&&"metadata"===e.sourceDataType&&(this._updateAttributions(),this._updateEditLink())},a.prototype._updateAttributions=function(){if(this._map.style){var e=[];if(this._map.style.stylesheet){var t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}var n=this._map.style.sourceCaches;for(var r in n){var i=n[r].getSource();i.attribution&&e.indexOf(i.attribution)<0&&e.push(i.attribution)}e.sort(function(e,t){return e.length-t.length}),e=e.filter(function(t,n){for(var r=n+1;r<e.length;r++)if(e[r].indexOf(t)>=0)return!1;return!0}),e.length?(this._container.innerHTML=e.join(" | "),this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null}},a.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")},t.exports=a},{"../../util/config":257,"../../util/dom":260,"../../util/util":276}],234:[function(e,t,n){"use strict";var r=e("../../util/dom"),i=e("../../util/util"),o=e("../../util/window"),a=function(){this._fullscreen=!1,i.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in o.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in o.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in o.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in o.document&&(this._fullscreenchange="MSFullscreenChange"),this._className="mapboxgl-ctrl"};a.prototype.onAdd=function(e){return this._map=e,this._mapContainer=this._map.getContainer(),this._container=r.create("div",this._className+" mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._container.style.display="none",i.warnOnce("This device does not support fullscreen mode.")),this._container},a.prototype.onRemove=function(){r.remove(this._container),this._map=null,o.document.removeEventListener(this._fullscreenchange,this._changeIcon)},a.prototype._checkFullscreenSupport=function(){return!!(o.document.fullscreenEnabled||o.document.mozFullScreenEnabled||o.document.msFullscreenEnabled||o.document.webkitFullscreenEnabled)},a.prototype._setupUI=function(){var e=this._fullscreenButton=r.create("button",this._className+"-icon "+this._className+"-fullscreen",this._container);e.setAttribute("aria-label","Toggle fullscreen"),e.type="button",this._fullscreenButton.addEventListener("click",this._onClickFullscreen),o.document.addEventListener(this._fullscreenchange,this._changeIcon)},a.prototype._isFullscreen=function(){return this._fullscreen},a.prototype._changeIcon=function(){(o.document.fullscreenElement||o.document.mozFullScreenElement||o.document.webkitFullscreenElement||o.document.msFullscreenElement)===this._mapContainer!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle(this._className+"-shrink"),this._fullscreenButton.classList.toggle(this._className+"-fullscreen"))},a.prototype._onClickFullscreen=function(){this._isFullscreen()?o.document.exitFullscreen?o.document.exitFullscreen():o.document.mozCancelFullScreen?o.document.mozCancelFullScreen():o.document.msExitFullscreen?o.document.msExitFullscreen():o.document.webkitCancelFullScreen&&o.document.webkitCancelFullScreen():this._mapContainer.requestFullscreen?this._mapContainer.requestFullscreen():this._mapContainer.mozRequestFullScreen?this._mapContainer.mozRequestFullScreen():this._mapContainer.msRequestFullscreen?this._mapContainer.msRequestFullscreen():this._mapContainer.webkitRequestFullscreen&&this._mapContainer.webkitRequestFullscreen()},t.exports=a},{"../../util/dom":260,"../../util/util":276,"../../util/window":255}],235:[function(e,t,n){"use strict";function r(e){void 0!==i?e(i):void 0!==s.navigator.permissions?s.navigator.permissions.query({name:"geolocation"}).then(function(t){i="denied"!==t.state,e(i)}):(i=!!s.navigator.geolocation,e(i))}var i,o=e("../../util/evented"),a=e("../../util/dom"),s=e("../../util/window"),u=e("../../util/util"),l=e("../../geo/lng_lat"),c=e("../marker"),p={positionOptions:{enableHighAccuracy:!1,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0},d=function(e){function t(t){e.call(this),this.options=u.extend({},p,t),u.bindAll(["_onSuccess","_onError","_finish","_setupUI","_updateCamera","_updateMarker","_onClickGeolocate"],this)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.onAdd=function(e){return this._map=e,this._container=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),r(this._setupUI),this._container},t.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(s.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker.remove(),a.remove(this._container),this._map=void 0},t.prototype._onSuccess=function(e){if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire("geolocate",e),this._finish()},t.prototype._updateCamera=function(e){var t=new l(e.coords.longitude,e.coords.latitude),n=e.coords.accuracy;this._map.fitBounds(t.toBounds(n),this.options.fitBoundsOptions,{geolocateSource:!0})},t.prototype._updateMarker=function(e){e?this._userLocationDotMarker.setLngLat([e.coords.longitude,e.coords.latitude]).addTo(this._map):this._userLocationDotMarker.remove()},t.prototype._onError=function(e){if(this.options.trackUserLocation)if(1===e.code)this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),void 0!==this._geolocationWatchID&&this._clearWatch();else switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire("error",e),this._finish()},t.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},t.prototype._setupUI=function(e){var t=this;!1!==e&&(this._container.addEventListener("contextmenu",function(e){return e.preventDefault()}),this._geolocateButton=a.create("button","mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.setAttribute("aria-label","Geolocate"),this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=a.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new c(this._dotElement),this.options.trackUserLocation&&(this._watchState="OFF")),this._geolocateButton.addEventListener("click",this._onClickGeolocate.bind(this)),this.options.trackUserLocation&&this._map.on("movestart",function(e){e.geolocateSource||"ACTIVE_LOCK"!==t._watchState||(t._watchState="BACKGROUND",t._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),t._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),t.fire("trackuserlocationend"))}))},t.prototype._onClickGeolocate=function(){if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire("trackuserlocationstart");break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire("trackuserlocationend");break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire("trackuserlocationstart")}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}"OFF"===this._watchState&&void 0!==this._geolocationWatchID?this._clearWatch():void 0===this._geolocationWatchID&&(this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._geolocationWatchID=s.navigator.geolocation.watchPosition(this._onSuccess,this._onError,this.options.positionOptions))}else s.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4)},t.prototype._clearWatch=function(){s.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},t}(o);t.exports=d},{"../../geo/lng_lat":61,"../../util/dom":260,"../../util/evented":261,"../../util/util":276,"../../util/window":255,"../marker":249}],236:[function(e,t,n){"use strict";var r=e("../../util/dom"),i=e("../../util/util"),o=function(){i.bindAll(["_updateLogo"],this)};o.prototype.onAdd=function(e){this._map=e,this._container=r.create("div","mapboxgl-ctrl");var t=r.create("a","mapboxgl-ctrl-logo");return t.target="_blank",t.href="https://www.mapbox.com/",t.setAttribute("aria-label","Mapbox logo"),this._container.appendChild(t),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._container},o.prototype.onRemove=function(){r.remove(this._container),this._map.off("sourcedata",this._updateLogo)},o.prototype.getDefaultPosition=function(){return"bottom-left"},o.prototype._updateLogo=function(e){e&&"metadata"!==e.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},o.prototype._logoRequired=function(){if(this._map.style){var e=this._map.style.sourceCaches;for(var t in e)if(e[t].getSource().mapbox_logo)return!0;return!1}},t.exports=o},{"../../util/dom":260,"../../util/util":276}],237:[function(e,t,n){"use strict";var r=e("../../util/dom"),i=e("../../util/util"),o=e("../handler/drag_rotate"),a={showCompass:!0,showZoom:!0},s=function(e){var t=this;this.options=i.extend({},a,e),this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(e){return e.preventDefault()}),this.options.showZoom&&(this._zoomInButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-in","Zoom In",function(){return t._map.zoomIn()}),this._zoomOutButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-out","Zoom Out",function(){return t._map.zoomOut()})),this.options.showCompass&&(i.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-compass","Reset North",function(){return t._map.resetNorth()}),this._compassArrow=r.create("span","mapboxgl-ctrl-compass-arrow",this._compass))};s.prototype._rotateCompassArrow=function(){var e="rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassArrow.style.transform=e},s.prototype.onAdd=function(e){return this._map=e,this.options.showCompass&&(this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new o(e,{button:"left",element:this._compass}),this._handler.enable()),this._container},s.prototype.onRemove=function(){r.remove(this._container),this.options.showCompass&&(this._map.off("rotate",this._rotateCompassArrow),this._handler.disable(),delete this._handler),delete this._map},s.prototype._createButton=function(e,t,n){var i=r.create("button",e,this._container);return i.type="button",i.setAttribute("aria-label",t),i.addEventListener("click",n),i},t.exports=s},{"../../util/dom":260,"../../util/util":276,"../handler/drag_rotate":243}],238:[function(e,t,n){"use strict";function r(e,t,n){var r=n&&n.maxWidth||100,a=e._container.clientHeight/2,s=o(e.unproject([0,a]),e.unproject([r,a]));if(n&&"imperial"===n.unit){var u=3.2808*s;u>5280?i(t,r,u/5280,"mi"):i(t,r,u,"ft")}else if(n&&"nautical"===n.unit){var l=s/1852;i(t,r,l,"nm")}else i(t,r,s,"m")}function i(e,t,n,r){var i=a(n),o=i/n;"m"===r&&i>=1e3&&(i/=1e3,r="km"),e.style.width=t*o+"px",e.innerHTML=i+r}function o(e,t){var n=Math.PI/180,r=e.lat*n,i=t.lat*n,o=Math.sin(r)*Math.sin(i)+Math.cos(r)*Math.cos(i)*Math.cos((t.lng-e.lng)*n);return 6371e3*Math.acos(Math.min(o,1))}function a(e){var t=Math.pow(10,(""+Math.floor(e)).length-1),n=e/t;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,t*n}var s=e("../../util/dom"),u=e("../../util/util"),l=function(e){this.options=e,u.bindAll(["_onMove"],this)};l.prototype.getDefaultPosition=function(){return"bottom-left"},l.prototype._onMove=function(){r(this._map,this._container,this.options)},l.prototype.onAdd=function(e){return this._map=e,this._container=s.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},l.prototype.onRemove=function(){s.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},t.exports=l},{"../../util/dom":260,"../../util/util":276}],239:[function(e,t,n){"use strict"},{}],240:[function(e,t,n){"use strict";var r=e("../../util/dom"),i=e("../../geo/lng_lat_bounds"),o=e("../../util/util"),a=e("../../util/window"),s=function(e){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),o.bindAll(["_onMouseDown","_onMouseMove","_onMouseUp","_onKeyDown"],this)};s.prototype.isEnabled=function(){return!!this._enabled},s.prototype.isActive=function(){return!!this._active},s.prototype.enable=function(){this.isEnabled()||(this._map.dragPan&&this._map.dragPan.disable(),this._el.addEventListener("mousedown",this._onMouseDown,!1),this._map.dragPan&&this._map.dragPan.enable(),this._enabled=!0)},s.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onMouseDown),this._enabled=!1)},s.prototype._onMouseDown=function(e){e.shiftKey&&0===e.button&&(a.document.addEventListener("mousemove",this._onMouseMove,!1),a.document.addEventListener("keydown",this._onKeyDown,!1),a.document.addEventListener("mouseup",this._onMouseUp,!1),r.disableDrag(),this._startPos=r.mousePos(this._el,e),this._active=!0)},s.prototype._onMouseMove=function(e){var t=this._startPos,n=r.mousePos(this._el,e);this._box||(this._box=r.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));var i=Math.min(t.x,n.x),o=Math.max(t.x,n.x),a=Math.min(t.y,n.y),s=Math.max(t.y,n.y);r.setTransform(this._box,"translate("+i+"px,"+a+"px)"),this._box.style.width=o-i+"px",this._box.style.height=s-a+"px"},s.prototype._onMouseUp=function(e){if(0===e.button){var t=this._startPos,n=r.mousePos(this._el,e),o=(new i).extend(this._map.unproject(t)).extend(this._map.unproject(n));this._finish(),t.x===n.x&&t.y===n.y?this._fireEvent("boxzoomcancel",e):this._map.fitBounds(o,{linear:!0}).fire("boxzoomend",{originalEvent:e,boxZoomBounds:o})}},s.prototype._onKeyDown=function(e){27===e.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",e))},s.prototype._finish=function(){this._active=!1,a.document.removeEventListener("mousemove",this._onMouseMove,!1),a.document.removeEventListener("keydown",this._onKeyDown,!1),a.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(r.remove(this._box),this._box=null),r.enableDrag()},s.prototype._fireEvent=function(e,t){return this._map.fire(e,{originalEvent:t})},t.exports=s},{"../../geo/lng_lat_bounds":62,"../../util/dom":260,"../../util/util":276,"../../util/window":255}],241:[function(e,t,n){"use strict";var r=e("../../util/util"),i=function(e){this._map=e,r.bindAll(["_onDblClick","_onZoomEnd"],this)};i.prototype.isEnabled=function(){return!!this._enabled},i.prototype.isActive=function(){return!!this._active},i.prototype.enable=function(){this.isEnabled()||(this._map.on("dblclick",this._onDblClick),this._enabled=!0)},i.prototype.disable=function(){this.isEnabled()&&(this._map.off("dblclick",this._onDblClick),this._enabled=!1)},i.prototype._onDblClick=function(e){this._active=!0,this._map.on("zoomend",this._onZoomEnd),this._map.zoomTo(this._map.getZoom()+(e.originalEvent.shiftKey?-1:1),{around:e.lngLat},e)},i.prototype._onZoomEnd=function(){this._active=!1,this._map.off("zoomend",this._onZoomEnd)},t.exports=i},{"../../util/util":276}],242:[function(e,t,n){"use strict";var r=e("../../util/dom"),i=e("../../util/util"),o=e("../../util/window"),a=e("../../util/browser"),s=i.bezier(0,0,.3,1),u=function(e){this._map=e,this._el=e.getCanvasContainer(),i.bindAll(["_onDown","_onMove","_onUp","_onTouchEnd","_onMouseUp","_onDragFrame","_onDragFinished"],this)};u.prototype.isEnabled=function(){return!!this._enabled},u.prototype.isActive=function(){return!!this._active},u.prototype.enable=function(){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._el.addEventListener("mousedown",this._onDown),this._el.addEventListener("touchstart",this._onDown),this._enabled=!0)},u.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._el.removeEventListener("mousedown",this._onDown),this._el.removeEventListener("touchstart",this._onDown),this._enabled=!1)},u.prototype._onDown=function(e){this._ignoreEvent(e)||this.isActive()||(e.touches?(o.document.addEventListener("touchmove",this._onMove),o.document.addEventListener("touchend",this._onTouchEnd)):(o.document.addEventListener("mousemove",this._onMove),o.document.addEventListener("mouseup",this._onMouseUp)),o.addEventListener("blur",this._onMouseUp),this._active=!1,this._startPos=this._previousPos=r.mousePos(this._el,e),this._inertia=[[a.now(),this._startPos]])},u.prototype._onMove=function(e){this._ignoreEvent(e)||(this._lastMoveEvent=e,e.preventDefault(),this._pos=r.mousePos(this._el,e),this._drainInertiaBuffer(),this._inertia.push([a.now(),this._pos]),this.isActive()||(this._active=!0,this._map.moving=!0,this._fireEvent("dragstart",e),this._fireEvent("movestart",e),this._map._startAnimation(this._onDragFrame,this._onDragFinished)))},u.prototype._onDragFrame=function(e){var t=this._lastMoveEvent;t&&(e.setLocationAtPoint(e.pointLocation(this._previousPos),this._pos),this._fireEvent("drag",t),this._fireEvent("move",t),this._previousPos=this._pos,delete this._lastMoveEvent)},u.prototype._onDragFinished=function(e){var t=this;if(this.isActive()){this._active=!1,delete this._lastMoveEvent,delete this._startPos,delete this._previousPos,delete this._pos,this._fireEvent("dragend",e),this._drainInertiaBuffer();var n=function(){t._map.moving=!1,t._fireEvent("moveend",e)},r=this._inertia;if(r.length<2)return void n();var i=r[r.length-1],o=r[0],a=i[1].sub(o[1]),u=(i[0]-o[0])/1e3;if(0===u||i[1].equals(o[1]))return void n();var l=a.mult(.3/u),c=l.mag();c>1400&&(c=1400,l._unit()._mult(c));var p=c/750,d=l.mult(-p/2);this._map.panBy(d,{duration:1e3*p,easing:s,noMoveStart:!0},{originalEvent:e})}},u.prototype._onUp=function(e){this._onDragFinished(e)},u.prototype._onMouseUp=function(e){this._ignoreEvent(e)||(this._onUp(e),o.document.removeEventListener("mousemove",this._onMove),o.document.removeEventListener("mouseup",this._onMouseUp),o.removeEventListener("blur",this._onMouseUp))},u.prototype._onTouchEnd=function(e){this._ignoreEvent(e)||(this._onUp(e),o.document.removeEventListener("touchmove",this._onMove),o.document.removeEventListener("touchend",this._onTouchEnd))},u.prototype._fireEvent=function(e,t){return this._map.fire(e,t?{originalEvent:t}:{})},u.prototype._ignoreEvent=function(e){var t=this._map;return!(!t.boxZoom||!t.boxZoom.isActive())||!(!t.dragRotate||!t.dragRotate.isActive())||(e.touches?e.touches.length>1:!!e.ctrlKey||"mousemove"!==e.type&&e.button&&0!==e.button)},u.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,t=a.now();e.length>0&&t-e[0][0]>160;)e.shift()},t.exports=u},{"../../util/browser":253,"../../util/dom":260,"../../util/util":276,"../../util/window":255}],243:[function(e,t,n){"use strict";var r=e("../../util/dom"),i=e("../../util/util"),o=e("../../util/window"),a=e("../../util/browser"),s=i.bezier(0,0,.25,1),u=function(e,t){this._map=e,this._el=t.element||e.getCanvasContainer(),this._button=t.button||"right",this._bearingSnap=t.bearingSnap||0,this._pitchWithRotate=!1!==t.pitchWithRotate,i.bindAll(["_onDown","_onMove","_onUp","_onDragFrame","_onDragFinished"],this)};u.prototype.isEnabled=function(){return!!this._enabled},u.prototype.isActive=function(){return!!this._active},u.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onDown),this._enabled=!0)},u.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onDown),this._enabled=!1)},u.prototype._onDown=function(e){if(!(this._map.boxZoom&&this._map.boxZoom.isActive()||this._map.dragPan&&this._map.dragPan.isActive()||this.isActive())){if("right"===this._button){var t=e.ctrlKey?0:2,n=e.button;if(void 0!==o.InstallTrigger&&2===e.button&&e.ctrlKey&&o.navigator.platform.toUpperCase().indexOf("MAC")>=0&&(n=0),n!==t)return}else if(e.ctrlKey||0!==e.button)return;r.disableDrag(),o.document.addEventListener("mousemove",this._onMove,{capture:!0}),o.document.addEventListener("mouseup",this._onUp),o.addEventListener("blur",this._onUp),this._active=!1,this._inertia=[[a.now(),this._map.getBearing()]],this._startPos=this._previousPos=r.mousePos(this._el,e),this._center=this._map.transform.centerPoint,e.preventDefault()}},u.prototype._onMove=function(e){this._lastMoveEvent=e,this._pos=r.mousePos(this._el,e),this.isActive()||(this._active=!0,this._map.moving=!0,this._fireEvent("rotatestart",e),this._fireEvent("movestart",e),this._pitchWithRotate&&this._fireEvent("pitchstart",e),this._map._startAnimation(this._onDragFrame,this._onDragFinished))},u.prototype._onUp=function(e){o.document.removeEventListener("mousemove",this._onMove,{capture:!0}),o.document.removeEventListener("mouseup",this._onUp),o.removeEventListener("blur",this._onUp),r.enableDrag(),this._onDragFinished(e)},u.prototype._onDragFrame=function(e){var t=this._lastMoveEvent;if(t){var n=this._previousPos,r=this._pos,i=.8*(n.x-r.x),o=-.5*(n.y-r.y),s=e.bearing-i,u=e.pitch-o,l=this._inertia,c=l[l.length-1];this._drainInertiaBuffer(),l.push([a.now(),this._map._normalizeBearing(s,c[1])]),e.bearing=s,this._pitchWithRotate&&(this._fireEvent("pitch",t),e.pitch=u),this._fireEvent("rotate",t),this._fireEvent("move",t),delete this._lastMoveEvent,this._previousPos=this._pos}},u.prototype._onDragFinished=function(e){var t=this;if(this.isActive()){this._active=!1,delete this._lastMoveEvent,delete this._previousPos,this._fireEvent("rotateend",e),this._drainInertiaBuffer();var n=this._map,r=n.getBearing(),i=this._inertia,o=function(){Math.abs(r)<t._bearingSnap?n.resetNorth({noMoveStart:!0},{originalEvent:e}):(t._map.moving=!1,t._fireEvent("moveend",e)),t._pitchWithRotate&&t._fireEvent("pitchend",e)};if(i.length<2)return void o();var a=i[0],u=i[i.length-1],l=i[i.length-2],c=n._normalizeBearing(r,l[1]),p=u[1]-a[1],d=p<0?-1:1,f=(u[0]-a[0])/1e3;if(0===p||0===f)return void o();var h=Math.abs(p*(.25/f));h>180&&(h=180);var m=h/180;c+=d*h*(m/2),Math.abs(n._normalizeBearing(c,0))<this._bearingSnap&&(c=n._normalizeBearing(0,c)),n.rotateTo(c,{duration:1e3*m,easing:s,noMoveStart:!0},{originalEvent:e})}},u.prototype._fireEvent=function(e,t){return this._map.fire(e,t?{originalEvent:t}:{})},u.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,t=a.now();e.length>0&&t-e[0][0]>160;)e.shift()},t.exports=u},{"../../util/browser":253,"../../util/dom":260,"../../util/util":276,"../../util/window":255}],244:[function(e,t,n){"use strict";function r(e){return e*(2-e)}var i=e("../../util/util"),o=function(e){this._map=e,this._el=e.getCanvasContainer(),i.bindAll(["_onKeyDown"],this)};o.prototype.isEnabled=function(){return!!this._enabled},o.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},o.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},o.prototype._onKeyDown=function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t=0,n=0,i=0,o=0,a=0;switch(e.keyCode){case 61:case 107:case 171:case 187:t=1;break;case 189:case 109:case 173:t=-1;break;case 37:e.shiftKey?n=-1:(e.preventDefault(),o=-1);break;case 39:e.shiftKey?n=1:(e.preventDefault(),o=1);break;case 38:e.shiftKey?i=1:(e.preventDefault(),a=-1);break;case 40:e.shiftKey?i=-1:(a=1,e.preventDefault());break;default:return}var s=this._map,u=s.getZoom(),l={duration:300,delayEndEvents:500,easing:r,zoom:t?Math.round(u)+t*(e.shiftKey?2:1):u,bearing:s.getBearing()+15*n,pitch:s.getPitch()+10*i,offset:[100*-o,100*-a],center:s.getCenter()};s.easeTo(l,{originalEvent:e})}},t.exports=o},{"../../util/util":276}],245:[function(e,t,n){"use strict";var r=e("../../util/dom"),i=e("../../util/util"),o=e("../../util/browser"),a=e("../../util/window"),s=e("../../style-spec/util/interpolate").number,u=e("../../geo/lng_lat"),l=a.navigator.userAgent.toLowerCase(),c=-1!==l.indexOf("firefox"),p=-1!==l.indexOf("safari")&&-1===l.indexOf("chrom"),d=function(e){this._map=e,this._el=e.getCanvasContainer(),this._delta=0,i.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};d.prototype.isEnabled=function(){return!!this._enabled},d.prototype.isActive=function(){return!!this._active},d.prototype.enable=function(e){this.isEnabled()||(this._el.addEventListener("wheel",this._onWheel,!1),this._el.addEventListener("mousewheel",this._onWheel,!1),this._enabled=!0,this._aroundCenter=e&&"center"===e.around)},d.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("wheel",this._onWheel),this._el.removeEventListener("mousewheel",this._onWheel),this._enabled=!1)},d.prototype._onWheel=function(e){var t=0;"wheel"===e.type?(t=e.deltaY,c&&e.deltaMode===a.WheelEvent.DOM_DELTA_PIXEL&&(t/=o.devicePixelRatio),e.deltaMode===a.WheelEvent.DOM_DELTA_LINE&&(t*=40)):"mousewheel"===e.type&&(t=-e.wheelDeltaY,p&&(t/=3));var n=o.now(),r=n-(this._lastWheelEventTime||0);this._lastWheelEventTime=n,0!==t&&t%4.000244140625==0?this._type="wheel":0!==t&&Math.abs(t)<4?this._type="trackpad":r>400?(this._type=null,this._lastValue=t,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(r*t)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,t+=this._lastValue)),e.shiftKey&&t&&(t/=4),this._type&&(this._lastWheelEvent=e,this._delta-=t,this.isActive()||this._start(e)),e.preventDefault()},d.prototype._onTimeout=function(e){this._type="wheel",this._delta-=this._lastValue,this.isActive()||this._start(e)},d.prototype._start=function(e){if(this._delta){this._active=!0,this._map.moving=!0,this._map.zooming=!0,this._map.fire("movestart",{originalEvent:e}),this._map.fire("zoomstart",{originalEvent:e}),clearTimeout(this._finishTimeout);var t=r.mousePos(this._el,e);this._around=u.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(t)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._map._startAnimation(this._onScrollFrame,this._onScrollFinished)}},d.prototype._onScrollFrame=function(e){if(this.isActive()){if(0!==this._delta){var t="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?1/450:.01,n=2/(1+Math.exp(-Math.abs(this._delta*t)));this._delta<0&&0!==n&&(n=1/n);var r="number"==typeof this._targetZoom?e.zoomScale(this._targetZoom):e.scale;this._targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,e.scaleZoom(r*n))),"wheel"===this._type&&(this._startZoom=e.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}if("wheel"===this._type){var i=Math.min((o.now()-this._lastWheelEventTime)/200,1),a=this._easing(i);e.zoom=s(this._startZoom,this._targetZoom,a),1===i&&this._map.stop()}else e.zoom=this._targetZoom,this._map.stop();e.setLocationAtPoint(this._around,this._aroundPoint),this._map.fire("move",{originalEvent:this._lastWheelEvent}),this._map.fire("zoom",{originalEvent:this._lastWheelEvent})}},d.prototype._onScrollFinished=function(){var e=this;this.isActive()&&(this._active=!1,this._finishTimeout=setTimeout(function(){e._map.moving=!1,e._map.zooming=!1,e._map.fire("zoomend"),e._map.fire("moveend"),delete e._targetZoom},200))},d.prototype._smoothOutEasing=function(e){var t=i.ease;if(this._prevEase){var n=this._prevEase,r=(o.now()-n.start)/n.duration,a=n.easing(r+.01)-n.easing(r),s=.27/Math.sqrt(a*a+1e-4)*.01,u=Math.sqrt(.0729-s*s);t=i.bezier(s,u,.25,1)}return this._prevEase={start:o.now(),duration:e,easing:t},t},t.exports=d},{"../../geo/lng_lat":61,"../../style-spec/util/interpolate":159,"../../util/browser":253,"../../util/dom":260,"../../util/util":276,"../../util/window":255}],246:[function(e,t,n){"use strict";var r=e("../../util/dom"),i=e("../../util/util"),o=e("../../util/window"),a=e("../../util/browser"),s=i.bezier(0,0,.15,1),u=function(e){this._map=e,this._el=e.getCanvasContainer(),i.bindAll(["_onStart","_onMove","_onEnd"],this)};u.prototype.isEnabled=function(){return!!this._enabled},u.prototype.enable=function(e){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._el.addEventListener("touchstart",this._onStart,!1),this._enabled=!0,this._aroundCenter=e&&"center"===e.around)},u.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._el.removeEventListener("touchstart",this._onStart),this._enabled=!1)},u.prototype.disableRotation=function(){this._rotationDisabled=!0},u.prototype.enableRotation=function(){this._rotationDisabled=!1},u.prototype._onStart=function(e){if(2===e.touches.length){var t=r.mousePos(this._el,e.touches[0]),n=r.mousePos(this._el,e.touches[1]);this._startVec=t.sub(n),this._startScale=this._map.transform.scale,this._startBearing=this._map.transform.bearing,this._gestureIntent=void 0,this._inertia=[],o.document.addEventListener("touchmove",this._onMove,!1),o.document.addEventListener("touchend",this._onEnd,!1)}},u.prototype._onMove=function(e){if(2===e.touches.length){var t=r.mousePos(this._el,e.touches[0]),n=r.mousePos(this._el,e.touches[1]),i=t.add(n).div(2),o=t.sub(n),s=o.mag()/this._startVec.mag(),u=this._rotationDisabled?0:180*o.angleWith(this._startVec)/Math.PI,l=this._map;if(this._gestureIntent){var c={duration:0,around:l.unproject(i)};"rotate"===this._gestureIntent&&(c.bearing=this._startBearing+u),"zoom"!==this._gestureIntent&&"rotate"!==this._gestureIntent||(c.zoom=l.transform.scaleZoom(this._startScale*s)),l.stop(),this._drainInertiaBuffer(),this._inertia.push([a.now(),s,i]),l.easeTo(c,{originalEvent:e})}else{var p=Math.abs(1-s)>.15;Math.abs(u)>10?this._gestureIntent="rotate":p&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._startVec=o,this._startScale=l.transform.scale,this._startBearing=l.transform.bearing)}e.preventDefault()}},u.prototype._onEnd=function(e){o.document.removeEventListener("touchmove",this._onMove),o.document.removeEventListener("touchend",this._onEnd),this._drainInertiaBuffer();var t=this._inertia,n=this._map;if(t.length<2)return void n.snapToNorth({},{originalEvent:e});var r=t[t.length-1],i=t[0],a=n.transform.scaleZoom(this._startScale*r[1]),u=n.transform.scaleZoom(this._startScale*i[1]),l=a-u,c=(r[0]-i[0])/1e3,p=r[2];if(0===c||a===u)return void n.snapToNorth({},{originalEvent:e});var d=.15*l/c;Math.abs(d)>2.5&&(d=d>0?2.5:-2.5);var f=1e3*Math.abs(d/(12*.15)),h=a+d*f/2e3;h<0&&(h=0),n.easeTo({zoom:h,duration:f,easing:s,around:this._aroundCenter?n.getCenter():n.unproject(p)},{originalEvent:e})},u.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,t=a.now();e.length>2&&t-e[0][0]>160;)e.shift()},t.exports=u},{"../../util/browser":253,"../../util/dom":260,"../../util/util":276,"../../util/window":255}],247:[function(e,t,n){"use strict";var r=e("../util/util"),i=e("../util/window"),o=e("../util/throttle"),a=function(){r.bindAll(["_onHashChange","_updateHash"],this),this._updateHash=o(this._updateHashUnthrottled.bind(this),300)};a.prototype.addTo=function(e){return this._map=e,i.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},a.prototype.remove=function(){return i.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),delete this._map,this},a.prototype.getHashString=function(e){var t=this._map.getCenter(),n=Math.round(100*this._map.getZoom())/100,r=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),i=Math.pow(10,r),o=Math.round(t.lng*i)/i,a=Math.round(t.lat*i)/i,s=this._map.getBearing(),u=this._map.getPitch(),l="";return l+=e?"#/"+o+"/"+a+"/"+n:"#"+n+"/"+a+"/"+o,(s||u)&&(l+="/"+Math.round(10*s)/10),u&&(l+="/"+Math.round(u)),l},a.prototype._onHashChange=function(){var e=i.location.hash.replace("#","").split("/");return e.length>=3&&(this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:+(e[3]||0),pitch:+(e[4]||0)}),!0)},a.prototype._updateHashUnthrottled=function(){var e=this.getHashString();i.history.replaceState("","",e)},t.exports=a},{"../util/throttle":273,"../util/util":276,"../util/window":255}],248:[function(e,t,n){"use strict";function r(e){e.parentNode&&e.parentNode.removeChild(e)}var i=e("../util/util"),o=e("../util/browser"),a=e("../util/window"),s=e("../util/window"),u=s.HTMLImageElement,l=s.HTMLElement,c=e("../util/dom"),p=e("../util/ajax"),d=e("../style/style"),f=e("../style/evaluation_parameters"),h=e("../render/painter"),m=e("../geo/transform"),g=e("./hash"),y=e("./bind_handlers"),v=e("./camera"),_=e("../geo/lng_lat"),b=e("../geo/lng_lat_bounds"),x=e("@mapbox/point-geometry"),w=e("./control/attribution_control"),S=e("./control/logo_control"),k=e("@mapbox/mapbox-gl-supported"),E=e("../util/image"),T=E.RGBAImage;e("./events");var M={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:0,maxZoom:22,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,transformRequest:null,fadeDuration:300},C=function(e){function t(t){if(t=i.extend({},M,t),null!=t.minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than minZoom");var n=new m(t.minZoom,t.maxZoom,t.renderWorldCopies);e.call(this,n,t),this._interactive=t.interactive,this._maxTileCacheSize=t.maxTileCacheSize,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=t.preserveDrawingBuffer,this._trackResize=t.trackResize,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles,this._fadeDuration=t.fadeDuration,this._crossFadingFactor=1,this._collectResourceTiming=t.collectResourceTiming;var r=t.transformRequest;if(this._transformRequest=r?function(e,t){return r(e,t)||{url:e}}:function(e){return{url:e}},"string"==typeof t.container){var o=a.document.getElementById(t.container);if(!o)throw new Error("Container '"+t.container+"' not found.");this._container=o}else{if(!(t.container instanceof l))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=t.container}t.maxBounds&&this.setMaxBounds(t.maxBounds),i.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored","_update","_render","_onData","_onDataLoading"],this),this._setupContainer(),this._setupPainter(),this.on("move",this._update.bind(this,!1)),this.on("zoom",this._update.bind(this,!0)),void 0!==a&&(a.addEventListener("online",this._onWindowOnline,!1),a.addEventListener("resize",this._onWindowResize,!1)),y(this,t),this._hash=t.hash&&(new g).addTo(this),this._hash&&this._hash._onHashChange()||this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),this.resize(),t.style&&this.setStyle(t.style,{localIdeographFontFamily:t.localIdeographFontFamily}),t.attributionControl&&this.addControl(new w),this.addControl(new S,t.logoPosition),this.on("style.load",function(){this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",this._onData),this.on("dataloading",this._onDataLoading)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={showTileBoundaries:{},showCollisionBoxes:{},showOverdrawInspector:{},repaint:{},vertices:{}};return t.prototype.addControl=function(e,t){void 0===t&&e.getDefaultPosition&&(t=e.getDefaultPosition()),void 0===t&&(t="top-right");var n=e.onAdd(this),r=this._controlPositions[t];return-1!==t.indexOf("bottom")?r.insertBefore(n,r.firstChild):r.appendChild(n),this},t.prototype.removeControl=function(e){return e.onRemove(this),this},t.prototype.resize=function(){var e=this._containerDimensions(),t=e[0],n=e[1];return this._resizeCanvas(t,n),this.transform.resize(t,n),this.painter.resize(t,n),this.fire("movestart").fire("move").fire("resize").fire("moveend")},t.prototype.getBounds=function(){var e=new b(this.transform.pointLocation(new x(0,this.transform.height)),this.transform.pointLocation(new x(this.transform.width,0)));return(this.transform.angle||this.transform.pitch)&&(e.extend(this.transform.pointLocation(new x(this.transform.size.x,0))),e.extend(this.transform.pointLocation(new x(0,this.transform.size.y)))),e},t.prototype.getMaxBounds=function(){return this.transform.latRange&&2===this.transform.latRange.length&&this.transform.lngRange&&2===this.transform.lngRange.length?new b([this.transform.lngRange[0],this.transform.latRange[0]],[this.transform.lngRange[1],this.transform.latRange[1]]):null},t.prototype.setMaxBounds=function(e){if(e){var t=b.convert(e);this.transform.lngRange=[t.getWest(),t.getEast()],this.transform.latRange=[t.getSouth(),t.getNorth()],this.transform._constrain(),this._update()}else null!==e&&void 0!==e||(this.transform.lngRange=null,this.transform.latRange=null,this._update());return this},t.prototype.setMinZoom=function(e){if((e=null===e||void 0===e?0:e)>=0&&e<=this.transform.maxZoom)return this.transform.minZoom=e,this._update(),this.getZoom()<e&&this.setZoom(e),this;throw new Error("minZoom must be between 0 and the current maxZoom, inclusive")},t.prototype.getMinZoom=function(){return this.transform.minZoom},t.prototype.setMaxZoom=function(e){if((e=null===e||void 0===e?22:e)>=this.transform.minZoom)return this.transform.maxZoom=e,this._update(),this.getZoom()>e&&this.setZoom(e),this;throw new Error("maxZoom must be greater than the current minZoom")},t.prototype.getMaxZoom=function(){return this.transform.maxZoom},t.prototype.project=function(e){return this.transform.locationPoint(_.convert(e))},t.prototype.unproject=function(e){return this.transform.pointLocation(x.convert(e))},t.prototype.on=function(t,n,r){var o=this;if(void 0===r)return e.prototype.on.call(this,t,n);var a=function(){if("mouseenter"===t||"mouseover"===t){var e=!1;return{layer:n,listener:r,delegates:{mousemove:function(a){var s=o.getLayer(n)?o.queryRenderedFeatures(a.point,{layers:[n]}):[];s.length?e||(e=!0,r.call(o,i.extend({features:s},a,{type:t}))):e=!1},mouseout:function(){e=!1}}}}if("mouseleave"===t||"mouseout"===t){var a=!1;return{layer:n,listener:r,delegates:{mousemove:function(e){(o.getLayer(n)?o.queryRenderedFeatures(e.point,{layers:[n]}):[]).length?a=!0:a&&(a=!1,r.call(o,i.extend({},e,{type:t})))},mouseout:function(e){a&&(a=!1,r.call(o,i.extend({},e,{type:t})))}}}}var s=function(e){var t=o.getLayer(n)?o.queryRenderedFeatures(e.point,{layers:[n]}):[];t.length&&r.call(o,i.extend({features:t},e))};return{layer:n,listener:r,delegates:(u={},u[t]=s,u)};var u}();this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(a);for(var s in a.delegates)o.on(s,a.delegates[s]);return this},t.prototype.off=function(t,n,r){var i=this;if(void 0===r)return e.prototype.off.call(this,t,n);if(this._delegatedListeners&&this._delegatedListeners[t])for(var o=this._delegatedListeners[t],a=0;a<o.length;a++){var s=o[a];if(s.layer===n&&s.listener===r){for(var u in s.delegates)i.off(u,s.delegates[u]);return o.splice(a,1),i}}return this},t.prototype.queryRenderedFeatures=function(e,t){return 2===arguments.length?(e=arguments[0],t=arguments[1]):1===arguments.length&&function(e){return e instanceof x||Array.isArray(e)}(arguments[0])?(e=arguments[0],t={}):1===arguments.length?(e=void 0,t=arguments[0]):(e=void 0,t={}),this.style?this.style.queryRenderedFeatures(this._makeQueryGeometry(e),t,this.transform.zoom,this.transform.angle):[]},t.prototype._makeQueryGeometry=function(e){var t=this;void 0===e&&(e=[x.convert([0,0]),x.convert([this.transform.width,this.transform.height])]);var n;if(e instanceof x||"number"==typeof e[0])n=[x.convert(e)];else{var r=[x.convert(e[0]),x.convert(e[1])];n=[r[0],new x(r[1].x,r[0].y),r[1],new x(r[0].x,r[1].y),r[0]]}return n=n.map(function(e){return t.transform.pointCoordinate(e)})},t.prototype.querySourceFeatures=function(e,t){return this.style.querySourceFeatures(e,t)},t.prototype.setStyle=function(e,t){if((!t||!1!==t.diff&&!t.localIdeographFontFamily)&&this.style&&e&&"object"==typeof e)try{return this.style.setState(e)&&this._update(!0),this}catch(e){i.warnOnce("Unable to perform style diff: "+(e.message||e.error||e)+".  Rebuilding the style from scratch.")}return this.style&&(this.style.setEventedParent(null),this.style._remove()),e?(this.style=new d(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e),this):(delete this.style,this)},t.prototype.getStyle=function(){if(this.style)return this.style.serialize()},t.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():i.warnOnce("There is no style added to the map.")},t.prototype.addSource=function(e,t){return this.style.addSource(e,t),this._update(!0),this},t.prototype.isSourceLoaded=function(e){var t=this.style&&this.style.sourceCaches[e];return void 0===t?void this.fire("error",{error:new Error("There is no source with ID '"+e+"'")}):t.loaded()},t.prototype.areTilesLoaded=function(){var e=this.style&&this.style.sourceCaches;for(var t in e){var n=e[t],r=n._tiles;for(var i in r){var o=r[i];if("loaded"!==o.state&&"errored"!==o.state)return!1}}return!0},t.prototype.addSourceType=function(e,t,n){return this.style.addSourceType(e,t,n)},t.prototype.removeSource=function(e){return this.style.removeSource(e),this._update(!0),this},t.prototype.getSource=function(e){return this.style.getSource(e)},t.prototype.addImage=function(e,t,n){void 0===n&&(n={});var r=n.pixelRatio;void 0===r&&(r=1);var i=n.sdf;if(void 0===i&&(i=!1),t instanceof u){var a=o.getImageData(t),s=a.width,l=a.height,c=a.data;this.style.addImage(e,{data:new T({width:s,height:l},c),pixelRatio:r,sdf:i})}else{if(void 0===t.width||void 0===t.height)return this.fire("error",{error:new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")});var p=t.width,d=t.height,f=t.data;this.style.addImage(e,{data:new T({width:p,height:d},f.slice(0)),pixelRatio:r,sdf:i})}},t.prototype.hasImage=function(e){return e?!!this.style.getImage(e):(this.fire("error",{error:new Error("Missing required image id")}),!1)},t.prototype.removeImage=function(e){this.style.removeImage(e)},t.prototype.loadImage=function(e,t){p.getImage(this._transformRequest(e,p.ResourceType.Image),t)},t.prototype.addLayer=function(e,t){return this.style.addLayer(e,t),this._update(!0),this},t.prototype.moveLayer=function(e,t){return this.style.moveLayer(e,t),this._update(!0),this},t.prototype.removeLayer=function(e){return this.style.removeLayer(e),this._update(!0),this},t.prototype.getLayer=function(e){return this.style.getLayer(e)},t.prototype.setFilter=function(e,t){return this.style.setFilter(e,t),this._update(!0),this},t.prototype.setLayerZoomRange=function(e,t,n){return this.style.setLayerZoomRange(e,t,n),this._update(!0),this},t.prototype.getFilter=function(e){return this.style.getFilter(e)},t.prototype.setPaintProperty=function(e,t,n){return this.style.setPaintProperty(e,t,n),this._update(!0),this},t.prototype.getPaintProperty=function(e,t){return this.style.getPaintProperty(e,t)},t.prototype.setLayoutProperty=function(e,t,n){return this.style.setLayoutProperty(e,t,n),this._update(!0),this},t.prototype.getLayoutProperty=function(e,t){return this.style.getLayoutProperty(e,t)},t.prototype.setLight=function(e){return this.style.setLight(e),this._update(!0),this},t.prototype.getLight=function(){return this.style.getLight()},t.prototype.getContainer=function(){return this._container},t.prototype.getCanvasContainer=function(){return this._canvasContainer},t.prototype.getCanvas=function(){return this._canvas},t.prototype._containerDimensions=function(){var e=0,t=0;return this._container&&(e=this._container.offsetWidth||400,t=this._container.offsetHeight||300),[e,t]},t.prototype._setupContainer=function(){var e=this._container;e.classList.add("mapboxgl-map"),(this._missingCSSContainer=c.create("div","mapboxgl-missing-css",e)).innerHTML="Missing Mapbox GL JS CSS";var t=this._canvasContainer=c.create("div","mapboxgl-canvas-container",e);this._interactive&&t.classList.add("mapboxgl-interactive"),this._canvas=c.create("canvas","mapboxgl-canvas",t),this._canvas.style.position="absolute",this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var n=this._containerDimensions();this._resizeCanvas(n[0],n[1]);var r=this._controlContainer=c.create("div","mapboxgl-control-container",e),i=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(e){i[e]=c.create("div","mapboxgl-ctrl-"+e,r)})},t.prototype._resizeCanvas=function(e,t){var n=a.devicePixelRatio||1;this._canvas.width=n*e,this._canvas.height=n*t,this._canvas.style.width=e+"px",this._canvas.style.height=t+"px"},t.prototype._setupPainter=function(){var e=i.extend({failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer},k.webGLContextAttributes),t=this._canvas.getContext("webgl",e)||this._canvas.getContext("experimental-webgl",e);if(!t)return void this.fire("error",{error:new Error("Failed to initialize WebGL")});this.painter=new h(t,this.transform)},t.prototype._contextLost=function(e){e.preventDefault(),this._frameId&&(o.cancelFrame(this._frameId),this._frameId=null),this.fire("webglcontextlost",{originalEvent:e})},t.prototype._contextRestored=function(e){this._setupPainter(),this.resize(),this._update(),this.fire("webglcontextrestored",{originalEvent:e})},t.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!(!this.style||!this.style.loaded())},t.prototype._update=function(e){this.style&&(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this._rerender())},t.prototype._render=function(){this._updateCamera();var e=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var t=this.transform.zoom,n=o.now();this.style.zoomHistory.update(t,n);var r=new f(t,{now:n,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),i=r.crossFadingFactor();1===i&&i===this._crossFadingFactor||(e=!0,this._crossFadingFactor=i),this.style.update(r)}return this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.rotating,zooming:this.zooming,fadeDuration:this._fadeDuration}),this.fire("render"),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire("load")),this.style&&(this.style.hasTransitions()||e)&&(this._styleDirty=!0),(this._sourcesDirty||this._repaint||this._styleDirty||this._placementDirty)&&this._rerender(),this},t.prototype.remove=function(){this._hash&&this._hash.remove(),o.cancelFrame(this._frameId),this._frameId=null,this.setStyle(null),void 0!==a&&(a.removeEventListener("resize",this._onWindowResize,!1),a.removeEventListener("online",this._onWindowOnline,!1));var e=this.painter.context.gl.getExtension("WEBGL_lose_context");e&&e.loseContext(),r(this._canvasContainer),r(this._controlContainer),r(this._missingCSSContainer),this._container.classList.remove("mapboxgl-map"),this.fire("remove")},t.prototype._rerender=function(){var e=this;this.style&&!this._frameId&&(this._frameId=o.frame(function(){e._frameId=null,e._render()}))},t.prototype._onWindowOnline=function(){this._update()},t.prototype._onWindowResize=function(){this._trackResize&&this.stop().resize()._update()},n.showTileBoundaries.get=function(){return!!this._showTileBoundaries},n.showTileBoundaries.set=function(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())},n.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},n.showCollisionBoxes.set=function(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())},n.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},n.showOverdrawInspector.set=function(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())},n.repaint.get=function(){return!!this._repaint},n.repaint.set=function(e){this._repaint=e,this._update()},n.vertices.get=function(){return!!this._vertices},n.vertices.set=function(e){this._vertices=e,this._update()},t.prototype._onData=function(e){this._update("style"===e.dataType),this.fire(e.dataType+"data",e)},t.prototype._onDataLoading=function(e){this.fire(e.dataType+"dataloading",e)},Object.defineProperties(t.prototype,n),t}(v);t.exports=C},{"../geo/lng_lat":61,"../geo/lng_lat_bounds":62,"../geo/transform":63,"../render/painter":89,"../style/evaluation_parameters":183,"../style/style":191,"../util/ajax":252,"../util/browser":253,"../util/dom":260,"../util/image":264,"../util/util":276,"../util/window":255,"./bind_handlers":231,"./camera":232,"./control/attribution_control":233,"./control/logo_control":236,"./events":239,"./hash":247,"@mapbox/mapbox-gl-supported":3,"@mapbox/point-geometry":4}],249:[function(e,t,n){"use strict";var r=e("../util/dom"),i=e("../geo/lng_lat"),o=e("@mapbox/point-geometry"),a=e("../util/smart_wrap"),s=e("../util/util"),u=s.bindAll,l=function(e,t){if(u(["_update","_onMapClick"],this),!e){e=r.create("div");var n=r.createNS("http://www.w3.org/2000/svg","svg");n.setAttributeNS(null,"height","41px"),n.setAttributeNS(null,"width","27px"),n.setAttributeNS(null,"viewBox","0 0 27 41");var i=r.createNS("http://www.w3.org/2000/svg","g");i.setAttributeNS(null,"stroke","none"),i.setAttributeNS(null,"stroke-width","1"),i.setAttributeNS(null,"fill","none"),i.setAttributeNS(null,"fill-rule","evenodd");var a=r.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"fill-rule","nonzero");var s=r.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"transform","translate(3.0, 29.0)"),s.setAttributeNS(null,"fill","#000000");for(var l=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}],c=0,p=l;c<p.length;c+=1){var d=p[c],f=r.createNS("http://www.w3.org/2000/svg","ellipse");f.setAttributeNS(null,"opacity","0.04"),f.setAttributeNS(null,"cx","10.5"),f.setAttributeNS(null,"cy","5.80029008"),f.setAttributeNS(null,"rx",d.rx),f.setAttributeNS(null,"ry",d.ry),s.appendChild(f)}var h=r.createNS("http://www.w3.org/2000/svg","g");h.setAttributeNS(null,"fill","#3FB1CE");var m=r.createNS("http://www.w3.org/2000/svg","path");m.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),h.appendChild(m);var g=r.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"opacity","0.25"),g.setAttributeNS(null,"fill","#000000");var y=r.createNS("http://www.w3.org/2000/svg","path");y.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),g.appendChild(y);var v=r.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"transform","translate(6.0, 7.0)"),v.setAttributeNS(null,"fill","#FFFFFF");var _=r.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"transform","translate(8.0, 8.0)");var b=r.createNS("http://www.w3.org/2000/svg","circle");b.setAttributeNS(null,"fill","#000000"),b.setAttributeNS(null,"opacity","0.25"),b.setAttributeNS(null,"cx","5.5"),b.setAttributeNS(null,"cy","5.5"),b.setAttributeNS(null,"r","5.4999962");var x=r.createNS("http://www.w3.org/2000/svg","circle");x.setAttributeNS(null,"fill","#FFFFFF"),x.setAttributeNS(null,"cx","5.5"),x.setAttributeNS(null,"cy","5.5"),x.setAttributeNS(null,"r","5.4999962"),_.appendChild(b),_.appendChild(x),a.appendChild(s),a.appendChild(h),a.appendChild(g),a.appendChild(v),a.appendChild(_),n.appendChild(a),e.appendChild(n);var w=[0,-14];t&&t.offset||(t?t.offset=w:t={offset:w})}this._offset=o.convert(t&&t.offset||[0,0]),e.classList.add("mapboxgl-marker"),this._element=e,this._popup=null};l.prototype.addTo=function(e){return this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),this._update(),this._map.on("click",this._onMapClick),this},l.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),delete this._map),r.remove(this._element),this._popup&&this._popup.remove(),this},l.prototype.getLngLat=function(){return this._lngLat},l.prototype.setLngLat=function(e){return this._lngLat=i.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},l.prototype.getElement=function(){return this._element},l.prototype.setPopup=function(e){return this._popup&&(this._popup.remove(),this._popup=null),e&&("offset"in e.options||(e.options.offset=this._offset),this._popup=e,this._lngLat&&this._popup.setLngLat(this._lngLat)),this},l.prototype._onMapClick=function(e){var t=e.originalEvent.target,n=this._element;this._popup&&(t===n||n.contains(t))&&this.togglePopup()},l.prototype.getPopup=function(){return this._popup},l.prototype.togglePopup=function(){var e=this._popup;return e?(e.isOpen()?e.remove():e.addTo(this._map),this):this},l.prototype._update=function(e){this._map&&(this._map.transform.renderWorldCopies&&(this._lngLat=a(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset),e&&"moveend"!==e.type||(this._pos=this._pos.round()),r.setTransform(this._element,"translate(-50%, -50%) translate("+this._pos.x+"px, "+this._pos.y+"px)"))},l.prototype.getOffset=function(){return this._offset},l.prototype.setOffset=function(e){return this._offset=o.convert(e),this._update(),this},t.exports=l},{"../geo/lng_lat":61,"../util/dom":260,"../util/smart_wrap":271,"../util/util":276,"@mapbox/point-geometry":4}],250:[function(e,t,n){"use strict";function r(e){if(e){if("number"==typeof e){var t=Math.round(Math.sqrt(.5*Math.pow(e,2)));return{top:new u(0,e),"top-left":new u(t,t),"top-right":new u(-t,t),bottom:new u(0,-e),"bottom-left":new u(t,-t),"bottom-right":new u(-t,-t),left:new u(e,0),right:new u(-e,0)}}if(e instanceof u||Array.isArray(e)){var n=u.convert(e);return{top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{top:u.convert(e.top||[0,0]),"top-left":u.convert(e["top-left"]||[0,0]),"top-right":u.convert(e["top-right"]||[0,0]),bottom:u.convert(e.bottom||[0,0]),"bottom-left":u.convert(e["bottom-left"]||[0,0]),"bottom-right":u.convert(e["bottom-right"]||[0,0]),left:u.convert(e.left||[0,0]),right:u.convert(e.right||[0,0])}}return r(new u(0,0))}var i=e("../util/util"),o=e("../util/evented"),a=e("../util/dom"),s=e("../geo/lng_lat"),u=e("@mapbox/point-geometry"),l=e("../util/window"),c=e("../util/smart_wrap"),p={closeButton:!0,closeOnClick:!0},d=function(e){function t(t){e.call(this),this.options=i.extend(Object.create(p),t),i.bindAll(["_update","_onClickClose"],this)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.addTo=function(e){return this._map=e,this._map.on("move",this._update),this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._update(),this},t.prototype.isOpen=function(){return!!this._map},t.prototype.remove=function(){return this._content&&a.remove(this._content),this._container&&(a.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),delete this._map),this.fire("close"),this},t.prototype.getLngLat=function(){return this._lngLat},t.prototype.setLngLat=function(e){return this._lngLat=s.convert(e),this._pos=null,this._update(),this},t.prototype.setText=function(e){return this.setDOMContent(l.document.createTextNode(e))},t.prototype.setHTML=function(e){var t,n=l.document.createDocumentFragment(),r=l.document.createElement("body");for(r.innerHTML=e;t=r.firstChild;)n.appendChild(t);return this.setDOMContent(n)},t.prototype.setDOMContent=function(e){return this._createContent(),this._content.appendChild(e),this._update(),this},t.prototype._createContent=function(){this._content&&a.remove(this._content),this._content=a.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=a.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},t.prototype._update=function(){if(this._map&&this._lngLat&&this._content){this._container||(this._container=a.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=a.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content)),this._map.transform.renderWorldCopies&&(this._lngLat=c(this._lngLat,this._pos,this._map.transform));var e=this._pos=this._map.project(this._lngLat),t=this.options.anchor,n=r(this.options.offset);if(!t){var i=this._container.offsetWidth,o=this._container.offsetHeight;t=e.y+n.bottom.y<o?["top"]:e.y>this._map.transform.height-o?["bottom"]:[],e.x<i/2?t.push("left"):e.x>this._map.transform.width-i/2&&t.push("right"),t=0===t.length?"bottom":t.join("-")}var s=e.add(n[t]).round(),u={top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},l=this._container.classList;for(var p in u)l.remove("mapboxgl-popup-anchor-"+p);l.add("mapboxgl-popup-anchor-"+t),a.setTransform(this._container,u[t]+" translate("+s.x+"px,"+s.y+"px)")}},t.prototype._onClickClose=function(){this.remove()},t}(o);t.exports=d},{"../geo/lng_lat":61,"../util/dom":260,"../util/evented":261,"../util/smart_wrap":271,"../util/util":276,"../util/window":255,"@mapbox/point-geometry":4}],251:[function(e,t,n){"use strict";var r=e("./util"),i=e("./web_worker_transfer"),o=i.serialize,a=i.deserialize,s=function(e,t,n){this.target=e,this.parent=t,this.mapId=n,this.callbacks={},this.callbackID=0,r.bindAll(["receive"],this),this.target.addEventListener("message",this.receive,!1)};s.prototype.send=function(e,t,n,r){var i=n?this.mapId+":"+this.callbackID++:null;n&&(this.callbacks[i]=n);var a=[];this.target.postMessage({targetMapId:r,sourceMapId:this.mapId,type:e,id:String(i),data:o(t,a)},a)},s.prototype.receive=function(e){var t,n=this,r=e.data,i=r.id;if(!r.targetMapId||this.mapId===r.targetMapId){var s=function(e,t){var r=[];n.target.postMessage({sourceMapId:n.mapId,type:"<response>",id:String(i),error:e?String(e):null,data:o(t,r)},r)};if("<response>"===r.type)t=this.callbacks[r.id],delete this.callbacks[r.id],t&&r.error?t(new Error(r.error)):t&&t(null,a(r.data));else if(void 0!==r.id&&this.parent[r.type])this.parent[r.type](r.sourceMapId,a(r.data),s);else if(void 0!==r.id&&this.parent.getWorkerSource){var u=r.type.split("."),l=this.parent.getWorkerSource(r.sourceMapId,u[0]);l[u[1]](a(r.data),s)}else this.parent[r.type](a(r.data))}},s.prototype.remove=function(){this.target.removeEventListener("message",this.receive,!1)},t.exports=s},{"./util":276,"./web_worker_transfer":279}],252:[function(e,t,n){"use strict";function r(e){var t=new o.XMLHttpRequest;t.open("GET",e.url,!0);for(var n in e.headers)t.setRequestHeader(n,e.headers[n]);return t.withCredentials="include"===e.credentials,t}function i(e){var t=o.document.createElement("a");return t.href=e,t.protocol===o.document.location.protocol&&t.host===o.document.location.host}var o=e("./window"),a={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};n.ResourceType=a,"function"==typeof Object.freeze&&Object.freeze(a);var s=function(e){function t(t,n){e.call(this,t),this.status=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error);n.getJSON=function(e,t){var n=r(e);return n.setRequestHeader("Accept","application/json"),n.onerror=function(){t(new Error(n.statusText))},n.onload=function(){if(n.status>=200&&n.status<300&&n.response){var e;try{e=JSON.parse(n.response)}catch(e){return t(e)}t(null,e)}else t(new s(n.statusText,n.status))},n.send(),n},n.getArrayBuffer=function(e,t){var n=r(e);return n.responseType="arraybuffer",n.onerror=function(){t(new Error(n.statusText))},n.onload=function(){var e=n.response;if(0===e.byteLength&&200===n.status)return t(new Error("http status 200 returned without content."));n.status>=200&&n.status<300&&n.response?t(null,{data:e,cacheControl:n.getResponseHeader("Cache-Control"),expires:n.getResponseHeader("Expires")}):t(new s(n.statusText,n.status))},n.send(),n},n.getImage=function(e,t){return n.getArrayBuffer(e,function(e,n){if(e)t(e);else if(n){var r=new o.Image,i=o.URL||o.webkitURL;r.onload=function(){t(null,r),i.revokeObjectURL(r.src)};var a=new o.Blob([new Uint8Array(n.data)],{type:"image/png"});r.cacheControl=n.cacheControl,r.expires=n.expires,r.src=n.data.byteLength?i.createObjectURL(a):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}})},n.getVideo=function(e,t){var n=o.document.createElement("video");n.onloadstart=function(){t(null,n)};for(var r=0;r<e.length;r++){var a=o.document.createElement("source");i(e[r])||(n.crossOrigin="Anonymous"),a.src=e[r],n.appendChild(a)}return n}},{"./window":255}],253:[function(e,t,n){"use strict";var r=e("./window"),i=r.performance&&r.performance.now?r.performance.now.bind(r.performance):Date.now.bind(Date),o=r.requestAnimationFrame||r.mozRequestAnimationFrame||r.webkitRequestAnimationFrame||r.msRequestAnimationFrame,a=r.cancelAnimationFrame||r.mozCancelAnimationFrame||r.webkitCancelAnimationFrame||r.msCancelAnimationFrame;t.exports={now:i,frame:function(e){return o(e)},cancelFrame:function(e){return a(e)},getImageData:function(e){var t=r.document.createElement("canvas"),n=t.getContext("2d");if(!n)throw new Error("failed to create canvas 2d context");return t.width=e.width,t.height=e.height,n.drawImage(e,0,0,e.width,e.height),n.getImageData(0,0,e.width,e.height)},hardwareConcurrency:r.navigator.hardwareConcurrency||4,get devicePixelRatio(){return r.devicePixelRatio},supportsWebp:!1};var s=r.document.createElement("img");s.onload=function(){t.exports.supportsWebp=!0},s.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="},{"./window":255}],254:[function(e,t,n){"use strict";var r=e("webworkify"),i=e("../window"),o=i.URL.createObjectURL(new r(e("../../source/worker"),{bare:!0}));t.exports=function(){return new i.Worker(o)}},{"../../source/worker":117,"../window":255,webworkify:35}],255:[function(e,t,n){"use strict";t.exports=self},{}],256:[function(e,t,n){"use strict";function r(e,t){return t.area-e.area}var i=e("quickselect"),o=e("./util").calculateSignedArea;t.exports=function(e,t){var n=e.length;if(n<=1)return[e];for(var a,s,u=[],l=0;l<n;l++){var c=o(e[l]);0!==c&&(e[l].area=Math.abs(c),void 0===s&&(s=c<0),s===c<0?(a&&u.push(a),a=[e[l]]):a.push(e[l]))}if(a&&u.push(a),t>1)for(var p=0;p<u.length;p++)u[p].length<=t||(i(u[p],t,1,u[p].length-1,r),u[p]=u[p].slice(0,t));return u}},{"./util":276,quickselect:30}],257:[function(e,t,n){"use strict";var r={API_URL:"https://api.mapbox.com",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null};t.exports=r},{}],258:[function(e,t,n){"use strict";var r=function(e){var t=this;this._stringToNumber={},this._numberToString=[];for(var n=0;n<e.length;n++){var r=e[n];t._stringToNumber[r]=n,t._numberToString[n]=r}};r.prototype.encode=function(e){return this._stringToNumber[e]},r.prototype.decode=function(e){return this._numberToString[e]},t.exports=r},{}],259:[function(e,t,n){"use strict";var r=e("./util"),i=e("./actor"),o=function(e,t){var n=this;this.workerPool=e,this.actors=[],this.currentActor=0,this.id=r.uniqueId();for(var o=this.workerPool.acquire(this.id),a=0;a<o.length;a++){var s=o[a],u=new i(s,t,n.id);u.name="Worker "+a,n.actors.push(u)}};o.prototype.broadcast=function(e,t,n){n=n||function(){},r.asyncAll(this.actors,function(n,r){n.send(e,t,r)},n)},o.prototype.send=function(e,t,n,r){return("number"!=typeof r||isNaN(r))&&(r=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[r].send(e,t,n),r},o.prototype.remove=function(){this.actors.forEach(function(e){e.remove()}),this.actors=[],this.workerPool.release(this.id)},t.exports=o},{"./actor":251,"./util":276}],260:[function(e,t,n){"use strict";function r(e){for(var t=0;t<e.length;t++)if(e[t]in s)return e[t];return e[0]}var i=e("@mapbox/point-geometry"),o=e("./window");n.create=function(e,t,n){var r=o.document.createElement(e);return t&&(r.className=t),n&&n.appendChild(r),r},n.createNS=function(e,t){return o.document.createElementNS(e,t)};var a,s=o.document.documentElement.style,u=r(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);n.disableDrag=function(){u&&(a=s[u],s[u]="none")},n.enableDrag=function(){u&&(s[u]=a)};var l=r(["transform","WebkitTransform"]);n.setTransform=function(e,t){e.style[l]=t};var c=function(e){e.preventDefault(),e.stopPropagation(),o.removeEventListener("click",c,!0)};n.suppressClick=function(){o.addEventListener("click",c,!0),o.setTimeout(function(){o.removeEventListener("click",c,!0)},0)},n.mousePos=function(e,t){var n=e.getBoundingClientRect();return t=t.touches?t.touches[0]:t,new i(t.clientX-n.left-e.clientLeft,t.clientY-n.top-e.clientTop)},n.touchPos=function(e,t){for(var n=e.getBoundingClientRect(),r=[],o="touchend"===t.type?t.changedTouches:t.touches,a=0;a<o.length;a++)r.push(new i(o[a].clientX-n.left-e.clientLeft,o[a].clientY-n.top-e.clientTop));return r},n.remove=function(e){e.parentNode&&e.parentNode.removeChild(e)}},{"./window":255,"@mapbox/point-geometry":4}],261:[function(e,t,n){"use strict";function r(e,t,n){n[e]=n[e]||[],n[e].push(t)}function i(e,t,n){if(n&&n[e]){var r=n[e].indexOf(t);-1!==r&&n[e].splice(r,1)}}var o=e("./util"),a=function(){};a.prototype.on=function(e,t){return this._listeners=this._listeners||{},r(e,t,this._listeners),this},a.prototype.off=function(e,t){return i(e,t,this._listeners),i(e,t,this._oneTimeListeners),this},a.prototype.once=function(e,t){return this._oneTimeListeners=this._oneTimeListeners||{},r(e,t,this._oneTimeListeners),this},a.prototype.fire=function(e,t){var n=this;if(this.listens(e)){t=o.extend({},t,{type:e,target:this});for(var r=this._listeners&&this._listeners[e]?this._listeners[e].slice():[],a=0,s=r;a<s.length;a+=1)s[a].call(n,t);for(var u=this._oneTimeListeners&&this._oneTimeListeners[e]?this._oneTimeListeners[e].slice():[],l=0,c=u;l<c.length;l+=1){var p=c[l];i(e,p,n._oneTimeListeners),p.call(n,t)}this._eventedParent&&this._eventedParent.fire(e,o.extend({},t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData))}else o.endsWith(e,"error")&&console.error(t&&t.error||t||"Empty error event");return this},a.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)},a.prototype.setEventedParent=function(e,t){return this._eventedParent=e,this._eventedParentData=t,this},t.exports=a},{"./util":276}],262:[function(e,t,n){"use strict";function r(e,t){return t.max-e.max}function i(e,t,n,r){this.p=new u(e,t),this.h=n,this.d=o(this.p,r),this.max=this.d+this.h*Math.SQRT2}function o(e,t){for(var n=!1,r=1/0,i=0;i<t.length;i++)for(var o=t[i],a=0,s=o.length,u=s-1;a<s;u=a++){var c=o[a],p=o[u];c.y>e.y!=p.y>e.y&&e.x<(p.x-c.x)*(e.y-c.y)/(p.y-c.y)+c.x&&(n=!n),r=Math.min(r,l(e,c,p))}return(n?1:-1)*Math.sqrt(r)}function a(e){for(var t=0,n=0,r=0,o=e[0],a=0,s=o.length,u=s-1;a<s;u=a++){var l=o[a],c=o[u],p=l.x*c.y-c.x*l.y;n+=(l.x+c.x)*p,r+=(l.y+c.y)*p,t+=3*p}return new i(n/t,r/t,0,e)}var s=e("tinyqueue"),u=e("@mapbox/point-geometry"),l=e("./intersection_tests").distToSegmentSquared;t.exports=function(e,t,n){void 0===t&&(t=1),void 0===n&&(n=!1);for(var o=1/0,l=1/0,c=-1/0,p=-1/0,d=e[0],f=0;f<d.length;f++){var h=d[f];(!f||h.x<o)&&(o=h.x),(!f||h.y<l)&&(l=h.y),(!f||h.x>c)&&(c=h.x),(!f||h.y>p)&&(p=h.y)}var m=c-o,g=p-l,y=Math.min(m,g),v=y/2,_=new s(null,r);if(0===y)return new u(o,l);for(var b=o;b<c;b+=y)for(var x=l;x<p;x+=y)_.push(new i(b+v,x+v,v,e));for(var w=a(e),S=_.length;_.length;){var k=_.pop();(k.d>w.d||!w.d)&&(w=k,n&&console.log("found best %d after %d probes",Math.round(1e4*k.d)/1e4,S)),k.max-w.d<=t||(v=k.h/2,_.push(new i(k.p.x-v,k.p.y-v,v,e)),_.push(new i(k.p.x+v,k.p.y-v,v,e)),_.push(new i(k.p.x-v,k.p.y+v,v,e)),_.push(new i(k.p.x+v,k.p.y+v,v,e)),S+=4)}return n&&(console.log("num probes: "+S),console.log("best distance: "+w.d)),w.p}},{"./intersection_tests":265,"@mapbox/point-geometry":4,tinyqueue:32}],263:[function(e,t,n){"use strict";var r,i=e("./worker_pool");t.exports=function(){return r||(r=new i),r}},{"./worker_pool":280}],264:[function(e,t,n){"use strict";function r(e,t,n,r){var i=t.width,o=t.height;if(r){if(r.length!==i*o*n)throw new RangeError("mismatched image size")}else r=new Uint8Array(i*o*n);return e.width=i,e.height=o,e.data=r,e}function i(e,t,n){var i=t.width,a=t.height;if(i!==e.width||a!==e.height){var s=r({},{width:i,height:a},n);o(e,s,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,i),height:Math.min(e.height,a)},n),e.width=i,e.height=a,e.data=s.data}}function o(e,t,n,r,i,o){if(0===i.width||0===i.height)return t;if(i.width>e.width||i.height>e.height||n.x>e.width-i.width||n.y>e.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>t.width||i.height>t.height||r.x>t.width-i.width||r.y>t.height-i.height)throw new RangeError("out of range destination coordinates for image copy");for(var a=e.data,s=t.data,u=0;u<i.height;u++)for(var l=((n.y+u)*e.width+n.x)*o,c=((r.y+u)*t.width+r.x)*o,p=0;p<i.width*o;p++)s[c+p]=a[l+p];return t}var a=e("./web_worker_transfer"),s=a.register,u=function(e,t){r(this,e,1,t)};u.prototype.resize=function(e){i(this,e,1)},u.prototype.clone=function(){return new u({width:this.width,height:this.height},new Uint8Array(this.data))},u.copy=function(e,t,n,r,i){o(e,t,n,r,i,1)};var l=function(e,t){r(this,e,4,t)};l.prototype.resize=function(e){i(this,e,4)},l.prototype.clone=function(){return new l({width:this.width,height:this.height},new Uint8Array(this.data))},l.copy=function(e,t,n,r,i){o(e,t,n,r,i,4)},s("AlphaImage",u),s("RGBAImage",l),t.exports={AlphaImage:u,RGBAImage:l}},{"./web_worker_transfer":279}],265:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<e.length;n++)if(f(t,e[n]))return!0;for(var r=0;r<t.length;r++)if(f(e,t[r]))return!0;return!!u(e,t)}function i(e,t,n){for(var r=0;r<e.length;r++)for(var i=e[r],o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var u=a[s];if(f(i,u))return!0;if(c(u,i,n))return!0}return!1}function o(e,t){if(1===e.length&&1===e[0].length)return d(t,e[0][0]);for(var n=0;n<t.length;n++)for(var r=t[n],i=0;i<r.length;i++)if(d(e,r[i]))return!0;for(var o=0;o<e.length;o++){for(var a=e[o],s=0;s<a.length;s++)if(d(t,a[s]))return!0;for(var l=0;l<t.length;l++)if(u(a,t[l]))return!0}return!1}function a(e,t,n){for(var r=0;r<t.length;r++)for(var i=t[r],o=0;o<e.length;o++){var a=e[o];if(a.length>=3)for(var u=0;u<i.length;u++)if(f(a,i[u]))return!0;if(s(a,i,n))return!0}return!1}function s(e,t,n){if(e.length>1){if(u(e,t))return!0;for(var r=0;r<t.length;r++)if(c(t[r],e,n))return!0}for(var i=0;i<e.length;i++)if(c(e[i],t,n))return!0;return!1}function u(e,t){if(0===e.length||0===t.length)return!1;for(var n=0;n<e.length-1;n++)for(var r=e[n],i=e[n+1],o=0;o<t.length-1;o++){var a=t[o],s=t[o+1];if(l(r,i,a,s))return!0}return!1}function l(e,t,n,r){return m(e,n,r)!==m(t,n,r)&&m(e,t,n)!==m(e,t,r)}function c(e,t,n){var r=n*n;if(1===t.length)return e.distSqr(t[0])<r;for(var i=1;i<t.length;i++)if(p(e,t[i-1],t[i])<r)return!0;return!1}function p(e,t,n){var r=t.distSqr(n);if(0===r)return e.distSqr(t);var i=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/r;return i<0?e.distSqr(t):i>1?e.distSqr(n):e.distSqr(n.sub(t)._mult(i)._add(t))}function d(e,t){for(var n,r,i,o=!1,a=0;a<e.length;a++){n=e[a];for(var s=0,u=n.length-1;s<n.length;u=s++)r=n[s],i=n[u],r.y>t.y!=i.y>t.y&&t.x<(i.x-r.x)*(t.y-r.y)/(i.y-r.y)+r.x&&(o=!o)}return o}function f(e,t){for(var n=!1,r=0,i=e.length-1;r<e.length;i=r++){var o=e[r],a=e[i];o.y>t.y!=a.y>t.y&&t.x<(a.x-o.x)*(t.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}var h=e("./util"),m=h.isCounterClockwise;t.exports={multiPolygonIntersectsBufferedMultiPoint:i,multiPolygonIntersectsMultiPolygon:o,multiPolygonIntersectsBufferedMultiLine:a,polygonIntersectsPolygon:r,distToSegmentSquared:p}},{"./util":276}],266:[function(e,t,n){"use strict";var r={"Latin-1 Supplement":function(e){return e>=128&&e<=255},Arabic:function(e){return e>=1536&&e<=1791},"Arabic Supplement":function(e){return e>=1872&&e<=1919},"Arabic Extended-A":function(e){return e>=2208&&e<=2303},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Arabic Presentation Forms-A":function(e){return e>=64336&&e<=65023},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Arabic Presentation Forms-B":function(e){return e>=65136&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};t.exports=r},{}],267:[function(e,t,n){"use strict";var r=function(e,t){this.max=e,this.onRemove=t,this.reset()};r.prototype.reset=function(){var e=this;for(var t in e.data)e.onRemove(e.data[t]);return this.data={},this.order=[],this},r.prototype.add=function(e,t){if(this.has(e))this.order.splice(this.order.indexOf(e),1),this.data[e]=t,this.order.push(e);else if(this.data[e]=t,this.order.push(e),this.order.length>this.max){var n=this.getAndRemove(this.order[0]);n&&this.onRemove(n)}return this},r.prototype.has=function(e){return e in this.data},r.prototype.keys=function(){return this.order},r.prototype.getAndRemove=function(e){if(!this.has(e))return null;var t=this.data[e];return delete this.data[e],this.order.splice(this.order.indexOf(e),1),t},r.prototype.get=function(e){return this.has(e)?this.data[e]:null},r.prototype.remove=function(e){if(!this.has(e))return this;var t=this.data[e];return delete this.data[e],this.onRemove(t),this.order.splice(this.order.indexOf(e),1),this},r.prototype.setMaxSize=function(e){var t=this;for(this.max=e;this.order.length>this.max;){var n=t.getAndRemove(t.order[0]);n&&t.onRemove(n)}return this},t.exports=r},{}],268:[function(e,t,n){"use strict";function r(e,t){var n=a(u.API_URL);if(e.protocol=n.protocol,e.authority=n.authority,"/"!==n.path&&(e.path=""+n.path+e.path),!u.REQUIRE_ACCESS_TOKEN)return s(e);if(!(t=t||u.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+c);if("s"===t[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+c);return e.params.push("access_token="+t),s(e)}function i(e){return 0===e.indexOf("mapbox:")}function o(e){for(var t=0;t<e.length;t++)0===e[t].indexOf("access_token=tk.")&&(e[t]="access_token="+(u.ACCESS_TOKEN||""))}function a(e){var t=e.match(d);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function s(e){var t=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+t}var u=e("./config"),l=e("./browser"),c="See https://www.mapbox.com/api-documentation/#access-tokens";n.isMapboxURL=i,n.normalizeStyleURL=function(e,t){if(!i(e))return e;var n=a(e);return n.path="/styles/v1"+n.path,r(n,t)},n.normalizeGlyphsURL=function(e,t){if(!i(e))return e;var n=a(e);return n.path="/fonts/v1"+n.path,r(n,t)},n.normalizeSourceURL=function(e,t){if(!i(e))return e;var n=a(e);return n.path="/v4/"+n.authority+".json",n.params.push("secure"),r(n,t)},n.normalizeSpriteURL=function(e,t,n,o){var u=a(e);return i(e)?(u.path="/styles/v1"+u.path+"/sprite"+t+n,r(u,o)):(u.path+=""+t+n,s(u))};var p=/(\.(png|jpg)\d*)(?=$)/;n.normalizeTileURL=function(e,t,n){if(!t||!i(t))return e;var r=a(e),u=l.devicePixelRatio>=2||512===n?"@2x":"",c=l.supportsWebp?".webp":"$1";return r.path=r.path.replace(p,""+u+c),o(r.params),s(r)};var d=/^(\w+):\/\/([^\/?]*)(\/[^?]+)?\??(.+)?/},{"./browser":253,"./config":257}],269:[function(e,t,n){"use strict";t.exports={getEntriesByName:function(e){return!(!performance||!performance.getEntriesByName)&&performance.getEntriesByName(e)}}},{}],270:[function(e,t,n){"use strict";var r=e("./is_char_in_unicode_block");t.exports.allowsIdeographicBreaking=function(e){for(var t=0,r=e;t<r.length;t+=1){var i=r[t];if(!n.charAllowsIdeographicBreaking(i.charCodeAt(0)))return!1}return!0},t.exports.allowsVerticalWritingMode=function(e){for(var t=0,r=e;t<r.length;t+=1){var i=r[t];if(n.charHasUprightVerticalOrientation(i.charCodeAt(0)))return!0}return!1},t.exports.allowsLetterSpacing=function(e){for(var t=0,r=e;t<r.length;t+=1){var i=r[t];if(!n.charAllowsLetterSpacing(i.charCodeAt(0)))return!1}return!0},t.exports.charAllowsLetterSpacing=function(e){return!(r.Arabic(e)||r["Arabic Supplement"](e)||r["Arabic Extended-A"](e)||r["Arabic Presentation Forms-A"](e)||r["Arabic Presentation Forms-B"](e))},t.exports.charAllowsIdeographicBreaking=function(e){return!(e<11904||!(r["Bopomofo Extended"](e)||r.Bopomofo(e)||r["CJK Compatibility Forms"](e)||r["CJK Compatibility Ideographs"](e)||r["CJK Compatibility"](e)||r["CJK Radicals Supplement"](e)||r["CJK Strokes"](e)||r["CJK Symbols and Punctuation"](e)||r["CJK Unified Ideographs Extension A"](e)||r["CJK Unified Ideographs"](e)||r["Enclosed CJK Letters and Months"](e)||r["Halfwidth and Fullwidth Forms"](e)||r.Hiragana(e)||r["Ideographic Description Characters"](e)||r["Kangxi Radicals"](e)||r["Katakana Phonetic Extensions"](e)||r.Katakana(e)||r["Vertical Forms"](e)||r["Yi Radicals"](e)||r["Yi Syllables"](e)))},n.charHasUprightVerticalOrientation=function(e){return!(746!==e&&747!==e&&(e<4352||!(r["Bopomofo Extended"](e)||r.Bopomofo(e)||r["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||r["CJK Compatibility Ideographs"](e)||r["CJK Compatibility"](e)||r["CJK Radicals Supplement"](e)||r["CJK Strokes"](e)||!(!r["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||r["CJK Unified Ideographs Extension A"](e)||r["CJK Unified Ideographs"](e)||r["Enclosed CJK Letters and Months"](e)||r["Hangul Compatibility Jamo"](e)||r["Hangul Jamo Extended-A"](e)||r["Hangul Jamo Extended-B"](e)||r["Hangul Jamo"](e)||r["Hangul Syllables"](e)||r.Hiragana(e)||r["Ideographic Description Characters"](e)||r.Kanbun(e)||r["Kangxi Radicals"](e)||r["Katakana Phonetic Extensions"](e)||r.Katakana(e)&&12540!==e||!(!r["Halfwidth and Fullwidth Forms"](e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!r["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||r["Unified Canadian Aboriginal Syllabics"](e)||r["Unified Canadian Aboriginal Syllabics Extended"](e)||r["Vertical Forms"](e)||r["Yijing Hexagram Symbols"](e)||r["Yi Syllables"](e)||r["Yi Radicals"](e))))},n.charHasNeutralVerticalOrientation=function(e){return!!(r["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||r["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||r["Letterlike Symbols"](e)||r["Number Forms"](e)||r["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||r["Control Pictures"](e)&&9251!==e||r["Optical Character Recognition"](e)||r["Enclosed Alphanumerics"](e)||r["Geometric Shapes"](e)||r["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||r["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||r["CJK Symbols and Punctuation"](e)||r.Katakana(e)||r["Private Use Area"](e)||r["CJK Compatibility Forms"](e)||r["Small Form Variants"](e)||r["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e)},n.charHasRotatedVerticalOrientation=function(e){return!(n.charHasUprightVerticalOrientation(e)||n.charHasNeutralVerticalOrientation(e))}},{"./is_char_in_unicode_block":266}],271:[function(e,t,n){"use strict";var r=e("../geo/lng_lat");t.exports=function(e,t,n){if(e=new r(e.lng,e.lat),t){var i=new r(e.lng-360,e.lat),o=new r(e.lng+360,e.lat),a=n.locationPoint(e).distSqr(t);n.locationPoint(i).distSqr(t)<a?e=i:n.locationPoint(o).distSqr(t)<a&&(e=o)}for(;Math.abs(e.lng-n.center.lng)>180;){var s=n.locationPoint(e);if(s.x>=0&&s.y>=0&&s.x<=n.width&&s.y<=n.height)break;e.lng>n.center.lng?e.lng-=360:e.lng+=360}return e}},{"../geo/lng_lat":61}],272:[function(e,t,n){"use strict";function r(e,t){void 0===t&&(t=1);var n=0,r=0;return{members:e.map(function(e){var a=i(e.type),s=n=o(n,Math.max(t,a)),u=e.components||1;return r=Math.max(r,a),n+=a*u,{name:e.name,type:e.type,components:u,offset:s}}),size:o(n,Math.max(r,t)),alignment:t}}function i(e){return a[e].BYTES_PER_ELEMENT}function o(e,t){return Math.ceil(e/t)*t}var a={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},s=function(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},u=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};u.serialize=function(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}},u.deserialize=function(e){var t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t},u.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},u.prototype.clear=function(){this.length=0},u.prototype.resize=function(e){this.reserve(e),this.length=e},u.prototype.reserve=function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}},u.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")},t.exports.StructArray=u,t.exports.Struct=s,t.exports.viewTypes=a,t.exports.createLayout=r},{}],273:[function(e,t,n){"use strict";t.exports=function(e,t){var n=!1,r=0,i=function(){r=0,n&&(e(),r=setTimeout(i,t),n=!1)};return function(){return n=!0,r||i(),r}}},{}],274:[function(e,t,n){"use strict";function r(e,t,n,r){function i(t,i,a){var l,c,p,d;if(a>=0&&a<=o)for(l=t;l<i;l++)c=Math.floor(l/o),p=(l%o+o)%o,0!==c&&!0!==r||(d=new u(n,c,e,p,a),s[d.key]=d)}void 0===r&&(r=!0);var o=1<<e,s={};return a(t[0],t[1],t[2],0,o,i),a(t[2],t[3],t[0],0,o,i),Object.keys(s).map(function(e){return s[e]})}function i(e,t){if(e.row>t.row){var n=e;e=t,t=n}return{x0:e.column,y0:e.row,x1:t.column,y1:t.row,dx:t.column-e.column,dy:t.row-e.row}}function o(e,t,n,r,i){var o=Math.max(n,Math.floor(t.y0)),a=Math.min(r,Math.ceil(t.y1));if(e.x0===t.x0&&e.y0===t.y0?e.x0+t.dy/e.dy*e.dx<t.x1:e.x1-t.dy/e.dy*e.dx<t.x0){var s=e;e=t,t=s}for(var u=e.dx/e.dy,l=t.dx/t.dy,c=e.dx>0,p=t.dx<0,d=o;d<a;d++){var f=u*Math.max(0,Math.min(e.dy,d+c-e.y0))+e.x0,h=l*Math.max(0,Math.min(t.dy,d+p-t.y0))+t.x0;i(Math.floor(h),Math.ceil(f),d)}}function a(e,t,n,r,a,s){var u,l=i(e,t),c=i(t,n),p=i(n,e);l.dy>c.dy&&(u=l,l=c,c=u),l.dy>p.dy&&(u=l,l=p,p=u),c.dy>p.dy&&(u=c,c=p,p=u),l.dy&&o(p,l,r,a,s),c.dy&&o(p,c,r,a,s)}var s=(e("../geo/coordinate"),e("../source/tile_id")),u=s.OverscaledTileID;t.exports=r},{"../geo/coordinate":60,"../source/tile_id":113}],275:[function(e,t,n){"use strict";function r(e,t){return t.replace(/{([^{}]+)}/g,function(t,n){return n in e?String(e[n]):""})}t.exports=r},{}],276:[function(e,t,n){"use strict";var r=e("@mapbox/unitbezier"),i=e("../geo/coordinate");e("@mapbox/point-geometry"),n.easeCubicInOut=function(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)},n.bezier=function(e,t,n,i){var o=new r(e,t,n,i);return function(e){return o.solve(e)}},n.ease=n.bezier(.25,.1,.25,1),n.clamp=function(e,t,n){return Math.min(n,Math.max(t,e))},n.wrap=function(e,t,n){var r=n-t,i=((e-t)%r+r)%r+t;return i===t?n:i},n.asyncAll=function(e,t,n){if(!e.length)return n(null,[]);var r=e.length,i=new Array(e.length),o=null;e.forEach(function(e,a){t(e,function(e,t){e&&(o=e),i[a]=t,0==--r&&n(o,i)})})},n.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},n.keysDifference=function(e,t){var n=[];for(var r in e)r in t||n.push(r);return n},n.extend=function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];for(var r=0,i=t;r<i.length;r+=1){var o=i[r];for(var a in o)e[a]=o[a]}return e},n.pick=function(e,t){for(var n={},r=0;r<t.length;r++){var i=t[r];i in e&&(n[i]=e[i])}return n};var o=1;n.uniqueId=function(){return o++},n.bindAll=function(e,t){e.forEach(function(e){t[e]&&(t[e]=t[e].bind(t))})},n.getCoordinatesCenter=function(e){for(var t=1/0,n=1/0,r=-1/0,o=-1/0,a=0;a<e.length;a++)t=Math.min(t,e[a].column),n=Math.min(n,e[a].row),r=Math.max(r,e[a].column),o=Math.max(o,e[a].row);var s=r-t,u=o-n,l=Math.max(s,u),c=Math.max(0,Math.floor(-Math.log(l)/Math.LN2));return new i((t+r)/2,(n+o)/2,0).zoomTo(c)},n.endsWith=function(e,t){return-1!==e.indexOf(t,e.length-t.length)},n.mapObject=function(e,t,n){var r=this,i={};for(var o in e)i[o]=t.call(n||r,e[o],o,e);return i},n.filterObject=function(e,t,n){var r=this,i={};for(var o in e)t.call(n||r,e[o],o,e)&&(i[o]=e[o]);return i},n.deepEqual=e("../style-spec/util/deep_equal"),n.clone=function(e){return Array.isArray(e)?e.map(n.clone):"object"==typeof e&&e?n.mapObject(e,n.clone):e},n.arraysIntersect=function(e,t){for(var n=0;n<e.length;n++)if(t.indexOf(e[n])>=0)return!0;return!1};var a={};n.warnOnce=function(e){a[e]||("undefined"!=typeof console&&console.warn(e),a[e]=!0)},n.isCounterClockwise=function(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)},n.calculateSignedArea=function(e){for(var t=0,n=0,r=e.length,i=r-1,o=void 0,a=void 0;n<r;i=n++)o=e[n],a=e[i],t+=(a.x-o.x)*(o.y+a.y);return t},n.isClosedPolygon=function(e){if(e.length<4)return!1;var t=e[0],r=e[e.length-1];return!(Math.abs(t.x-r.x)>0||Math.abs(t.y-r.y)>0)&&Math.abs(n.calculateSignedArea(e))>.01},n.sphericalToCartesian=function(e){var t=e[0],n=e[1],r=e[2];return n+=90,n*=Math.PI/180,r*=Math.PI/180,{x:t*Math.cos(n)*Math.sin(r),y:t*Math.sin(n)*Math.sin(r),z:t*Math.cos(r)}},n.parseCacheControl=function(e){var t=/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,n={};if(e.replace(t,function(e,t,r,i){var o=r||i;return n[t]=!o||o.toLowerCase(),""}),n["max-age"]){var r=parseInt(n["max-age"],10);isNaN(r)?delete n["max-age"]:n["max-age"]=r}return n}},{"../geo/coordinate":60,"../style-spec/util/deep_equal":156,"@mapbox/point-geometry":4,"@mapbox/unitbezier":7}],277:[function(e,t,n){"use strict";var r=function(e,t,n,r){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=n,e._y=r,this.properties=e.properties,null!=e.id&&(this.id=e.id)},i={geometry:{}};i.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},i.geometry.set=function(e){this._geometry=e},r.prototype.toJSON=function(){var e=this,t={geometry:this.geometry};for(var n in e)"_geometry"!==n&&"_vectorTileFeature"!==n&&(t[n]=e[n]);return t},Object.defineProperties(r.prototype,i),t.exports=r},{}],278:[function(e,t,n){"use strict";var r=e("./script_detection");t.exports=function(e){for(var n="",i=0;i<e.length;i++){var o=e.charCodeAt(i+1)||null,a=e.charCodeAt(i-1)||null;o&&r.charHasRotatedVerticalOrientation(o)&&!t.exports.lookup[e[i+1]]||a&&r.charHasRotatedVerticalOrientation(a)&&!t.exports.lookup[e[i-1]]||!t.exports.lookup[e[i]]?n+=e[i]:n+=t.exports.lookup[e[i]]}return n},t.exports.lookup={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"}},{"./script_detection":270}],279:[function(e,t,n){"use strict";function r(e,t,n){void 0===n&&(n={}),Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),_[e]={klass:t,omit:n.omit||[],shallow:n.shallow||[]}}function i(e,t){if(null===e||void 0===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(e instanceof ArrayBuffer)return t&&t.push(e),e;if(ArrayBuffer.isView(e)){var n=e;return t&&t.push(n.buffer),n}if(e instanceof v)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){for(var r=[],o=0,a=e;o<a.length;o+=1){var s=a[o];r.push(i(s,t))}return r}if("object"==typeof e){var u=e.constructor,l=u._classRegistryKey;if(!l)throw new Error("can't serialize object of unregistered class");var c={};if(u.serialize)c._serialized=u.serialize(e,t);else for(var p in e)if(e.hasOwnProperty(p)&&!(_[l].omit.indexOf(p)>=0)){var d=e[p];c[p]=_[l].shallow.indexOf(p)>=0?d:i(d,t)}return{name:l,properties:c}}throw new Error("can't serialize object of type "+typeof e)}function o(e){if(null===e||void 0===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||e instanceof ArrayBuffer||ArrayBuffer.isView(e)||e instanceof v)return e;if(Array.isArray(e))return e.map(function(e){return o(e)});if("object"==typeof e){var t=e,n=t.name,r=t.properties;if(!n)throw new Error("can't deserialize object of anonymous class");var i=_[n],a=i.klass;if(!a)throw new Error("can't deserialize unregistered class "+n);if(a.deserialize)return a.deserialize(r._serialized);for(var s=Object.create(a.prototype),u=0,l=Object.keys(r);u<l.length;u+=1){var c=l[u];s[c]=_[n].shallow.indexOf(c)>=0?r[c]:o(r[c])}return s}throw new Error("can't deserialize object of type "+typeof e)}var a=e("grid-index"),s=e("../style-spec/util/color"),u=e("../style-spec/expression"),l=u.StylePropertyFunction,c=u.StyleExpression,p=u.StyleExpressionWithErrorHandling,d=u.ZoomDependentExpression,f=u.ZoomConstantExpression,h=e("../style-spec/expression/compound_expression"),m=h.CompoundExpression,g=e("../style-spec/expression/definitions"),y=e("./window"),v=y.ImageData,_={};r("Object",Object),a.serialize=function(e,t){var n=e.toArrayBuffer();return t&&t.push(n),n},a.deserialize=function(e){return new a(e)},r("Grid",a),r("Color",s),r("StylePropertyFunction",l),r("StyleExpression",c,{omit:["_evaluator"]}),r("StyleExpressionWithErrorHandling",p,{omit:["_evaluator"]}),r("ZoomDependentExpression",d),r("ZoomConstantExpression",f),r("CompoundExpression",m,{omit:["_evaluate"]});for(var b in g)g[b]._classRegistryKey||r("Expression_"+b,g[b]);t.exports={register:r,serialize:i,deserialize:o}},{"../style-spec/expression":138,"../style-spec/expression/compound_expression":122,"../style-spec/expression/definitions":130,"../style-spec/util/color":154,"./window":255,"grid-index":23}],280:[function(e,t,n){"use strict";var r=e("./web_worker"),i=function(){this.active={}};i.prototype.acquire=function(t){var n=this;if(!this.workers){var i=e("../").workerCount;for(this.workers=[];this.workers.length<i;)n.workers.push(new r)}return this.active[t]=!0,this.workers.slice()},i.prototype.release=function(e){delete this.active[e],0===Object.keys(this.active).length&&(this.workers.forEach(function(e){e.terminate()}),this.workers=null)},t.exports=i},{"../":72,"./web_worker":254}]},{},[72])(72)}()}()},,,,,,,,,,,,,,,function(e,t,n){"use strict";n(462)()||Object.defineProperty(n(463),"Symbol",{value:n(464),configurable:!0,enumerable:!1,writable:!0})},function(e,t,n){"use strict";var r={object:!0,symbol:!0};e.exports=function(){var e;if("function"!=typeof Symbol)return!1;e=Symbol("test symbol");try{String(e)}catch(e){return!1}return!!r[typeof Symbol.iterator]&&!!r[typeof Symbol.toPrimitive]&&!!r[typeof Symbol.toStringTag]}},function(e,t){e.exports=function(){return this}()},function(e,t,n){"use strict";var r,i,o,a,s=n(465),u=n(479),l=Object.create,c=Object.defineProperties,p=Object.defineProperty,d=Object.prototype,f=l(null);if("function"==typeof Symbol){r=Symbol;try{String(r()),a=!0}catch(e){}}var h=function(){var e=l(null);return function(t){for(var n,r,i=0;e[t+(i||"")];)++i;return t+=i||"",e[t]=!0,n="@@"+t,p(d,n,s.gs(null,function(e){r||(r=!0,p(this,n,s(e)),r=!1)})),n}}();o=function(e){if(this instanceof o)throw new TypeError("Symbol is not a constructor");return i(e)},e.exports=i=function e(t){var n;if(this instanceof e)throw new TypeError("Symbol is not a constructor");return a?r(t):(n=l(o.prototype),t=void 0===t?"":String(t),c(n,{__description__:s("",t),__name__:s("",h(t))}))},c(i,{for:s(function(e){return f[e]?f[e]:f[e]=i(String(e))}),keyFor:s(function(e){var t;u(e);for(t in f)if(f[t]===e)return t}),hasInstance:s("",r&&r.hasInstance||i("hasInstance")),isConcatSpreadable:s("",r&&r.isConcatSpreadable||i("isConcatSpreadable")),iterator:s("",r&&r.iterator||i("iterator")),match:s("",r&&r.match||i("match")),replace:s("",r&&r.replace||i("replace")),search:s("",r&&r.search||i("search")),species:s("",r&&r.species||i("species")),split:s("",r&&r.split||i("split")),toPrimitive:s("",r&&r.toPrimitive||i("toPrimitive")),toStringTag:s("",r&&r.toStringTag||i("toStringTag")),unscopables:s("",r&&r.unscopables||i("unscopables"))}),c(o.prototype,{constructor:s(i),toString:s("",function(){return this.__name__})}),c(i.prototype,{toString:s(function(){return"Symbol ("+u(this).__description__+")"}),valueOf:s(function(){return u(this)})}),p(i.prototype,i.toPrimitive,s("",function(){var e=u(this);return"symbol"==typeof e?e:e.toString()})),p(i.prototype,i.toStringTag,s("c","Symbol")),p(o.prototype,i.toStringTag,s("c",i.prototype[i.toStringTag])),p(o.prototype,i.toPrimitive,s("c",i.prototype[i.toPrimitive]))},function(e,t,n){"use strict";var r,i=n(466),o=n(474),a=n(475),s=n(476);r=e.exports=function(e,t){var n,r,a,u,l;return arguments.length<2||"string"!=typeof e?(u=t,t=e,e=null):u=arguments[2],null==e?(n=a=!0,r=!1):(n=s.call(e,"c"),r=s.call(e,"e"),a=s.call(e,"w")),l={value:t,configurable:n,enumerable:r,writable:a},u?i(o(u),l):l},r.gs=function(e,t,n){var r,u,l,c;return"string"!=typeof e?(l=n,n=t,t=e,e=null):l=arguments[3],null==t?t=void 0:a(t)?null==n?n=void 0:a(n)||(l=n,n=void 0):(l=t,t=n=void 0),null==e?(r=!0,u=!1):(r=s.call(e,"c"),u=s.call(e,"e")),c={get:t,set:n,configurable:r,enumerable:u},l?i(o(l),c):c}},function(e,t,n){"use strict";e.exports=n(467)()?Object.assign:n(468)},function(e,t,n){"use strict";e.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(e={foo:"raz"},t(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},function(e,t,n){"use strict";var r=n(469),i=n(473),o=Math.max;e.exports=function(e,t){var n,a,s,u=o(arguments.length,2);for(e=Object(i(e)),s=function(r){try{e[r]=t[r]}catch(e){n||(n=e)}},a=1;a<u;++a)t=arguments[a],r(t).forEach(s);if(void 0!==n)throw n;return e}},function(e,t,n){"use strict";e.exports=n(470)()?Object.keys:n(471)},function(e,t,n){"use strict";e.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},function(e,t,n){"use strict";var r=n(217),i=Object.keys;e.exports=function(e){return i(r(e)?Object(e):e)}},function(e,t,n){"use strict";e.exports=function(){}},function(e,t,n){"use strict";var r=n(217);e.exports=function(e){if(!r(e))throw new TypeError("Cannot use null or undefined");return e}},function(e,t,n){"use strict";var r=n(217),i=Array.prototype.forEach,o=Object.create,a=function(e,t){var n;for(n in e)t[n]=e[n]};e.exports=function(e){var t=o(null);return i.call(arguments,function(e){r(e)&&a(Object(e),t)}),t}},function(e,t,n){"use strict";e.exports=function(e){return"function"==typeof e}},function(e,t,n){"use strict";e.exports=n(477)()?String.prototype.contains:n(478)},function(e,t,n){"use strict";var r="razdwatrzy";e.exports=function(){return"function"==typeof r.contains&&!0===r.contains("dwa")&&!1===r.contains("foo")}},function(e,t,n){"use strict";var r=String.prototype.indexOf;e.exports=function(e){return r.call(this,e,arguments[1])>-1}},function(e,t,n){"use strict";var r=n(480);e.exports=function(e){if(!r(e))throw new TypeError(e+" is not a symbol");return e}},function(e,t,n){"use strict";e.exports=function(e){return!!e&&("symbol"==typeof e||!!e.constructor&&"Symbol"===e.constructor.name&&"Symbol"===e[e.constructor.toStringTag])}},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e=e||window;var t=e,n=t.document,r=t.navigator;try{n.cookie="cookietest=1";var i=-1!=n.cookie.indexOf("cookietest=");return n.cookie="cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT",i&&r.cookieEnabled}catch(e){return!1}},e.exports=t.default},function(e,t){e.exports={"increase-primary-availability?":!1}},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(5),d=p.Component,f=n(409),h=i(f).default,m=n(486),g=i(m).default,y=function(e){function t(){return a(this,t),u(this,e.apply(this,arguments))}return c(t,e),t.prototype.componentWillMount=function(){this.props.parentEvent.createChildRenderEvent("no-cookies").record()},t.prototype.render=function(){return r("div",{id:"no-cookies"},r("div",{className:g.logo},r("img",{src:h,alt:"Room Key"})),r("div",{className:g.message},"Your cookies are disabled. Room Key won't work properly without cookies. Please enable them and refresh this page."))},t}(d);t.default=y,e.exports=t.default}).call(t,n(0).h)},function(e,t){e.exports={logo:"bc647631",message:"e336a91e"}},function(e,t,n){e.exports={default:n(488),__esModule:!0}},function(e,t,n){n(489),e.exports=n(63).Array.join},function(e,t,n){"use strict";var r=n(69),i=n(157),o=[].join;r(r.P+r.F*(n(211)!=Object||!n(490)(o)),"Array",{join:function(e){return o.call(i(this),void 0===e?",":e)}})},function(e,t,n){"use strict";var r=n(208);e.exports=function(e,t){return!!e&&r(function(){t?e.call(null,function(){},1):e.call(null)})}},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.MarriottLeadTag=void 0;var i=n(1),o=r(i).default,a=n(2),s=r(a).default,u=n(3),l=r(u).default,c=n(0),p=c.render,d=c.Component,f=n(11),h=f.param,m=n(155),g=r(m).default,y=n(243),v=r(y).default,_=n(229),b=r(_).default,x=v(),w="production"===x?"":"development"===x?"dev":"stage",S="//metrics.marriott.com/b/ss/marriottglobal"+w,k=function(){return Math.floor(1e13*Math.random())},E=function(){var e="s"+Math.floor(Date.now()/108e5)%10+k(),t=[{name:"AQB",value:1},{name:"ndh",value:1},{name:"t",value:g().format("D/M/YYYY HH:mm:ss D")+" "+g().utcOffset()},{name:"ns",value:"marriottinternational"},{name:"ce",value:"UTF-8"},{name:"g",value:window.location.href},{name:"pe",value:"lnk_e"},{name:"pev2",value:"Room Key Book Direct"},{name:"AQE",value:1}],n=h(t);return S+"/1/H.20.2/"+e+"?"+n},T=function(e){var t=window.location.host.split("."),n=t.length>1?t.slice(-1)[0]:"com",r=e.split("|");return"//marriottinternational.tt.omtrdc.net/m2/marriottinternationa/ubox/image?"+h({mbox:"marriott_roomkey_"+n+"_adbox",mboxDefault:"http://cache.marriott.com/Images/spacer.gif",mboxSession:r[0],mboxPC:r.slice(-1)[0],_:Math.ceil(1e13*Math.random())+1})};t.MarriottLeadTag=function(t){function n(e){o(this,n);var r=s(this,t.call(this,e)),i=e.referral.get("partner");return r.state={isTrackingPermitted:i&&("MRT"==i||"function"==typeof i.get&&"MRT"==i.get("code"))},r}return l(n,t),n.prototype.render=function(){if(this.state.isTrackingPermitted){var t=this.props.referral.get("customData");p(e("div",null,e(b,{url:E()}),t&&e(b,{url:T(t)})))}},n}(d)}).call(t,n(0).h)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(185),i=function(e){return e&&e.__esModule?e:{default:e}}(r).default;t.default=function(){return new i(function(e){var t=window,n=t.google_trackConversion;"function"!=typeof n?e():(t.google_conversion_id=949099849,t.google_conversion_label="uVa3CPWrym8QybrIxAM",t.google_remarketing_only=!1,t.google_conversion_format="3",n({onload_callback:e}))})},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return i.reduce(e,function(e,t,n){return t&&(e[n]=t),e},{})};var r=n(64),i=function(e){return e&&e.__esModule?e:{default:e}}(r).default;e.exports=t.default},function(e,t,n){var r,i;!function(o,a){r=[n(64),n(11),t],void 0!==(i=function(e,t,n){o.Backbone=a(o,n,e,t)}.apply(t,r))&&(e.exports=i)}(this,function(e,t,n,r){var i=e.Backbone,o=[],a=o.slice;t.VERSION="1.1.2",t.$=r,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var s=t.Events={on:function(e,t,n){return l(this,"on",e,[t,n])&&t?(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:n,ctx:n||this}),this):this},once:function(e,t,r){if(!l(this,"once",e,[t,r])||!t)return this;var i=this,o=n.once(function(){i.off(e,o),t.apply(this,arguments)});return o._callback=t,this.on(e,o,r)},off:function(e,t,r){var i,o,a,s,u,c,p,d;if(!this._events||!l(this,"off",e,[t,r]))return this;if(!e&&!t&&!r)return this._events=void 0,this;for(s=e?[e]:n.keys(this._events),u=0,c=s.length;u<c;u++)if(e=s[u],a=this._events[e]){if(this._events[e]=i=[],t||r)for(p=0,d=a.length;p<d;p++)o=a[p],(t&&t!==o.callback&&t!==o.callback._callback||r&&r!==o.context)&&i.push(o);i.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=a.call(arguments,1);if(!l(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&c(n,t),r&&c(r,arguments),this},stopListening:function(e,t,r){var i=this._listeningTo;if(!i)return this;var o=!t&&!r;r||"object"!=typeof t||(r=this),e&&((i={})[e._listenId]=e);for(var a in i)e=i[a],e.off(t,r,this),(o||n.isEmpty(e._events))&&delete this._listeningTo[a];return this}},u=/\s+/,l=function(e,t,n,r){if(!n)return!0;if("object"==typeof n){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(u.test(n)){for(var o=n.split(u),a=0,s=o.length;a<s;a++)e[t].apply(e,[o[a]].concat(r));return!1}return!0},c=function(e,t){var n,r=-1,i=e.length,o=t[0],a=t[1],s=t[2];switch(t.length){case 0:for(;++r<i;)(n=e[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o,a);return;case 3:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o,a,s);return;default:for(;++r<i;)(n=e[r]).callback.apply(n.ctx,t);return}},p={listenTo:"on",listenToOnce:"once"};n.each(p,function(e,t){s[t]=function(t,r,i){return(this._listeningTo||(this._listeningTo={}))[t._listenId||(t._listenId=n.uniqueId("l"))]=t,i||"object"!=typeof r||(i=this),t[e](r,i,this),this}}),s.bind=s.on,s.unbind=s.off,n.extend(t,s);var d=t.Model=function(e,t){var r=e||{};t||(t={}),this.cid=n.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(r=this.parse(r,t)||{}),r=n.defaults({},r,n.result(this,"defaults")),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(d.prototype,s,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,r){var i,o,a,s,u,l,c,p;if(null==e)return this;if("object"==typeof e?(o=e,r=t):(o={})[e]=t,r||(r={}),!this._validate(o,r))return!1;a=r.unset,u=r.silent,s=[],l=this._changing,this._changing=!0,l||(this._previousAttributes=n.clone(this.attributes),this.changed={}),p=this.attributes,c=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]);for(i in o)t=o[i],n.isEqual(p[i],t)||s.push(i),n.isEqual(c[i],t)?delete this.changed[i]:this.changed[i]=t,a?delete p[i]:p[i]=t;if(!u){s.length&&(this._pending=r);for(var d=0,f=s.length;d<f;d++)this.trigger("change:"+s[d],this,p[s[d]],r)}if(l)return this;if(!u)for(;this._pending;)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&n.clone(this.changed);var t,r=!1,i=this._changing?this._previousAttributes:this.attributes;for(var o in e)n.isEqual(i[o],t=e[o])||((r||(r={}))[o]=t);return r},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=e?n.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,r=e.success;return e.success=function(n){if(!t.set(t.parse(n,e),e))return!1;r&&r(t,n,e),t.trigger("sync",t,n,e)},z(this,e),this.sync("read",this,e)},save:function(e,t,r){var i,o,a,s=this.attributes;if(null==e||"object"==typeof e?(i=e,r=t):(i={})[e]=t,r=n.extend({validate:!0},r),i&&!r.wait){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;i&&r.wait&&(this.attributes=n.extend({},s,i)),void 0===r.parse&&(r.parse=!0);var u=this,l=r.success;return r.success=function(e){u.attributes=s;var t=u.parse(e,r);if(r.wait&&(t=n.extend(i||{},t)),n.isObject(t)&&!u.set(t,r))return!1;l&&l(u,e,r),u.trigger("sync",u,e,r)},z(this,r),o=this.isNew()?"create":r.patch?"patch":"update","patch"===o&&(r.attrs=i),a=this.sync(o,this,r),i&&r.wait&&(this.attributes=s),a},destroy:function(e){e=e?n.clone(e):{};var t=this,r=e.success,i=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(n){(e.wait||t.isNew())&&i(),r&&r(t,n,e),t.isNew()||t.trigger("sync",t,n,e)},this.isNew())return e.success(),!1;z(this,e);var o=this.sync("delete",this,e);return e.wait||i(),o},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||L();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return!r||(this.trigger("invalid",this,r,n.extend(t,{validationError:r})),!1)}});var f=["keys","values","pairs","invert","pick","omit"];n.each(f,function(e){d.prototype[e]=function(){var t=a.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}});var h=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},m={add:!0,remove:!0,merge:!0},g={add:!0,remove:!1};n.extend(h.prototype,s,{model:d,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,g))},remove:function(e,t){var r=!n.isArray(e);e=r?[e]:n.clone(e),t||(t={});var i,o,a,s;for(i=0,o=e.length;i<o;i++)(s=e[i]=this.get(e[i]))&&(delete this._byId[s.id],delete this._byId[s.cid],a=this.indexOf(s),this.models.splice(a,1),this.length--,t.silent||(t.index=a,s.trigger("remove",s,this,t)),this._removeReference(s,t));return r?e[0]:e},set:function(e,t){t=n.defaults({},t,m),t.parse&&(e=this.parse(e,t));var r=!n.isArray(e);e=r?e?[e]:[]:n.clone(e);var i,o,a,s,u,l,c,p=t.at,f=this.model,h=this.comparator&&null==p&&!1!==t.sort,g=n.isString(this.comparator)?this.comparator:null,y=[],v=[],_={},b=t.add,x=t.merge,w=t.remove,S=!(h||!b||!w)&&[];for(i=0,o=e.length;i<o;i++){if(u=e[i]||{},a=u instanceof d?s=u:u[f.prototype.idAttribute||"id"],l=this.get(a))w&&(_[l.cid]=!0),x&&(u=u===s?s.attributes:u,t.parse&&(u=l.parse(u,t)),l.set(u,t),h&&!c&&l.hasChanged(g)&&(c=!0)),e[i]=l;else if(b){if(!(s=e[i]=this._prepareModel(u,t)))continue;y.push(s),this._addReference(s,t)}s=l||s,!S||!s.isNew()&&_[s.id]||S.push(s),_[s.id]=!0}if(w){for(i=0,o=this.length;i<o;++i)_[(s=this.models[i]).cid]||v.push(s);v.length&&this.remove(v,t)}if(y.length||S&&S.length)if(h&&(c=!0),this.length+=y.length,null!=p)for(i=0,o=y.length;i<o;i++)this.models.splice(p+i,0,y[i]);else{S&&(this.models.length=0);var k=S||y;for(i=0,o=k.length;i<o;i++)this.models.push(k[i])}if(c&&this.sort({silent:!0}),!t.silent){for(i=0,o=y.length;i<o;i++)(s=y[i]).trigger("add",s,this,t);(c||S&&S.length)&&this.trigger("sort",this,t)}return r?e[0]:e},reset:function(e,t){t||(t={});for(var r=0,i=this.models.length;r<i;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return a.apply(this.models,arguments)},get:function(e){if(null!=e)return this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){e=e?n.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success,r=this;return e.success=function(n){var i=e.reset?"reset":"set";r[i](n,e),t&&t(r,n,e),r.trigger("sync",r,n,e)},z(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?n.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var r=this,i=t.success;return t.success=function(e,n){t.wait&&r.add(e,t),i&&i(e,n,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof d)return e;t=t?n.clone(t):{},t.collection=this;var r=new this.model(e,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_addReference:function(e,t){this._byId[e.cid]=e,null!=e.id&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){("add"!==e&&"remove"!==e||n===this)&&("destroy"===e&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});var y=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];n.each(y,function(e){h.prototype[e]=function(){var t=a.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}});var v=["groupBy","countBy","sortBy","indexBy"];n.each(v,function(e){h.prototype[e]=function(t,r){var i=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,i,r)}});var _=t.View=function(e){this.cid=n.uniqueId("view"),e||(e={}),n.extend(this,n.pick(e,x)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},b=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];n.extend(_.prototype,s,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],!1!==n&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=n.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var r=e[t];if(n.isFunction(r)||(r=this[e[t]]),r){var i=t.match(b),o=i[1],a=i[2];r=n.bind(r,this),o+=".delegateEvents"+this.cid,""===a?this.$el.on(o,r):this.$el.on(o,a,r)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"),!1);else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e.class=n.result(this,"className"));var r=t.$("<"+n.result(this,"tagName")+">").attr(e);this.setElement(r,!1)}}}),t.sync=function(e,r,i){var o=S[e];n.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var a={type:o,dataType:"json"};if(i.url||(a.url=n.result(r,"url")||L()),null!=i.data||!r||"create"!==e&&"update"!==e&&"patch"!==e||(a.contentType="application/json",a.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),i.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){a.type="POST",i.emulateJSON&&(a.data._method=o);var s=i.beforeSend;i.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",o),s)return s.apply(this,arguments)}}"GET"===a.type||i.emulateJSON||(a.processData=!1),"PATCH"===a.type&&w&&(a.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var u=i.xhr=t.ajax(n.extend(a,i));return r.trigger("request",r,u,i),u};var w=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),S={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var k=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},E=/\((.*?)\)/g,T=/(\(\?)?:\w+/g,M=/\*\w+/g,C=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(k.prototype,s,{initialize:function(){},route:function(e,r,i){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var o=this;return t.history.route(e,function(n){var a=o._extractParameters(e,n);o.execute(i,a),o.trigger.apply(o,["route:"+r].concat(a)),o.trigger("route",r,a),t.history.trigger("route",o,r,a)}),this},execute:function(e,t){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(C,"\\$&").replace(E,"(?:$1)?").replace(T,function(e,t){return t?e:"([^/?]+)"}).replace(M,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var r=e.exec(t).slice(1);return n.map(r,function(e,t){return t===r.length-1?e||null:e?decodeURIComponent(e):null})}});var O=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},A=/^[#\/]|\s+$/g,P=/^\/+|\/+$/g,R=/msie [\w.]+/,D=/\/$/,I=/#.*$/;O.started=!1,n.extend(O.prototype,s,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(D,"");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(A,"")},start:function(e){if(O.started)throw new Error("Backbone.history has already been started");O.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var r=this.getFragment(),i=document.documentMode,o=R.exec(navigator.userAgent.toLowerCase())&&(!i||i<=7);if(this.root=("/"+this.root+"/").replace(P,"/"),o&&this._wantsHashChange){var a=t.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=a.hide().appendTo("body")[0].contentWindow,this.navigate(r)}this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!o?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=r;var s=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&s.hash&&(this.fragment=this.getHash().replace(A,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),O.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();if(t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return e=this.fragment=this.getFragment(e),n.any(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0})},navigate:function(e,t){if(!O.started)return!1;t&&!0!==t||(t={trigger:!!t});var n=this.root+(e=this.getFragment(e||""));if(e=e.replace(I,""),this.fragment!==e){if(this.fragment=e,""===e&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),t.history=new O;var N=function(e,t){var r,i=this;r=e&&n.has(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)},n.extend(r,i,t);var o=function(){this.constructor=r};return o.prototype=i.prototype,r.prototype=new o,e&&n.extend(r.prototype,e),r.__super__=i.prototype,r};d.extend=h.extend=k.extend=_.extend=O.extend=N;var L=function(){throw new Error('A "url" property or function must be specified')},z=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}};return t})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(64),o=r(i).default,a=n(494),s=r(a).default,u="undefined"!=typeof window;u&&(window.rk=window.rk||{},window.JST=window.JST||{});var l=u?window.rk:{};o.extend(l,s.Events,{requests:[],extend:function(){var e=o.toArray(arguments);return e.unshift(this),o.extend.apply(o,e)}}),t.default=l,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(430),i=function(e){return e&&e.__esModule?e:{default:e}}(r).default,o=i(window);t.default=function(){return"ie"==o.browser&&10==o.version[0]},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(155),o=r(i).default,a=n(64),s=r(a).default,u=n(11),l=r(u).default,c=n(494),p=r(c).default,d=n(748),f=r(d).default,h=n(495),m=r(h).default,g=n(749),y=r(g).default,v=n(750),_=r(v).default,b=y.extend(p.View).extend(_).extend({_helpers:{moment:o},_data:function(e){var t=s(m).pick(["env","config","imgBaseUrl"]);return s.extend(t,e)}({}),trackingEvents:{},initialize:function(e){this.options=e,s.result(this,"initSubViews"),s.result(this,"bindEvents")},destroy:function(){this.$el.hide(),this.trigger("destroy"),m.trigger("view-destroy"),this.leave()},leave:function(){this.trigger("leave"),this.deleteViewProps(),this.cleanUp&&this.cleanUp(),this.remove()},render:function(){return s.result(this,"renderSubViews"),this.trigger("render"),m.trigger("view-render",this),this.el},assign:function(e,t){e instanceof l||(e=this.$(e)),t.setElement(e).render()},deleteViewProps:function(){var e=this._subViews;if(e)for(var t in e)e.hasOwnProperty(t)&&e[t]instanceof p.View&&delete e[t]},setView:function(e,t){var n=void 0;return this._subViews?n=this._subViews[e]:this._subViews={},n&&n.leave&&n.leave(),t&&t.listenTo&&t.listenTo(this,"leave",t.leave),t.parentView=this,this._subViews[e]=t,this._subViews[e]},getView:function(e){if(this._subViews&&e in this._subViews)return this._subViews[e]},getByDataId:function(e){return this.$(f(e,"[data-id=","]"))},$on:function(e,t,n){this._$bind("on",e,t,n)},$off:function(e,t,n){this._$bind("off",e,t,n)},_$bind:function(e,t,n,r){this.isTouch&&"click"===n&&(n="touchend"),l(t)[e](n,r)},_createModelUpdate:function(e,t){return function(){var n={};n[e]=t(),this.model.set(n,{authentic:!0})}},bindToDOM:function(e){var t=this,n={};e=e||this.watch,s.each(e,function(e,r){e.key=e.key||r,r=e.selector||r;var i=t.$(r),o=e.key||r,a=e.modelEvent||"change:"+o,u={get:{val:function(){return i.val()}},set:{val:function(e){return i.val(e)}}},l=e.get?s.partial(e.get,i):u.get.val,c=e.set?s.partial(e.set,i):u.set.val,p=(e.event||"change")+" "+r;e.readOnly||(n[p]=t._createModelUpdate(o,l)),t.listenTo(t.model,a,function(){c(t.model.get(o))})}),this.delegateEvents(s.extend(this.events,n))},_getHelpers:function(){var e=this.constructor.__super__;if(e._getHelpers)return s.extend({},e._getHelpers(),this.helpers)},renderTemplate:function(e,t){if(s.isObject(e)&&(t=e,e=null),e=e||s.result(this,"template"),void 0===b.__templates[e])throw new Error('"'+e+'" template has not been set using TemplateJar.set()');if("function"!=typeof b.__templates[e])throw new Error('"'+e+'" template is not a function');return e?b.__templates[e](s.extend(t||{},this._data||{},this._getHelpers()||{},this._helpers||{})):null}});b.__templates={},b.loadTemplate=function(e,t){if(2!=arguments.length)throw new Error("two arguments required");if("string"!=typeof arguments[0])throw new Error("first argument must be string");if("function"!=typeof arguments[1])throw new Error("second argument must be a function");b.__templates[e]=t},t.default=b,e.exports=t.default},function(e,t,n){e.exports=n.p+"images/roomkey/svg/extenal-link-icon.svg"},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(23),a=i(o).default,s=n(1),u=i(s).default,l=n(2),c=i(l).default,p=n(3),d=i(p).default,f=n(0),h=f.Component,m=n(155),g=i(m).default,y=n(984),v=i(y).default,_=n(987),b=i(_).default,x=n(998),w=i(x).default,S=function(e){function t(n){u(this,t);var r=c(this,e.call(this,n)),i=n.checkIn,o=n.checkOut,a=n.rooms,s=n.guests;return r.state={checkIn:i,checkOut:o,rooms:a,guests:s},r.handleStayChange=r.handleStayChange.bind(r),r.handleSubmit=r.handleSubmit.bind(r),r.handleCancel=r.handleCancel.bind(r),r}return d(t,e),t.prototype.render=function(e){var t=e.label,n=this.state,i=n.checkIn,o=n.checkOut,a=n.rooms,s=n.guests,u=g(this.props.checkIn).format("ddd MMM D")+" - "+g(this.props.checkOut).format("ddd MMM D"),l=this.props.rooms+" Room"+(this.props.rooms>1?"s":"")+", "+this.props.guests+" Guest"+(this.props.guests>1?"s":"");return t=t||u+", "+l,r(v,{label:t,onSubmit:this.handleSubmit,onCancel:this.handleCancel},r(b,{checkIn:i,checkOut:o,onChange:this.handleStayChange}),r(w,{rooms:a,guests:s,onChange:this.handleStayChange}))},t.prototype.handleStayChange=function(e){this.setState(e)},t.prototype.handleCancel=function(){var e=this.props,t=e.checkIn,n=e.checkOut,r=e.rooms,i=e.guests;this.handleStayChange({checkIn:t,checkOut:n,rooms:r,guests:i})},t.prototype.handleSubmit=function(){var e=this.props,t=e.onChange,n=e.checkIn,r=e.checkOut,i=e.rooms,o=e.guests,s={checkIn:n,checkOut:r,rooms:i,guests:o};a(this.state)!=a(s)&&t&&t(this.state)},t}(h);t.default=S,e.exports=t.default}).call(t,n(0).h)},function(e,t,n){"use strict";function r(e,t){return!!t&&(Array.isArray(t)?t:[t]).some(function(t){return!!t&&(t instanceof Date?(0,o.isSameDay)(e,t):(0,a.isRangeOfDates)(t)?(0,o.isDayInRange)(e,t):t.after&&t.before&&(0,o.isDayAfter)(t.before,t.after)?(0,o.isDayAfter)(e,t.after)&&(0,o.isDayBefore)(e,t.before):t.after&&t.before&&((0,o.isDayAfter)(t.after,t.before)||(0,o.isSameDay)(t.after,t.before))?(0,o.isDayAfter)(e,t.after)||(0,o.isDayBefore)(e,t.before):t.after?(0,o.isDayAfter)(e,t.after):t.before?(0,o.isDayBefore)(e,t.before):t.daysOfWeek?t.daysOfWeek.some(function(t){return e.getDay()===t}):"function"==typeof t&&t(e))})}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(t).reduce(function(n,i){var o=t[i];return r(e,o)&&n.push(i),n},[])}Object.defineProperty(t,"__esModule",{value:!0}),t.dayMatchesModifier=r,t.getModifiersForDay=i;var o=n(231),a=n(434);t.default={dayMatchesModifier:r,getModifiersForDay:i}},function(e,t){e.exports={container:"_46b2299b",alertContainer:"d3405651",heading:"ffe905e7",link:"_9902007e",property:"fb45de7d",button:"_297bddc2",photo:"e47f212d",hotelLink:"_6aec99b9",priceAlert:"_60d6cdc7",manageAlerts:"_0f428aed"}},function(e,t,n){e.exports=n.p+"images/roomkey/cover-images/chicago/drake.jpg"},function(e,t,n){e.exports=n.p+"images/roomkey/cover-images/chicago/holiday-inn-mart-plaza.jpg"},function(e,t,n){e.exports=n.p+"images/roomkey/cover-images/chicago/hyatt-regency.jpg"},function(e,t,n){e.exports=n.p+"images/roomkey/cover-images/choice/cambria-dc.jpg"},function(e,t,n){e.exports=n.p+"images/roomkey/cover-images/choice/cambria-times-square.jpg"},function(e,t,n){e.exports=n.p+"images/roomkey/cover-images/london/andaz-liverpool-st.jpg"},function(e,t,n){e.exports=n.p+"images/roomkey/cover-images/london/hilton-tower-bridge.jpg"},function(e,t,n){e.exports=n.p+"images/roomkey/cover-images/london/intercontinental-london-park-lane.jpg"},function(e,t,n){e.exports=n.p+"images/roomkey/cover-images/london/marriott-park-lane.jpg"},function(e,t,n){e.exports=n.p+"images/roomkey/cover-images/new-york/gem-ascend-chelsea.jpg"},function(e,t,n){e.exports=n.p+"images/roomkey/cover-images/new-york/grand-hyatt-new-york.jpg"},function(e,t,n){e.exports=n.p+"images/roomkey/cover-images/new-york/hilton-garden-inn-park-ave.jpg"},function(e,t,n){e.exports=n.p+"images/roomkey/cover-images/new-york/intercontinental-times-square.jpg"},function(e,t,n){e.exports=n.p+"images/roomkey/cover-images/new-york/new-york-edition.jpg"},function(e,t,n){e.exports=n.p+"images/roomkey/cover-images/new-york/wyndham-new-yorker.jpg"},function(e,t,n){e.exports=n.p+"images/roomkey/cover-images/orlando/crowne-plaza-universal.jpg"},function(e,t,n){e.exports=n.p+"images/roomkey/cover-images/orlando/gaylord-palms.jpg"},function(e,t,n){e.exports=n.p+"images/roomkey/cover-images/orlando/hilton-orlando.jpg"},function(e,t,n){e.exports=n.p+"images/roomkey/cover-images/orlando/hyatt-regency-orlando-intl-airport.jpg"},function(e,t,n){e.exports=n.p+"images/roomkey/cover-images/orlando/wyndham-grand-orlando-resort.jpg"},function(e,t,n){e.exports=n.p+"images/roomkey/cover-images/san-diego/wyndham-san-diego-bayside.jpg"},function(e,t,n){e.exports=n.p+"apps/roomkey/img/partner-logos-portrait.svg"},function(e,t,n){e.exports=n.p+"apps/roomkey/img/partner-logos-landscape.svg"},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=n(151),h=i(f).default,m=n(1131),g=i(m).default,y=n(1132),v=i(y).default,_=n(1133),b=i(_).default,x=n(1134),w=i(x).default,S=function(e){function t(n){a(this,t);var r=u(this,e.call(this,n));return r.handleToggleClick=r.handleToggleClick.bind(r),r.handleKeyUp=r.handleKeyUp.bind(r),r.handleClickOutside=r.handleClickOutside.bind(r),r.toggle=r.toggle.bind(r),r.state={open:Boolean(n.open)},r}return c(t,e),t.prototype.render=function(){var e=this.props,t=e.label,n=e.children,i=e.selected,o=e.disabled,a=this.state.open;return r(h,{className:w.container,onClickOutside:this.handleClickOutside,onKeyUp:this.handleKeyUp},r("button",{className:w.toggle+" "+(i?w.selected:"")+" "+(a?w.open:""),onClick:this.handleToggleClick,disabled:o,type:"button"},r("span",null,t),r("span",{className:w.chevron},a?r("img",{width:"11",height:"6",src:b}):i?r("img",{width:"11",height:"6",src:g}):r("img",{width:"11",height:"6",src:v}))),a&&r("div",{className:w.content},n))},t.prototype.toggle=function(e){this.setState({open:e})},t.prototype.handleToggleClick=function(){var e=this.state.open;this.toggle(!e),e&&this.props.onCancel&&this.props.onCancel()},t.prototype.handleClickOutside=function(){this.state.open&&this.props.onClickOutside?this.props.onClickOutside():this.toggle(!1)},t.prototype.handleKeyUp=function(e){27===e.keyCode&&this.state.open&&(e.stopPropagation(),this.toggle(!1),this.props.onCancel&&this.props.onCancel())},t}(d);t.default=S,e.exports=t.default}).call(t,n(0).h)},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=n(1136),h=f.header,m=function(e){function t(){return a(this,t),u(this,e.apply(this,arguments))}return c(t,e),t.prototype.render=function(e){var t=e.children;return r("div",{className:h},t)},t}(d);t.default=m,e.exports=t.default}).call(t,n(0).h)},,function(e,t,n){e.exports=n.p+"img/loading-spin-blue.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/x.svg"},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=n(17),h=i(f).default,m=n(736),g=m.wrapper,y=m.row,v=m.col,_=m.container,b=function(e){function t(){return a(this,t),u(this,e.apply(this,arguments))}return c(t,e),t.prototype.render=function(){return r("div",null,r("div",{className:g,id:"loyalty-message"},r(h,null,r("div",{className:_},r("h3",null,"What are Loyalty Member Rates?"),r("div",{className:y},r("div",{className:v},r("p",null,"Room Key gives you access to low ",r("strong",null,"Loyalty Member Rates")," for more than 60 of the world’s largest hotel chains all in one place. Loyalty Rates are rates typically reserved for members of the hotel’s loyalty program available mainly on the hotel’s own website. Now Room Key is the only travel site where customers can shop and compare Loyalty Rates across so many hotel chains all in one place.")),r("div",{className:v},r("p",null,"To book a Loyalty Rate, simply enroll in the hotel’s loyalty program (it’s free) and provide your membership number when booking. You’ll instantly qualify for the Loyalty Rate and get all of the loyalty member benefits as well. There are no hidden fees or paid memberships required.")))))))},t}(d);t.default=b,e.exports=t.default}).call(t,n(0).h)},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(6),a=i(o).default,s=n(1),u=i(s).default,l=n(2),c=i(l).default,p=n(3),d=i(p).default,f=n(5),h=i(f).default,m=n(739),g=i(m).default,y=n(230),v=i(y).default,_=n(741),b=i(_).default,x=function(e){return"imageIndex-"+e},w=function(e){function t(n){u(this,t);var r=c(this,e.call(this,n)),i=n.singleImage,o=void 0!==i&&i,a=n.selectedIndex,s=void 0===a?o?0:-1:a;return r.state={singleImage:o,multiImageCarouselMaxWidth:"100%",leftAligned:!0,marginLeft:0,marginRight:null,currentIndex:0,selectedIndex:s,deltaX:0,imageCount:n.children.length},r.handlePrevious=r.handlePrevious.bind(r),r.handleNext=r.handleNext.bind(r),r.debouncedHandleResize=v(r.handleResize.bind(r)),r.swiping=r.swiping.bind(r),r.multiImageSwiped=r.multiImageSwiped.bind(r),r}return d(t,e),t.prototype.decorateImage=function(e,t,n,r){var i=this,o=a({},e.props),s=[n],u=o.onClick;o.className&&s.push(o.className),r==t&&(s.push(b.selected),this.props.selectedClassName&&s.push(this.props.selectedClassName)),o.className=s.join(" "),o.ref=x(t),o.onClick=function(e){i.handleImageClick(e,u,l,t)};var l=h.cloneElement(e,o);return l},t.prototype.handleResize=function(){this.props.singleImage||this.setCurrentIndex(null,!0)},t.prototype.handleImageClick=function(e,t,n,r){var i=this;if(t&&t(e,r),!e.defaultPrevented){var o=this.props.onSelected;this.setState({selectedIndex:r},function(){return o&&o(i.state.selectedIndex)})}},t.prototype.handlePrevious=function(){this.props.singleImage?this.setSelectedImage(!1):this.setCurrentIndex(this.getNextPageIndex(!1))},t.prototype.handleNext=function(){this.props.singleImage?this.setSelectedImage(!0):this.setCurrentIndex(this.getNextPageIndex(!0))},t.prototype.setSelectedImage=function(e){var t=this,n=this.props.onSelected,r=e?1:-1;this.setState(function(e){var t=e.selectedIndex,n=e.imageCount;return t=Math.max(0,Math.min(n-1,t+r)),{selectedIndex:t}},function(){return n&&n(t.state.selectedIndex)})},t.prototype.getEnsureSelectedCurrentIndex=function(){var e=this.state,t=e.currentIndex,n=e.imageCount,r=e.leftAligned,i=e.selectedIndex,o=this.sliderWindow,a=o.offsetLeft,s=o.offsetWidth,u=this.refs[x(i)],l=u.offsetLeft,c=u.offsetWidth,p=l-a;if(p>=0&&p+c<=s)return t;var d=!(p<0);if(r){if(!d)return i}else if(d)return i;for(var f=d?1:-1,h=d?p+c-s:-p,m=t;m>=0&&m<n;m+=f){var g=this.refs[x(m)],y=g.offsetLeft,v=g.offsetWidth,_=y-a;if(r&&d){if(_>=h)return m}else{if(r||d)throw new Error("oops");if(s-(_+v)>=h)return m}}throw new Error("oops")},t.prototype.getNextPageIndex=function(e){for(var t=this.state,n=t.currentIndex,r=t.imageCount,i=t.leftAligned,o=this.sliderWindow,a=o.offsetLeft,s=o.offsetWidth,u=e?1:-1,l=n+u;l>=0&&l<r;l+=u){var c=this.refs[x(l)],p=c.offsetLeft,d=c.offsetWidth,f=p-a;if(e){if(i){if(f>s)return l-1}else if(f+d-s>s)return l-1}else if(i){if(-f>s)return l+1}else if(f+d<0)return l+1}return e?r-1:0},t.prototype.getNextDeltaIndex=function(e,t){var n=this.state,r=n.currentIndex,i=n.imageCount,o=e>=0,a=o?1:-1,s=this.refs[x(r)].offsetLeft,u=t/.01;e+=(o?1:-1)*(t*u-.01*u*u/2);for(var l=r+a;l>=0&&l<i;l+=a){var c=this.refs[x(l)].offsetLeft;if(o){if(c-s>e)return l-(t>.2?0:a)}else if(-(s-c)<e)return l-(t>.2?0:a)}return o?i-1:0},t.prototype.setCurrentIndex=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(arguments[1]||this.state.currentIndex!==t)&&this.setState(function(n){var r=n.currentIndex,i=n.leftAligned;null===t&&(t=r);var o=e.sliderWindow,a=o.offsetLeft,s=o.offsetWidth,u=e.slider,l=u.offsetLeft,c=u.scrollWidth,p=l-a,d=e.refs[x(t)],f=d.offsetLeft,h=d.offsetWidth,m=p-(f-a),g=s-c,y=i?l-f:h-m-c,v=null,_=null;return y>=g?i?v=y:_=y:i?v=s-c:_=s-c,{multiImageCarouselMaxWidth:c+(e.props.innerControls?0:172),leftAligned:i,currentIndex:t,marginLeft:v,marginRight:_}},function(){return setTimeout(function(){e.setState(function(e){var t=e.currentIndex,n=e.imageCount;if(0==t||t==n-1){var r=0==t;return{leftAligned:r,marginLeft:r?0:null,marginRight:r?null:0}}})},500)})},t.prototype.componentWillReceiveProps=function(e){var t=this,n=e.selectedIndex,r=void 0===n?-1:n;r>=0&&this.setState({selectedIndex:r},function(){t.state.singleImage||t.setCurrentIndex(t.getEnsureSelectedCurrentIndex())})},t.prototype.componentDidMount=function(){var e=this.state,t=e.singleImage,n=e.selectedIndex;t||(n>=0&&this.setCurrentIndex(this.getEnsureSelectedCurrentIndex()),this.debouncedHandleResize(),window.addEventListener("resize",this.debouncedHandleResize,!1))},t.prototype.componentWillUnmount=function(){this.state.singleImage||window.removeEventListener("resize",this.debouncedHandleResize,!1),delete this.debouncedHandleResize},t.prototype.swiping=function(e,t){this.setState({swiping:!0,deltaX:t})},t.prototype.multiImageSwiped=function(e,t,n,r,i){var o=this;this.setState(function(){var e=o.getNextDeltaIndex(t,i);return o.setCurrentIndex(e),{swiping:!1,deltaX:0}})},t.prototype.render=function(){var e=this,t=this.props,n=t.children,i=t.className,o=t.innerControls,a=this.state,s=a.multiImageCarouselMaxWidth,u=a.leftAligned,l=a.singleImage,c=a.selectedIndex,p=a.marginLeft,d=a.marginRight,f=a.swiping,h=a.deltaX,m=[b.slider],y={float:u?"left":"right"},v=[l?b.singleImageCarousel:b.multiImageCarousel],_={maxWidth:s},x={};return i&&v.push(i),o&&v.push(b.innerControls),f&&m.push(b.swiping),l?f&&(x.left=-h):u?y.marginLeft=p-h:y.marginRight=d+h,r("div",{className:v.join(" "),style:l?null:_},r("div",{className:b.previousWrapper},r("button",{type:"button",className:b.previous,onClick:this.handlePrevious})),l&&r("div",{className:b.singleImageWrapper,style:x},n.map(function(t,n){return e.decorateImage(t,n,b.singleImage,c)})),!l&&r("div",{className:b.sliderWindow,ref:function(t){return e.sliderWindow=t}},r(g,{onSwiping:this.swiping,onSwiped:this.multiImageSwiped},r("div",{className:m.join(" "),style:y,ref:function(t){return e.slider=t}},n.map(function(t,n){return e.decorateImage(t,n,b.multiImage,c)})))),r("div",{className:b.nextWrapper},r("button",{type:"button",className:b.next,onClick:this.handleNext})))},t}(h.Component);t.default=w,e.exports=t.default}).call(t,n(0).h)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(64),o=r(i).default,a=n(11),s=r(a).default,u=n(230),l=r(u).default,c=n(497),p=r(c).default,d=n(754),f=r(d).default,h=n(755),m=r(h).default;p.loadTemplate("carousel",m),t.default=p.extend({template:"carousel",className:"slideshow",duration:250,xPosition:0,events:{"swipe-right":"next","swipe-left":"previous"},initialize:function(e){this.currentPhoto=e.currentPhoto||0,this.leftAligned=e.leftAligned||!0,this.photos=e.photos,this.container=e.container,this.singlePhotoAnimation=e.singlePhotoAnimation,this.directionNext=!0},render:function(){var e=this;return this.container.find(".slideshow").remove(),this.container.append(this.$el.html(this.renderTemplate({photos:this.photos}))),f(".image-wrap",this.container[0]).then(function(){o.defer(function(){e.handleResize(),s(window).on("resize."+e.cid,l(function(){e.handleResize()},250))})}),this},animate:function(e){var t=this.slideAmount(),n=this.xPosition,r=!1,i=void 0;this.container.parent().removeClass("carousel-start carousel-end"),this.directionNext?(i=0-this.maxPos(),(e=e||n-t)<=i&&(e=i,this.currentPhoto=this.photos.length-1,this.leftAligned=!1,r=!0,this.container.parent().addClass("carousel-end"))):(e=e||n+t)>=0&&(e=0,this.currentPhoto=0,this.leftAligned=!0,r=!0,this.container.parent().addClass("carousel-start")),e!==n&&(this.xPosition=e,r||(this.leftAligned?this.currentPhoto=Math.abs(Math.round(e/this.photoWidth())):this.currentPhoto=Math.abs(Math.round((e-this.viewportWidth())/this.photoWidth()))-1),this.$el.animate({"margin-left":e+"px"},this.duration),this.loadInView())},viewportWidth:function(){return this.container.innerWidth()},photoWidth:function(){var e=this.$(".image-wrap").eq(0),t=void 0;return e.length?(t=e.outerWidth(!0)-e.outerWidth(),e[0].getBoundingClientRect().width+t):1},photosWidth:function(){return this.photoWidth()*this.photoCount()},photosAcross:function(){var e=this.photoWidth(),t=this.viewportWidth();return Math.floor(t/e)},photosAcrossWidth:function(){return this.photoWidth()*this.photosAcross()},photoCount:function(){return this.$(".image-wrap").length},slideAmount:function(){return this.singlePhotoAnimation?this.photoWidth():this.photosAcrossWidth()},maxPos:function(){var e=this.viewportWidth(),t=this.photosWidth();return 0===t?0:t-e-1},updatePosition:function(){var e=0-this.maxPos();if(0!==e){var t=void 0;t=this.leftAligned?-this.currentPhoto*this.photoWidth():-(this.currentPhoto+1)*this.photoWidth()+this.viewportWidth(),0===t?this.container.parent().addClass("carousel-start"):t<=e?(t=e,this.container.parent().addClass("carousel-end")):(this.container.parent().removeClass("carousel-start"),this.container.parent().removeClass("carousel-end")),this.xPosition=t,this.$el.animate({"margin-left":t+"px"}),this.loadInView()}},next:function(){this.directionNext=!0,this.animate()},previous:function(){this.directionNext=!1,this.animate()},loadInView:function(){var e=this.photoWidth(),t=Math.abs(this.xPosition/e),n=t+2*this.photosAcross()+1,r=this.$el.find(".image-wrap").slice(t,n);o.each(r,function(e,t){var n=s(e),r=n.find(".carousel-image");r.attr("src")||r.one("load",function(){s(this).delay(50*t).fadeIn(500)}).attr("src",n.attr("data-src"))})},selectImage:function(e){var t=this.photoWidth(),n=0-e*t,r=this.xPosition,i=this.photosAcrossWidth(),a=void 0;this.markSelected(e),n>r?(this.directionNext=!1,a=n):n<=r-i&&(this.directionNext=!0,a=n+this.viewportWidth()-t),o.isUndefined(a)||this.animate(a)},markSelected:function(e){this.$(".image-wrap").removeClass("selected"),this.$(".image-wrap").eq(e).addClass("selected")},handleResize:function(){this.updatePosition(),this.setCssClass()},leave:function(){s(window).off("resize."+this.cid),p.prototype.leave.apply(this,arguments)},setCssClass:function(){this.photosWidth()<=this.viewportWidth()?(this.container.parent().addClass("no-carousel-nav"),this.$el.css({"margin-left":"0px"})):this.container.parent().removeClass("no-carousel-nav")}}),e.exports=t.default},function(e,t,n){function r(e){return n(i(e))}function i(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var o={"./ABVI.png":765,"./ACSO.png":766,"./ACUO.png":767,"./AHAR.png":768,"./AHNO.png":769,"./AHRO.png":770,"./AHSO.png":771,"./ALOF.png":772,"./APEX.png":773,"./AQH.png":774,"./ARAM.png":775,"./ASCT.png":776,"./ATAH.png":777,"./AVID.png":778,"./AVST.png":779,"./BHRA.png":780,"./BISA.png":781,"./BRTH.png":782,"./BWEE.png":783,"./BWPL.png":784,"./BWPR.png":785,"./CBVI.png":786,"./CHAE.png":787,"./CHOO.png":788,"./CHTX.png":789,"./CION.png":790,"./CITA.png":791,"./CLAR.png":792,"./CLBR.png":793,"./CONS.png":794,"./COUR.png":795,"./CPRL.png":796,"./CSAU.png":797,"./CSOU.png":798,"./Curio.png":799,"./DHEO.png":800,"./DHOO.png":801,"./DHRU.png":802,"./DIAN.png":803,"./DODN.png":804,"./DREA.png":805,"./DRMS.png":806,"./EDIT.png":807,"./ELCO.png":808,"./ELEM.png":809,"./ESMU.png":810,"./EURO.png":811,"./EVEN.png":812,"./FIAN.png":813,"./FPOO.png":814,"./GAIN.png":815,"./GAYL.png":816,"./GCHR.png":817,"./GHEO.png":818,"./GHRE.png":819,"./GHRO.png":820,"./GHRY.png":821,"./GLCO.png":822,"./HAMP.png":823,"./HAP.png":824,"./HAYN.png":825,"./HCTC.png":826,"./HEHR.png":827,"./HESP.png":828,"./HGII.png":829,"./HGVI.png":830,"./HHIO.png":831,"./HHOA.png":832,"./HHWW.png":833,"./HHYO.png":834,"./HIAN.png":835,"./HICV.png":836,"./HIEO.png":837,"./HIHO.png":838,"./HION.png":839,"./HIRO.png":840,"./HJC.png":841,"./HJOO.png":842,"./HMOI.png":843,"./HOTU.png":844,"./HPYL.png":845,"./HRYE.png":846,"./HSBW.png":847,"./HSOU.png":848,"./HTLR.png":849,"./HUAL.png":850,"./HVCY.png":851,"./HYAT.png":852,"./HYZR.png":853,"./HYZV.png":854,"./IHBO.png":855,"./JDVO.png":856,"./JMWA.png":857,"./JURYS.png":858,"./KCEL.png":859,"./KEYT.png":860,"./KIMP.png":861,"./KINN.png":862,"./LEBA.png":863,"./LHEO.png":864,"./LHSE.png":865,"./LLRX.png":866,"./LMEE.png":867,"./LQAU.png":868,"./LTHE.png":869,"./MANT.png":870,"./MAYFAIR.png":871,"./MCCA.png":872,"./MCHI.png":873,"./MEAA.png":874,"./MESA.png":875,"./MHCBR.png":876,"./MHRA.png":877,"./MIIN.png":878,"./MOEH.png":879,"./MOVE.png":880,"./MOXY.png":881,"./MSSA.png":882,"./MVCA.png":883,"./NANN.png":884,"./NCTN.png":885,"./NHCO.png":886,"./NHHO.png":887,"./NHOW.png":888,"./NIGH.png":889,"./NIKK.png":890,"./NOW.png":891,"./OHRB.png":892,"./OHRK.png":893,"./OOOR.png":894,"./OSOE.png":895,"./OTNT.png":896,"./OUOT.png":897,"./PHAY.png":898,"./PHP.png":899,"./PHRR.png":900,"./PIAN.png":901,"./PPAL.png":902,"./PR.png":903,"./PTNG.png":904,"./QHUO.png":905,"./QUAL.png":906,"./RADI.png":907,"./RAMA.png":908,"./RBAL.png":909,"./RCHI.png":910,"./REGE.png":911,"./REHA.png":912,"./RENA.png":913,"./REND.png":914,"./RFHO.png":915,"./RIEN.png":916,"./ROTA.png":917,"./RRIE.png":918,"./S8UP.png":919,"./SBR.png":920,"./SCRT.png":921,"./SESU.png":922,"./SHER.png":923,"./SHSP.png":924,"./SILN.png":925,"./SNSC.png":926,"./SOLA.png":927,"./SRTE.png":928,"./SSR.png":929,"./SSTU.png":930,"./TAJJ.png":931,"./TCRL.png":932,"./THRO.png":933,"./TLCH.png":934,"./TODT.png":935,"./TOGA.png":936,"./TPSO.png":937,"./TRAV.png":938,"./TRID.png":939,"./TRPO.png":940,"./TSRH.png":941,"./UBCL.png":942,"./UNOI.png":943,"./WAAS.png":944,"./WBWI.png":945,"./WEST.png":946,"./WHOT.png":947,"./WORL.png":948,"./WYAA.png":949,"./WYND.png":950,"./WYTQ.png":951,"./YNAI.png":952,"./ZOET.png":953,"./nobrand.png":954};r.keys=function(){return Object.keys(o)},r.resolve=i,e.exports=r,r.id=560},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=n(562),h=i(f).default,m=n(17),g=i(m).default,y=n(957),v=y.container,_=function(e){function t(){return a(this,t),u(this,e.apply(this,arguments))}return c(t,e),t.prototype.render=function(e){var t=e.hotels;return 0===t.length||0===t.size?null:r("div",{className:v,id:"rate-disclaimer"},r(g,null,r(h,{hotels:t})))},t}(d);t.default=_,e.exports=t.default}).call(t,n(0).h)},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=function(e){function t(){return a(this,t),u(this,e.apply(this,arguments))}return c(t,e),t.prototype.render=function(e){var t=e.hotels;if(0===t.length||0===t.size)return null;var n=t.some(function(e){return e.toJS?e=e.toJS():e.toJSON&&(e=e.toJSON()),!(e.displayInclusiveRate||e.rate&&e.rate.displayInclusive)});return r("div",{id:"rates-disclaimer"},r("span",null,"Rates above are for one room, one night. "),n&&r("span",null,"Unless otherwise stated, rates do not include all taxes and fees."))},t}(d);t.default=f,e.exports=t.default}).call(t,n(0).h)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(39),i=function(e){return e&&e.__esModule?e:{default:e}}(r).default,o=i("us")||i("ca")?"MM/DD/YYYY":"DD/MM/YYYY";t.default=o,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(5),l=r(u),c=n(209),p=(r(c),n(433)),d=r(p),f=n(432),h=function(e){function t(){var e,n,r,a;i(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.handleNextClick=function(){r.props.onNextClick&&r.props.onNextClick()},r.handlePreviousClick=function(){r.props.onPreviousClick&&r.props.onPreviousClick()},r.handleNextKeyDown=function(e){e.keyCode!==f.ENTER&&e.keyCode!==f.SPACE||(e.preventDefault(),r.handleNextClick())},r.handlePreviousKeyDown=function(e){e.keyCode!==f.ENTER&&e.keyCode!==f.SPACE||(e.preventDefault(),r.handlePreviousClick())},a=n,o(r,a)}return a(t,e),s(t,[{key:"shouldComponentUpdate",value:function(e){return e.labels!==this.props.labels||e.dir!==this.props.dir||this.props.showPreviousButton!==e.showPreviousButton||this.props.showNextButton!==e.showNextButton}},{key:"render",value:function(){var e=this.props,t=e.classNames,n=e.className,r=e.showPreviousButton,i=e.showNextButton,o=e.labels,a=e.dir,s=void 0,u=void 0,c=void 0,p=void 0,d=void 0,f=void 0;"rtl"===a?(s=this.handleNextClick,u=this.handlePreviousClick,c=this.handleNextKeyDown,p=this.handlePreviousKeyDown,f=r,d=i):(s=this.handlePreviousClick,u=this.handleNextClick,c=this.handlePreviousKeyDown,p=this.handleNextKeyDown,f=i,d=r);var h=d?t.navButtonPrev:t.navButtonPrev+" "+t.navButtonInteractionDisabled,m=f?t.navButtonNext:t.navButtonNext+" "+t.navButtonInteractionDisabled,g=l.default.createElement("span",{tabIndex:"0",role:"button","aria-label":o.previousMonth,key:"previous",className:h,onKeyDown:d?c:void 0,onClick:d?s:void 0}),y=l.default.createElement("span",{tabIndex:"0",role:"button","aria-label":o.nextMonth,key:"right",className:m,onKeyDown:f?p:void 0,onClick:f?u:void 0});return l.default.createElement("div",{className:n||t.navBar},"rtl"===a?[y,g]:[g,y])}}]),t}(u.Component);h.defaultProps={classNames:d.default,dir:"ltr",labels:{previousMonth:"Previous Month",nextMonth:"Next Month"},showPreviousButton:!0,showNextButton:!0},t.default=h,h.propTypes={}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(5),l=r(u),c=n(209),p=(r(c),function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"shouldComponentUpdate",value:function(e){return this.props!==e}},{key:"render",value:function(){var e=this.props,t=e.weekday,n=e.className,r=e.weekdaysLong,i=e.weekdaysShort,o=e.localeUtils,a=e.locale,s=void 0;s=r?r[t]:o.formatWeekdayLong(t,a);var u=void 0;return u=i?i[t]:o.formatWeekdayShort(t,a),l.default.createElement("div",{className:n,role:"columnheader"},l.default.createElement("abbr",{title:s},u))}}]),t}(u.Component));t.default=p,p.propTypes={}},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.minZoom=void 0;var i=n(6),o=r(i).default,a=n(1),s=r(a).default,u=n(2),l=r(u).default,c=n(3),p=r(c).default,d=n(5),f=d.Component,h=n(1006),m=r(h).default,g=n(430),y=r(g).default,v=n(221),_=r(v).default,b=y(window),x=b.browser,w=b.version,S=t.minZoom="ie"==x?12:11,k=void 0;k="ie"==x||"edge"==x&&w[0]<15;var E=void 0,T=function(t){function n(){return s(this,n),l(this,t.apply(this,arguments))}return p(n,t),n.prototype.componentWillMount=function(){E||(E=new m(function(e){var t=document.createElement("link");t.onload=e,t.href="https://api.tiles.mapbox.com/mapbox-gl-js/v0.44.0/mapbox-gl.css",t.rel="stylesheet",document.getElementsByTagName("head")[0].appendChild(t)}))},n.prototype.componentDidMount=function(){var e=this;_&&E.then(function(){var t=e._container,n=e.props,r=n.options,i=void 0===r?{}:r,a=n.onRender,s=i.style||"mapbox://styles/roomkey/cjhkt04tr1c8u2rqya3yza6lz",u=o({},i,{style:s,zoom:i.zoom||i.minZoom||S,minZoom:i.minZoom||S,container:t});if(u.center,!1)throw new Error("center is mandatory");k&&(u.style={version:8,sources:{},layers:[]});var l=new _.Map(u);k&&l.setStyle(s),"function"==typeof a&&a(l),e.setState({map:l})})},n.prototype.shouldComponentUpdate=function(){return!1},n.prototype.render=function(){var t=this;return e("div",{style:this.props.style,className:this.props.className,ref:function(e){return t._container=e}})},n.prototype.componentWillUnmount=function(){if(_){var e=this.state.map;e&&e.loaded()&&e.remove()}},n}(f);t.default=T}).call(t,n(0).h)},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=n(1012),h=i(f).default,m=n(1013),g=i(m).default,y=n(1014),v=i(y).default,_=function(e){function t(){return a(this,t),u(this,e.apply(this,arguments))}return c(t,e),t.prototype.render=function(e){var t=e.preposition;return r("div",{className:v.row},r("div",{className:v.col},r("a",{href:"",className:v.link},r("span",{className:v.google_logo},r("img",{src:h})),r("span",{className:v.google_text},"Sign ",t," with Google"))),r("div",{className:v.col},r("a",{href:"",className:v.link},r("span",{className:v.facebook_logo},r("img",{src:g})),r("span",{className:v.facebook_text},"Sign ",t," with Facebook"))))},t}(d);t.default=_,e.exports=t.default}).call(t,n(0).h)},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.UserAuthenticatedVerified=void 0;var i=n(1),o=r(i).default,a=n(2),s=r(a).default,u=n(3),l=r(u).default,c=n(0),p=c.Component,d=n(7),f=d.connect,h=n(51),m=r(h).default,g=void 0;g=n(12).Redirect;var y=t.UserAuthenticatedVerified=function(t){function n(){return o(this,n),s(this,t.apply(this,arguments))}return l(n,t),n.prototype.render=function(t){var n=t.isVerified,r=t.children,i=t.push,o=void 0!==i&&i,a=t.redirect,s=void 0!==a&&a;return e(m,{redirect:s},n?r:s&&e(g,{to:s,push:o}))},n}(p);t.default=f(function(e){var t=e.get("session");return{isVerified:Boolean(t.get("isLoggedIn")&&t.get("identity").get("isVerified"))}})(y)}).call(t,n(0).h)},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.UserAuthenticatedVerified=void 0;var i=n(1),o=r(i).default,a=n(2),s=r(a).default,u=n(3),l=r(u).default,c=n(0),p=c.Component,d=n(7),f=d.connect,h=n(51),m=r(h).default,g=void 0;g=n(12).Redirect;var y=t.UserAuthenticatedVerified=function(t){function n(){return o(this,n),s(this,t.apply(this,arguments))}return l(n,t),n.prototype.render=function(t){var n=t.isSubscribed,r=t.children,i=t.push,o=void 0!==i&&i,a=t.redirect,s=void 0!==a&&a;return e(m,{redirect:s},n?r:s&&e(g,{to:s,push:o}))},n}(p);t.default=f(function(e){var t=e.get("session");return{isSubscribed:Boolean(t.get("isLoggedIn")&&t.get("identity").get("isSubscribed"))}})(y)}).call(t,n(0).h)},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.UserAuthenticatedVerified=void 0;var i=n(1),o=r(i).default,a=n(2),s=r(a).default,u=n(3),l=r(u).default,c=n(0),p=c.Component,d=n(7),f=d.connect,h=n(51),m=r(h).default,g=void 0;g=n(12).Redirect;var y=t.UserAuthenticatedVerified=function(t){function n(){return o(this,n),s(this,t.apply(this,arguments))}return l(n,t),n.prototype.render=function(t){var n=t.isSubscribed,r=t.children,i=t.push,o=void 0!==i&&i,a=t.redirect,s=void 0!==a&&a;return e(m,{redirect:s},n?s&&e(g,{to:s,push:o}):r)},n}(p);t.default=f(function(e){var t=e.get("session");return{isSubscribed:Boolean(t.get("isLoggedIn")&&t.get("identity").get("isSubscribed"))}})(y)}).call(t,n(0).h)},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.PlaceInput=void 0;var i=n(22),o=r(i).default,a=n(1),s=r(a).default,u=n(2),l=r(u).default,c=n(3),p=r(c).default,d=n(5),f=r(d).default,h=n(7),m=h.connect,g=n(230),y=r(g).default,v=n(239),_=v.fetchInputResults,b=v.setQuery,x=v.setOpen,w=v.increaseSelectedIndex,S=v.decreaseSelectedIndex,k=v.emptyPlaces,E=n(1037),T=r(E).default,M=n(1038),C=r(M).default,O=n(1039),A=r(O).default,P=n(418),R=r(P).default,D=void 0,I=t.PlaceInput=function(t){function n(e){s(this,n);var r=l(this,t.call(this,e)),i=r.props,o=i.query,a=i.fetchInputResults;return r.state={selectedIndex:0,place:null},o&&a(o),r}return p(n,t),n.prototype.render=function(){var t=this;D=!1;var n=this.props,r=n.places,i=n.query,a=n.open,s=n.setOpen,u=n.hint,l=n.selectedIndex,c=n.error,p=n.emptyPlaces,d=r.get(l);return e("div",{className:c?T.container+" "+T.error:""+T.container},e("img",{src:C,className:T.searchIcon}),e("div",{className:T.hint},u!=i?u:""),e("input",{id:"search-input",type:"text",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",placeholder:"Enter a city, airport, or zip code",value:i,ref:function(e){return t._input=e},onFocus:function(){return p()&&s(!1)},onBlur:function(){return L(t)},onKeyDown:function(e){return H(t,e)},onKeyUp:function(e){return z(t,e)},onInput:function(e){return B(t,e)}}),e("label",{className:T.screenreaderText,htmlFor:"search-input"},"Search Input"),i&&e("button",{className:T.resetButton,type:"button",onClick:function(){return N(t)}},e("img",{alt:"Reset search input icon",src:A,className:T.resetIcon})),a&&r.size>0&&e("div",{style:{position:"relative"}},e("div",{className:T.dropdown,ref:function(e){return t._scrollListEl=e}},o(R).map(function(n){var i=r.filter(function(e){return e.get("type")===n});return i.size>0&&e("section",{key:n},"generic"!=n&&e("h2",{ref:function(e){return t._firstPlaceTypeHeading=t._firstPlaceTypeHeading||e}},R[n]),e("ul",null,i.map(function(n){return e("li",{ref:function(e){return t._selectedPlaceEl=e&&n.equals(d)?e:t._selectedPlaceEl},key:n.get("id"),className:T.place+" "+(n.equals(d)&&T.selected),onMouseDown:function(){return U(t,n)}},V(n))}).toJS()))}))))},n.prototype.componentDidUpdate=function(){j(this)},n.prototype.componentWillUnmount=function(){this.props.open&&this.props.setOpen(!1)},n}(f.Component),N=function(e){U(e,null),e._input.focus()},L=function(e){var t=e.props,n=t.setOpen,r=t.query,i=t.setQuery,o=t.searchResultsPlace,a=e.state.place;D||r!==(a&&V(a))&&i(o?V(o):a?V(a):""),n(!1)},z=function(e,t){var n=e.props,r=n.places,i=n.selectedIndex,o=n.onKeyUp,a=n.query,s=n.onSubmit,u=t.keyCode;if(27===u)U(e,null);else if(13===u){t.preventDefault();var l=r.get(i);l&&(V(l)===a&&"function"==typeof s?s():U(e,l))}"function"==typeof o&&o(t)},j=function(e){var t=e._selectedPlaceEl;if(t&&e._scrollListEl&&e._scrollListEl.clientHeight){var n=t.offsetTop,r=t.clientHeight,i=n+r,o=e._scrollListEl.clientHeight,a=e._scrollListEl.scrollTop+0;i>o+a?e._scrollListEl.scrollTop=n-o+r:e._firstPlaceTypeHeading&&n<=a&&(e._scrollListEl.scrollTop=n<=e._firstPlaceTypeHeading.clientHeight?0:n)}},H=function(e,t){var n=t.keyCode,r=e.props,i=r.increaseSelectedIndex,o=r.decreaseSelectedIndex;40===n&&i(),38===n&&o(),[38,40].indexOf(n)>-1&&t.preventDefault()},B=function(e,t){var n=e.props,r=n.setQuery,i=n.fetchInputResults,o=t.target.value;r(o),o.length>2&&F(i,o)},F=y(function(e,t){return e(t)},350),U=function(e,t){D=!0;var n=e.props,r=n.setQuery,i=n.onChange,o=n.setOpen;e.setState({place:t}),r(t?V(t):""),o(!1),i(t)},V=function(e){return e.get("fullName")||e.get("name")};t.default=m(function(e){var t=e.get("placeInput"),n=e.get("searchResults");return t?{query:t.get("query"),places:t.get("places"),open:t.get("open"),hint:t.get("hint"),selectedIndex:t.get("selectedIndex"),searchResultsPlace:n&&e.get("searchResults").get("place")}:{}},{fetchInputResults:_,setQuery:b,setOpen:x,increaseSelectedIndex:w,decreaseSelectedIndex:S,emptyPlaces:k})(I)}).call(t,n(0).h)},function(e,t){e.exports={title:"_6658a603",tagline:"_5e3847df",list:"edd2e250",card:"e73661a0",hotelName:"_7d939edf",imageWrapper:"_0f9addf2",image:"e9bb57c2",meta:"d5c76259",logoContainer:"a2f44afe",logo:"_91079691",label:"_1a7cd5cb",sublabel:"_19095416",toolow:"_62bf7990",rate:"d54f45c8",loyalty:"_71cdd45b",standard:"b0a3bcf8",savings:"_4c90bfb3",savingsCurrency:"a2702a55",currency:"_204d46cc",long:"_827dd62d",link:"ddaaa0a9",loading:"_57c75ac3","keep-rotating":"_8407249a"}},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=n(1135),h=i(f).default,m=function(e){function t(){return a(this,t),u(this,e.apply(this,arguments))}return c(t,e),t.prototype.render=function(e){var t=e.checked,n=e.name,i=e.value,o=e.hotelCount,a=e.onChange;return r("div",{className:h.row},r("input",{id:"checkbox-row-"+i,type:"checkbox",value:i,checked:t,onChange:a}),r("label",{for:"checkbox-row-"+i},r("span",{className:h.name},n),r("span",{className:h.count},"(",o,")")))},t}(d);t.default=m,e.exports=t.default}).call(t,n(0).h)},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=n(1137),h=f.scroll,m=function(e){function t(){return a(this,t),u(this,e.apply(this,arguments))}return c(t,e),t.prototype.render=function(e){var t=e.children;return r("div",{className:h},t)},t}(d);t.default=m,e.exports=t.default}).call(t,n(0).h)},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=n(1138),h=i(f).default,m=function(e){function t(){return a(this,t),u(this,e.apply(this,arguments))}return c(t,e),t.prototype.render=function(e){var t=e.onNegativeAction,n=e.negativeLabel;return r("div",{className:h.row},r("button",{className:h.clear,type:"button",onClick:t},n),r("button",{className:h.apply,type:"submit"},"Apply"))},t}(d);t.default=m,e.exports=t.default}).call(t,n(0).h)},function(e,t,n){e.exports=n.p+"images/roomkey/favicon.ico"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/about-us-map.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/arrow-down.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/arrow-left.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/arrow-right.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/bubble-arrow-up.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/calendar-icon-grey.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/calendar-icon-white.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/calendar-icon.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/checkbox.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/close-x-dark-blue.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/close-x-white.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/flags/au.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/flags/ca.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/flags/nz.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/flags/uk.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/flags/us.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/founders-logos-2-up.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/founders-logos-3-up.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/founders-logos.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/hotel-chain-founder-logos.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/hotel-chain-logos.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/hotel-pin-hover.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/hotel-pin.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/line-arrow-dark-blue.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/line-arrow-sky-blue-hover.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/line-arrow-sky-blue.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/line-arrow-white.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/loading-spin-blue.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/location-arrow-blue.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/location-arrow-sky-blue.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/location-arrow-white.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/logo-white.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/map-pin-sky-blue.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/msnbc-logo.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/pin.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/reset.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/right-arrow-sky-blue.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/roomkey-logo-white.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/search-mag-glass.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/star.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/techcrunch-logo.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/tick.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/top.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/trip_logo.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/twp-logo.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/usa-today-logo.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/white-arrow-down.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/white-arrow.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/svg/wifi.svg"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){n(186),e.exports=n(729)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}n(461),n(460);var i=n(730),o=r(i).default,a=n(238),s=r(a).default,u=n(26),l=r(u).default,c=n(733),p=r(c).default;location.href.indexOf("#")>-1?document.location.replace(location.href.split("#")[0]):p({parentEvent:l("jakarta",{app:"roomkey"}),NoCookiesView:o,store:s})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(11),o=r(i).default,a=n(494),s=r(a).default;n(414),n(731);var u=n(732),l=r(u).default;t.default=s.View.extend({template:l,initialize:function(){this.render()},render:function(){o("html, body").css({background:"#fff"}),o(".rk-app").html(this.template()).addClass("is-ui-ready")}}),e.exports=t.default},function(e,t){},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div id="no-cookies">  <div>    <img src={logo} alt="Room Key" />  </div>  <div>Your cookies are disabled. Room Key won\'t work properly without cookies. Please enable them and refresh this page.</div></div>';return __p}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.parentEvent,n=e.store;d.extend({appName:"roomkey",initialize:function(){w(function(){return n.dispatch(g())});var e=document.getElementById("preact-app");!function(r){e=a(o(c,{store:n},o(u,{history:h()},o(r,{parentEvent:t}))),document.body,e)}(k)},baseUrl:window.location.protocol+"//"+window.location.host+"/"}),d.initialize()};var i=n(0),o=i.h,a=i.render,s=n(12),u=s.Router,l=n(7),c=l.Provider,p=n(495),d=r(p).default,f=n(152),h=r(f).default,m=n(25),g=m.load,y=n(410),v=y.AdaraLeadTag,_=n(204),b=_.setAdaraLeadTag,x=n(52),w=x.listenToSessionIdentityChange,S=n(734),k=r(S).default;n(1160),n(576),n(1161),n(1208),n(1209),n(1210),b(v),e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(1),o=r(i).default,a=n(2),s=r(a).default,u=n(3),l=r(u).default,c=n(22),p=r(c).default,d=n(6),f=r(d).default,h=n(0),m=h.h,g=h.Component,y=n(12),v=y.Route,_=y.Switch,b=y.Redirect,x=n(31),w=x.replaceRoute,S=x.popRoute,k=x.pushRoute,E=n(483),T=r(E).default,M=n(193),C=r(M).default,O=n(485),A=r(O).default,P=n(37),R=r(P).default,D=P.home,I=P.hotelDetails,N=P.login,L=P.logout,z=P.register,j=P.registered,H=P.profile,B=P.manageAlerts,F=P.user,U=P.forgotPassword,V=P.searchAirports,Y=P.searchLocations,W=P.searchGeocircles,q=P.searchPolygons,G=n(38),Z=r(G).default,K=n(238),J=K.dispatch;n(414);var X=n(735),$=r(X).default,Q=n(1007),ee=r(Q).default,te=n(1011),ne=r(te).default,re=n(1015),ie=r(re).default,oe=n(1016),ae=r(oe).default,se=n(1018),ue=r(se).default,le=n(1020),ce=r(le).default,pe=n(1021),de=r(pe).default,fe=n(1022),he=r(fe).default,me=n(1026),ge=r(me).default,ye=n(1027),ve=r(ye).default,_e=n(1093),be=r(_e).default;n(1158);var xe=n(1159),we=xe.container,Se={},ke=function(e){var t=e.match,n=e.location,r=e.history;if(r.action!==Se.action||n.pathname!==Se.pathname||n.search!==Se.search||n.hash!==Se.hash){var i={location:n,path:t.path,params:t.params,queryParams:Z(n.search||n.hash),historyState:window.history.state||{}};"REPLACE"===r.action&&J(w(i)),"PUSH"===r.action&&J(k(i)),"POP"===r.action&&J(S(i)),Se=f({},n,{action:r.action})}},Ee=p(R).map(function(e){return m(v,{exact:!0,path:R[e],render:ke})}),Te=function(e){function t(){return o(this,t),s(this,e.apply(this,arguments))}return l(t,e),t.prototype.render=function(e){var t=e.parentEvent;return T()?m("div",null,C("exit-prompt")&&m(he,{parentEvent:t}),m("div",{id:"preact-app",className:we},Ee,m(_,null,m(v,{exact:!0,path:z,render:function(){return m(ne,{parentEvent:t})}}),m(v,{exact:!0,path:j,render:function(){return m(ie,{parentEvent:t})}}),m(v,{exact:!0,path:H,render:function(){return m(ae,{parentEvent:t})}}),m(v,{exact:!0,path:B,render:function(){return C("price-alerts")?m(ue,{parentEvent:t}):m(ae,{parentEvent:t})}}),m(b,{from:F,to:H,push:!1}),m(v,{exact:!0,path:N,render:function(){return m(ce,{parentEvent:t})}}),m(v,{exact:!0,path:L,render:function(){return m(de,{parentEvent:t})}}),m(v,{exact:!0,path:U,render:function(){return m(ge,{parentEvent:t})}}),m(v,{exact:!0,path:D,render:function(){return m(ve,{parentEvent:t})}}),m(v,{exact:!0,path:Y,render:function(e){return m(be,{parentEvent:t,route:e})}}),m(v,{exact:!0,path:V,render:function(e){return m(be,{parentEvent:t,route:e})}}),m(v,{exact:!0,path:W,render:function(e){return m(be,{parentEvent:t,route:e})}}),m(v,{exact:!0,path:q,render:function(e){return m(be,{parentEvent:t,route:e})}}),m(v,{exact:!0,path:I,render:function(e){var n=e.match.params.udicode;return m($,{parentEvent:t,udicode:n})}}),m(v,{render:function(){return m(ee,{parentEvent:t})}})))):m(A,{parentEvent:t})},t}(g);t.default=Te,e.exports=t.default},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.HotelDetailsPage=void 0;var i=n(1),o=r(i).default,a=n(2),s=r(a).default,u=n(3),l=r(u).default,c=n(0),p=c.Component,d=n(7),f=d.connect,h=n(26),m=h.getHotelData,g=n(428),y=r(g).default,v=n(71),_=r(v).default,b=n(68),x=r(b).default,w=n(557),S=r(w).default,k=n(17),E=r(k).default,T=n(496),M=r(T).default,C=n(737),O=r(C).default,A=n(738),P=r(A).default,R=n(759),D=r(R).default,I=n(760),N=r(I).default,L=n(955),z=r(L).default,j=n(956),H=r(j).default,B=n(958),F=r(B).default,U=n(960),V=r(U).default,Y=n(971),W=r(Y).default,q=n(972),G=r(q).default,Z=n(973),K=r(Z).default,J=void 0,X=void 0;J=n(218).CriteoItemTag,X=n(1004);var $=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.hotel,r=t.parentEvent;n=n||e.props.hotel,e.renderEvent=(r||e.props.parentEvent).createChildRenderEvent("hotel-details",m(n?n.toJS():{})),e._isMrmrEnabled=y("mrmr?",e.renderEvent)},Q=t.HotelDetailsPage=function(t){function n(e){o(this,n);var r=s(this,t.call(this,e));r.instance=Math.random();var i=r.props,a=i.udicode,u=i.updateHotel;return $(r),u(a),r}return l(n,t),n.prototype.render=function(t){var n=t.hotel,r=t.similarHotels,i=n&&n.toJS()||{},o=i.address,a=i.amenities,s=i.brandLogo,u=i.locationId,l=i.photos,c=i.vfmUrl,p=i.name,d=i.tripadvisor,f=i.udicode,h=i.rate,m=i.description,g=i.reservationTelephone,y=o||{},v=y.line1,b=y.city,w=y.regionName,k=y.countryName,T=r&&r.filter(function(e){return e.get("rate")}),C=this.renderEvent;return e("div",{className:"rk-hotel-detail-page-wrap page-hotel-detail"},e(_,{parentEvent:C}),e("div",{className:"rk-hotel-detail"},e("div",{className:"rk-hotel-detail-page-back"},n&&e(E,null,e(z,{hotel:i,parentEvent:C,className:"rk-hotel-detail-page-back-link"}))),l&&e(P,{parentEvent:C,vfmUrl:c,photos:l}),e("div",{className:"rk-hotel-detail-page-name-wrapper"+(s?"":" no-logo")},p&&e(E,null,e("div",{className:"rk-hotel-detail-page-name-block"},e("h1",{className:"rk-hotel-detail-name"},p),o&&e("p",{className:"rk-hotel-detail-address"},v,", ",b,", ",w,", ",k),s&&e("div",{className:"rk-hotel-card-brand-logo "+(s.match(/\.png$/)?"rk-png-logo":""),style:"background-image:url("+s+")"})))),!this._isMrmrEnabled&&e("div",{className:"rk-hotel-detail-page-overview"},e("div",{className:"preact-hotel-details-overview"},e(E,null,e("div",{className:"rk-current-rate-wrapper"},e("div",{"data-element":"rate-header",className:"rk-rate-header-wrapper"},h&&e("div",{className:"rk-rate-header"+(h.isLoyalty?" is-cug":"")},h.isLoyalty?"Loyalty Member Rate":"Standard Rate")),e("div",{"data-element":"stay-details",className:"rk-stay-wrapper"},e(V,null)),e("div",{"data-element":"current-rate",className:"rk-hotel-detail-current-rate"},n&&e(G,{hotel:n,parentEvent:C}))),e("div",{className:"rk-hotel-info"},e(F,{description:m||""}),e("div",{"data-element":"hotel-room-info",className:"rk-hotel-room-info"},h&&e(W,{description:h.roomDescription,type:h.roomType,cancellationPolicies:h.cancellationPolicies,rateDescription:h.rateDescription})))))),this._isMrmrEnabled&&n&&e(E,null,e(K,{hotel:n,reservationTelephone:g,parentEvent:C}),e(F,{mrmrEnabled:this._isMrmrEnabled,description:m||""})),e("div",{className:"rk-hotel-detail-page-amenities"},e(O,{amenities:a})),e("div",{className:"rk-hotel-detail-page-ratings"},d&&e(D,{tripadvisor:d,parentEvent:C})),!M()&&o&&e(X,{hotel:i,parentEvent:C})),p&&e(N,{similarHotels:T,parentEvent:C}),e(E,null,u&&e(z,{hotel:i,parentEvent:C,className:"rk-hotel-detail-page-back-link back-to-at-bottom"})),p&&e(H,{hotel:i,similarHotelsWithRates:T}),e(S,null),J&&f&&e(J,{item:f}),e(x,{parentEvent:C}))},n.prototype.shouldComponentUpdate=function(e,t){var n=e.hotel,r=e.stay;return n&&(!n.equals(t.hotel)||!r.equals(t.stay))},n.prototype.componentWillUpdate=function(e){var t=e.hotel,n=e.parentEvent,r=this.renderEvent.data.udicode;!r||t&&t.get("udicode")!==r?$(this,{hotel:t,parentEvent:n}):t&&this.renderEvent.updateData(m(t.toJS()))},n.prototype.componentDidUpdate=function(e){var t=this.props,n=t.updateHotel,r=t.updateRates,i=t.udicode,o=t.stay,a=t.hotel;e.udicode!==i?n(i):e.stay.equals(o)||r(a)},n.prototype.componentWillUnmount=function(){this.props.clearHotel()},n.prototype.componentWillReceiveProps=function(e){var t=e.currency;this.props.currency&&this.props.currency!==t&&this.props.updateHotel(this.props.udicode)},n}(p);t.default=f(function(e){return{currency:e.get("currency"),stay:e.get("stay"),hotel:e.get("hotelDetails").get("hotel"),similarHotels:e.get("hotelDetails").get("similarHotels"),previousRoutes:e.get("routing").get("previous")}},function(e){var t=n(417),r=t.clearHotel,i=t.setHotelByUdicode,o=t.fetchRatesForHotel;return{updateHotel:function(t){return e(i("string"==typeof t?t:t.get("udicode")))},updateRates:function(t){return e(o(t))},clearHotel:function(){return e(r())}}})(Q)}).call(t,n(0).h)},function(e,t){e.exports={row:"d6805a1e",col:"_00b31754",wrapper:"d8efedf3",container:"fbf33934"}},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(6),a=i(o).default,s=n(1),u=i(s).default,l=n(2),c=i(l).default,p=n(3),d=i(p).default,f=n(0),h=f.Component,m=n(17),g=i(m).default,y=n(200),v=i(y).default,_=function(e){function t(){return u(this,t),c(this,e.apply(this,arguments))}return d(t,e),t.prototype.render=function(e){var t=e.amenities;if(t&&t.length){var n=b.map(function(e){return v(t,function(t){var n=t.code;return e.code===n})||a({disabled:!0},e)});return r(g,null,r("h2",{className:"rk-hotel-detail-amenities-header"},"Amenities"),r("ul",{className:"amenities"},n.map(function(e){var t=e.disabled,n=e.name;return r("li",{className:"amenity"+(t?" disabled":"")},r("i",{className:"amenity-"+n.toLowerCase().replace(/\s+/g,"-")}),r("span",{className:"description"},x(n)))})))}},t}(h);t.default=_;var b=[{name:"Free Wifi",code:"FRWI"},{name:"Pool",code:"POOL"},{name:"Free Breakfast",code:"FBKFST"},{name:"Fitness Center",code:"FIT"},{name:"Pet Friendly",code:"PETS"},{name:"Airport Shuttle",code:"ASHUT"}],x=function(e){var t=/^(\s*\bfree){1}/i;return e.match(t)?r("span",null,r("span",{className:"rk-highlight"},"FREE"),e.replace(t,"")):e};e.exports=t.default}).call(t,n(0).h)},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=n(193),h=i(f).default,m=n(206),g=i(m).default,y=n(558),v=i(y).default,_=n(742),b=i(_).default,x=n(744),w=i(x).default,S=void 0,k=void 0,E=void 0,T=void 0,M=void 0;S=n(64),k=n(11),E=n(745),T=n(559),M=n(756);var C=function(e){var t=S.first(e,5),n=S.reduce(t,function(e,t){return e+t.big[0]},0)/t.length,r=[[500,375],[352,264],[220,165],[200,150]],i=S.find(r,function(e){return n>=e[0]}),o=i[0],a=i[1];return e.map(function(e){return g(e,o,a)})},O=function(e){function t(n){a(this,t);var r=u(this,e.call(this,n));if(r.handleCloseGallery=r.handleCloseGallery.bind(r),r.renderCarouselForced=r.renderCarouselForced.bind(r),r.showInGallery=r.showInGallery.bind(r),!h("carousel-preact"))return u(r);r.handleImageClick=r.handleImageClick.bind(r);var i=r.props,o=i.parentEvent,s=i.photos;return r.state={renderEvent:o.createChildRenderEvent("photos"),photoUrls:C(s)},r}return c(t,e),t.prototype.handleImageClick=function(e,t){this.setState(function(e){var n=e.renderEvent;return{galleryOpened:!0,selectedIndex:t,clickEvent:n.createChildClickEvent("hotel-detail-photo")}}),k("body").css("overflow-y","hidden")},t.prototype.handleCloseGallery=function(){this.setState({galleryOpened:!1}),k("body").css("overflow-y","scroll")},t.prototype.componentWillReceiveProps=function(e){var t=e.parentEvent;e.photos!==this.photos&&this.setState({renderEvent:t.createChildRenderEvent("photos"),photoUrls:C(this.props.photos)})},t.prototype.render=function(){var e=this;if(h("carousel-preact")){var t=this.props,n=t.vfmUrl,i=t.photos,o=this.state,a=o.photoUrls,s=o.clickEvent,u=o.galleryOpened,l=o.selectedIndex;return r("div",{className:"rk-hotel-details-photo-wrapper",ref:function(t){return e.element=t}},r(v,{className:w.carousel,innerControls:!0},a.map(function(t){return r("img",{className:w.carouselImage,onClick:e.handleImageClick,src:t})})),u&&r(b,{parentEvent:s,vfmUrl:n,photos:i,photoUrls:a,selectedIndex:l,onClose:this.handleCloseGallery}))}return r("div",{className:"rk-hotel-details-photo-wrapper",ref:function(t){return e.element=t}},r("div",{className:"rk-single-photo",ref:function(t){return e.singlePhoto=t}}),r("div",{className:"rk-hotel-detail-overview-photos",ref:function(t){return e.container=t}},r("span",{className:"next",onClick:function(){return e.photosView.next()}}),r("span",{className:"previous",onClick:function(){return e.photosView.previous()}})))},t.prototype.componentDidMount=function(){h("hotel-details-photos-preact")||(k(window).on("resize",this.renderCarouselForced),this.renderCarousel())},t.prototype.componentWillUnmount=function(){h("hotel-details-photos-preact")||k(window).off("resize",this.renderCarouselForced),this.closeGallery(),this.closeCarousel()},t.prototype.shouldComponentUpdate=function(){return h("carousel-preact")},t.prototype.renderCarousel=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!h("carousel-preact")&&this.singlePhoto&&(t||0===this.container.getElementsByClassName("image-wrap").length)){var r=this.container,i=this.props.photos,o=k(this.element),a=o.width();if(0===a)return void(n||setTimeout(function(){return e.renderCarousel(!0,!0)},10));var s=S.first(i,5),u=S.reduce(s,function(e,t){return e+t.big[0]},0)/s.length,l=[[500,375],[352,264],[220,165],[200,150]],c=S.find(l,function(e){return u>=e[0]}),p=c[0],d=c[1],f=Math.min(p/a*100,45),m=k(window).height(),y=d/p*(a*f/100),v=y/m,_=S.map(i,function(e){return{url:g(e,p,d),width:p,height:d,caption:e.caption}}),b=v>.4?f*(.4/v):f;if(this.allPhotos=_,_.length*b>=100)this.photosView||(o.find(".image-wrap").off("click"),this.singlePhoto.innerHTML="",this.photosView=new T({container:k(r),photos:_,type:"filmstrip",currentPhoto:0,leftAligned:!1}),this.photosView.render(),o.find(".image-wrap").click(this.showInGallery)),o.find(".image-wrap").css({width:b+"%",paddingBottom:.75*b+"%"});else{o.find(".image-wrap").off("click"),this.closeCarousel();for(var x=k("<div>",{class:"photo-wrapper"}),w=0;w<_.length;w++)x.append(k("<div>",{class:"image-wrap"}).append(k("<img />",{src:_[w].url})));k(this.singlePhoto).html(x),_.length>1&&(o.find(".photo-wrapper").css({display:"flex"}),o.find(".rk-single-photo").css({display:"flex",padding:0}),o.find(".image-wrap").css({margin:0,padding:0,width:"100%",height:"100%"})),o.find(".image-wrap").click(this.showInGallery)}}},t.prototype.renderCarouselForced=function(){this.renderCarousel(!0)},t.prototype.showInGallery=function(e){var t=this,n=this.gallery=new M({photos:this.allPhotos,carouselImgDimensions:[100,75],hideVFM:!1,vfmUrl:this.props.vfmUrl}),r=this.lightbox=new E({content:n.render(),onClose:S.bind(n.leave,n)});r.$el.addClass("rk-gallery-lightbox").prepend('<a class="rk-lightbox-close"></a>'),r.$(".lightbox-content").addClass("centered"),r.$(".rk-lightbox-close").one("click",function(e){e.stopPropagation(),t.closeGallery()}),r.open(),n.loadFirst(k(e.currentTarget).index())},t.prototype.closeGallery=function(){this.lightbox&&(this.lightbox.$(".rk-lightbox-close").off("click."+this.cid),this.lightbox.isOpen&&this.lightbox.destroy()),this.gallery&&this.gallery.destroy()},t.prototype.closeCarousel=function(){this.photosView&&(this.photosView.leave(),delete this.photosView)},t}(d);t.default=O,e.exports=t.default}).call(t,n(0).h)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(){return{x:null,y:null,swiping:!1,start:0}}function s(e){return"changedTouches"in e?{x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}:{x:e.clientX,y:e.clientY}}function u(e){return"touches"in e?{x:e.touches[0].clientX,y:e.touches[0].clientY}:{x:e.clientX,y:e.clientY}}function l(e,t){if(0===t)return e;var n=e.x,r=e.y,i=Math.PI/180*t;return{x:n*Math.cos(i)+r*Math.sin(i),y:r*Math.cos(i)-n*Math.sin(i)}}function c(e,t){var n=l(s(e),t.rotationAngle),r=n.x,i=n.y,o=t.x-r,a=t.y-i,u=Math.abs(o),c=Math.abs(a),p=Date.now()-t.start;return{deltaX:o,deltaY:a,absX:u,absY:c,velocity:Math.sqrt(u*u+c*c)/p}}var p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=n(5),f=n(24),h=n(740).default,m=function(e){function t(n,o){r(this,t);var s=i(this,e.call(this,n,o));return s.swipeable=a(),s.eventStart=s.eventStart.bind(s),s.eventMove=s.eventMove.bind(s),s.eventEnd=s.eventEnd.bind(s),s.mouseDown=s.mouseDown.bind(s),s.mouseMove=s.mouseMove.bind(s),s.mouseUp=s.mouseUp.bind(s),s.cleanupMouseListeners=s.cleanupMouseListeners.bind(s),s.setupMouseListeners=s.setupMouseListeners.bind(s),s.elementRef=s.elementRef.bind(s),s.setupTouchmoveEvent=s.setupTouchmoveEvent.bind(s),s.cleanupTouchmoveEvent=s.cleanupTouchmoveEvent.bind(s),s.hasPassiveSupport=h.hasSupport,s}return o(t,e),t.prototype.componentDidMount=function(){this.props.preventDefaultTouchmoveEvent&&this.setupTouchmoveEvent()},t.prototype.componentDidUpdate=function(e){e.disabled!==this.props.disabled&&(this.cleanupMouseListeners(),this.swipeable=a()),e.preventDefaultTouchmoveEvent&&!this.props.preventDefaultTouchmoveEvent?this.cleanupTouchmoveEvent():!e.preventDefaultTouchmoveEvent&&this.props.preventDefaultTouchmoveEvent&&this.setupTouchmoveEvent()},t.prototype.componentWillUnmount=function(){this.cleanupMouseListeners()},t.prototype.setupTouchmoveEvent=function(){this.element&&this.hasPassiveSupport&&this.element.addEventListener("touchmove",this.eventMove,{passive:!1})},t.prototype.setupMouseListeners=function(){document.addEventListener("mousemove",this.mouseMove),document.addEventListener("mouseup",this.mouseUp)},t.prototype.cleanupTouchmoveEvent=function(){this.element&&this.hasPassiveSupport&&this.element.removeEventListener("touchmove",this.eventMove,{passive:!1})},t.prototype.cleanupMouseListeners=function(){document.removeEventListener("mousemove",this.mouseMove),document.removeEventListener("mouseup",this.mouseUp)},t.prototype.mouseDown=function(e){this.props.trackMouse&&"mousedown"===e.type&&("function"==typeof this.props.onMouseDown&&this.props.onMouseDown(e),this.setupMouseListeners(),this.eventStart(e))},t.prototype.mouseMove=function(e){this.eventMove(e)},t.prototype.mouseUp=function(e){this.cleanupMouseListeners(),this.eventEnd(e)},t.prototype.eventStart=function(e){if(!(e.touches&&e.touches.length>1)){var t=this.props.rotationAngle,n=l(u(e),t),r=n.x,i=n.y;this.props.stopPropagation&&e.stopPropagation(),this.swipeable={start:Date.now(),x:r,y:i,swiping:!1,rotationAngle:t}}},t.prototype.eventMove=function(e){var t=this.props,n=t.stopPropagation,r=t.delta,i=t.onSwiping,o=t.onSwiped,a=t.onSwipingLeft,s=t.onSwipedLeft,u=t.onSwipingRight,l=t.onSwipedRight,p=t.onSwipingUp,d=t.onSwipedUp,f=t.onSwipingDown,h=t.onSwipedDown,m=t.preventDefaultTouchmoveEvent;if(this.swipeable.x&&this.swipeable.y&&!(e.touches&&e.touches.length>1)){var g=c(e,this.swipeable);if(!(g.absX<r&&g.absY<r)||this.swipeable.swiping){n&&e.stopPropagation(),i&&i(e,g.deltaX,g.deltaY,g.absX,g.absY,g.velocity);var y=!1;(i||o)&&(y=!0),g.absX>g.absY?g.deltaX>0?(a||s)&&(a&&a(e,g.absX),y=!0):(u||l)&&(u&&u(e,g.absX),y=!0):g.deltaY>0?(p||d)&&(p&&p(e,g.absY),y=!0):(f||h)&&(f&&f(e,g.absY),y=!0),this.swipeable.swiping=!0,y&&m&&e.preventDefault()}}},t.prototype.eventEnd=function(e){var t=this.props,n=t.stopPropagation,r=t.flickThreshold,i=t.onSwiped,o=t.onSwipedLeft,s=t.onSwipedRight,u=t.onSwipedUp,l=t.onSwipedDown,p=t.onTap;if(this.swipeable.swiping){var d=c(e,this.swipeable);n&&e.stopPropagation();var f=d.velocity>r;i&&i(e,d.deltaX,d.deltaY,f,d.velocity),d.absX>d.absY?d.deltaX>0?o&&o(e,d.deltaX,f):s&&s(e,d.deltaX,f):d.deltaY>0?u&&u(e,d.deltaY,f):l&&l(e,d.deltaY,f)}else p&&p(e);this.swipeable=a()},t.prototype.elementRef=function(e){this.element=e,this.props.innerRef&&this.props.innerRef(e)},t.prototype.render=function(){var e=p({},this.props);return this.props.disabled||(e.onTouchStart=this.eventStart,this.props.preventDefaultTouchmoveEvent&&this.hasPassiveSupport||(e.onTouchMove=this.eventMove),e.onTouchEnd=this.eventEnd,e.onMouseDown=this.mouseDown),e.ref=this.elementRef,delete e.onSwiped,delete e.onSwiping,delete e.onSwipingUp,delete e.onSwipingRight,delete e.onSwipingDown,delete e.onSwipingLeft,delete e.onSwipedUp,delete e.onSwipedRight,delete e.onSwipedDown,delete e.onSwipedLeft,delete e.onTap,delete e.flickThreshold,delete e.delta,delete e.preventDefaultTouchmoveEvent,delete e.stopPropagation,delete e.nodeName,delete e.children,delete e.trackMouse,delete e.disabled,delete e.innerRef,delete e.rotationAngle,d.createElement(this.props.nodeName,e,this.props.children)},t}(d.Component);m.propTypes={onSwiped:f.func,onSwiping:f.func,onSwipingUp:f.func,onSwipingRight:f.func,onSwipingDown:f.func,onSwipingLeft:f.func,onSwipedUp:f.func,onSwipedRight:f.func,onSwipedDown:f.func,onSwipedLeft:f.func,onTap:f.func,flickThreshold:f.number,delta:f.number,preventDefaultTouchmoveEvent:f.bool,stopPropagation:f.bool,nodeName:f.string,trackMouse:f.bool,disabled:f.bool,innerRef:f.func,children:f.node,rotationAngle:f.number},m.defaultProps={flickThreshold:.6,delta:10,preventDefaultTouchmoveEvent:!1,stopPropagation:!1,nodeName:"div",disabled:!1,rotationAngle:0},e.exports=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={update:function(){if("undefined"!=typeof window&&"function"==typeof window.addEventListener){var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}}),n=function(){};window.addEventListener("testPassiveEventSupport",n,t),window.removeEventListener("testPassiveEventSupport",n,t),r.hasSupport=e}}};r.update(),t.default=r},function(e,t){e.exports={singleImageCarousel:"_75159de4",multiImageCarousel:"_1ec18720",previousWrapper:"_934ba7b6",nextWrapper:"aef4f47a",innerControls:"_43cfaa37",previous:"_163329a1",next:"_0394b1b2",sliderWindow:"f8393e31",slider:"f25574ec",swiping:"e245cc43",multiImage:"ec8d1722",singleImageWrapper:"_7c9885a6",singleImage:"_1af446e4",selected:"d5c0489c"}},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(5),d=i(p).default,f=n(558),h=i(f).default,m=n(743),g=i(m).default,y=function(e){function t(n){a(this,t);var r=u(this,e.call(this,n));r.handleThumbnailClick=r.handleThumbnailClick.bind(r),r.handleVfmlClick=r.handleVfmlClick.bind(r),r.handleOnSelectedMain=r.handleOnSelectedMain.bind(r),r.handleOnSelectedThumbnail=r.handleOnSelectedThumbnail.bind(r),r.handleKeyUp=r.handleKeyUp.bind(r),r.handleCloseModal=r.handleCloseModal.bind(r);var i=n.selectedIndex,o=void 0===i?-1:i,s=n.parentEvent;return r.state={selectedIndex:o,renderEvent:s.createChildRenderEvent("modal-gallery")},r}return c(t,e),t.prototype.handleThumbnailClick=function(){this.state.renderEvent.createChildClickEvent("modal-gallery-thumbnail")},t.prototype.handleVfmlClick=function(e){e.stopPropagation(),e.preventDefault(),this.state.renderEvent.createChildClickEvent("modal-gallery-vfml"),window.open(this.props.vfmUrl,"media_gallery","toolbar=0,location=1,scrollbars=1,width=800,height=550,left="+(window.screen.availWidth-800)/2+",top="+(window.screen.availHeight-550)/2)},t.prototype.handleOnSelectedMain=function(e){this.setState({selectedIndex:e})},t.prototype.handleOnSelectedThumbnail=function(e){this.setState({selectedIndex:e})},t.prototype.handleCloseModal=function(){this.props.onClose&&this.props.onClose()},t.prototype.handleKeyUp=function(e){27==e.keyCode&&(e.stopPropagation(),this.handleCloseModal())},t.prototype.componentDidMount=function(){document.addEventListener("keyup",this.handleKeyUp,!0)},t.prototype.componentWillUnmount=function(){document.removeEventListener("keyup",this.handleKeyUp,!0)},t.prototype.render=function(){var e=this,t=this.props,n=t.vfmUrl,i=t.photos,o=t.photoUrls,a=this.state,s=a.renderEvent,u=a.selectedIndex,l=i.length;return s.record(),r("div",{className:g.modalOverlay},r("div",{className:g.modalContainer},r("button",{className:g.close,onClick:this.handleCloseModal}),r(h,{selectedIndex:u,className:g.singleImageCarousel,singleImage:!0,onSelected:this.handleOnSelectedMain},i&&i.map(function(t,i){var a=t.caption;return r("figure",{className:g.mainImage},r("img",{src:o[i]}),r("figcaption",null,r("h2",{className:g.imageCaption},a),r("p",{className:g.imageOfCount},"Image "+(i+1)+" of "+l),n&&r("p",{className:g.vfml},r("span",null,"View more at")," ",r("a",{href:n,target:"_blank",onClick:e.handleVfmlClick},"VBrochure Media Gallery »"))))})),r(h,{selectedIndex:u,className:g.multipleImageCarousel,onSelected:this.handleOnSelectedThumbnail,selectedClassName:g.selected},o&&o.map(function(t){return r("img",{className:g.thumbnailImage,src:t,onClick:e.handleThumbnailClick})}))))},t}(d.Component);t.default=y,e.exports=t.default}).call(t,n(0).h)},function(e,t){e.exports={modalOverlay:"d706cba6",modalContainer:"_44e18269",close:"bb0f4711",singleImageCarousel:"_3bfc137b",mainImage:"_94175072",imageCaption:"_66842a40",imageOfCount:"ed945ea0",vfml:"_206534bb",multipleImageCarousel:"_6f32d195",thumbnailImage:"a6993573",selected:"a124da6b"}},function(e,t){e.exports={carousel:"_378d9718",carouselImage:"_61f8e726"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(64),o=r(i).default,a=n(11),s=r(a).default,u=n(746),l=r(u).default,c=n(747),p=r(c).default,d=n(497),f=r(d).default,h=n(495),m=r(h).default,g=n(753),y=r(g).default;t.default=f.extend({className:"rk-lightbox",activeClass:"lightbox-active",bodyScrollTop:0,defaultOptions:{customClass:"",customParentClass:"",moveContentNode:!0,curtainClickCloses:!0,escCloses:!0},template:null,events:function(){return{"mousedown .lightbox-content, .overlay":"mouseDown"}},initialize:function(e){e=e?o.clone(e):{},o.defaults(e,this.defaultOptions),this.initCheckboxReplacement(),o.bindAll(this,"keyPress"),this.customClass=e.customClass,this.customParentClass=e.customParentClass,this.moveContentNode=e.moveContentNode,this.curtainClickCloses=e.curtainClickCloses,this.escCloses=e.escCloses,this.onOpen=e.onOpen,this.onClose=e.onClose,this.content=e.content,this.$contentEl=s(e.content),this.bindEvents(),this.render()},bindEvents:function(){s(document).on("keydown",this.keyPress)},render:function(){var e='<div class="overlay"/><div class="lightbox-content" class="'+this.customClass+'">';return this.$el.append(s(e)),this.moveContentNode&&this.$el.find(".lightbox-content").append(this.$contentEl),this.customParentClass&&this.$el.addClass(this.customParentClass),this.el},open:function(e){var t=s("body"),n=s("html");y()&&(this.bodyScrollTop=t.scrollTop(),t.addClass("lightbox-full-height"),n.addClass("lightbox-full-height")),n.addClass(this.activeClass),t.append(this.el),o.isFunction(e)?e():null!==e&&o.isFunction(this.onOpen)&&this.onOpen(this),this.isOpen=!0},close:function(e){var t=s("html");1===t.find(".rk-lightbox").length&&(t.removeClass(this.activeClass),y()&&(t.removeClass("lightbox-full-height"),s("body").removeClass("lightbox-full-height").scrollTop(this.bodyScrollTop))),o.isFunction(e)?e():null!==e&&o.isFunction(this.onClose)&&this.onClose(this),m.trigger("lightbox-closed"),this.isOpen=!1},destroy:function(){this.model&&this.model.trigger("lightbox-destroy"),l()&&this.$(".lightbox-content").scrollTop(0),this.$el.hide(),this.isOpen&&this.close(),s(document).off("keydown",this.keyPress),this.leave()},mouseDown:function(e){var t=s(e.target),n=void 0,r=void 0;if(t.length&&(t.off("mouseup"),this.curtainClickCloses&&!t.parents(".lightbox-content > *").length)){if(n=e.offsetX||e.originalEvent.pageX,r=e.offsetY||e.originalEvent.pageY,n>e.target.clientWidth&&n<=e.target.offsetWidth)return;if(r>e.target.clientHeight&&r<=e.target.offsetHeight)return;e.preventDefault(),t.on("mouseup",o.bind(this.destroy,this))}},keyPress:function(e){27==e.keyCode&&this.escCloses&&this.destroy()}}).extend(p),e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(64),i=r.memoize;t.default=i(function(){return"MozAppearance"in document.documentElement}),e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(64),o=r(i).default,a=n(11),s=r(a).default,u={initCheckboxReplacement:function(){var e=this;this._originalEvents=this.events,this.events=function(){var t={'change input[type="checkbox"]':"toggleCheckbox"};return o.extend(t,o.result(e,"_originalEvents")),t}},toggleCheckbox:function(e){var t=s(e.target);t[t.is(":checked")?"addClass":"removeClass"]("checked")}};t.default=u,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){return t+e.join(n+","+t)+n},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(64),i=function(e){return e&&e.__esModule?e:{default:e}}(r).default,o={extend:function(e){if(e.extend){var t=i.extend({constructor:function(){var t=this,n=arguments;e.prototype.constructor.apply(t,n),t.postconstruct&&t.postconstruct()}},this);return e.extend(t)}return this.bbExtend(e)},bbExtend:function(e){var t=this,n=function(){var e=this,t=arguments;if(e.initialize)return e.initialize.apply(e,t)},r=function(){this.constructor=n};return i.extend(n,t),r.prototype=t.prototype||t,n.prototype=new r,i.extend(n.prototype,e),n.__super__=t.prototype||t,n}};t.default=o,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(64),o=r(i).default,a=n(751),s=r(a).default,u=n(752),l=r(u).default,c={isTouch:function(){var e=l();return s("touchend")&&(!e||e[0]>5)}(),isInput:s("input","input"),delegateEvents:function(e){var t=/^swipe-(.*)/,n=/^keyup/,r=/^(\S+)\s*(.*)$/;if(o.bindAll(this,"_tap","_swipe"),this.undelegateEvents(),!e&&!(e=o.result(this,"events")))return this;for(var i in e){var a=e[i];if(o.isFunction(a)||(a=this[a]),a){var s=i.match(r),u=s[1],l=s[2],c=".delegateEvents"+this.cid;a=o.bind(a,this),this.isTouch&&t.test(u)?this._touchBindings(c,l,{method:a,direction:u.match(t)[1]},this._swipe):(this.isInput&&n.test(u)&&(u="input"),""===l?this.$el.on(u+c,a):this.$el.on(u+c,l,a))}}return this},_touchBindings:function(e,t,n,r){""===t?(this.$el.on("touchstart"+e,r),this.$el.on("touchmove"+e,n,r),this.$el.on("touchend"+e,n,r)):(this.$el.on("touchstart"+e,t,r),this.$el.on("touchmove"+e,t,n,r),this.$el.on("touchend"+e,t,n,r))},_tapping:null,_swiping:null,_tap:function(e){if("changedTouches"in e.originalEvent){var t=e.originalEvent.changedTouches[0],n=t.clientX,r=t.clientY;if("touchstart"===e.type)this._touching={x:n,y:r};else if("touchend"===e.type){var i=this._touching;n<i.x+20&&n>i.x-20&&r<i.y+20&&r>i.y-20&&e.data.method(e),this._touching=null}}},_swipe:function(e){if("changedTouches"in e.originalEvent){var t=e.originalEvent.changedTouches[0],n=t.clientX,r=t.clientY;if("touchstart"===e.type)this._swiping={x:n,y:r};else if("touchmove"===e.type)e.preventDefault();else if("touchend"===e.type){var i=this._swiping,o=n>i.x?1:-1,a=~o?"left":"right";e.data.direction===a&&o*n>o*i.x+150&&r<i.y+50&&r>i.y-50&&e.data.method(e)}}}};t.default=c,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){t=t||"div",e=/^on/.test(e)?e:"on"+e;var n=document.createElement(t),r=e in n;return r||(n.setAttribute(e,"return"),r="function"==typeof n[e]),n=null,r},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if("undefined"==typeof navigator)return!1;if(/iP(hone|od|ad)/.test(navigator.platform)){var e=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3]||0,10)]}},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(64),i=r.memoize;t.default=i(function(){return"undefined"!=typeof navigator&&/iP(hone|od|ad)/.test(navigator.platform)}),e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){function n(){var t=o.find(e),i=t.length?t[0]:null;i&&document.body.contains(i)?r.resolve(i):setTimeout(function(){n()},0)}var r=i.Deferred();t||(t=document.body);var o=t instanceof i?t:i(t);return n(),r};var r=n(11),i=function(e){return e&&e.__esModule?e:{default:e}}(r).default;e.exports=t.default},function(module,exports,__webpack_require__){(function(_){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="\x3c!-- note: white spaced between display:inline-block divs causes more space between photos than desired --\x3e",_.each(photos,function(e){__p+='<div class="image-wrap" data-src="'+(null==(__t=e.url)?"":_.escape(__t))+'"><img class="carousel-image" width="200" height="150"></div>'}),__p+="";return __p}}).call(exports,__webpack_require__(64))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(11),o=r(i).default,a=n(64),s=r(a).default,u=n(230),l=r(u).default;n(757);var c=n(497),p=r(c).default,d=n(559),f=r(d).default,h=n(758),m=r(h).default;p.loadTemplate("gallery",m),t.default=p.extend({template:"gallery",className:"gallery",page:0,current:0,step:0,end:!1,$carousel:null,thumbWidth:0,events:{"click .carousel .image-wrap":"navigate","click .carousel-next":"carouselNext","click .carousel-previous":"carouselPrevious","click .next":"next","click .previous":"previous","click .richmedia-link span":"showRichMedia","swipe-right .frame":"next","swipe-left .frame":"previous"},initialize:function(e){s.bindAll(this,"keyup"),this.options=e,this.model=e.model,this.photos=e.photos,this.hideThumbnails=!!e.hideThumbnails,this.hideVFM=!!e.hideVFM,this.vfmUrl=e.vfmUrl,o(document).on("keyup."+this.cid,this.keyup)},navigate:function(e){this.current=o(e.currentTarget).index(),this.load(),this.select()},keyup:function(e){switch(e.which){case 39:this.next();break;case 37:this.previous()}},render:function(){var e=this;return this.$el.html(this.renderTemplate({vfmLink:this.hideVFM?null:this.vfmUrl,hideThumbnails:this.hideThumbnails})),s.defer(function(){e.renderCarousel(),o(window).on("resize."+e.cid,l(e.handleResize.bind(e),500))}),this.vfmUrl&&this.$el.addClass("has-rich-media-link"),this.el},renderCarousel:function(){var e=this.$(".carousel");e.length&&(this.carouselView=this.setView("carouselView",new f({container:e,singlePhotoAnimation:!1,photos:this.photos,type:"filmstrip"}).render()),this.select())},activated:function(){this.handleResize()},loadFirst:function(e){e&&(this.current=e),this.setDimensions(),this.load(),this.select()},setDimensions:function(){this.setMaxDimensions(),this.$(".image, .gallery-nav").hide(),this.emptyFrameDimensions={width:this.$(".frame").outerWidth(!0),height:this.$(".frame").outerHeight(!0)},this.$(".image, .gallery-nav").show(),this.setImageDimensions()},setMaxDimensions:function(){var e=this.$el.parent(),t={maxWidth:e.width(),maxHeight:e.height()};this.maxDimensions=t,this.$el.css(t)},setImageDimensions:function(){var e=this.maxDimensions,t=this.emptyFrameDimensions,n=e.maxWidth-t.width,r=e.maxHeight-t.height-this.$(".gallery-nav").outerHeight(!0),i=0,o=0;this.photos.forEach(function(e){var t=e.width,a=e.height;t>n&&(a/=t/n,t=n),a>r&&(t/=a/r,a=r),t>i&&(i=t),a>o&&(o=a)}),this.$(".image").css({width:i,height:o})},carouselNext:function(){this.carouselView.next()},carouselPrevious:function(){this.carouselView.previous()},next:function(){this.current<this.photos.length-1&&(this.current++,this.load(),this.select())},previous:function(){this.current>0&&(this.current--,this.load(),this.select())},goTo:function(e){this.current=e,this.load(),this.select()},select:function(){this.$(".name").text(this.photos[this.current].caption),this.$(".count").text("Image "+(this.current+1)+" of "+this.photos.length),this.$el.removeClass("first last"),0===this.current&&this.$el.addClass("first"),this.current===this.photos.length-1&&this.$el.addClass("last"),this.carouselView&&this.carouselView.selectImage(this.current)},load:function(){var e=new Image,t=this.$(".image");this.preload(e,function(){t.transition({opacity:0},400,"ease",function(){t.children("img").remove(),t.append(e).transition({opacity:1},400,"ease")})})},preload:function(e,t){e.onload=t,e.src=this.photos[this.current].url},showRichMedia:function(e){window.open(o(e.target).attr("href"),"media_gallery","toolbar=0,location=1,scrollbars=1,width=800,height=550,left="+(window.screen.availWidth-800)/2+",top="+(window.screen.availHeight-550)/2)},cleanUp:function(){o(document).off("keyup."+this.cid,this.keyup),o(window).off("resize."+this.cid)},handleResize:function(){this.setDimensions(),this.carouselView.handleResize()}}),e.exports=t.default},function(e,t,n){var r,i,o;!function(a,s){i=[n(11)],r=s,void 0!==(o="function"==typeof r?r.apply(t,i):r)&&(e.exports=o)}(0,function(e){function t(e){if(e in c.style)return e;for(var t=["Moz","Webkit","O","ms"],n=e.charAt(0).toUpperCase()+e.substr(1),r=0;r<t.length;++r){var i=t[r]+n;if(i in c.style)return i}}function n(e){return"string"==typeof e&&this.parse(e),this}function r(e,t,n){!0===t?e.queue(n):t?e.queue(t,n):e.each(function(){n.call(this)})}function i(t){var n=[];return e.each(t,function(t){t=e.camelCase(t),t=e.transit.propertyMap[t]||e.cssProps[t]||t,t=s(t),p[t]&&(t=s(p[t])),-1===e.inArray(t,n)&&n.push(t)}),n}function o(t,n,r,o){var a=i(t);e.cssEase[r]&&(r=e.cssEase[r]);var s=l(n)+" "+r;parseInt(o,10)>0&&(s+=" "+l(o));var u=[];return e.each(a,function(e,t){u.push(t+" "+s)}),u.join(", ")}function a(t,n){n||(e.cssNumber[t]=!0),e.transit.propertyMap[t]=p.transform,e.cssHooks[t]={get:function(n){return e(n).css("transit:transform").get(t)},set:function(n,r){var i=e(n).css("transit:transform");i.setFromString(t,r),e(n).css({"transit:transform":i})}}}function s(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function u(e,t){return"string"!=typeof e||e.match(/^[\-0-9\.]+$/)?""+e+t:e}function l(t){var n=t;return"string"!=typeof n||n.match(/^[\-0-9\.]+/)||(n=e.fx.speeds[n]||e.fx.speeds._default),u(n,"ms")}e.transit={version:"0.9.12",propertyMap:{marginLeft:"margin",marginRight:"margin",marginBottom:"margin",marginTop:"margin",paddingLeft:"padding",paddingRight:"padding",paddingBottom:"padding",paddingTop:"padding"},enabled:!0,useTransitionEnd:!1};var c=document.createElement("div"),p={},d=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;p.transition=t("transition"),p.transitionDelay=t("transitionDelay"),p.transform=t("transform"),p.transformOrigin=t("transformOrigin"),p.filter=t("Filter"),p.transform3d=function(){return c.style[p.transform]="",c.style[p.transform]="rotateY(90deg)",""!==c.style[p.transform]}();var f={transition:"transitionend",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"},h=p.transitionEnd=f[p.transition]||null;for(var m in p)p.hasOwnProperty(m)&&void 0===e.support[m]&&(e.support[m]=p[m]);return c=null,e.cssEase={_default:"ease",in:"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeInCubic:"cubic-bezier(.550,.055,.675,.190)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"},e.cssHooks["transit:transform"]={get:function(t){return e(t).data("transform")||new n},set:function(t,r){var i=r;i instanceof n||(i=new n(i)),"WebkitTransform"!==p.transform||d?t.style[p.transform]=i.toString():t.style[p.transform]=i.toString(!0),e(t).data("transform",i)}},e.cssHooks.transform={set:e.cssHooks["transit:transform"].set},e.cssHooks.filter={get:function(e){return e.style[p.filter]},set:function(e,t){e.style[p.filter]=t}},e.fn.jquery<"1.8"&&(e.cssHooks.transformOrigin={get:function(e){return e.style[p.transformOrigin]},set:function(e,t){e.style[p.transformOrigin]=t}},e.cssHooks.transition={get:function(e){return e.style[p.transition]},set:function(e,t){e.style[p.transition]=t}}),a("scale"),a("scaleX"),a("scaleY"),a("translate"),a("rotate"),a("rotateX"),a("rotateY"),a("rotate3d"),a("perspective"),a("skewX"),a("skewY"),a("x",!0),a("y",!0),n.prototype={setFromString:function(e,t){var r="string"==typeof t?t.split(","):t.constructor===Array?t:[t];r.unshift(e),n.prototype.set.apply(this,r)},set:function(e){var t=Array.prototype.slice.apply(arguments,[1]);this.setter[e]?this.setter[e].apply(this,t):this[e]=t.join(",")},get:function(e){return this.getter[e]?this.getter[e].apply(this):this[e]||0},setter:{rotate:function(e){this.rotate=u(e,"deg")},rotateX:function(e){this.rotateX=u(e,"deg")},rotateY:function(e){this.rotateY=u(e,"deg")},scale:function(e,t){void 0===t&&(t=e),this.scale=e+","+t},skewX:function(e){this.skewX=u(e,"deg")},skewY:function(e){this.skewY=u(e,"deg")},perspective:function(e){this.perspective=u(e,"px")},x:function(e){this.set("translate",e,null)},y:function(e){this.set("translate",null,e)},translate:function(e,t){void 0===this._translateX&&(this._translateX=0),void 0===this._translateY&&(this._translateY=0),null!==e&&void 0!==e&&(this._translateX=u(e,"px")),null!==t&&void 0!==t&&(this._translateY=u(t,"px")),this.translate=this._translateX+","+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||0},scale:function(){var e=(this.scale||"1,1").split(",");return e[0]&&(e[0]=parseFloat(e[0])),e[1]&&(e[1]=parseFloat(e[1])),e[0]===e[1]?e[0]:e},rotate3d:function(){for(var e=(this.rotate3d||"0,0,0,0deg").split(","),t=0;t<=3;++t)e[t]&&(e[t]=parseFloat(e[t]));return e[3]&&(e[3]=u(e[3],"deg")),e}},parse:function(e){var t=this;e.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(e,n,r){t.setFromString(n,r)})},toString:function(e){var t=[];for(var n in this)if(this.hasOwnProperty(n)){if(!p.transform3d&&("rotateX"===n||"rotateY"===n||"perspective"===n||"transformOrigin"===n))continue;"_"!==n[0]&&(e&&"scale"===n?t.push(n+"3d("+this[n]+",1)"):e&&"translate"===n?t.push(n+"3d("+this[n]+",0)"):t.push(n+"("+this[n]+")"))}return t.join(" ")}},e.fn.transition=e.fn.transit=function(t,n,i,a){var s=this,u=0,c=!0,d=e.extend(!0,{},t);"function"==typeof n&&(a=n,n=void 0),"object"==typeof n&&(i=n.easing,u=n.delay||0,c=void 0===n.queue||n.queue,a=n.complete,n=n.duration),"function"==typeof i&&(a=i,i=void 0),void 0!==d.easing&&(i=d.easing,delete d.easing),void 0!==d.duration&&(n=d.duration,delete d.duration),void 0!==d.complete&&(a=d.complete,delete d.complete),void 0!==d.queue&&(c=d.queue,delete d.queue),void 0!==d.delay&&(u=d.delay,delete d.delay),void 0===n&&(n=e.fx.speeds._default),void 0===i&&(i=e.cssEase._default),n=l(n);var f=o(d,n,i,u),m=e.transit.enabled&&p.transition,g=m?parseInt(n,10)+parseInt(u,10):0;if(0===g)return r(s,c,function(e){s.css(d),a&&a.apply(s),e&&e()}),s;var y={},v=function(t){var n=!1,r=function(){n&&s.unbind(h,r),g>0&&s.each(function(){this.style[p.transition]=y[this]||null}),"function"==typeof a&&a.apply(s),"function"==typeof t&&t()};g>0&&h&&e.transit.useTransitionEnd?(n=!0,s.bind(h,r)):window.setTimeout(r,g),s.each(function(){g>0&&(this.style[p.transition]=f),e(this).css(d)})};return r(s,c,function(e){this.offsetWidth,v(e)}),this},e.transit.getTransitionValue=o,e})},function(module,exports,__webpack_require__){(function(_){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div data-hook="photo-gallery">  <div class="frame">      <div class="image"><span class="helper"></span></div>      <span class="next"></span>      <span class="previous"></span>  </div>  <div class="gallery-nav">    <div class="description">      <p class="name">&nbsp;</p>      <p class="count">&nbsp;</p>    </div>    ',hideThumbnails||(__p+='      <div class="carousel-wrapper">        <span class="carousel-previous"></span>        <div class="carousel"></div>        <span class="carousel-next"></span>      </div>    '),__p+="    ",vfmLink&&(__p+='<p class="richmedia-link" data-hook="media-link">View more at <span href="'+(null==(__t=vfmLink)?"":_.escape(__t))+'">VBrochure Media Gallery &raquo;</span></p>'),__p+="  </div></div>";return __p}}).call(exports,__webpack_require__(64))},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=n(155),h=i(f).default,m=n(17),g=i(m).default,y=["Excellent","Very Good","Average","Poor","Terrible"],v=function(e){function t(n){a(this,t);var r=u(this,e.call(this,n));return r.renderEvent=n.parentEvent.createChildRenderEvent("tripadvisor"),r}return c(t,e),t.prototype.render=function(e){var t=this,n=e.tripadvisor,i=n.popularityOutOf,o=n.popularityRank,a=n.ratingBreakdown,s=n.ratingDetails,u=n.reviews;if(i&&o)return r(g,null,r("h2",{className:"rk-hotel-detail-ratings-header"},"Ratings & Reviews"),r("section",{className:"rk-hotel-detail-ratings-details"},r("div",{className:"rk-hotel-detail-ratings-overview"},r("h3",null,"TripAdvisor Ranking",r("span",{className:"rk-tripadvisor-ranking-score"},"#",o),"out of",r("span",{className:"rk-tripadvisor-ranking-possible"},i)),r("figure",{role:"group",className:"rk-bar-chart-horiz"},a.slice(0).reverse().map(function(e,t){var n=e.score,i=e.numberOfReviews;return r("figure",{className:"rk-bar-chart-figure"},r("figcaption",{className:"rk-bar-chart-caption-pre"},y[t]),r("span",{className:"rk-bar-chart-bar"},r("span",{className:"rk-bar-chart-fill",style:"width:"+n+"%"})),r("figcaption",{className:"rk-bar-chart-caption-post"},i))})),r("ul",{className:"rk-tripadvisor-characteristic-ratings"},s.map(function(e){var t=e.name,n=e.score;return n&&r("li",null,r("figure",{className:"rk-tripadvisor-rating-"+n.toString().split(".").join("-")},r("figcaption",null,t)))}))),r("div",{className:"rk-hotel-detail-ratings-reviews"},r("ul",{className:"rk-tripadvisor-reviews"},u.map(function(e){t.renderEvent.createChildRenderEvent("tripadvisor-review");var n=e.userRating,i=e.publishedDate,o=e.url,a=e.contentSummary,s=e.title;return r("li",null,r("article",{className:"rk-tripadvisor-review"},r("h1",{className:"rk-tripadvisor-review-title"},r("a",{href:o,target:"_blank","data-hook":"ratings-tripadvisor"},"“",s,"”")),r("figure",{className:"rk-tripadvisor-rating-"+n.toString().split(".").join("-")}),r("span",{className:"rk-tripadvisor-review-date"},h(i).format("MMMM DD, YYYY")),r("p",{className:"rk-tripadvisor-review-excerpt"},a),r("a",{className:"rk-more",href:o,target:"_blank","data-hook":"ratings-tripadvisor"},"More on TripAdvisor")))}))),r("div",{className:"rk-hotel-detail-ratings-copyright"},r("p",null,"© ",(new Date).getFullYear()+" ",r("a",{href:"http://www.tripadvisor.com/pages/terms.html",target:"_blank","data-hook":"ratings-tripadvisor"},"TripAdvisor")," ","LLC. All rights reserved."))))},t}(d);t.default=v,e.exports=t.default}).call(t,n(0).h)},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=n(17),h=i(f).default,m=n(761),g=i(m).default,y=function(e){function t(){return a(this,t),u(this,e.apply(this,arguments))}return c(t,e),t.prototype.componentWillMount=function(){this.renderEvent=this.props.parentEvent.createChildRenderEvent("similar-hotels")},t.prototype.render=function(e){var t=e.similarHotels,n=this.renderEvent;return n.record(),r("div",{className:"rk-similar-hotels"},r(h,null,r("div",{className:"rk-similar-hotels-centered"+(t?"":" rk-similar-hotels-loading")},t&&t.size>0&&r("div",null,r("h2",{className:"rk-similar-hotels-header"},"Similar Hotels"),r("section",{className:"rk-similar-hotels-details"},r("ol",{className:"rk-hotels-cards rk-app-main-col col-2"},t&&t.take(6).map(function(e){return r(g,{key:e.get("udicode"),hotel:e,parentEvent:n,autoRecordRender:!0})}).toJS()))))))},t}(d);t.default=y,e.exports=t.default}).call(t,n(0).h)},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=n(206),h=i(f).default,m=n(26),g=m.getHotelAndRateData,y=n(762),v=i(y).default,_=n(204),b=i(_).default,x=n(763),w=i(x).default,S=n(219),k=i(S).default,E=n(764),T=i(E).default;n(560),n(228);var M=function(e){function t(n){a(this,t);var r=u(this,e.call(this,n));return r.handleCurrentRateChange=r.handleCurrentRateChange.bind(r),r}return c(t,e),t.prototype.componentWillMount=function(){var e=this.props.hotel;this.renderEvent=this.props.parentEvent.createChildRenderEvent("hotel",g(e))},t.prototype.render=function(e){var t=e.index,n=e.hotel,i=e.autoRecordRender,o=void 0!==i&&i;"function"==typeof n.toJS&&(n=n.toJS()),o&&this.renderEvent.record();var a=n,s=a.brandLogo,u=a.isLoadingRates,l=a.isAvailable,c=a.isUnavailable,p=a.name,d=a.rate,f=a.stars,m=a.neighborhood,g=a.primaryPhoto,y=d||{},_=y.currency,x=y.currencySymbol,S=y.amount,E=y.isLoyalty,M=y.strikethrough,C=v.isFor("hotelCard",n.amenities),O=this.renderEvent,A=[];return(l||d)&&(E&&A.push("rk-cugrate"),(x||_).length>2&&(A.push("rk-long-currency"),S||A.push("rk-long-no-rate")),S&&(M?M.toString().length>3&&A.push("rk-long-strikethrough"):S.toString().length>5&&A.push("rk-long"))),r("li",{className:"rk-hotel-card"+(t<10?" n"+(t+1):""),"data-id":n.id||n.udicode,id:"rk-hotel-card-"+n.id},r("div",{className:"rk-hotel-card-face rk-hotel-card-front inner front"},r("div",{className:"rk-hotel-card-main-photo"},r(k,{hotel:n,parentEvent:O,element:"primary-photo",events:"hotel-result-interaction"},r("div",{className:"rk-scrim"},"string"!=typeof C.FRWI&&r("div",{className:"free-wifi"},r("i",{className:"amenity-wifi"})," ",r("span",null,"FREE Wifi")),f&&r(w,{className:"rk-hotel-card-star-rating stars",stars:f})),r("img",{className:"rk-primary-photo",src:h(g,200,150),width:"200",height:"150"}))),r("div",{className:"rk-brand-location"},r("div",{className:"rk-hotel-card-property-name "+(m&&m.name?"no-neighborhood":"")},r(k,{hotel:n,parentEvent:O,element:"hotel-name",events:"hotel-result-interaction"},p&&r("dl",{title:p},p),r("p",{className:"rk-hotel-card-neighborhood-label"},r(T,{hotel:n}))))),r("div",{className:"rk-hotel-card-current-rate"},r("div",{className:"rk-hotel-card-rate"+(u?" rk-loader-container":d?"":" norate")},u?r("div",{className:"rk-hotel-card-loader"},"Checking availability..."):c||!d?"Booking Unavailable":r("div",null,r(b,{hotel:n,element:"rate",className:A.join(" "),events:"hotel-result-interaction",parentEvent:this.renderEvent},M&&r("div",{className:"rk-struckthrough-rate"},r("span",{className:"rk-rate-currency"},x||_),r("span",{className:"rk-rate-exclusive"},r("span",{className:"strike"}),M)),S?r("div",{className:"rk-nightly-rate"},r("span",{className:"rk-rate-currency"},x||_),r("span",{className:"rk-rate-exclusive"},S)):r("p",{className:"rk-no-rate-cvp"},"Too low ",r("br",{className:"rk-no-rate-break"}),"to show")),E&&r(b,{element:"rate",hotel:n,className:"rk-cug-label"+(S?"":" rk-cug-direct-link"),events:"hotel-result-interaction",parentEvent:this.renderEvent},!S&&"Click to see ",r("span",{style:"white-space: nowrap;"},"Loyalty Member Rate")))),r("div",{className:"rk-hotel-card-booking-info"},d&&r(b,{element:"book-button",className:"rk-booking-button",hotel:n,events:"hotel-result-interaction",parentEvent:this.renderEvent},r("span",{className:"rk-hotel-card-book-label"+(s?"":" no-image")},"Book it"),s&&r("span",{className:"rk-hotel-card-brand-logo",style:"background-image:url("+s+")"}))))))},t.prototype.componentDidMount=function(){this.props.model&&this.props.model.on("change:currentRate",this.handleCurrentRateChange)},t.prototype.handleCurrentRateChange=function(){this.props.hotel=this.props.model.toJSON(),this.forceUpdate()},t.prototype.componentWillUnmount=function(){this.props.model&&this.props.model.off("change:currentRate",this.handleCurrentRateChange)},t}(d);t.default=M,e.exports=t.default}).call(t,n(0).h)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(62),o=r(i).default,a=n(64),s=r(a).default,u={freePattern:/^(\s*\bfree){1}/i,precedences:{breakfast:["FBKFST","BRK"],parking:["FRPKG","PKG","PDPKG"],internet:["FRWI","FRINT","PDWI","PDINT","INT"]},text:{FRWI:"FREE Wifi",POOL:"Pool",FBKFST:"FREE Breakfast",FIT:"Fitness Center",PETS:"Pet Friendly",ASHUT:"Airport Shuttle",INT:"Internet",BRK:"Breakfast",FRINT:"FREE Internet",BUSIN:"Business Center",PKG:"Parking",REST:"Restaurant On Site"},lists:{groups:[["FRWI","FRINT","FBKFST","PETS","POOL","FIT","ASHUT","SPA","REST","BAR","NSMKR"],["24DSK","BABYS","BAR","BEACH","BIKES","BOAT","BWLNG","BRK","BUSIN","CASIN","CHPRG","CFFMK","CFFSH","WCHRC","FRCFF","FRNEW","COMP","CONCI","CRIB","XCHKI","XCHKO","FAX","FRPKG","GOLF","HORSE","HTTUB","IPOOL","INDTN","INT","JCZZI","KTCHN","LDYRM","LDYDC","MTG","MWAVE","MNBAR","NATTR","NGOLF","NCLUB","NSMKR","OGOLF","OPOOL","OUTTN","PDINT","PDPKG","PDWI","PKG","FRIDG","REST","RMSRV","SAUNA","SCU","SKEET","SKI","NSMKH","SNORK","SPA","TNPRG","TNNIS","VLPKG","WTSKI","WEDPL","WSURF"]],freeAmenities:["INT","BRK","FRWI","FRINT","FBKFST"],hotelCard:["INT","BRK","FRWI","FRINT","FBKFST","PETS","POOL","FIT","ASHUT","BUSIN","PKG","REST"],hotelCardBack:["FRWI","POOL","FBKFST","FIT","PETS","ASHUT"]},precedence:function(e,t){for(var n=void 0,r=s.difference(e,t),i=0;i<t.length;i++)if(~(n=s.indexOf(e,t[i]))){r.splice(n,0,t[i]);break}return r},applyPrecedences:function(e){var t=this,n=this.codes(e);return s.each(this.precedences,function(e){n=t.precedence(n,e)}),this.fillCodesWithObjects(n,e)},classify:function(e){return"icon-"+e.name.replace(" ","-").toLowerCase()},codes:function(e){return s.pluck(e,"code")},crossIndex:function(e,t){return s.map(t,function(t){return s.indexOf(e,t)})},fillCodesWithObjects:function(e,t){var n=this.codes(t),r=this.crossIndex(n,e),i={},o=this;return s.each(e,function(e,n){i[e]=~r[n]?t[r[n]]:o.text[e]||void 0}),i},iconify:function(e){return'<i class="'+this.classify(e)+'"></i>'},isFor:function(e,t){return t?this.fillCodesWithObjects(this.lists[e],t):this.lists[e]},status:function(e,t){t||(t="span");var n=(e.name||e).replace("FREE",'<span class="rk-highlight">FREE</span>');return"<"+t+" class="+("object"===(void 0===e?"undefined":o(e))?"enabled":"disabled")+">"+n+"</"+t+">"},wrapFree:function(e){return e.name.replace(this.freePattern,'<span class="rk-highlight">FREE</span>')},getFree:function(e){var t=this,n=[];return s.each(e,function(e){s.isObject(e)&&s.each(t.lists.freeAmenities,function(r){r===e.code&&n.push({code:e.code,name:e.name.replace(t.freePattern,"FREE")})})}),n},createFreeBanner:function(e){var t=this.getFree(e),n=[],r=!1,i=this;return t.length&&s.each(t,function(e){"string"==typeof e.name&&~e.name.search(i.freePattern)&&(~e.name.search("Wifi")?(r=!0,n.unshift(e.name.replace(i.freePattern,"<span>FREE</span>"))):~e.name.search("Internet")&&!1===r?n.unshift(e.name.replace(i.freePattern,"<span>FREE</span>")):n.push(e.name.replace(i.freePattern,"<span>FREE</span>")))}),n.length>1&&s.each(n,function(e,t){"string"==typeof e&&~e.indexOf("Internet")&&r&&n.splice(t,1)}),n.join(" & ")}};s.bindAll(u,"wrapFree","classify","iconify"),t.default=u,e.exports=t.default},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=function(e){function t(){return a(this,t),u(this,e.apply(this,arguments))}return c(t,e),t.prototype.render=function(e){var t=e.className,n=void 0===t?"":t,i=e.starClass,o=void 0===i?"amenity-star":i,a=e.emptyClass,s=void 0===a?"empty":a,u=e.stars;return r("div",{className:n+" stars"+u},r("i",{className:o}),r("i",{className:o+" "+(u<2?s:"")}),r("i",{className:o+" "+(u<3?s:"")}),r("i",{className:o+" "+(u<4?s:"")}),r("i",{className:o+" "+(u<5?s:"")}))},t}(d);t.default=f,e.exports=t.default}).call(t,n(0).h)},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=n(200),h=(i(f).default,function(e){function t(){return a(this,t),u(this,e.apply(this,arguments))}return c(t,e),t.prototype.render=function(e){var t=e.hotel,n=null;if(!n&&t.neighborhood&&t.neighborhood.name&&(n={name:t.neighborhood.name,place_type:t.neighborhood.is_airport?"airport":"neighborhood"}),n){var i=n,o=i.name,a=n.place_type;return r("span",{className:"location "+a},r("i",{className:"amenity-"+a}),r("span",null," ",o))}},t}(d));t.default=h,e.exports=t.default}).call(t,n(0).h)},function(e,t,n){e.exports=n.p+"images/brands/65x45/ABVI.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/ACSO.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/ACUO.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/AHAR.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/AHNO.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/AHRO.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/AHSO.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/ALOF.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/APEX.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/AQH.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/ARAM.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/ASCT.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/ATAH.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/AVID.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/AVST.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/BHRA.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/BISA.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/BRTH.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/BWEE.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/BWPL.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/BWPR.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/CBVI.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/CHAE.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/CHOO.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/CHTX.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/CION.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/CITA.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/CLAR.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/CLBR.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/CONS.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/COUR.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/CPRL.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/CSAU.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/CSOU.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/Curio.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/DHEO.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/DHOO.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/DHRU.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/DIAN.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/DODN.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/DREA.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/DRMS.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/EDIT.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/ELCO.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/ELEM.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/ESMU.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/EURO.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/EVEN.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/FIAN.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/FPOO.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/GAIN.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/GAYL.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/GCHR.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/GHEO.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/GHRE.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/GHRO.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/GHRY.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/GLCO.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/HAMP.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/HAP.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/HAYN.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/HCTC.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/HEHR.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/HESP.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/HGII.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/HGVI.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/HHIO.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/HHOA.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/HHWW.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/HHYO.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/HIAN.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/HICV.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/HIEO.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/HIHO.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/HION.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/HIRO.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/HJC.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/HJOO.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/HMOI.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/HOTU.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/HPYL.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/HRYE.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/HSBW.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/HSOU.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/HTLR.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/HUAL.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/HVCY.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/HYAT.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/HYZR.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/HYZV.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/IHBO.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/JDVO.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/JMWA.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/JURYS.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/KCEL.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/KEYT.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/KIMP.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/KINN.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/LEBA.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/LHEO.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/LHSE.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/LLRX.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/LMEE.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/LQAU.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/LTHE.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/MANT.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/MAYFAIR.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/MCCA.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/MCHI.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/MEAA.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/MESA.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/MHCBR.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/MHRA.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/MIIN.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/MOEH.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/MOVE.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/MOXY.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/MSSA.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/MVCA.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/NANN.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/NCTN.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/NHCO.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/NHHO.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/NHOW.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/NIGH.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/NIKK.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/NOW.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/OHRB.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/OHRK.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/OOOR.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/OSOE.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/OTNT.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/OUOT.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/PHAY.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/PHP.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/PHRR.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/PIAN.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/PPAL.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/PR.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/PTNG.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/QHUO.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/QUAL.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/RADI.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/RAMA.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/RBAL.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/RCHI.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/REGE.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/REHA.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/RENA.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/REND.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/RFHO.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/RIEN.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/ROTA.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/RRIE.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/S8UP.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/SBR.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/SCRT.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/SESU.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/SHER.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/SHSP.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/SILN.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/SNSC.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/SOLA.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/SRTE.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/SSR.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/SSTU.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/TAJJ.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/TCRL.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/THRO.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/TLCH.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/TODT.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/TOGA.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/TPSO.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/TRAV.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/TRID.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/TRPO.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/TSRH.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/UBCL.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/UNOI.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/WAAS.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/WBWI.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/WEST.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/WHOT.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/WORL.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/WYAA.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/WYND.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/WYTQ.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/YNAI.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/ZOET.png"},function(e,t,n){e.exports=n.p+"images/brands/65x45/nobrand.png"},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.BackToResults=void 0;var i=n(1),o=r(i).default,a=n(2),s=r(a).default,u=n(3),l=r(u).default,c=n(0),p=c.Component,d=n(7),f=d.connect,h=n(195),m=r(h).default,g=t.BackToResults=function(t){function n(){return o(this,n),s(this,t.apply(this,arguments))}return l(n,t),n.prototype.render=function(t){var n=t.backToSearchRouteLocation,r=t.parentEvent,i=t.className,o=t.hotel,a=o.locationId,s=o.address,u=s.city,l=s.countryCode,c=s.regionCode;if(!this._unmounted){var p={locationId:a,parentEvent:r,element:"back-button",className:i};return n&&(p.to=n.toJS()),e(m,p,n?"Back to results":"See all hotels in "+u+("US"===l&&c?", "+c:""))}},n}(p);t.default=f(function(e){return{backToSearchRouteLocation:e.get("hotelDetails").get("backToSearchRouteLocation")}})(g)}).call(t,n(0).h)},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=n(4),h=f.List,m=n(561),g=i(m).default,y=function(e){function t(){return a(this,t),u(this,e.apply(this,arguments))}return c(t,e),t.prototype.render=function(e){var t=e.hotel,n=e.similarHotelsWithRates,i=void 0;if(n)i=t?n.push(t):n;else{if(!t)return null;i=h([t])}return r(g,{hotels:i})},t}(d);t.default=y,e.exports=t.default}).call(t,n(0).h)},function(e,t){e.exports={container:"e3bb66d6"}},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=n(11),h=i(f).default,m=n(959),g=i(m).default,y=function(e){function t(){a(this,t);var n=u(this,e.call(this));return n.state={isExpanded:!1},n._randScope="_"+Math.ceil(99999*Math.random()),n}return c(t,e),t.prototype.render=function(e){var t=e.description,n=e.mrmrEnabled,i=this.state.isExpanded,o=t.length>600&&t.substr(0,600).trim()+"…",a=o&&!i?" rk-hidden":"",s={__html:o},u={__html:t};return r("div",{className:"rk-hotel-description "+g.description},n&&r("h2",{className:g.descriptionHeader},"About"),o&&r("p",{className:"rk-excerpt ${style.excerpt} "+this.scope("excerpt"),dangerouslySetInnerHTML:s}),r("p",{className:"rk-full "+this.scope("description")+a,style:"margin-top: 0;",dangerouslySetInnerHTML:u}),o&&r("a",{className:"rk-more "+g.more,"data-hook":"description-expand",onClick:this.toggle.bind(this)},"Read ",i?"less":"more"))},t.prototype.scope=function(e){return e+this._randScope},t.prototype.toggle=function(e){e.preventDefault();var t=this,n=h("."+this.scope("excerpt")),r=h("."+this.scope("description")),i=r.css({height:"auto"}).show().height(),o=n.show().height();this.state.isExpanded?(n.hide(),r.animate({height:o},function(){r.hide(),n.show(),n.css({height:"auto"}),t.setState({isExpanded:!t.state.isExpanded})})):(r.show(),n.hide(),r.height(o).animate({height:i},function(){r.css({height:"auto"}),t.setState({isExpanded:!t.state.isExpanded})}))},t}(d);t.default=y,e.exports=t.default}).call(t,n(0).h)},function(e,t){e.exports={description:"d5d59871",descriptionHeader:"_0b4211e5",more:"af81c271",excerpt:"_4dd4a953"}},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.StayDetails=void 0;var i=n(1),o=r(i).default,a=n(2),s=r(a).default,u=n(3),l=r(u).default,c=n(0),p=c.Component,d=n(155),f=r(d).default,h=n(11),m=r(h).default,g=n(7),y=g.connect,v=n(961),_=r(v).default,b=n(968),x=r(b).default;n(969),n(970);var w=t.StayDetails=function(t){function n(e){o(this,n);var r=s(this,t.call(this,e));return r.state={modalOpened:!1},r.handleOpenModal=r.handleOpenModal.bind(r),r.handleCloseModal=r.handleCloseModal.bind(r),r}return l(n,t),n.prototype.handleOpenModal=function(){this.setState({modalOpened:!0}),m("body").css("overflow-y","hidden")},n.prototype.handleCloseModal=function(){this.setState({modalOpened:!1}),m("body").css("overflow-y","scroll")},n.prototype.componentWillUnmount=function(){this.setState({modelOpened:!1})},n.prototype.render=function(t){var n=t.stay,r=n.checkIn,i=n.checkOut,o=n.rooms,a=n.guests,s=this.state.modalOpened,u=this.handleCloseModal,l=this.handleOpenModal;return e("div",null,e("div",{className:"stay-details-info clearfix",onClick:l},e("div",{className:"stay-details-dates"},e("div",{className:"clearfix"},e("div",{className:"stay-details-stay-from col col-5"},e("div",{className:"stay-details-value"},f(r).format("MMM Do")),e("div",{className:"stay-details-label"},"Arriving")),e("div",{className:"stay-details-divider col col-2"},e("img",{className:"stay-details-arrow",src:x})),e("div",{className:"stay-details-stay-to col col-5"},e("div",{className:"stay-details-value"},f(i).format("MMM Do")),e("div",{className:"stay-details-label"},"Leaving")))),e("div",{className:"stay-details-rooms"},e("div",{className:"stay-details-value"},o),e("div",{className:"stay-details-label"},"Room",1==o?"":"s")),e("div",{className:"stay-details-guests"},e("div",{className:"stay-details-value"},a),e("div",{className:"stay-details-label"},"Guest",1==a?"":"s"))),e("button",{className:"stay-details-edit",onClick:l},"Change Search"),s&&e(_,{handleCloseModal:u,stay:n}))},n}(p);t.default=y(function(e){return{stay:e.get("stay").toJS()}})(w)}).call(t,n(0).h)},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.checkIn,n=e.checkOut,r=e.rooms;return{checkIn:t,checkOut:n,rooms:r,guests:e.guests,maxRooms:k(),maxGuests:E(r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.DetailsForm=void 0;var o=n(1),a=r(o).default,s=n(2),u=r(s).default,l=n(3),c=r(l).default,p=n(0),d=p.Component,f=n(155),h=r(f).default,m=n(7),g=m.connect,y=n(154),v=r(y).default,_=n(49),b=_.assignExistingRatesToHotels,x=n(563),w=r(x).default,S=n(214),k=S.getMaxRooms,E=S.getMaxGuests,T=n(962),M=r(T).default,C=n(963),O=r(C).default,A=n(964),P=r(A).default;n(967);var R=t.DetailsForm=function(t){function n(e){a(this,n);var r=u(this,t.call(this,e)),o=e.stay,s=e.handleCloseModal;return r.state=i(o),r.handleCloseModal=s,r.datepicker=P.bind(r),r.handleApplyChanges=r.handleApplyChanges.bind(r),r.handleKeyDown=r.handleKeyDown.bind(r),r.handleGuestChange=r.handleGuestChange.bind(r),r.handleRoomChange=r.handleRoomChange.bind(r),r}return c(n,t),n.prototype.handleGuestChange=function(e){var t=Number(e.target.value);this.setState(function(e){var n=e.rooms;return n=t<n?t:n,{rooms:n,guests:t,maxGuests:E(n)}})},n.prototype.handleRoomChange=function(e){var t=Number(e.target.value),n=E(t);this.setState(function(e){var r=e.guests;return t>r?r=t:n<r&&(r=n),{rooms:t,guests:r,maxGuests:n}})},n.prototype.handleKeyDown=function(e){27==e.keyCode&&this.handleCloseModal(),13==e.keyCode&&this.handleApplyChanges()},n.prototype.handleApplyChanges=function(){var e=this;this.setState({redirect:!0},function(){return e.setState({redirect:!1})})},n.prototype.render=function(t,n){var r=this,i=n.checkIn,o=n.checkOut,a=n.rooms,s=n.guests,u=n.maxRooms,l=n.maxGuests;return n.redirect?e(v,{params:{checkIn:i,checkOut:o,rooms:a,guests:s},push:!0}):e("div",{className:"stay-details-modal-overlay"},e("div",{className:"stay-details-modal-container"},e("div",{className:"stay-details-form"},e("h3",{className:"stay-details-header"},"Change your Search Results"),e("div",{className:"stay-details-form-row clearfix",id:"date-pickers"},e(O,{label:"Arriving"},e("input",{readonly:!0,id:"stay-details-arrive-datepicker",value:h(i).format(w),type:"text",ref:function(e){return r.checkInInput=e}})),e(O,{label:"Leaving"},e("input",{readonly:!0,id:"stay-details-leave-datepicker",value:h(o).format(w),type:"text",ref:function(e){return r.checkOutInput=e}}))),e("div",{id:"stay-details-datepicker-container",ref:function(e){return r.container=e}}),e("div",{className:"stay-details-form-row clearfix"},e(O,{label:"Rooms"},e(M,{initValue:a,maxValue:u,onChange:this.handleRoomChange})),e(O,{label:"Guests"},e(M,{initValue:s,maxValue:l,onChange:this.handleGuestChange}))),e("div",{className:"stay-details-button-row clearfix"},e("button",{className:"stay-details-cancel",onClick:this.handleCloseModal},"Cancel"),e("button",{className:"stay-details-apply",onClick:this.handleApplyChanges},"Apply")))))},n.prototype.componentDidMount=function(){var e=this.state,t=e.checkIn,n=e.checkOut,r=this.checkInInput,i=this.checkOutInput,o=this.container;o&&0===o.childNodes.length&&this.datepicker({checkIn:t,checkOut:n,checkInInput:r,checkOutInput:i,container:o}),document.addEventListener("keydown",this.handleKeyDown,!1)},n.prototype.componentDidUpdate=function(){this.state.redirect&&(this.props.assignExistingRatesToHotels(),this.handleCloseModal())},n.prototype.componentWillUnmount=function(){document.removeEventListener("keydown",this.handleKeyDown),this._datepicker&&this._datepicker.destroy()},n}(d);t.default=g(null,{assignExistingRatesToHotels:b})(R)}).call(t,n(0).h)},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=function(e){function t(){return a(this,t),u(this,e.apply(this,arguments))}return c(t,e),t.prototype.render=function(e){for(var t=e.maxValue,n=e.initValue,i=e.onChange,o=[],a=1;a<=t;a++)o.push(r("option",{key:a.toString(),value:a},a));return r("select",{onChange:i,value:n,className:"stay-details-select"},o)},t}(d);t.default=f,e.exports=t.default}).call(t,n(0).h)},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=function(e){function t(){return a(this,t),u(this,e.apply(this,arguments))}return c(t,e),t.prototype.render=function(e){return r("div",{className:"stay-details-form-item"},r("label",{className:"stay-details-form-label"},e.label,e.children))},t}(d);t.default=f,e.exports=t.default}).call(t,n(0).h)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),o=r(i).default;t.default=function(e){var t=this,n=e.checkIn,r=e.checkOut,i=e.checkInInput,a=e.checkOutInput,u=e.container;if(i&&a&&u){var c=void 0,d=void 0,h=void 0;s(u).empty();var m=s(i),g=s(a),y={defaultDate:new Date(l(n).toDate()),setDefaultDate:!0,container:u,showDaysInNextAndPreviousMonths:!1,numberOfMonths:1,minDate:new Date,maxDate:new Date((new Date).setFullYear((new Date).getFullYear()+1)),format:f,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}},v=function(){if(b&&x){var e=new Date(l(c).add(1,"day"));b.setStartRange(c),b.setMaxDate(new Date((new Date).setFullYear((new Date).getFullYear()+1))),x.setStartRange(c),x.setMinDate(e),t.setState({checkIn:l(c).format("YYYY-MM-DD")}),l(c).isSameOrAfter(d)&&(d=e,h=!0,x.gotoDate(new Date(d)))}},_=function(){if(b&&x){var e=new Date(l(c).add(1,"day"));b.setEndRange(d),x.setMaxDate(new Date((new Date).setFullYear((new Date).getFullYear()+1))),x.setMinDate(e),x.setStartRange(c),x.setEndRange(d),t.setState({checkOut:l(d).format("YYYY-MM-DD")})}},b=new p(o({field:m[0],onOpen:function(){m.closest(".stay-details-form-item").addClass("is-active"),g.closest(".stay-details-form-item").removeClass("is-active")},onClose:function(){m.closest(".stay-details-form-item").removeClass("is-active"),h&&(_(),x.show(),h=!1)},onSelect:function(){c=this.getDate(),v()}},y)),x=new p(o({field:g[0],onOpen:function(){g.closest(".stay-details-form-item").addClass("is-active"),m.closest(".stay-details-form-item").removeClass("is-active")},onClose:function(){g.closest(".stay-details-form-item").removeClass("is-active")},onSelect:function(){d=this.getDate(),_()}},y));return function(){c=l(n).toDate(),d=l(r).toDate(),v(),_()}(),{destroy:function(){b.destroy(),x.destroy()}}}};var a=n(11),s=r(a).default,u=n(155),l=r(u).default,c=n(965),p=r(c).default,d=n(563),f=r(d).default;e.exports=t.default},function(e,t,n){!function(t,r){"use strict";var i;try{i=n(966)}catch(e){}e.exports=function(e){"use strict";var t="function"==typeof e,n=!!window.addEventListener,r=window.document,i=window.setTimeout,o=function(e,t,r,i){n?e.addEventListener(t,r,!!i):e.attachEvent("on"+t,r)},a=function(e,t,r,i){n?e.removeEventListener(t,r,!!i):e.detachEvent("on"+t,r)},s=function(e,t,n){var i;r.createEvent?(i=r.createEvent("HTMLEvents"),i.initEvent(t,!0,!1),i=_(i,n)):r.createEventObject&&(i=r.createEventObject(),i=_(i,n),e.fireEvent("on"+t,i))},u=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},l=function(e,t){return-1!==(" "+e.className+" ").indexOf(" "+t+" ")},c=function(e,t){l(e,t)||(e.className=""===e.className?t:e.className+" "+t)},p=function(e,t){e.className=u((" "+e.className+" ").replace(" "+t+" "," "))},d=function(e){return/Array/.test(Object.prototype.toString.call(e))},f=function(e){return/Date/.test(Object.prototype.toString.call(e))&&!isNaN(e.getTime())},h=function(e){var t=e.getDay();return 0===t||6===t},m=function(e){return e%4==0&&e%100!=0||e%400==0},g=function(e,t){return[31,m(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},y=function(e){f(e)&&e.setHours(0,0,0,0)},v=function(e,t){return e.getTime()===t.getTime()},_=function(e,t,n){var r,i;for(r in t)i=void 0!==e[r],i&&"object"==typeof t[r]&&null!==t[r]&&void 0===t[r].nodeName?f(t[r])?n&&(e[r]=new Date(t[r].getTime())):d(t[r])?n&&(e[r]=t[r].slice(0)):e[r]=_({},t[r],n):!n&&i||(e[r]=t[r]);return e},b=function(e){return e.month<0&&(e.year-=Math.ceil(Math.abs(e.month)/12),e.month+=12),e.month>11&&(e.year+=Math.floor(Math.abs(e.month)/12),e.month-=12),e},x={field:null,bound:void 0,position:"bottom left",reposition:!0,format:"YYYY-MM-DD",defaultDate:null,setDefaultDate:!1,firstDay:0,formatStrict:!1,minDate:null,maxDate:null,yearRange:10,showWeekNumber:!1,pickWholeWeek:!1,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,yearSuffix:"",showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,numberOfMonths:1,mainCalendar:"left",container:void 0,blurFieldOnSelect:!0,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},theme:null,events:[],onSelect:null,onOpen:null,onClose:null,onDraw:null},w=function(e,t,n){for(t+=e.firstDay;t>=7;)t-=7;return n?e.i18n.weekdaysShort[t]:e.i18n.weekdays[t]},S=function(e){var t=[],n="false";if(e.isEmpty){if(!e.showDaysInNextAndPreviousMonths)return'<td class="is-empty"></td>';t.push("is-outside-current-month")}return e.isDisabled&&t.push("is-disabled"),e.isToday&&t.push("is-today"),e.isSelected&&(t.push("is-selected"),n="true"),e.hasEvent&&t.push("has-event"),e.isInRange&&t.push("is-inrange"),e.isStartRange&&t.push("is-startrange"),e.isEndRange&&t.push("is-endrange"),'<td data-day="'+e.day+'" class="'+t.join(" ")+'" aria-selected="'+n+'"><button class="pika-button pika-day" type="button" data-pika-year="'+e.year+'" data-pika-month="'+e.month+'" data-pika-day="'+e.day+'">'+e.day+"</button></td>"},k=function(e,t,n){var r=new Date(n,0,1);return'<td class="pika-week">'+Math.ceil(((new Date(n,t,e)-r)/864e5+r.getDay()+1)/7)+"</td>"},E=function(e,t,n,r){return'<tr class="pika-row'+(n?" pick-whole-week":"")+(r?" is-selected":"")+'">'+(t?e.reverse():e).join("")+"</tr>"},T=function(e){return"<tbody>"+e.join("")+"</tbody>"},M=function(e){var t,n=[];for(e.showWeekNumber&&n.push("<th></th>"),t=0;t<7;t++)n.push('<th scope="col"><abbr title="'+w(e,t)+'">'+w(e,t,!0)+"</abbr></th>");return"<thead><tr>"+(e.isRTL?n.reverse():n).join("")+"</tr></thead>"},C=function(e,t,n,r,i,o){var a,s,u,l,c,p=e._o,f=n===p.minYear,h=n===p.maxYear,m='<div id="'+o+'" class="pika-title" role="heading" aria-live="assertive">',g=!0,y=!0;for(u=[],a=0;a<12;a++)u.push('<option value="'+(n===i?a-t:12+a-t)+'"'+(a===r?' selected="selected"':"")+(f&&a<p.minMonth||h&&a>p.maxMonth?'disabled="disabled"':"")+">"+p.i18n.months[a]+"</option>");for(l='<div class="pika-label">'+p.i18n.months[r]+'<select class="pika-select pika-select-month" tabindex="-1">'+u.join("")+"</select></div>",d(p.yearRange)?(a=p.yearRange[0],s=p.yearRange[1]+1):(a=n-p.yearRange,s=1+n+p.yearRange),u=[];a<s&&a<=p.maxYear;a++)a>=p.minYear&&u.push('<option value="'+a+'"'+(a===n?' selected="selected"':"")+">"+a+"</option>");return c='<div class="pika-label">'+n+p.yearSuffix+'<select class="pika-select pika-select-year" tabindex="-1">'+u.join("")+"</select></div>",p.showMonthAfterYear?m+=c+l:m+=l+c,f&&(0===r||p.minMonth>=r)&&(g=!1),h&&(11===r||p.maxMonth<=r)&&(y=!1),0===t&&(m+='<button class="pika-prev'+(g?"":" is-disabled")+'" type="button">'+p.i18n.previousMonth+"</button>"),t===e._o.numberOfMonths-1&&(m+='<button class="pika-next'+(y?"":" is-disabled")+'" type="button">'+p.i18n.nextMonth+"</button>"),m+="</div>"},O=function(e,t,n){return'<table cellpadding="0" cellspacing="0" class="pika-table" role="grid" aria-labelledby="'+n+'">'+M(e)+T(t)+"</table>"},A=function(a){var s=this,u=s.config(a);s._onMouseDown=function(e){if(s._v){e=e||window.event;var t=e.target||e.srcElement;if(t)if(l(t,"is-disabled")||(!l(t,"pika-button")||l(t,"is-empty")||l(t.parentNode,"is-disabled")?l(t,"pika-prev")?s.prevMonth():l(t,"pika-next")&&s.nextMonth():(s.setDate(new Date(t.getAttribute("data-pika-year"),t.getAttribute("data-pika-month"),t.getAttribute("data-pika-day"))),u.bound&&i(function(){s.hide(),u.blurFieldOnSelect&&u.field&&u.field.blur()},100))),l(t,"pika-select"))s._c=!0;else{if(!e.preventDefault)return e.returnValue=!1,!1;e.preventDefault()}}},s._onChange=function(e){e=e||window.event;var t=e.target||e.srcElement;t&&(l(t,"pika-select-month")?s.gotoMonth(t.value):l(t,"pika-select-year")&&s.gotoYear(t.value))},s._onKeyChange=function(e){if(e=e||window.event,s.isVisible())switch(e.keyCode){case 13:case 27:u.field&&u.field.blur();break;case 37:e.preventDefault(),s.adjustDate("subtract",1);break;case 38:s.adjustDate("subtract",7);break;case 39:s.adjustDate("add",1);break;case 40:s.adjustDate("add",7)}},s._onInputChange=function(n){var r;n.firedBy!==s&&(t?(r=e(u.field.value,u.format,u.formatStrict),r=r&&r.isValid()?r.toDate():null):r=new Date(Date.parse(u.field.value)),f(r)&&s.setDate(r),s._v||s.show())},s._onInputFocus=function(){s.show()},s._onInputClick=function(){s.show()},s._onInputBlur=function(){var e=r.activeElement;do{if(l(e,"pika-single"))return}while(e=e.parentNode);s._c||(s._b=i(function(){s.hide()},50)),s._c=!1},s._onClick=function(e){e=e||window.event;var t=e.target||e.srcElement,r=t;if(t){!n&&l(t,"pika-select")&&(t.onchange||(t.setAttribute("onchange","return;"),o(t,"change",s._onChange)));do{if(l(r,"pika-single")||r===u.trigger)return}while(r=r.parentNode);s._v&&t!==u.trigger&&r!==u.trigger&&s.hide()}},s.el=r.createElement("div"),s.el.className="pika-single"+(u.isRTL?" is-rtl":"")+(u.theme?" "+u.theme:""),o(s.el,"mousedown",s._onMouseDown,!0),o(s.el,"touchend",s._onMouseDown,!0),o(s.el,"change",s._onChange),o(r,"keydown",s._onKeyChange),u.field&&(u.container?u.container.appendChild(s.el):u.bound?r.body.appendChild(s.el):u.field.parentNode.insertBefore(s.el,u.field.nextSibling),o(u.field,"change",s._onInputChange),u.defaultDate||(t&&u.field.value?u.defaultDate=e(u.field.value,u.format).toDate():u.defaultDate=new Date(Date.parse(u.field.value)),u.setDefaultDate=!0));var c=u.defaultDate;f(c)?u.setDefaultDate?s.setDate(c,!0):s.gotoDate(c):s.gotoDate(new Date),u.bound?(this.hide(),s.el.className+=" is-bound",o(u.trigger,"click",s._onInputClick),o(u.trigger,"focus",s._onInputFocus),o(u.trigger,"blur",s._onInputBlur)):this.show()};return A.prototype={config:function(e){this._o||(this._o=_({},x,!0));var t=_(this._o,e,!0);t.isRTL=!!t.isRTL,t.field=t.field&&t.field.nodeName?t.field:null,t.theme="string"==typeof t.theme&&t.theme?t.theme:null,t.bound=!!(void 0!==t.bound?t.field&&t.bound:t.field),t.trigger=t.trigger&&t.trigger.nodeName?t.trigger:t.field,t.disableWeekends=!!t.disableWeekends,t.disableDayFn="function"==typeof t.disableDayFn?t.disableDayFn:null;var n=parseInt(t.numberOfMonths,10)||1;if(t.numberOfMonths=n>4?4:n,f(t.minDate)||(t.minDate=!1),f(t.maxDate)||(t.maxDate=!1),t.minDate&&t.maxDate&&t.maxDate<t.minDate&&(t.maxDate=t.minDate=!1),t.minDate&&this.setMinDate(t.minDate),t.maxDate&&this.setMaxDate(t.maxDate),d(t.yearRange)){var r=(new Date).getFullYear()-10;t.yearRange[0]=parseInt(t.yearRange[0],10)||r,t.yearRange[1]=parseInt(t.yearRange[1],10)||r}else t.yearRange=Math.abs(parseInt(t.yearRange,10))||x.yearRange,t.yearRange>100&&(t.yearRange=100);return t},toString:function(n){return f(this._d)?t?e(this._d).format(n||this._o.format):this._d.toDateString():""},getMoment:function(){return t?e(this._d):null},setMoment:function(n,r){t&&e.isMoment(n)&&this.setDate(n.toDate(),r)},getDate:function(){return f(this._d)?new Date(this._d.getTime()):null},setDate:function(e,t){if(!e)return this._d=null,this._o.field&&(this._o.field.value="",s(this._o.field,"change",{firedBy:this})),this.draw();if("string"==typeof e&&(e=new Date(Date.parse(e))),f(e)){var n=this._o.minDate,r=this._o.maxDate;f(n)&&e<n?e=n:f(r)&&e>r&&(e=r),this._d=new Date(e.getTime()),y(this._d),this.gotoDate(this._d),this._o.field&&(this._o.field.value=this.toString(),s(this._o.field,"change",{firedBy:this})),t||"function"!=typeof this._o.onSelect||this._o.onSelect.call(this,this.getDate())}},gotoDate:function(e){var t=!0;if(f(e)){if(this.calendars){var n=new Date(this.calendars[0].year,this.calendars[0].month,1),r=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),i=e.getTime();r.setMonth(r.getMonth()+1),r.setDate(r.getDate()-1),t=i<n.getTime()||r.getTime()<i}t&&(this.calendars=[{month:e.getMonth(),year:e.getFullYear()}],"right"===this._o.mainCalendar&&(this.calendars[0].month+=1-this._o.numberOfMonths)),this.adjustCalendars()}},adjustDate:function(n,r){var i,o=this.getDate()||new Date,a=24*parseInt(r)*60*60*1e3;"add"===n?i=new Date(o.valueOf()+a):"subtract"===n&&(i=new Date(o.valueOf()-a)),t&&("add"===n?i=e(o).add(r,"days").toDate():"subtract"===n&&(i=e(o).subtract(r,"days").toDate())),this.setDate(i)},adjustCalendars:function(){this.calendars[0]=b(this.calendars[0]);for(var e=1;e<this._o.numberOfMonths;e++)this.calendars[e]=b({month:this.calendars[0].month+e,year:this.calendars[0].year});this.draw()},gotoToday:function(){this.gotoDate(new Date)},gotoMonth:function(e){isNaN(e)||(this.calendars[0].month=parseInt(e,10),this.adjustCalendars())},nextMonth:function(){this.calendars[0].month++,this.adjustCalendars()},prevMonth:function(){this.calendars[0].month--,this.adjustCalendars()},gotoYear:function(e){isNaN(e)||(this.calendars[0].year=parseInt(e,10),this.adjustCalendars())},setMinDate:function(e){e instanceof Date?(y(e),this._o.minDate=e,this._o.minYear=e.getFullYear(),this._o.minMonth=e.getMonth()):(this._o.minDate=x.minDate,this._o.minYear=x.minYear,this._o.minMonth=x.minMonth,this._o.startRange=x.startRange),this.draw()},setMaxDate:function(e){e instanceof Date?(y(e),this._o.maxDate=e,this._o.maxYear=e.getFullYear(),this._o.maxMonth=e.getMonth()):(this._o.maxDate=x.maxDate,this._o.maxYear=x.maxYear,this._o.maxMonth=x.maxMonth,this._o.endRange=x.endRange),this.draw()},setStartRange:function(e){this._o.startRange=e},setEndRange:function(e){this._o.endRange=e},draw:function(e){if(this._v||e){var t,n=this._o,r=n.minYear,o=n.maxYear,a=n.minMonth,s=n.maxMonth,u="";this._y<=r&&(this._y=r,!isNaN(a)&&this._m<a&&(this._m=a)),this._y>=o&&(this._y=o,!isNaN(s)&&this._m>s&&(this._m=s)),t="pika-title-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,2);for(var l=0;l<n.numberOfMonths;l++)u+='<div class="pika-lendar">'+C(this,l,this.calendars[l].year,this.calendars[l].month,this.calendars[0].year,t)+this.render(this.calendars[l].year,this.calendars[l].month,t)+"</div>";this.el.innerHTML=u,n.bound&&"hidden"!==n.field.type&&i(function(){n.trigger.focus()},1),"function"==typeof this._o.onDraw&&this._o.onDraw(this),n.bound&&n.field.setAttribute("aria-label","Use the arrow keys to pick a date")}},adjustPosition:function(){var e,t,n,i,o,a,s,u,l,c;if(!this._o.container){if(this.el.style.position="absolute",e=this._o.trigger,t=e,n=this.el.offsetWidth,i=this.el.offsetHeight,o=window.innerWidth||r.documentElement.clientWidth,a=window.innerHeight||r.documentElement.clientHeight,s=window.pageYOffset||r.body.scrollTop||r.documentElement.scrollTop,"function"==typeof e.getBoundingClientRect)c=e.getBoundingClientRect(),u=c.left+window.pageXOffset,l=c.bottom+window.pageYOffset;else for(u=t.offsetLeft,l=t.offsetTop+t.offsetHeight;t=t.offsetParent;)u+=t.offsetLeft,l+=t.offsetTop;(this._o.reposition&&u+n>o||this._o.position.indexOf("right")>-1&&u-n+e.offsetWidth>0)&&(u=u-n+e.offsetWidth),(this._o.reposition&&l+i>a+s||this._o.position.indexOf("top")>-1&&l-i-e.offsetHeight>0)&&(l=l-i-e.offsetHeight),this.el.style.left=u+"px",this.el.style.top=l+"px"}},render:function(e,t,n){var r=this._o,i=new Date,o=g(e,t),a=new Date(e,t,1).getDay(),s=[],u=[];y(i),r.firstDay>0&&(a-=r.firstDay)<0&&(a+=7);for(var l=0===t?11:t-1,c=11===t?0:t+1,p=0===t?e-1:e,d=11===t?e+1:e,m=g(p,l),_=o+a,b=_;b>7;)b-=7;_+=7-b;for(var x=!1,w=0,T=0;w<_;w++){var M=new Date(e,t,w-a+1),C=!!f(this._d)&&v(M,this._d),A=v(M,i),P=-1!==r.events.indexOf(M.toDateString()),R=w<a||w>=o+a,D=w-a+1,I=t,N=e,L=r.startRange&&v(r.startRange,M),z=r.endRange&&v(r.endRange,M),j=r.startRange&&r.endRange&&r.startRange<M&&M<r.endRange,H=r.minDate&&M<r.minDate||r.maxDate&&M>r.maxDate||r.disableWeekends&&h(M)||r.disableDayFn&&r.disableDayFn(M);R&&(w<a?(D=m+D,I=l,N=p):(D-=o,I=c,N=d));var B={day:D,month:I,year:N,hasEvent:P,isSelected:C,isToday:A,isDisabled:H,isEmpty:R,isStartRange:L,isEndRange:z,isInRange:j,showDaysInNextAndPreviousMonths:r.showDaysInNextAndPreviousMonths};r.pickWholeWeek&&C&&(x=!0),u.push(S(B)),7==++T&&(r.showWeekNumber&&u.unshift(k(w-a,t,e)),s.push(E(u,r.isRTL,r.pickWholeWeek,x)),u=[],T=0,x=!1)}return O(r,s,n)},isVisible:function(){return this._v},show:function(){this.isVisible()||(this._v=!0,this.draw(),this._o.bound&&(o(r,"click",this._onClick),this.adjustPosition()),p(this.el,"is-hidden"),"function"==typeof this._o.onOpen&&this._o.onOpen.call(this))},hide:function(){var e=this._v;!1!==e&&(this._o.bound&&a(r,"click",this._onClick),this.el.style.position="static",this.el.style.left="auto",this.el.style.top="auto",c(this.el,"is-hidden"),this._v=!1,void 0!==e&&"function"==typeof this._o.onClose&&this._o.onClose.call(this))},destroy:function(){this.hide(),a(this.el,"mousedown",this._onMouseDown,!0),a(this.el,"touchend",this._onMouseDown,!0),a(this.el,"change",this._onChange),this._o.field&&(a(this._o.field,"change",this._onInputChange),this._o.bound&&(a(this._o.trigger,"click",this._onInputClick),a(this._o.trigger,"focus",this._onInputFocus),a(this._o.trigger,"blur",this._onInputBlur))),this.el.parentNode&&this.el.parentNode.removeChild(this.el)}},A}(i)}()},function(e,t,n){(function(e){!function(t,n){e.exports=function(){"use strict";function t(){return Mr.apply(null,arguments)}function n(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function r(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function i(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}function o(e){return void 0===e}function a(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function s(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function u(e,t){var n,r=[];for(n=0;n<e.length;++n)r.push(t(e[n],n));return r}function l(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function c(e,t){for(var n in t)l(t,n)&&(e[n]=t[n]);return l(t,"toString")&&(e.toString=t.toString),l(t,"valueOf")&&(e.valueOf=t.valueOf),e}function p(e,t,n,r){return kt(e,t,n,r,!0).utc()}function d(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function f(e){return null==e._pf&&(e._pf=d()),e._pf}function h(e){if(null==e._isValid){var t=f(e),n=Cr.call(t.parsedDateParts,function(e){return null!=e}),r=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(r=r&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return r;e._isValid=r}return e._isValid}function m(e){var t=p(NaN);return null!=e?c(f(t),e):f(t).userInvalidated=!0,t}function g(e,t){var n,r,i;if(o(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),o(t._i)||(e._i=t._i),o(t._f)||(e._f=t._f),o(t._l)||(e._l=t._l),o(t._strict)||(e._strict=t._strict),o(t._tzm)||(e._tzm=t._tzm),o(t._isUTC)||(e._isUTC=t._isUTC),o(t._offset)||(e._offset=t._offset),o(t._pf)||(e._pf=f(t)),o(t._locale)||(e._locale=t._locale),Or.length>0)for(n=0;n<Or.length;n++)r=Or[n],i=t[r],o(i)||(e[r]=i);return e}function y(e){g(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===Ar&&(Ar=!0,t.updateOffset(this),Ar=!1)}function v(e){return e instanceof y||null!=e&&null!=e._isAMomentObject}function _(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function b(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=_(t)),n}function x(e,t,n){var r,i=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),a=0;for(r=0;r<i;r++)(n&&e[r]!==t[r]||!n&&b(e[r])!==b(t[r]))&&a++;return a+o}function w(e){!1===t.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function S(e,n){var r=!0;return c(function(){if(null!=t.deprecationHandler&&t.deprecationHandler(null,e),r){for(var i,o=[],a=0;a<arguments.length;a++){if(i="","object"==typeof arguments[a]){i+="\n["+a+"] ";for(var s in arguments[0])i+=s+": "+arguments[0][s]+", ";i=i.slice(0,-2)}else i=arguments[a];o.push(i)}w(e+"\nArguments: "+Array.prototype.slice.call(o).join("")+"\n"+(new Error).stack),r=!1}return n.apply(this,arguments)},n)}function k(e,n){null!=t.deprecationHandler&&t.deprecationHandler(e,n),Pr[e]||(w(n),Pr[e]=!0)}function E(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function T(e){var t,n;for(n in e)t=e[n],E(t)?this[n]=t:this["_"+n]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function M(e,t){var n,i=c({},e);for(n in t)l(t,n)&&(r(e[n])&&r(t[n])?(i[n]={},c(i[n],e[n]),c(i[n],t[n])):null!=t[n]?i[n]=t[n]:delete i[n]);for(n in e)l(e,n)&&!l(t,n)&&r(e[n])&&(i[n]=c({},i[n]));return i}function C(e){null!=e&&this.set(e)}function O(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return E(r)?r.call(t,n):r}function A(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])}function P(){return this._invalidDate}function R(e){return this._ordinal.replace("%d",e)}function D(e,t,n,r){var i=this._relativeTime[n];return E(i)?i(e,t,n,r):i.replace(/%d/i,e)}function I(e,t){var n=this._relativeTime[e>0?"future":"past"];return E(n)?n(t):n.replace(/%s/i,t)}function N(e,t){var n=e.toLowerCase();zr[n]=zr[n+"s"]=zr[t]=e}function L(e){return"string"==typeof e?zr[e]||zr[e.toLowerCase()]:void 0}function z(e){var t,n,r={};for(n in e)l(e,n)&&(t=L(n))&&(r[t]=e[n]);return r}function j(e,t){jr[e]=t}function H(e){var t=[];for(var n in e)t.push({unit:n,priority:jr[n]});return t.sort(function(e,t){return e.priority-t.priority}),t}function B(e,t,n){var r=""+Math.abs(e),i=t-r.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}function F(e,t,n,r){var i=r;"string"==typeof r&&(i=function(){return this[r]()}),e&&(Ur[e]=i),t&&(Ur[t[0]]=function(){return B(i.apply(this,arguments),t[1],t[2])}),n&&(Ur[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function U(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function V(e){var t,n,r=e.match(Hr);for(t=0,n=r.length;t<n;t++)Ur[r[t]]?r[t]=Ur[r[t]]:r[t]=U(r[t]);return function(t){var i,o="";for(i=0;i<n;i++)o+=E(r[i])?r[i].call(t,e):r[i];return o}}function Y(e,t){return e.isValid()?(t=W(t,e.localeData()),Fr[t]=Fr[t]||V(t),Fr[t](e)):e.localeData().invalidDate()}function W(e,t){function n(e){return t.longDateFormat(e)||e}var r=5;for(Br.lastIndex=0;r>=0&&Br.test(e);)e=e.replace(Br,n),Br.lastIndex=0,r-=1;return e}function q(e,t,n){ai[e]=E(t)?t:function(e,r){return e&&n?n:t}}function G(e,t){return l(ai,e)?ai[e](t._strict,t._locale):new RegExp(Z(e))}function Z(e){return K(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i}))}function K(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function J(e,t){var n,r=t;for("string"==typeof e&&(e=[e]),a(t)&&(r=function(e,n){n[t]=b(e)}),n=0;n<e.length;n++)si[e[n]]=r}function X(e,t){J(e,function(e,n,r,i){r._w=r._w||{},t(e,r._w,r,i)})}function $(e,t,n){null!=t&&l(si,e)&&si[e](t,n._a,n,e)}function Q(e){return ee(e)?366:365}function ee(e){return e%4==0&&e%100!=0||e%400==0}function te(){return ee(this.year())}function ne(e,n){return function(r){return null!=r?(ie(this,e,r),t.updateOffset(this,n),this):re(this,e)}}function re(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function ie(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&ee(e.year())&&1===e.month()&&29===e.date()?e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),ue(n,e.month())):e._d["set"+(e._isUTC?"UTC":"")+t](n))}function oe(e){return e=L(e),E(this[e])?this[e]():this}function ae(e,t){if("object"==typeof e){e=z(e);for(var n=H(e),r=0;r<n.length;r++)this[n[r].unit](e[n[r].unit])}else if(e=L(e),E(this[e]))return this[e](t);return this}function se(e,t){return(e%t+t)%t}function ue(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=se(t,12);return e+=(t-n)/12,1===n?ee(e)?29:28:31-n%7%2}function le(e,t){return e?n(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||_i).test(t)?"format":"standalone"][e.month()]:n(this._months)?this._months:this._months.standalone}function ce(e,t){return e?n(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[_i.test(t)?"format":"standalone"][e.month()]:n(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function pe(e,t,n){var r,i,o,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)o=p([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===t?(i=yi.call(this._shortMonthsParse,a),-1!==i?i:null):(i=yi.call(this._longMonthsParse,a),-1!==i?i:null):"MMM"===t?-1!==(i=yi.call(this._shortMonthsParse,a))?i:(i=yi.call(this._longMonthsParse,a),-1!==i?i:null):-1!==(i=yi.call(this._longMonthsParse,a))?i:(i=yi.call(this._shortMonthsParse,a),-1!==i?i:null)}function de(e,t,n){var r,i,o;if(this._monthsParseExact)return pe.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=p([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function fe(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=b(t);else if(t=e.localeData().monthsParse(t),!a(t))return e;return n=Math.min(e.date(),ue(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function he(e){return null!=e?(fe(this,e),t.updateOffset(this,!0),this):re(this,"Month")}function me(){return ue(this.year(),this.month())}function ge(e){return this._monthsParseExact?(l(this,"_monthsRegex")||ve.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=wi),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function ye(e){return this._monthsParseExact?(l(this,"_monthsRegex")||ve.call(this),e?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=Si),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function ve(){function e(e,t){return t.length-e.length}var t,n,r=[],i=[],o=[];for(t=0;t<12;t++)n=p([2e3,t]),r.push(this.monthsShort(n,"")),i.push(this.months(n,"")),o.push(this.months(n,"")),o.push(this.monthsShort(n,""));for(r.sort(e),i.sort(e),o.sort(e),t=0;t<12;t++)r[t]=K(r[t]),i[t]=K(i[t]);for(t=0;t<24;t++)o[t]=K(o[t]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function _e(e,t,n,r,i,o,a){var s=new Date(e,t,n,r,i,o,a);return e<100&&e>=0&&isFinite(s.getFullYear())&&s.setFullYear(e),s}function be(e){var t=new Date(Date.UTC.apply(null,arguments));return e<100&&e>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function xe(e,t,n){var r=7+t-n;return-(7+be(e,0,r).getUTCDay()-t)%7+r-1}function we(e,t,n,r,i){var o,a,s=(7+n-r)%7,u=xe(e,r,i),l=1+7*(t-1)+s+u;return l<=0?(o=e-1,a=Q(o)+l):l>Q(e)?(o=e+1,a=l-Q(e)):(o=e,a=l),{year:o,dayOfYear:a}}function Se(e,t,n){var r,i,o=xe(e.year(),t,n),a=Math.floor((e.dayOfYear()-o-1)/7)+1;return a<1?(i=e.year()-1,r=a+ke(i,t,n)):a>ke(e.year(),t,n)?(r=a-ke(e.year(),t,n),i=e.year()+1):(i=e.year(),r=a),{week:r,year:i}}function ke(e,t,n){var r=xe(e,t,n),i=xe(e+1,t,n);return(Q(e)-r+i)/7}function Ee(e){return Se(e,this._week.dow,this._week.doy).week}function Te(){return this._week.dow}function Me(){return this._week.doy}function Ce(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function Oe(e){var t=Se(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function Ae(e,t){return"string"!=typeof e?e:isNaN(e)?(e=t.weekdaysParse(e),"number"==typeof e?e:null):parseInt(e,10)}function Pe(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Re(e,t){return e?n(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]:n(this._weekdays)?this._weekdays:this._weekdays.standalone}function De(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Ie(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Ne(e,t,n){var r,i,o,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)o=p([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===t?(i=yi.call(this._weekdaysParse,a),-1!==i?i:null):"ddd"===t?(i=yi.call(this._shortWeekdaysParse,a),-1!==i?i:null):(i=yi.call(this._minWeekdaysParse,a),-1!==i?i:null):"dddd"===t?-1!==(i=yi.call(this._weekdaysParse,a))?i:-1!==(i=yi.call(this._shortWeekdaysParse,a))?i:(i=yi.call(this._minWeekdaysParse,a),-1!==i?i:null):"ddd"===t?-1!==(i=yi.call(this._shortWeekdaysParse,a))?i:-1!==(i=yi.call(this._weekdaysParse,a))?i:(i=yi.call(this._minWeekdaysParse,a),-1!==i?i:null):-1!==(i=yi.call(this._minWeekdaysParse,a))?i:-1!==(i=yi.call(this._weekdaysParse,a))?i:(i=yi.call(this._shortWeekdaysParse,a),-1!==i?i:null)}function Le(e,t,n){var r,i,o;if(this._weekdaysParseExact)return Ne.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=p([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".",".?")+"$","i")),this._weekdaysParse[r]||(o="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[r].test(e))return r;if(n&&"ddd"===t&&this._shortWeekdaysParse[r].test(e))return r;if(n&&"dd"===t&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}}function ze(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=Ae(e,this.localeData()),this.add(e-t,"d")):t}function je(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function He(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=Pe(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function Be(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Ve.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=Ci),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Fe(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Ve.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Oi),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Ue(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Ve.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ai),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Ve(){function e(e,t){return t.length-e.length}var t,n,r,i,o,a=[],s=[],u=[],l=[];for(t=0;t<7;t++)n=p([2e3,1]).day(t),r=this.weekdaysMin(n,""),i=this.weekdaysShort(n,""),o=this.weekdays(n,""),a.push(r),s.push(i),u.push(o),l.push(r),l.push(i),l.push(o);for(a.sort(e),s.sort(e),u.sort(e),l.sort(e),t=0;t<7;t++)s[t]=K(s[t]),u[t]=K(u[t]),l[t]=K(l[t]);this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function Ye(){return this.hours()%12||12}function We(){return this.hours()||24}function qe(e,t){F(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function Ge(e,t){return t._meridiemParse}function Ze(e){return"p"===(e+"").toLowerCase().charAt(0)}function Ke(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}function Je(e){return e?e.toLowerCase().replace("_","-"):e}function Xe(e){for(var t,n,r,i,o=0;o<e.length;){for(i=Je(e[o]).split("-"),t=i.length,n=Je(e[o+1]),n=n?n.split("-"):null;t>0;){if(r=$e(i.slice(0,t).join("-")))return r;if(n&&n.length>=t&&x(i,n,!0)>=t-1)break;t--}o++}return null}function $e(t){var n=null;if(!Ni[t]&&void 0!==e&&e&&e.exports)try{n=Pi._abbr,!function(){var e=new Error('Cannot find module "./locale"');throw e.code="MODULE_NOT_FOUND",e}(),Qe(n)}catch(e){}return Ni[t]}function Qe(e,t){var n;return e&&(n=o(t)?nt(e):et(e,t))&&(Pi=n),Pi._abbr}function et(e,t){if(null!==t){var n=Ii;if(t.abbr=e,null!=Ni[e])k("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=Ni[e]._config;else if(null!=t.parentLocale){if(null==Ni[t.parentLocale])return Li[t.parentLocale]||(Li[t.parentLocale]=[]),Li[t.parentLocale].push({name:e,config:t}),null;n=Ni[t.parentLocale]._config}return Ni[e]=new C(M(n,t)),Li[e]&&Li[e].forEach(function(e){et(e.name,e.config)}),Qe(e),Ni[e]}return delete Ni[e],null}function tt(e,t){if(null!=t){var n,r,i=Ii;r=$e(e),null!=r&&(i=r._config),t=M(i,t),n=new C(t),n.parentLocale=Ni[e],Ni[e]=n,Qe(e)}else null!=Ni[e]&&(null!=Ni[e].parentLocale?Ni[e]=Ni[e].parentLocale:null!=Ni[e]&&delete Ni[e]);return Ni[e]}function nt(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Pi;if(!n(e)){if(t=$e(e))return t;e=[e]}return Xe(e)}function rt(){return Rr(Ni)}function it(e){var t,n=e._a;return n&&-2===f(e).overflow&&(t=n[li]<0||n[li]>11?li:n[ci]<1||n[ci]>ue(n[ui],n[li])?ci:n[pi]<0||n[pi]>24||24===n[pi]&&(0!==n[di]||0!==n[fi]||0!==n[hi])?pi:n[di]<0||n[di]>59?di:n[fi]<0||n[fi]>59?fi:n[hi]<0||n[hi]>999?hi:-1,f(e)._overflowDayOfYear&&(t<ui||t>ci)&&(t=ci),f(e)._overflowWeeks&&-1===t&&(t=mi),f(e)._overflowWeekday&&-1===t&&(t=gi),f(e).overflow=t),e}function ot(e,t,n){return null!=e?e:null!=t?t:n}function at(e){var n=new Date(t.now());return e._useUTC?[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()]:[n.getFullYear(),n.getMonth(),n.getDate()]}function st(e){var t,n,r,i,o,a=[];if(!e._d){for(r=at(e),e._w&&null==e._a[ci]&&null==e._a[li]&&ut(e),null!=e._dayOfYear&&(o=ot(e._a[ui],r[ui]),(e._dayOfYear>Q(o)||0===e._dayOfYear)&&(f(e)._overflowDayOfYear=!0),n=be(o,0,e._dayOfYear),e._a[li]=n.getUTCMonth(),e._a[ci]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=a[t]=r[t];for(;t<7;t++)e._a[t]=a[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[pi]&&0===e._a[di]&&0===e._a[fi]&&0===e._a[hi]&&(e._nextDay=!0,e._a[pi]=0),e._d=(e._useUTC?be:_e).apply(null,a),i=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[pi]=24),e._w&&void 0!==e._w.d&&e._w.d!==i&&(f(e).weekdayMismatch=!0)}}function ut(e){var t,n,r,i,o,a,s,u;if(t=e._w,null!=t.GG||null!=t.W||null!=t.E)o=1,a=4,n=ot(t.GG,e._a[ui],Se(Et(),1,4).year),r=ot(t.W,1),((i=ot(t.E,1))<1||i>7)&&(u=!0);else{o=e._locale._week.dow,a=e._locale._week.doy;var l=Se(Et(),o,a);n=ot(t.gg,e._a[ui],l.year),r=ot(t.w,l.week),null!=t.d?((i=t.d)<0||i>6)&&(u=!0):null!=t.e?(i=t.e+o,(t.e<0||t.e>6)&&(u=!0)):i=o}r<1||r>ke(n,o,a)?f(e)._overflowWeeks=!0:null!=u?f(e)._overflowWeekday=!0:(s=we(n,r,i,o,a),e._a[ui]=s.year,e._dayOfYear=s.dayOfYear)}function lt(e){var t,n,r,i,o,a,s=e._i,u=zi.exec(s)||ji.exec(s);if(u){for(f(e).iso=!0,t=0,n=Bi.length;t<n;t++)if(Bi[t][1].exec(u[1])){i=Bi[t][0],r=!1!==Bi[t][2];break}if(null==i)return void(e._isValid=!1);if(u[3]){for(t=0,n=Fi.length;t<n;t++)if(Fi[t][1].exec(u[3])){o=(u[2]||" ")+Fi[t][0];break}if(null==o)return void(e._isValid=!1)}if(!r&&null!=o)return void(e._isValid=!1);if(u[4]){if(!Hi.exec(u[4]))return void(e._isValid=!1);a="Z"}e._f=i+(o||"")+(a||""),yt(e)}else e._isValid=!1}function ct(e,t,n,r,i,o){var a=[pt(e),xi.indexOf(t),parseInt(n,10),parseInt(r,10),parseInt(i,10)];return o&&a.push(parseInt(o,10)),a}function pt(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function dt(e){return e.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}function ft(e,t,n){return!e||Ti.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(f(n).weekdayMismatch=!0,n._isValid=!1,!1)}function ht(e,t,n){if(e)return Yi[e];if(t)return 0;var r=parseInt(n,10),i=r%100;return(r-i)/100*60+i}function mt(e){var t=Vi.exec(dt(e._i));if(t){var n=ct(t[4],t[3],t[2],t[5],t[6],t[7]);if(!ft(t[1],n,e))return;e._a=n,e._tzm=ht(t[8],t[9],t[10]),e._d=be.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),f(e).rfc2822=!0}else e._isValid=!1}function gt(e){var n=Ui.exec(e._i);if(null!==n)return void(e._d=new Date(+n[1]));lt(e),!1===e._isValid&&(delete e._isValid,mt(e),!1===e._isValid&&(delete e._isValid,t.createFromInputFallback(e)))}function yt(e){if(e._f===t.ISO_8601)return void lt(e);if(e._f===t.RFC_2822)return void mt(e);e._a=[],f(e).empty=!0;var n,r,i,o,a,s=""+e._i,u=s.length,l=0;for(i=W(e._f,e._locale).match(Hr)||[],n=0;n<i.length;n++)o=i[n],r=(s.match(G(o,e))||[])[0],r&&(a=s.substr(0,s.indexOf(r)),a.length>0&&f(e).unusedInput.push(a),s=s.slice(s.indexOf(r)+r.length),l+=r.length),Ur[o]?(r?f(e).empty=!1:f(e).unusedTokens.push(o),$(o,r,e)):e._strict&&!r&&f(e).unusedTokens.push(o);f(e).charsLeftOver=u-l,s.length>0&&f(e).unusedInput.push(s),e._a[pi]<=12&&!0===f(e).bigHour&&e._a[pi]>0&&(f(e).bigHour=void 0),f(e).parsedDateParts=e._a.slice(0),f(e).meridiem=e._meridiem,e._a[pi]=vt(e._locale,e._a[pi],e._meridiem),st(e),it(e)}function vt(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?(r=e.isPM(n),r&&t<12&&(t+=12),r||12!==t||(t=0),t):t}function _t(e){var t,n,r,i,o;if(0===e._f.length)return f(e).invalidFormat=!0,void(e._d=new Date(NaN));for(i=0;i<e._f.length;i++)o=0,t=g({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],yt(t),h(t)&&(o+=f(t).charsLeftOver,o+=10*f(t).unusedTokens.length,f(t).score=o,(null==r||o<r)&&(r=o,n=t));c(e,n||t)}function bt(e){if(!e._d){var t=z(e._i);e._a=u([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),st(e)}}function xt(e){var t=new y(it(wt(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function wt(e){var t=e._i,r=e._f;return e._locale=e._locale||nt(e._l),null===t||void 0===r&&""===t?m({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),v(t)?new y(it(t)):(s(t)?e._d=t:n(r)?_t(e):r?yt(e):St(e),h(e)||(e._d=null),e))}function St(e){var i=e._i;o(i)?e._d=new Date(t.now()):s(i)?e._d=new Date(i.valueOf()):"string"==typeof i?gt(e):n(i)?(e._a=u(i.slice(0),function(e){return parseInt(e,10)}),st(e)):r(i)?bt(e):a(i)?e._d=new Date(i):t.createFromInputFallback(e)}function kt(e,t,o,a,s){var u={};return!0!==o&&!1!==o||(a=o,o=void 0),(r(e)&&i(e)||n(e)&&0===e.length)&&(e=void 0),u._isAMomentObject=!0,u._useUTC=u._isUTC=s,u._l=o,u._i=e,u._f=t,u._strict=a,xt(u)}function Et(e,t,n,r){return kt(e,t,n,r,!1)}function Tt(e,t){var r,i;if(1===t.length&&n(t[0])&&(t=t[0]),!t.length)return Et();for(r=t[0],i=1;i<t.length;++i)t[i].isValid()&&!t[i][e](r)||(r=t[i]);return r}function Mt(){return Tt("isBefore",[].slice.call(arguments,0))}function Ct(){return Tt("isAfter",[].slice.call(arguments,0))}function Ot(e){for(var t in e)if(-1===yi.call(Zi,t)||null!=e[t]&&isNaN(e[t]))return!1;for(var n=!1,r=0;r<Zi.length;++r)if(e[Zi[r]]){if(n)return!1;parseFloat(e[Zi[r]])!==b(e[Zi[r]])&&(n=!0)}return!0}function At(){return this._isValid}function Pt(){return Jt(NaN)}function Rt(e){var t=z(e),n=t.year||0,r=t.quarter||0,i=t.month||0,o=t.week||0,a=t.day||0,s=t.hour||0,u=t.minute||0,l=t.second||0,c=t.millisecond||0;this._isValid=Ot(t),this._milliseconds=+c+1e3*l+6e4*u+1e3*s*60*60,this._days=+a+7*o,this._months=+i+3*r+12*n,this._data={},this._locale=nt(),this._bubble()}function Dt(e){return e instanceof Rt}function It(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Nt(e,t){F(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+B(~~(e/60),2)+t+B(~~e%60,2)})}function Lt(e,t){var n=(t||"").match(e);if(null===n)return null;var r=n[n.length-1]||[],i=(r+"").match(Ki)||["-",0,0],o=60*i[1]+b(i[2]);return 0===o?0:"+"===i[0]?o:-o}function zt(e,n){var r,i;return n._isUTC?(r=n.clone(),i=(v(e)||s(e)?e.valueOf():Et(e).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+i),t.updateOffset(r,!1),r):Et(e).local()}function jt(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Ht(e,n,r){var i,o=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=Lt(ri,e)))return this}else Math.abs(e)<16&&!r&&(e*=60);return!this._isUTC&&n&&(i=jt(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),o!==e&&(!n||this._changeInProgress?tn(this,Jt(e-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:jt(this)}function Bt(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Ft(e){return this.utcOffset(0,e)}function Ut(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(jt(this),"m")),this}function Vt(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=Lt(ni,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function Yt(e){return!!this.isValid()&&(e=e?Et(e).utcOffset():0,(this.utcOffset()-e)%60==0)}function Wt(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function qt(){if(!o(this._isDSTShifted))return this._isDSTShifted;var e={};if(g(e,this),e=wt(e),e._a){var t=e._isUTC?p(e._a):Et(e._a);this._isDSTShifted=this.isValid()&&x(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Gt(){return!!this.isValid()&&!this._isUTC}function Zt(){return!!this.isValid()&&this._isUTC}function Kt(){return!!this.isValid()&&this._isUTC&&0===this._offset}function Jt(e,t){var n,r,i,o=e,s=null;return Dt(e)?o={ms:e._milliseconds,d:e._days,M:e._months}:a(e)?(o={},t?o[t]=e:o.milliseconds=e):(s=Ji.exec(e))?(n="-"===s[1]?-1:1,o={y:0,d:b(s[ci])*n,h:b(s[pi])*n,m:b(s[di])*n,s:b(s[fi])*n,ms:b(It(1e3*s[hi]))*n}):(s=Xi.exec(e))?(n="-"===s[1]?-1:(s[1],1),o={y:Xt(s[2],n),M:Xt(s[3],n),w:Xt(s[4],n),d:Xt(s[5],n),h:Xt(s[6],n),m:Xt(s[7],n),s:Xt(s[8],n)}):null==o?o={}:"object"==typeof o&&("from"in o||"to"in o)&&(i=Qt(Et(o.from),Et(o.to)),o={},o.ms=i.milliseconds,o.M=i.months),r=new Rt(o),Dt(e)&&l(e,"_locale")&&(r._locale=e._locale),r}function Xt(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function $t(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Qt(e,t){var n;return e.isValid()&&t.isValid()?(t=zt(t,e),e.isBefore(t)?n=$t(e,t):(n=$t(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function en(e,t){return function(n,r){var i,o;return null===r||isNaN(+r)||(k(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=n,n=r,r=o),n="string"==typeof n?+n:n,i=Jt(n,r),tn(this,i,e),this}}function tn(e,n,r,i){var o=n._milliseconds,a=It(n._days),s=It(n._months);e.isValid()&&(i=null==i||i,s&&fe(e,re(e,"Month")+s*r),a&&ie(e,"Date",re(e,"Date")+a*r),o&&e._d.setTime(e._d.valueOf()+o*r),i&&t.updateOffset(e,a||s))}function nn(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function rn(e,n){var r=e||Et(),i=zt(r,this).startOf("day"),o=t.calendarFormat(this,i)||"sameElse",a=n&&(E(n[o])?n[o].call(this,r):n[o]);return this.format(a||this.localeData().calendar(o,this,Et(r)))}function on(){return new y(this)}function an(e,t){var n=v(e)?e:Et(e);return!(!this.isValid()||!n.isValid())&&(t=L(o(t)?"millisecond":t),"millisecond"===t?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())}function sn(e,t){var n=v(e)?e:Et(e);return!(!this.isValid()||!n.isValid())&&(t=L(o(t)?"millisecond":t),"millisecond"===t?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())}function un(e,t,n,r){return r=r||"()",("("===r[0]?this.isAfter(e,n):!this.isBefore(e,n))&&(")"===r[1]?this.isBefore(t,n):!this.isAfter(t,n))}function ln(e,t){var n,r=v(e)?e:Et(e);return!(!this.isValid()||!r.isValid())&&(t=L(t||"millisecond"),"millisecond"===t?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))}function cn(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function pn(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function dn(e,t,n){var r,i,o;if(!this.isValid())return NaN;if(r=zt(e,this),!r.isValid())return NaN;switch(i=6e4*(r.utcOffset()-this.utcOffset()),t=L(t)){case"year":o=fn(this,r)/12;break;case"month":o=fn(this,r);break;case"quarter":o=fn(this,r)/3;break;case"second":o=(this-r)/1e3;break;case"minute":o=(this-r)/6e4;break;case"hour":o=(this-r)/36e5;break;case"day":o=(this-r-i)/864e5;break;case"week":o=(this-r-i)/6048e5;break;default:o=this-r}return n?o:_(o)}function fn(e,t){var n,r,i=12*(t.year()-e.year())+(t.month()-e.month()),o=e.clone().add(i,"months");return t-o<0?(n=e.clone().add(i-1,"months"),r=(t-o)/(o-n)):(n=e.clone().add(i+1,"months"),r=(t-o)/(n-o)),-(i+r)||0}function hn(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function mn(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?Y(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):E(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this._d.valueOf()).toISOString().replace("Z",Y(n,"Z")):Y(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function gn(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var n="["+e+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i=t+'[")]';return this.format(n+r+"-MM-DD[T]HH:mm:ss.SSS"+i)}function yn(e){e||(e=this.isUtc()?t.defaultFormatUtc:t.defaultFormat);var n=Y(this,e);return this.localeData().postformat(n)}function vn(e,t){return this.isValid()&&(v(e)&&e.isValid()||Et(e).isValid())?Jt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function _n(e){return this.from(Et(),e)}function bn(e,t){return this.isValid()&&(v(e)&&e.isValid()||Et(e).isValid())?Jt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function xn(e){return this.to(Et(),e)}function wn(e){var t;return void 0===e?this._locale._abbr:(t=nt(e),null!=t&&(this._locale=t),this)}function Sn(){return this._locale}function kn(e){switch(e=L(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function En(e){return void 0===(e=L(e))||"millisecond"===e?this:("date"===e&&(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))}function Tn(){return this._d.valueOf()-6e4*(this._offset||0)}function Mn(){return Math.floor(this.valueOf()/1e3)}function Cn(){return new Date(this.valueOf())}function On(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function An(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Pn(){return this.isValid()?this.toISOString():null}function Rn(){return h(this)}function Dn(){return c({},f(this))}function In(){return f(this).overflow}function Nn(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Ln(e,t){F(0,[e,e.length],0,t)}function zn(e){return Fn.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function jn(e){return Fn.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Hn(){return ke(this.year(),1,4)}function Bn(){var e=this.localeData()._week;return ke(this.year(),e.dow,e.doy)}function Fn(e,t,n,r,i){var o;return null==e?Se(this,r,i).year:(o=ke(e,r,i),t>o&&(t=o),Un.call(this,e,t,n,r,i))}function Un(e,t,n,r,i){var o=we(e,t,n,r,i),a=be(o.year,0,o.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}function Vn(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function Yn(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function Wn(e,t){t[hi]=b(1e3*("0."+e))}function qn(){return this._isUTC?"UTC":""}function Gn(){return this._isUTC?"Coordinated Universal Time":""}function Zn(e){return Et(1e3*e)}function Kn(){return Et.apply(null,arguments).parseZone()}function Jn(e){return e}function Xn(e,t,n,r){var i=nt(),o=p().set(r,t);return i[n](o,e)}function $n(e,t,n){if(a(e)&&(t=e,e=void 0),e=e||"",null!=t)return Xn(e,t,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=Xn(e,r,n,"month");return i}function Qn(e,t,n,r){"boolean"==typeof e?(a(t)&&(n=t,t=void 0),t=t||""):(t=e,n=t,e=!1,a(t)&&(n=t,t=void 0),t=t||"");var i=nt(),o=e?i._week.dow:0;if(null!=n)return Xn(t,(n+o)%7,r,"day");var s,u=[];for(s=0;s<7;s++)u[s]=Xn(t,(s+o)%7,r,"day");return u}function er(e,t){return $n(e,t,"months")}function tr(e,t){return $n(e,t,"monthsShort")}function nr(e,t,n){return Qn(e,t,n,"weekdays")}function rr(e,t,n){return Qn(e,t,n,"weekdaysShort")}function ir(e,t,n){return Qn(e,t,n,"weekdaysMin")}function or(){var e=this._data;return this._milliseconds=uo(this._milliseconds),this._days=uo(this._days),this._months=uo(this._months),e.milliseconds=uo(e.milliseconds),e.seconds=uo(e.seconds),e.minutes=uo(e.minutes),e.hours=uo(e.hours),e.months=uo(e.months),e.years=uo(e.years),this}function ar(e,t,n,r){var i=Jt(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function sr(e,t){return ar(this,e,t,1)}function ur(e,t){return ar(this,e,t,-1)}function lr(e){return e<0?Math.floor(e):Math.ceil(e)}function cr(){var e,t,n,r,i,o=this._milliseconds,a=this._days,s=this._months,u=this._data;return o>=0&&a>=0&&s>=0||o<=0&&a<=0&&s<=0||(o+=864e5*lr(dr(s)+a),a=0,s=0),u.milliseconds=o%1e3,e=_(o/1e3),u.seconds=e%60,t=_(e/60),u.minutes=t%60,n=_(t/60),u.hours=n%24,a+=_(n/24),i=_(pr(a)),s+=i,a-=lr(dr(i)),r=_(s/12),s%=12,u.days=a,u.months=s,u.years=r,this}function pr(e){return 4800*e/146097}function dr(e){return 146097*e/4800}function fr(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;if("month"===(e=L(e))||"year"===e)return t=this._days+r/864e5,n=this._months+pr(t),"month"===e?n:n/12;switch(t=this._days+Math.round(dr(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}}function hr(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*b(this._months/12):NaN}function mr(e){return function(){return this.as(e)}}function gr(){return Jt(this)}function yr(e){return e=L(e),this.isValid()?this[e+"s"]():NaN}function vr(e){return function(){return this.isValid()?this._data[e]:NaN}}function _r(){return _(this.days()/7)}function br(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function xr(e,t,n){var r=Jt(e).abs(),i=Eo(r.as("s")),o=Eo(r.as("m")),a=Eo(r.as("h")),s=Eo(r.as("d")),u=Eo(r.as("M")),l=Eo(r.as("y")),c=i<=To.ss&&["s",i]||i<To.s&&["ss",i]||o<=1&&["m"]||o<To.m&&["mm",o]||a<=1&&["h"]||a<To.h&&["hh",a]||s<=1&&["d"]||s<To.d&&["dd",s]||u<=1&&["M"]||u<To.M&&["MM",u]||l<=1&&["y"]||["yy",l];return c[2]=t,c[3]=+e>0,c[4]=n,br.apply(null,c)}function wr(e){return void 0===e?Eo:"function"==typeof e&&(Eo=e,!0)}function Sr(e,t){return void 0!==To[e]&&(void 0===t?To[e]:(To[e]=t,"s"===e&&(To.ss=t-1),!0))}function kr(e){if(!this.isValid())return this.localeData().invalidDate();var t=this.localeData(),n=xr(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)}function Er(e){return(e>0)-(e<0)||+e}function Tr(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,r=Mo(this._milliseconds)/1e3,i=Mo(this._days),o=Mo(this._months);e=_(r/60),t=_(e/60),r%=60,e%=60,n=_(o/12),o%=12;var a=n,s=o,u=i,l=t,c=e,p=r?r.toFixed(3).replace(/\.?0+$/,""):"",d=this.asSeconds();if(!d)return"P0D";var f=d<0?"-":"",h=Er(this._months)!==Er(d)?"-":"",m=Er(this._days)!==Er(d)?"-":"",g=Er(this._milliseconds)!==Er(d)?"-":"";return f+"P"+(a?h+a+"Y":"")+(s?h+s+"M":"")+(u?m+u+"D":"")+(l||c||p?"T":"")+(l?g+l+"H":"")+(c?g+c+"M":"")+(p?g+p+"S":"")}var Mr,Cr;Cr=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),n=t.length>>>0,r=0;r<n;r++)if(r in t&&e.call(this,t[r],r,t))return!0;return!1};var Or=t.momentProperties=[],Ar=!1,Pr={};t.suppressDeprecationWarnings=!1,t.deprecationHandler=null;var Rr;Rr=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)l(e,t)&&n.push(t);return n};var Dr={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Ir={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Nr=/\d{1,2}/,Lr={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},zr={},jr={},Hr=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Br=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Fr={},Ur={},Vr=/\d/,Yr=/\d\d/,Wr=/\d{3}/,qr=/\d{4}/,Gr=/[+-]?\d{6}/,Zr=/\d\d?/,Kr=/\d\d\d\d?/,Jr=/\d\d\d\d\d\d?/,Xr=/\d{1,3}/,$r=/\d{1,4}/,Qr=/[+-]?\d{1,6}/,ei=/\d+/,ti=/[+-]?\d+/,ni=/Z|[+-]\d\d:?\d\d/gi,ri=/Z|[+-]\d\d(?::?\d\d)?/gi,ii=/[+-]?\d+(\.\d{1,3})?/,oi=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,ai={},si={},ui=0,li=1,ci=2,pi=3,di=4,fi=5,hi=6,mi=7,gi=8;F("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),F(0,["YY",2],0,function(){return this.year()%100}),F(0,["YYYY",4],0,"year"),F(0,["YYYYY",5],0,"year"),F(0,["YYYYYY",6,!0],0,"year"),N("year","y"),j("year",1),q("Y",ti),q("YY",Zr,Yr),q("YYYY",$r,qr),q("YYYYY",Qr,Gr),q("YYYYYY",Qr,Gr),J(["YYYYY","YYYYYY"],ui),J("YYYY",function(e,n){n[ui]=2===e.length?t.parseTwoDigitYear(e):b(e)}),J("YY",function(e,n){n[ui]=t.parseTwoDigitYear(e)}),J("Y",function(e,t){t[ui]=parseInt(e,10)}),t.parseTwoDigitYear=function(e){return b(e)+(b(e)>68?1900:2e3)};var yi,vi=ne("FullYear",!0);yi=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},F("M",["MM",2],"Mo",function(){return this.month()+1}),F("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),F("MMMM",0,0,function(e){return this.localeData().months(this,e)}),N("month","M"),j("month",8),q("M",Zr),q("MM",Zr,Yr),q("MMM",function(e,t){return t.monthsShortRegex(e)}),q("MMMM",function(e,t){return t.monthsRegex(e)}),J(["M","MM"],function(e,t){t[li]=b(e)-1}),J(["MMM","MMMM"],function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);null!=i?t[li]=i:f(n).invalidMonth=e});var _i=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,bi="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),xi="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),wi=oi,Si=oi;F("w",["ww",2],"wo","week"),F("W",["WW",2],"Wo","isoWeek"),N("week","w"),N("isoWeek","W"),j("week",5),j("isoWeek",5),q("w",Zr),q("ww",Zr,Yr),q("W",Zr),q("WW",Zr,Yr),X(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=b(e)});var ki={dow:0,doy:6};F("d",0,"do","day"),F("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),F("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),F("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),F("e",0,0,"weekday"),F("E",0,0,"isoWeekday"),N("day","d"),N("weekday","e"),N("isoWeekday","E"),j("day",11),j("weekday",11),j("isoWeekday",11),q("d",Zr),q("e",Zr),q("E",Zr),q("dd",function(e,t){return t.weekdaysMinRegex(e)}),q("ddd",function(e,t){return t.weekdaysShortRegex(e)}),q("dddd",function(e,t){return t.weekdaysRegex(e)}),X(["dd","ddd","dddd"],function(e,t,n,r){var i=n._locale.weekdaysParse(e,r,n._strict);null!=i?t.d=i:f(n).invalidWeekday=e}),X(["d","e","E"],function(e,t,n,r){t[r]=b(e)});var Ei="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ti="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Mi="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Ci=oi,Oi=oi,Ai=oi;F("H",["HH",2],0,"hour"),F("h",["hh",2],0,Ye),F("k",["kk",2],0,We),F("hmm",0,0,function(){return""+Ye.apply(this)+B(this.minutes(),2)}),F("hmmss",0,0,function(){return""+Ye.apply(this)+B(this.minutes(),2)+B(this.seconds(),2)}),F("Hmm",0,0,function(){return""+this.hours()+B(this.minutes(),2)}),F("Hmmss",0,0,function(){return""+this.hours()+B(this.minutes(),2)+B(this.seconds(),2)}),qe("a",!0),qe("A",!1),N("hour","h"),j("hour",13),q("a",Ge),q("A",Ge),q("H",Zr),q("h",Zr),q("k",Zr),q("HH",Zr,Yr),q("hh",Zr,Yr),q("kk",Zr,Yr),q("hmm",Kr),q("hmmss",Jr),q("Hmm",Kr),q("Hmmss",Jr),J(["H","HH"],pi),J(["k","kk"],function(e,t,n){var r=b(e);t[pi]=24===r?0:r}),J(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),J(["h","hh"],function(e,t,n){t[pi]=b(e),f(n).bigHour=!0}),J("hmm",function(e,t,n){var r=e.length-2;t[pi]=b(e.substr(0,r)),t[di]=b(e.substr(r)),f(n).bigHour=!0}),J("hmmss",function(e,t,n){var r=e.length-4,i=e.length-2;t[pi]=b(e.substr(0,r)),t[di]=b(e.substr(r,2)),t[fi]=b(e.substr(i)),f(n).bigHour=!0}),J("Hmm",function(e,t,n){var r=e.length-2;t[pi]=b(e.substr(0,r)),t[di]=b(e.substr(r))}),J("Hmmss",function(e,t,n){var r=e.length-4,i=e.length-2;t[pi]=b(e.substr(0,r)),t[di]=b(e.substr(r,2)),t[fi]=b(e.substr(i))});var Pi,Ri=/[ap]\.?m?\.?/i,Di=ne("Hours",!0),Ii={calendar:Dr,longDateFormat:Ir,invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:Nr,relativeTime:Lr,months:bi,monthsShort:xi,week:ki,weekdays:Ei,weekdaysMin:Mi,weekdaysShort:Ti,meridiemParse:Ri},Ni={},Li={},zi=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ji=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Hi=/Z|[+-]\d\d(?::?\d\d)?/,Bi=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Fi=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Ui=/^\/?Date\((\-?\d+)/i,Vi=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Yi={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};t.createFromInputFallback=S("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),t.ISO_8601=function(){},t.RFC_2822=function(){};var Wi=S("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Et.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:m()}),qi=S("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Et.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:m()}),Gi=function(){return Date.now?Date.now():+new Date},Zi=["year","quarter","month","week","day","hour","minute","second","millisecond"];Nt("Z",":"),Nt("ZZ",""),q("Z",ri),q("ZZ",ri),J(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Lt(ri,e)});var Ki=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var Ji=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Xi=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;Jt.fn=Rt.prototype,Jt.invalid=Pt;var $i=en(1,"add"),Qi=en(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var eo=S("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});F(0,["gg",2],0,function(){return this.weekYear()%100}),F(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Ln("gggg","weekYear"),Ln("ggggg","weekYear"),Ln("GGGG","isoWeekYear"),Ln("GGGGG","isoWeekYear"),N("weekYear","gg"),N("isoWeekYear","GG"),j("weekYear",1),j("isoWeekYear",1),q("G",ti),q("g",ti),q("GG",Zr,Yr),q("gg",Zr,Yr),q("GGGG",$r,qr),q("gggg",$r,qr),q("GGGGG",Qr,Gr),q("ggggg",Qr,Gr),X(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=b(e)}),X(["gg","GG"],function(e,n,r,i){n[i]=t.parseTwoDigitYear(e)}),F("Q",0,"Qo","quarter"),N("quarter","Q"),j("quarter",7),q("Q",Vr),J("Q",function(e,t){t[li]=3*(b(e)-1)}),F("D",["DD",2],"Do","date"),N("date","D"),j("date",9),q("D",Zr),q("DD",Zr,Yr),q("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),J(["D","DD"],ci),J("Do",function(e,t){t[ci]=b(e.match(Zr)[0])});var to=ne("Date",!0);F("DDD",["DDDD",3],"DDDo","dayOfYear"),N("dayOfYear","DDD"),j("dayOfYear",4),q("DDD",Xr),q("DDDD",Wr),J(["DDD","DDDD"],function(e,t,n){n._dayOfYear=b(e)}),F("m",["mm",2],0,"minute"),N("minute","m"),j("minute",14),q("m",Zr),q("mm",Zr,Yr),J(["m","mm"],di);var no=ne("Minutes",!1);F("s",["ss",2],0,"second"),N("second","s"),j("second",15),q("s",Zr),q("ss",Zr,Yr),J(["s","ss"],fi);var ro=ne("Seconds",!1);F("S",0,0,function(){return~~(this.millisecond()/100)}),F(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),F(0,["SSS",3],0,"millisecond"),F(0,["SSSS",4],0,function(){return 10*this.millisecond()}),F(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),F(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),F(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),F(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),F(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),N("millisecond","ms"),j("millisecond",16),q("S",Xr,Vr),q("SS",Xr,Yr),q("SSS",Xr,Wr);var io;for(io="SSSS";io.length<=9;io+="S")q(io,ei);for(io="S";io.length<=9;io+="S")J(io,Wn);var oo=ne("Milliseconds",!1);F("z",0,0,"zoneAbbr"),F("zz",0,0,"zoneName");var ao=y.prototype;ao.add=$i,ao.calendar=rn,ao.clone=on,ao.diff=dn,ao.endOf=En,ao.format=yn,ao.from=vn,ao.fromNow=_n,ao.to=bn,ao.toNow=xn,ao.get=oe,ao.invalidAt=In,ao.isAfter=an,ao.isBefore=sn,ao.isBetween=un,ao.isSame=ln,ao.isSameOrAfter=cn,ao.isSameOrBefore=pn,ao.isValid=Rn,ao.lang=eo,ao.locale=wn,ao.localeData=Sn,ao.max=qi,ao.min=Wi,ao.parsingFlags=Dn,ao.set=ae,ao.startOf=kn,ao.subtract=Qi,ao.toArray=On,ao.toObject=An,ao.toDate=Cn,ao.toISOString=mn,ao.inspect=gn,ao.toJSON=Pn,ao.toString=hn,ao.unix=Mn,ao.valueOf=Tn,ao.creationData=Nn,ao.year=vi,ao.isLeapYear=te,ao.weekYear=zn,ao.isoWeekYear=jn,ao.quarter=ao.quarters=Vn,ao.month=he,ao.daysInMonth=me,ao.week=ao.weeks=Ce,ao.isoWeek=ao.isoWeeks=Oe,ao.weeksInYear=Bn,ao.isoWeeksInYear=Hn,ao.date=to,ao.day=ao.days=ze,ao.weekday=je,ao.isoWeekday=He,ao.dayOfYear=Yn,ao.hour=ao.hours=Di,ao.minute=ao.minutes=no,ao.second=ao.seconds=ro,ao.millisecond=ao.milliseconds=oo,ao.utcOffset=Ht,ao.utc=Ft,ao.local=Ut,ao.parseZone=Vt,ao.hasAlignedHourOffset=Yt,ao.isDST=Wt,ao.isLocal=Gt,ao.isUtcOffset=Zt,ao.isUtc=Kt,ao.isUTC=Kt,ao.zoneAbbr=qn,ao.zoneName=Gn,ao.dates=S("dates accessor is deprecated. Use date instead.",to),ao.months=S("months accessor is deprecated. Use month instead",he),ao.years=S("years accessor is deprecated. Use year instead",vi),ao.zone=S("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Bt),ao.isDSTShifted=S("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",qt);var so=C.prototype;so.calendar=O,so.longDateFormat=A,so.invalidDate=P,so.ordinal=R,so.preparse=Jn,so.postformat=Jn,so.relativeTime=D,so.pastFuture=I,so.set=T,so.months=le,so.monthsShort=ce,so.monthsParse=de,so.monthsRegex=ye,so.monthsShortRegex=ge,so.week=Ee,so.firstDayOfYear=Me,so.firstDayOfWeek=Te,so.weekdays=Re,so.weekdaysMin=Ie,so.weekdaysShort=De,so.weekdaysParse=Le,so.weekdaysRegex=Be,so.weekdaysShortRegex=Fe,so.weekdaysMinRegex=Ue,so.isPM=Ze,so.meridiem=Ke,Qe("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===b(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),t.lang=S("moment.lang is deprecated. Use moment.locale instead.",Qe),t.langData=S("moment.langData is deprecated. Use moment.localeData instead.",nt);var uo=Math.abs,lo=mr("ms"),co=mr("s"),po=mr("m"),fo=mr("h"),ho=mr("d"),mo=mr("w"),go=mr("M"),yo=mr("y"),vo=vr("milliseconds"),_o=vr("seconds"),bo=vr("minutes"),xo=vr("hours"),wo=vr("days"),So=vr("months"),ko=vr("years"),Eo=Math.round,To={ss:44,s:45,m:45,h:22,d:26,M:11},Mo=Math.abs,Co=Rt.prototype;return Co.isValid=At,Co.abs=or,Co.add=sr,Co.subtract=ur,Co.as=fr,Co.asMilliseconds=lo,Co.asSeconds=co,Co.asMinutes=po,Co.asHours=fo,Co.asDays=ho,Co.asWeeks=mo,Co.asMonths=go,Co.asYears=yo,Co.valueOf=hr,Co._bubble=cr,Co.clone=gr,Co.get=yr,Co.milliseconds=vo,Co.seconds=_o,Co.minutes=bo,Co.hours=xo,Co.days=wo,Co.weeks=_r,Co.months=So,Co.years=ko,Co.humanize=kr,Co.toISOString=Tr,Co.toString=Tr,Co.toJSON=Tr,Co.locale=wn,Co.localeData=Sn,Co.toIsoString=S("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Tr),Co.lang=eo,F("X",0,0,"unix"),F("x",0,0,"valueOf"),q("x",ti),q("X",ii),J("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),J("x",function(e,t,n){n._d=new Date(b(e))}),t.version="2.20.1",function(e){Mr=e}(Et),t.fn=ao,t.min=Mt,t.max=Ct,t.now=Gi,t.utc=p,t.unix=Zn,t.months=er,t.isDate=s,t.locale=Qe,t.invalid=m,t.duration=Jt,t.isMoment=v,t.weekdays=nr,t.parseZone=Kn,t.localeData=nt,t.isDuration=Dt,t.monthsShort=tr,t.weekdaysMin=ir,t.defineLocale=et,t.updateLocale=tt,t.locales=rt,t.weekdaysShort=rr,t.normalizeUnits=L,t.relativeTimeRounding=wr,t.relativeTimeThreshold=Sr,t.calendarFormat=nn,t.prototype=ao,t.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"},t}()}()}).call(t,n(227)(e))},function(e,t){},function(e,t,n){e.exports=n.p+"apps/roomkey/hotel-details/stay-details/img/arrow.svg"},function(e,t){},function(e,t){},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=n(64),h=i(f).default,m=function(e){function t(){return a(this,t),u(this,e.apply(this,arguments))}return c(t,e),t.prototype.render=function(e){var t=e.description,n=e.type,i=e.rateDescription,o=e.cancellationPolicies,a=e.guaranteesRequired;t=t||h.capitalize(n),a=a||[];var s=o&&o.length||i?"":" full-width",u={__html:t};return r("div",null,r("div",{className:"rk-hotel-room-description"+s},r("h3",null,"Room Description"),r("p",{dangerouslySetInnerHTML:u}),a.length?r("h3",null,"Guarantees Required"):null,a.map(function(e){return r("p",null,e)})),r("div",{className:"rk-policies"},i?r("div",{className:"rk-hotel-rate-description"},r("h3",null,"Rate Description"),r("p",null,i)):null,o&&o.length?r("div",{className:"rk-hotel-room-policies"},r("h3",null,"Cancellation Policies"),r("ul",{className:"policies"},o.map(function(e){return r("li",null,e)}))):null))},t}(d);t.default=m,e.exports=t.default}).call(t,n(0).h)},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=n(204),h=i(f).default,m=n(26),g=m.getHotelRateData;n(560),n(228);var y=function(e){var t=e.props,n=t.hotel,r=t.parentEvent;r&&(e.renderEvent=r.createChildRenderEvent("current-rate",n?g(n):{}))},v=function(e){function t(n){a(this,t);var r=u(this,e.call(this,n));return y(r),r}return c(t,e),t.prototype.render=function(e){var t=e.hotel;if(this.renderEvent){t=t.toJS();var n=t,i=n.rate,o=n.rates,a=n.reservationTelephone,s=n.isLoadingRates,u=i||{},l=u.amount,c=u.inclusive,p=u.currencySymbol,d=u.isLoyalty,f=u.strikethrough,m=u.displayInclusive,g=s?" rk-loader-container ":"",y=o&&i?"":" norate ";return o&&this.renderEvent.record(),r("div",{className:"rk-hotel-detail-booking "+g+y},s?r("div",{className:"rk-loader"}):i?r("div",null,r(h,{className:"rk-rate "+(d?"rk-cugrate":""),rate:i,element:"rate-amount",hotel:t,parentEvent:this.renderEvent},f&&r("div",{className:"rk-struckthrough-rate"},r("span",{className:"rk-rate-currency"},p),r("span",{className:"rk-rate-exclusive"},r("span",{className:"strike"}),f)),l?r("div",{className:"rk-nightly-rate"},r("span",{className:"rk-rate-currency"},p),r("span",{className:"rk-rate-exclusive"},l)):r("p",{className:"rk-no-rate-cvp"},"Too low to show"),c&&r("div",{className:"rk-rate-inclusive"},m?r("span",{className:"rk-rate-fees"},"Includes taxes & fees"):r("span",null,r("span",{className:"rk-rate-taxes"},p,c," with "),r("span",{className:"rk-rate-fees"},"taxes & fees")))),d&&r(h,{className:"rk-cug-label "+(l?"":"rk-cug-direct-link"),rate:i,element:"rate-cug-label",hotel:t,parentEvent:this.renderEvent},!l&&r("span",null,"Click to see",r("br",null)),"Loyalty Member Rate"),r("div",{className:"rk-hotel-detail-booking-info"},r(h,{rate:i,className:"rk-booking-button",element:"book-button",hotel:t,parentEvent:this.renderEvent},r("span",{className:"rk-hotel-card-book-label"},"Book it")),a&&r("div",{className:"rk-booking-messaging"},r("span",{className:"rk-hotel-phone-number"},r("strong",null,"Or call")," ",a)))):r("span",null,"Booking Unavailable"))}},t.prototype.shouldComponentUpdate=function(e,t){var n=e.hotel;return n&&t.hotel&&(!n.get("rates")||!n.get("rates").equals(t.hotel.get("rates"))&&!n.get("rate").equals(t.hotel.get("rate")))},t.prototype.componentWillUpdate=function(e){var t=e.hotel;t&&this.renderEvent.updateData(g(t))},t}(d);t.default=v,e.exports=t.default}).call(t,n(0).h)},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Mrmr=void 0;var i=n(16),o=r(i).default,a=n(1),s=r(a).default,u=n(2),l=r(u).default,c=n(3),p=r(c).default,d=n(0),f=d.Component,h=n(7),m=h.connect,g=n(193),y=r(g).default,v=n(49),_=v.assignExistingRatesToHotels,b=n(220),x=b.getPriceAlerts,w=b.createPriceAlert,S=n(219),k=r(S).default,E=n(14),T=r(E).default,M=n(974),C=r(M).default,O=n(978),A=r(O).default,P=n(499),R=r(P).default,D=n(528),I=r(D).default,N=n(1002),L=r(N).default,z=n(1003),j=r(z).default,H=n(501),B=r(H).default,F=t.Mrmr=function(t){function n(e){s(this,n);var r=l(this,t.call(this,e));return e.getPriceAlerts(),r.setState({stay:e.stay.toJS()}),r.handleStay=r.handleStay.bind(r),r}return p(n,t),n.prototype.componentDidMount=function(){},n.prototype.componentWillReceiveProps=function(e){var t=e.currency,n=e.stay,r=e.assignExistingRatesToHotels,i=!1;n!==this.props.stay&&(r(),this.setState({stay:n.toJS()}),i=!0),t!=this.props.currency&&(i=!0),i&&this.props.getPriceAlerts()},n.prototype.render=function(){var t=this,n=this.props,r=n.hotel,i=n.reservationTelephone,a=n.alert,s=n.parentEvent,u=this.state,l=u.redirect,c=u.stay,p=u.rateAttributes,d=r.get("isLoadingRates"),f=r.get("rates"),h=r.get("rate"),m=h&&h.get("amount"),g=h&&h.toJS();return e("div",null,e("section",{className:L.stayDetailsAndLowestRateContainer},e("div",{className:j.stayDetailsContainer},e(R,o({},c,{onChange:function(e){return t.handleStay(e)}}))),y("price-alerts")&&m&&e("div",null,e("button",{onClick:function(e){return U(t,e)},className:L.priceAlert},a?"See Price Alerts":"Set Price Alert")),d?e("div",{className:L.spinner},e("img",{src:I}),e("span",null,"Loading Rooms & Rates ...")):g?g.amount&&e("div",{className:L.summaryRate},"Rooms starting from ",g.currencySymbol,g.amount,y("price-alerts")&&m&&e("div",null,e(T,{parentEvent:s,element:"manage-alerts-link",href:"/manage-alerts",useRouter:!0,className:B.manageAlerts},"Manage your alerts"))):e("div",{className:L.unavailable},"Rooms currently unavailable for these dates"),i&&e("p",{className:L.reservationTelephone},"Book online or call ",i)),!d&&h&&[y("mrmr-room-filters")&&e(C,{rates:f,rateAttributes:p}),e(A,{hotel:r,rateAttributes:p,parentEvent:s})],l&&e(k,o({parentEvent:s,redirect:l},c)))},n.prototype.handleStay=function(e){var t=this;this.setState({stay:e,redirect:!0},function(){return t.setState({redirect:!1})})},n}(f);t.default=m(function(e){var t=e.get("currency"),n=e.get("stay"),r=e.get("priceAlerts").find(function(r){var i=r.toJS(),o=i.stay,a=o.checkIn,s=o.checkOut,u=o.rooms,l=o.guests,c=o.currency;return o.hotel.udicode===e.get("hotelDetails").get("hotel").get("udicode")&&n.merge({checkIn:a,checkOut:s,rooms:u,guests:l})===n&&c===t});return{currency:t,stay:n,userId:e.get("session").get("identity").get("id"),alert:r}},{assignExistingRatesToHotels:_,createPriceAlert:w,getPriceAlerts:x})(F);var U=function(e,t){t.preventDefault();var n=e.props,r=n.userId,i=n.stay,o=n.createPriceAlert,a=n.hotel,s=n.alert,u=a.get("udicode"),l=a.get("rate"),c=l.get("currency"),p=l.get("amount");s||o(r,u,i,c,p)}}).call(t,n(0).h)},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=n(64),h=i(f).default,m=n(53),g=i(m).default,y=n(75),v=i(y).default,_=n(975),b=i(_).default,x=n(976),w=i(x).default,S=n(977),k=i(S).default,E=function(e){function t(){a(this,t);var n=u(this,e.call(this));return n.handleShowFilters=n.handleShowFilters.bind(n),n.state={showFilters:!1},n}return c(t,e),t.prototype.handleShowFilters=function(){this.setState({showFilters:!this.state.showFilters})},t.prototype.render=function(e){var t=e.rates,n=e.rateAttributes,i=v(["roomType"],this.getFilters(n)),o=[],a=void 0;return t&&t.length&&(a=this.selectDisplayFilters(i,t,n)),a&&h.each(a,function(e){o.push(r(w,{label:e.filterLabel,type:e.filterType,options:e.filterOptions}))}),r("div",{className:k.header},r("h3",{className:k.filtersHeader},r("button",{onClick:this.handleShowFilters},"MRMR Filters")),this.state.showFilters&&r("form",{id:"mrmr-filters"},r("fieldset",null,o)))},t.prototype.selectDisplayFilters=function(e,t,n){var r=this;return h.compact(h.map(e,function(e){var i={roomType:"roomFilter",beds:"bedFilter"},o=r[i[e]||"dynamicFilter"](e,t,n);return o.filterOptions.length?o:void 0}))},t.prototype.roomFilter=function(e,t){var n=g(h.pluck(t,e)),r=this.buildFilterData(e,"Room Type");return n.length>1&&h.each(b.order,function(e){h.contains(n,e)&&r.filterOptions.push({label:b.labels[e],value:e})}),r},t.prototype.bedFilter=function(e,t){var n=g(h.map(t,function(t){return t.optionalAttributes[e]})),r=this.buildFilterData(e,"Available Beds");return h.each(n,function(e){e&&e>1&&r.filterOptions.push({label:e+"+",value:e})}),r},t.prototype.dynamicFilter=function(e,t,n){var r=g(h.map(t,function(t){var n=t.optionalAttributes[e];return h.isUndefined(n)?n:n.toString()})),i=this.buildFilterData(e,n[e].true);return r.length>1&&h.each(h.pick(n[e],r),function(e,t){i.filterOptions.push({label:e,value:t})}),i},t.prototype.buildFilterData=function(e,t){return{filterType:e,filterLabel:t,filterOptions:[]}},t.prototype.getFilters=function(e){var t=e.order,n=h.compact(h.map(e,function(e,t){return t})),r=h.difference(t,n);return h.difference(t,r)},t}(d);t.default=E,e.exports=t.default}).call(t,n(0).h)},function(e,t){e.exports={order:["single","twin","double","full","queen","king","suite","other"],labels:{single:"Single",twin:"Twin",double:"Double",full:"Full",queen:"Queen",king:"King",suite:"Suite",other:"More Room Types"}}},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=function(e){function t(){return a(this,t),u(this,e.apply(this,arguments))}return c(t,e),t.prototype.render=function(e){var t=e.label,n=e.type,i=e.options,o=[];return i.forEach(function(e){o.push(r("option",{value:e.value},e.label))}),r("div",{className:"mrmr-filter"},r("label",null,t),r("div",{className:"rk-select-list icon-angle-down"},r("select",{name:"filter-"+n,className:"filter-"+n,"data-filter-type":n},r("option",{value:"",selected:!0},"No preference"),o)))},t}(d);t.default=f,e.exports=t.default}).call(t,n(0).h)},function(e,t){e.exports={header:"fa48e7e2",filtersHeader:"c04483ce"}},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.RoomDetails=void 0;var i=n(1),o=r(i).default,a=n(2),s=r(a).default,u=n(3),l=r(u).default,c=n(0),p=c.Component,d=n(7),f=d.connect,h=n(979),m=r(h).default,g=n(980),y=r(g).default,v=n(983),_=r(v).default,b=t.RoomDetails=function(t){function n(e){o(this,n);var r=s(this,t.call(this,e));return r.state={fullListings:!1},r.handleShowAll=r.handleShowAll.bind(r),r}return l(n,t),n.prototype.handleShowAll=function(){this.setState(function(e){return{fullListings:!e.fullListings}})},n.prototype.componentWillMount=function(){this.renderEvent=this.props.parentEvent.createChildRenderEvent("rates")},n.prototype.render=function(t,n){var r=t.hotel,i=t.fullList,o=t.shortList,a=t.roomTypesOrder,s=t.roomTypes,u=t.rateAttributes,l=n.fullListings,c=l?i:o,p=this.renderEvent;if(!c||0===c.size)return e("p",null,"Rooms currently unavailable for these dates");var d=null;return c&&(d=a.reduce(function(t,n){var i=c.get(n);return i&&i.size&&t.push(e("li",{key:"room-type-"+s.get(n),className:_.roomTypeBuckets},e("h3",{className:_.roomTypeCategory},s.get(n)),e("ul",{className:_.roomTypeListings},i.toJS().map(function(t){return e(y,{hotel:r,rate:t,rateAttributes:u,key:t.id,parentEvent:p})})))),t},[])),e("section",{className:_.roomDetails},e("ul",null,d),d&&o!==i&&e("button",{className:_.showAllRates,onClick:this.handleShowAll},l?"View top rates":"View all rates",e("img",{className:l?_.up+" "+_.whiteArrow:""+_.whiteArrow,src:m,alt:"","aria-hidden":"true"})))},n}(p);t.default=f(function(e){var t=e.get("hotelDetails");return{roomTypesOrder:t.get("roomTypeOrder"),roomTypes:t.get("roomTypes"),shortList:t.get("shortList"),fullList:t.get("fullList")}})(b)}).call(t,n(0).h)},function(e,t,n){e.exports=n.p+"apps/roomkey/img/white-arrow-down.svg"},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=n(64),h=i(f).default,m=n(981),g=i(m).default,y=n(498),v=i(y).default,_=n(204),b=i(_).default,x=n(982),w=i(x).default,S=n(200),k=(i(S).default,n(26)),E=k.getRateData,T=function(e){function t(n){a(this,t);var r=u(this,e.call(this,n));return r.handleToggleFullDetails=r.handleToggleFullDetails.bind(r),r.emphasizeFree=r.emphasizeFree.bind(r),r.setState({isFullDetails:!1}),r}return c(t,e),t.prototype.componentWillMount=function(){this.renderEvent=this.props.parentEvent.createChildRenderEvent("rate",E(this.props.rate))},t.prototype.render=function(e){var t=e.hotel,n=e.rate,i=e.rateAttributes;this.renderEvent.record();var o=this.renderEvent,a=n.roomDescription,s=n.optionalAttributes,u=n.rateDescription,l=n.guaranteesRequired,c=n.cancellationPenalties,p=n.currencySymbol,d=n.amount,f=n.inclusive,h=n.strikethrough,m=n.strikethroughInclusive,g=n.partnerCode,y=n.savings,_=n.partnerBookButtonLabel,x=n.partnerRewardName,S=n.partnerBenefits,k=n.isLoyalty,E=n.lowestNonQualified,T=this.state.isFullDetails,M={__html:a};return r("li",{className:w.listing},r("div",{className:w.container},r("div",{className:w.first+" "+w.child},r("h4",{className:w.roomHeader,dangerouslySetInnerHTML:M}),r("p",{className:w.optionalAttributes},s&&i&&this.formatOptionalAttributes(s,i)),r("p",{className:w.roomDescription},T&&r("div",{className:w.fullDetailsContent},r("p",{className:w.rateDescription},u),l.length>0&&[r("h5",{className:w.subHeader},"Guarantees Required"),r("ul",{className:w.subList},l.map(function(e){return r("li",null,e)}))],c.length>0&&[r("h5",{className:w.subHeader},"Cancellation Policies"),r("ul",{className:w.subList},c.map(function(e){return r("li",null,e)}))]),r("button",{className:w.toggleDetails,onClick:this.handleToggleFullDetails},T?"Close Details":"Full Details"))),r("div",{className:w.otherSitesRate+" "+w.child},r("h4",{className:w.rateHeaderText},"Other Travel Sites"),r("p",{className:w.tagline},"Expect to pay"),r("p",{className:w.strikeThroughRate},r("span",{className:w.currencySymbol},p),h?r("span",{className:w.strikeThroughAmount},h):k?E:d),r("p",{className:w.inclusiveRate},p,h?m:f," ","w/ taxes & fees")),r("div",{className:h?w.roomKeyRate+" "+w.child:w.roomKeyRate+" "+w.child+" "+w.noStrikeThrough},r("h4",{className:w.rateHeaderText},"Room Key Rate"),d?r("div",null,r("p",{className:w.tagline},y?"Save "+p+y+"/night":"Same Low Rate"),r("p",{className:w.rate},r("span",{className:w.currencySymbol},p),d),r("p",{className:w.inclusiveRate},p,f," w/ taxes & fees.")):r("p",{className:w.tooLow},"Too low to show ",r("span",{className:w.tooLowSub},"Click to see Loyalty Member Rate"))),r("div",{className:w.last+" "+w.child},r(b,{hotel:t,rate:n,className:w.bookButton,parentEvent:o,element:"book-button"},d?"Book it "+p+n.amount:"See Lower Rate",r("span",{className:w.bookButtonBrand},_||g,r("span",{className:w.screenreaderText},"Open in a new window"),r("img",{"aria-hidden":"true",className:w.extLink,alt:"External Link Icon",src:v}))),S&&r("ul",{className:w.bookBrandBenefits},k?[r("li",{className:w.partnerRewardName},x," rate"),r("li",null,"Not a member? Not a problem."),r("li",null,"Sign up for FREE as you book.")]:r("li",{className:w.nonCUGTagline},"Some extra benefits are exclusive to ",r("strong",null,x)," members. Sign up for FREE as you book.")))))},t.prototype.handleToggleFullDetails=function(){this.setState({isFullDetails:!this.state.isFullDetails})},t.prototype.formatOptionalAttributes=function(e,t){var n=t.order,r=[],i=void 0;return h.each(n,function(n){var i=e[n],o=t[n],a=o.display,s=void 0;a&&!h.isUndefined(i)&&(s=o[i.toString()])&&r.push(s)}),i=g(r,", ",", ")||"",this.emphasizeFree(i)},t.prototype.emphasizeFree=function(e){var t=/(\s*\bfree)/gi;return this.wrapWords(e,t,"em")},t.prototype.wrapWords=function(e,t,n){var i=e.split(t);return r("span",null,i.map(function(e){return e.match(t)?r(n,null,e):e}))},t}(d);t.default=T,e.exports=t.default}).call(t,n(0).h)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r){t=t||", ",n=n||" &amp; ";var i=e.slice(),o=i.pop();return e.length>2&&r&&(n=t.replace(/\s*$/,"")+n),i.length?i.join(t)+n+o:o},e.exports=t.default},function(e,t){e.exports={listing:"_93ad074e",container:"_806c9057",child:"_1ae2fb0f",first:"_887479b8",last:"_8c88cece",fullDetailsContent:"_72c2bca8",optionalAttributes:"_5a7217e7",benefits:"f99c41c7",roomHeader:"_93b07216",toggleDetails:"edfa26e3",roomDescription:"_407ee109",rateDescription:"_5e7be016",subHeader:"c30fe8b3",subList:"_06aa8072",bookButton:"_823bb73c",bookButtonBrand:"aff50261",extLink:"b7027580",bookBrandBenefits:"_0449d626",partnerRewardName:"b2f538c1",nonCUGTagline:"_97465b69",otherSitesRate:"_0c6d6465",roomKeyRate:"d87bb07c",noStrikeThrough:"ae4cee85",rate:"bf25e4e9",tagline:"_15e54fff",rateHeaderText:"b38c6e34",currencySymbol:"bf35e074",strikeThroughRate:"_5783264d",strikeThroughAmount:"_6f5268f8",inclusiveRate:"_2d836595",tooLow:"f0d8c804",tooLowSub:"_46f243a0",roomkey:"_03381338",roomkeyRate:"dfd7512b",unavailable:"_2ddf999c",screenreaderText:"_9657a183"}},function(e,t){e.exports={roomDetails:"_1e2a6271",roomTypeCategory:"_9ba39f73",roomTypeBuckets:"f6497a18",roomTypeListings:"_6a4adce5",showAllRates:"_953e1efe",whiteArrow:"ad51f296",up:"f4a6e304"}},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(5),d=i(p).default,f=n(0),h=f.Component,m=n(151),g=i(m).default,y=n(985),v=i(y).default,_=n(986),b=i(_).default,x=function(e){function t(n){a(this,t);var r=u(this,e.call(this,n));return r.handleOpen=r.handleOpen.bind(r),r.handleKeyUp=r.handleKeyUp.bind(r),r.handleCancel=r.handleCancel.bind(r),r.handleSubmit=r.handleSubmit.bind(r),r.state={visible:n.visible},r}return c(t,e),t.prototype.render=function(e){var t=this,n=e.children,i=e.label,o=this.state.visible;return r(g,{className:b.clickOutsideWrapper+" click-outside",onClickOutside:this.handleSubmit},r("section",{className:b.container,onKeyUp:this.handleKeyUp},r("button",{type:"button",className:b.toggleFormButton+" toggle-form-button",onClick:function(){return o?t.handleCancel():t.handleOpen()}},r("img",{className:b.calendar,src:v}),r("span",{className:b.toggleFormButtonLabel},i),o&&r("span",{className:b.whiteBorder})),o&&r("div",{className:b.stayDetails},r("section",{className:b.toggleFormContent},n.map(function(e,t){return r("section",{key:t},d.cloneElement(e))})),r("section",{id:"form-buttons",className:b.toggleFormButtons},r("button",{type:"button",className:b.toggleFormCancel,onClick:this.handleCancel},"Cancel"),r("button",{type:"button",className:b.toggleFormApply,onClick:this.handleSubmit},"Apply")))))},t.prototype.handleOpen=function(){this.setState({visible:!0})},t.prototype.handleKeyUp=function(e){27===e.keyCode&&(e.stopPropagation(),this.handleCancel())},t.prototype.handleCancel=function(){this.setState({visible:!1}),"function"==typeof this.props.onCancel&&this.props.onCancel()},t.prototype.handleSubmit=function(){this.setState({visible:!1}),"function"==typeof this.props.onSubmit&&this.props.onSubmit()},t}(h);t.default=x,e.exports=t.default}).call(t,n(0).h)},function(e,t,n){e.exports=n.p+"apps/roomkey/stay-details/img/icon-calendar.svg"},function(e,t){e.exports={container:"_66a6dfdf",clickOutsideWrapper:"_75196d29",toggleFormContent:"_4dc85f40",toggleFormButton:"a008e088",toggleFormButtonLabel:"a37089be",buttonText:"_3e0f51b0",whiteBorder:"e9a4dd10",stayDetails:"b35f636f",toggleFormButtons:"_013fe296",toggleFormCancel:"f0bf14b0",toggleFormApply:"_42081226",calendar:"_4f558ec6"}},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){var r=!e,i=e&&b.isDayBefore(n,e),o=e&&t;return r||i||o}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(6),s=i(a).default,u=n(1),l=i(u).default,c=n(2),p=i(c).default,d=n(3),f=i(d).default,h=n(0),m=h.Component,g=n(155),y=i(g).default,v=n(988),_=i(v).default,b=v.DateUtils,x=n(997),w=i(x).default,S=function(e){function t(n){l(this,t);var r=p(this,e.call(this,n));return r.handleReset=r.handleReset.bind(r),r.handleDayMouseEnter=r.handleDayMouseEnter.bind(r),r.handleDayClick=r.handleDayClick.bind(r),r.state={},r.setStateFrom(n),r.initialState=s({},r.state),r}return f(t,e),t.prototype.componentWillReceiveProps=function(e){var t=e.checkIn,n=e.checkOut;this.setStateFrom({checkIn:t,checkOut:n})},t.prototype.render=function(){var e=this.state,t=e.from,n=e.enteredTo,i=e.today,o={start:t,end:n},a={before:i},s=[t,{from:t,to:n}];return r("div",{className:w.datePicker},r(_,{className:"Range",numberOfMonths:2,month:this.initialState.from,fixedWeeks:!0,selectedDays:s,disabledDays:a,modifiers:o,onDayClick:this.handleDayClick,onDayMouseEnter:this.handleDayMouseEnter}))},t.prototype.updateState=function(e){this.setState(e);var t=this.props.onChange;this.state.to&&"function"==typeof t&&t({checkIn:y(this.state.from).format("YYYY-MM-DD"),checkOut:y(this.state.to).format("YYYY-MM-DD")})},t.prototype.handleDayClick=function(e){var t=this.state,n=t.from,r=t.to,i=t.today;e<i&&(e=i),o(n,r,e)?this.updateState({from:e,to:null,enteredTo:null}):this.updateState({to:e,enteredTo:e})},t.prototype.handleDayMouseEnter=function(e){var t=this.state;o(t.from,t.to,e)||this.setState({enteredTo:e})},t.prototype.handleReset=function(){this.updateState(this.initialState)},t.prototype.setStateFrom=function(e){var t=e.checkIn,n=e.checkOut,r=k(n),i=k();this.setState({from:k(t),to:r,enteredTo:r,today:i})},t}(m);t.default=S;var k=function(e){return y(e).hour(0).minute(0).second(0).millisecond(0).toDate()};e.exports=t.default}).call(t,n(0).h)},function(e,t,n){var r=n(989),i=n(231),o=n(431),a=n(500),s=n(565),u=n(564),l=n(996);e.exports=r,e.exports.DateUtils=i,e.exports.LocaleUtils=o,e.exports.ModifiersUtils=a,e.exports.WeekdayPropTypes=s.propTypes,e.exports.NavbarPropTypes=u.propTypes,e.exports.PropTypes=l},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ModifiersUtils=t.LocaleUtils=t.DateUtils=t.DayPicker=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(5),d=i(p),f=n(209),h=(i(f),n(992)),m=i(h),g=n(564),y=i(g),v=n(993),_=i(v),b=n(565),x=i(b),w=n(434),S=r(w),k=n(231),E=r(k),T=n(431),M=r(T),C=n(500),O=r(C),A=n(433),P=i(A),R=n(432),D=t.DayPicker=function(e){function t(e){a(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.dayPicker=null,n.showNextMonth=function(e){if(n.allowNextMonth()){var t=n.props.pagedNavigation?n.props.numberOfMonths:1,r=E.addMonths(n.state.currentMonth,t);n.showMonth(r,e)}},n.showPreviousMonth=function(e){if(n.allowPreviousMonth()){var t=n.props.pagedNavigation?n.props.numberOfMonths:1,r=E.addMonths(n.state.currentMonth,-t);n.showMonth(r,e)}},n.handleKeyDown=function(e){switch(e.persist(),e.keyCode){case R.LEFT:n.showPreviousMonth();break;case R.RIGHT:n.showNextMonth();break;case R.UP:n.showPreviousYear();break;case R.DOWN:n.showNextYear()}n.props.onKeyDown&&n.props.onKeyDown(e)},n.handleDayKeyDown=function(e,t,r){switch(r.persist(),r.keyCode){case R.LEFT:S.cancelEvent(r),n.focusPreviousDay(r.target);break;case R.RIGHT:S.cancelEvent(r),n.focusNextDay(r.target);break;case R.UP:S.cancelEvent(r),n.focusPreviousWeek(r.target);break;case R.DOWN:S.cancelEvent(r),n.focusNextWeek(r.target);break;case R.ENTER:case R.SPACE:S.cancelEvent(r),n.props.onDayClick&&n.handleDayClick(e,t,r)}n.props.onDayKeyDown&&n.props.onDayKeyDown(e,t,r)},n.handleDayClick=function(e,t,r){r.persist(),t[n.props.classNames.outside]&&n.props.enableOutsideDaysClick&&n.handleOutsideDayClick(e),n.props.onDayClick&&n.props.onDayClick(e,t,r)},n.handleTodayButtonClick=function(e){var t=new Date,r=new Date(t.getFullYear(),t.getMonth());n.showMonth(r),e.target.blur(),n.props.onTodayButtonClick&&(e.persist(),n.props.onTodayButtonClick(new Date(t.getFullYear(),t.getMonth(),t.getDate()),O.getModifiersForDay(t,n.props.modifiers),e))};var r=n.getCurrentMonthFromProps(e);return n.state={currentMonth:r},n}return u(t,e),c(t,[{key:"componentDidUpdate",value:function(e){if(e.month!==this.props.month&&!E.isSameMonth(e.month,this.props.month)){var t=this.getCurrentMonthFromProps(this.props);this.setState({currentMonth:t})}}},{key:"getCurrentMonthFromProps",value:function(e){var t=S.startOfMonth(e.month||e.initialMonth),n=t;if(e.pagedNavigation&&e.numberOfMonths>1&&e.fromMonth){var r=S.getMonthsDiff(e.fromMonth,n);n=E.addMonths(e.fromMonth,Math.floor(r/e.numberOfMonths)*e.numberOfMonths)}else e.toMonth&&e.numberOfMonths>1&&S.getMonthsDiff(n,e.toMonth)<=0&&(n=E.addMonths(e.toMonth,1-this.props.numberOfMonths));return n}},{key:"getNextNavigableMonth",value:function(){return E.addMonths(this.state.currentMonth,this.props.numberOfMonths)}},{key:"getPreviousNavigableMonth",value:function(){return E.addMonths(this.state.currentMonth,-1)}},{key:"allowPreviousMonth",value:function(){var e=E.addMonths(this.state.currentMonth,-1);return this.allowMonth(e)}},{key:"allowNextMonth",value:function(){var e=E.addMonths(this.state.currentMonth,this.props.numberOfMonths);return this.allowMonth(e)}},{key:"allowMonth",value:function(e){var t=this.props,n=t.fromMonth,r=t.toMonth;return!(!t.canChangeMonth||n&&S.getMonthsDiff(n,e)<0||r&&S.getMonthsDiff(r,e)>0)}},{key:"allowYearChange",value:function(){return this.props.canChangeMonth}},{key:"showMonth",value:function(e,t){var n=this;this.allowMonth(e)&&this.setState({currentMonth:S.startOfMonth(e)},function(){t&&t(),n.props.onMonthChange&&n.props.onMonthChange(n.state.currentMonth)})}},{key:"showNextYear",value:function(){if(this.allowYearChange()){var e=E.addMonths(this.state.currentMonth,12);this.showMonth(e)}}},{key:"showPreviousYear",value:function(){if(this.allowYearChange()){var e=E.addMonths(this.state.currentMonth,-12);this.showMonth(e)}}},{key:"focusFirstDayOfMonth",value:function(){S.getDayNodes(this.dayPicker,this.props.classNames)[0].focus()}},{key:"focusLastDayOfMonth",value:function(){var e=S.getDayNodes(this.dayPicker,this.props.classNames);e[e.length-1].focus()}},{key:"focusPreviousDay",value:function(e){var t=this,n=S.getDayNodes(this.dayPicker,this.props.classNames),r=S.nodeListToArray(n).indexOf(e);-1!==r&&(0===r?this.showPreviousMonth(function(){return t.focusLastDayOfMonth()}):n[r-1].focus())}},{key:"focusNextDay",value:function(e){var t=this,n=S.getDayNodes(this.dayPicker,this.props.classNames),r=S.nodeListToArray(n).indexOf(e);-1!==r&&(r===n.length-1?this.showNextMonth(function(){return t.focusFirstDayOfMonth()}):n[r+1].focus())}},{key:"focusNextWeek",value:function(e){var t=this,n=S.getDayNodes(this.dayPicker,this.props.classNames),r=S.nodeListToArray(n).indexOf(e);r>n.length-8?this.showNextMonth(function(){var e=n.length-r,i=7-e;S.getDayNodes(t.dayPicker,t.props.classNames)[i].focus()}):n[r+7].focus()}},{key:"focusPreviousWeek",value:function(e){var t=this,n=S.getDayNodes(this.dayPicker,this.props.classNames),r=S.nodeListToArray(n).indexOf(e);r<=6?this.showPreviousMonth(function(){var e=S.getDayNodes(t.dayPicker,t.props.classNames);e[e.length-7+r].focus()}):n[r-7].focus()}},{key:"handleOutsideDayClick",value:function(e){var t=this.state.currentMonth,n=this.props.numberOfMonths,r=S.getMonthsDiff(t,e);r>0&&r>=n?this.showNextMonth():r<0&&this.showPreviousMonth()}},{key:"renderNavbar",value:function(){var e=this.props,t=e.labels,n=e.locale,r=e.localeUtils,i=e.canChangeMonth,a=e.navbarElement,s=o(e,["labels","locale","localeUtils","canChangeMonth","navbarElement"]);if(!i)return null;var u={month:this.state.currentMonth,classNames:this.props.classNames,className:this.props.classNames.navBar,nextMonth:this.getNextNavigableMonth(),previousMonth:this.getPreviousNavigableMonth(),showPreviousButton:this.allowPreviousMonth(),showNextButton:this.allowNextMonth(),onNextClick:this.showNextMonth,onPreviousClick:this.showPreviousMonth,dir:s.dir,labels:t,locale:n,localeUtils:r};return d.default.isValidElement(a)?d.default.cloneElement(a,u):d.default.createElement(a,u)}},{key:"renderMonths",value:function(){for(var e=[],t=S.getFirstDayOfWeekFromProps(this.props),n=0;n<this.props.numberOfMonths;n+=1){var r=E.addMonths(this.state.currentMonth,n);e.push(d.default.createElement(_.default,l({key:n},this.props,{month:r,firstDayOfWeek:t,onDayKeyDown:this.handleDayKeyDown,onDayClick:this.handleDayClick})))}return this.props.reverseMonths&&e.reverse(),e}},{key:"renderFooter",value:function(){return this.props.todayButton?d.default.createElement("div",{className:this.props.classNames.footer},this.renderTodayButton()):null}},{key:"renderTodayButton",value:function(){return d.default.createElement("button",{type:"button",tabIndex:0,className:this.props.classNames.todayButton,"aria-label":this.props.todayButton,onClick:this.handleTodayButtonClick},this.props.todayButton)}},{key:"render",value:function(){var e=this,t=this.props.classNames.container;return this.props.onDayClick||(t=t+" "+this.props.classNames.interactionDisabled),this.props.className&&(t=t+" "+this.props.className),d.default.createElement("div",l({},this.props.containerProps,{className:t,ref:function(t){return e.dayPicker=t},lang:this.props.locale}),d.default.createElement("div",{className:this.props.classNames.wrapper,tabIndex:this.props.canChangeMonth&&void 0!==this.props.tabIndex?this.props.tabIndex:-1,onKeyDown:this.handleKeyDown,onFocus:this.props.onFocus,onBlur:this.props.onBlur},this.renderNavbar(),d.default.createElement("div",{className:this.props.classNames.months},this.renderMonths()),this.renderFooter()))}}]),t}(p.Component);D.VERSION="7.1.9",D.defaultProps={classNames:P.default,tabIndex:0,initialMonth:new Date,numberOfMonths:1,labels:{previousMonth:"Previous Month",nextMonth:"Next Month"},locale:"en",localeUtils:M,showOutsideDays:!1,enableOutsideDaysClick:!0,fixedWeeks:!1,canChangeMonth:!0,reverseMonths:!1,pagedNavigation:!1,showWeekNumbers:!1,showWeekDays:!0,renderDay:function(e){return e.getDate()},renderWeek:function(e){return e},weekdayElement:d.default.createElement(x.default,null),navbarElement:d.default.createElement(y.default,{classNames:P.default}),captionElement:d.default.createElement(m.default,{classNames:P.default})},D.propTypes={},D.DateUtils=E,D.LocaleUtils=M,D.ModifiersUtils=O,t.DateUtils=E,t.LocaleUtils=M,t.ModifiersUtils=O,t.default=D},function(e,t,n){"use strict";var r=n(29),i=n(30),o=n(991);e.exports=function(){function e(e,t,n,r,a,s){s!==o&&i(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(5),l=r(u),c=n(209),p=(r(c),n(431)),d=r(p),f=n(432),h=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleKeyUp=n.handleKeyUp.bind(n),n}return a(t,e),s(t,[{key:"shouldComponentUpdate",value:function(e){return e.locale!==this.props.locale||e.classNames!==this.props.classNames||e.date.getMonth()!==this.props.date.getMonth()||e.date.getFullYear()!==this.props.date.getFullYear()}},{key:"handleKeyUp",value:function(e){e.keyCode===f.ENTER&&this.props.onClick(e)}},{key:"render",value:function(){var e=this.props,t=e.classNames,n=e.date,r=e.months,i=e.locale,o=e.localeUtils,a=e.onClick;return l.default.createElement("div",{className:t.caption,role:"heading"},l.default.createElement("div",{onClick:a,onKeyUp:this.handleKeyUp},r?r[n.getMonth()]+" "+n.getFullYear():o.formatMonthTitle(n,i)))}}]),t}(u.Component);h.defaultProps={localeUtils:d.default},t.default=h,h.propTypes={}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(5),c=i(l),p=n(209),d=(i(p),n(994)),f=i(d),h=n(995),m=i(h),g=n(432),y=n(500),v=r(y),_=n(434),b=r(_),x=n(231),w=r(x),S=function(e){function t(){var e,n,r,i;o(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.renderDay=function(e){var t=r.props.month.getMonth(),n=b.getModifiersFromProps(r.props),i=v.getModifiersForDay(e,n);w.isSameDay(e,new Date)&&!Object.prototype.hasOwnProperty.call(n,r.props.classNames.today)&&i.push(r.props.classNames.today),e.getMonth()!==t&&i.push(r.props.classNames.outside);var o=e.getMonth()!==t,a=-1;r.props.onDayClick&&!o&&1===e.getDate()&&(a=r.props.tabIndex);var s=""+e.getFullYear()+e.getMonth()+e.getDate(),u={};return i.forEach(function(e){u[e]=!0}),c.default.createElement(m.default,{key:(o?"outside-":"")+s,classNames:r.props.classNames,day:e,modifiers:u,modifiersStyles:r.props.modifiersStyles,empty:o&&!r.props.showOutsideDays&&!r.props.fixedWeeks,tabIndex:a,ariaLabel:r.props.localeUtils.formatDay(e,r.props.locale),ariaDisabled:o||i.indexOf("disabled")>-1,ariaSelected:i.indexOf("selected")>-1,onClick:r.props.onDayClick,onFocus:r.props.onDayFocus,onKeyDown:r.props.onDayKeyDown,onMouseEnter:r.props.onDayMouseEnter,onMouseLeave:r.props.onDayMouseLeave,onMouseDown:r.props.onDayMouseDown,onMouseUp:r.props.onDayMouseUp,onTouchEnd:r.props.onDayTouchEnd,onTouchStart:r.props.onDayTouchStart},r.props.renderDay(e,u))},i=n,a(r,i)}return s(t,e),u(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.classNames,r=t.month,i=t.months,o=t.fixedWeeks,a=t.captionElement,s=t.weekdayElement,u=t.locale,l=t.localeUtils,p=t.weekdaysLong,d=t.weekdaysShort,h=t.firstDayOfWeek,m=t.onCaptionClick,y=t.showWeekNumbers,v=t.showWeekDays,_=t.onWeekClick,x={date:r,classNames:n,months:i,localeUtils:l,locale:u,onClick:m?function(e){return m(r,e)}:void 0},S=c.default.isValidElement(a)?c.default.cloneElement(a,x):c.default.createElement(a,x),k=b.getWeekArray(r,h,o);return c.default.createElement("div",{className:n.month,role:"grid"},S,v&&c.default.createElement(f.default,{classNames:n,weekdaysShort:d,weekdaysLong:p,firstDayOfWeek:h,showWeekNumbers:y,locale:u,localeUtils:l,weekdayElement:s}),c.default.createElement("div",{className:n.body,role:"rowgroup"},k.map(function(t){var i=void 0;return y&&(i=w.getWeekNumber(t[6])),c.default.createElement("div",{key:t[0].getTime(),className:n.week,role:"row"},y&&c.default.createElement("div",{className:n.weekNumber,tabIndex:0,role:"gridcell",onClick:_?function(e){return _(i,t,e)}:void 0,onKeyUp:_?function(e){return e.keyCode===g.ENTER&&_(i,t,e)}:void 0},e.props.renderWeek(i,t,r)),t.map(e.renderDay))})))}}]),t}(l.Component);t.default=S,S.propTypes={}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(5),l=r(u),c=n(209),p=(r(c),function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"shouldComponentUpdate",value:function(e){return this.props!==e}},{key:"render",value:function(){for(var e=this.props,t=e.classNames,n=e.firstDayOfWeek,r=e.showWeekNumbers,i=e.weekdaysLong,o=e.weekdaysShort,a=e.locale,s=e.localeUtils,u=e.weekdayElement,c=[],p=0;p<7;p+=1){var d=(p+n)%7,f={key:p,className:t.weekday,weekday:d,weekdaysLong:i,weekdaysShort:o,localeUtils:s,locale:a},h=l.default.isValidElement(u)?l.default.cloneElement(u,f):l.default.createElement(u,f);c.push(h)}return l.default.createElement("div",{className:t.weekdays,role:"rowgroup"},l.default.createElement("div",{className:t.weekdaysRow,role:"row"},r&&l.default.createElement("div",{className:t.weekday}),c))}}]),t}(u.Component));t.default=p,p.propTypes={}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n){if(e)return function(r){r.persist(),e(t,n,r)}}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(5),p=r(c),d=n(209),f=(r(d),n(231)),h=n(434),m=n(433),g=r(m),y=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),l(t,[{key:"shouldComponentUpdate",value:function(e){var t=this,n=Object.keys(this.props),r=Object.keys(e);return n.length!==r.length||n.some(function(n){if("modifiers"===n||"modifiersStyles"===n||"classNames"===n){var r=t.props[n],i=e[n],o=Object.keys(r),a=Object.keys(i);return o.length!==a.length||o.some(function(e){return!(0,h.hasOwnProp)(i,e)||r[e]!==i[e]})}return"day"===n?!(0,f.isSameDay)(t.props[n],e[n]):!(0,h.hasOwnProp)(e,n)||t.props[n]!==e[n]})}},{key:"render",value:function(){var e=this.props,t=e.classNames,n=e.modifiersStyles,r=e.day,i=e.tabIndex,o=e.empty,a=e.modifiers,l=e.onMouseEnter,c=e.onMouseLeave,d=e.onMouseUp,f=e.onMouseDown,h=e.onClick,m=e.onKeyDown,y=e.onTouchStart,v=e.onTouchEnd,_=e.onFocus,b=e.ariaLabel,x=e.ariaDisabled,w=e.ariaSelected,S=e.children,k=t.day;t!==g.default?k+=" "+Object.keys(a).join(" "):k+=Object.keys(a).map(function(e){return" "+k+"--"+e}).join("");var E=void 0;return n&&Object.keys(a).filter(function(e){return!!n[e]}).forEach(function(e){E=u({},E,n[e])}),o?p.default.createElement("div",{"aria-disabled":!0,className:k,style:E}):p.default.createElement("div",{className:k,tabIndex:i,style:E,role:"gridcell","aria-label":b,"aria-disabled":x,"aria-selected":w,onClick:s(h,r,a),onKeyDown:s(m,r,a),onMouseEnter:s(l,r,a),onMouseLeave:s(c,r,a),onMouseUp:s(d,r,a),onMouseDown:s(f,r,a),onTouchEnd:s(v,r,a),onTouchStart:s(y,r,a),onFocus:s(_,r,a)},S)}}]),t}(c.Component);y.defaultProps={tabIndex:-1},y.defaultProps={modifiers:{},modifiersStyles:{},empty:!1},t.default=y,y.propTypes={}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModifierPropType=void 0;var r=n(209),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o={localeUtils:i.default.shape({formatMonthTitle:i.default.func,formatWeekdayShort:i.default.func,formatWeekdayLong:i.default.func,getFirstDayOfWeek:i.default.func}),range:i.default.shape({from:i.default.instanceOf(Date),to:i.default.instanceOf(Date)}),after:i.default.shape({after:i.default.instanceOf(Date)}),before:i.default.shape({before:i.default.instanceOf(Date)})};t.ModifierPropType=i.default.oneOfType([o.after,o.before,o.range,i.default.func,i.default.array]),t.default=o},function(e,t){e.exports={datePicker:"f1ed4c36","DayPicker-Months":"_3d1ff295"}},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=n(999),h=i(f).default,m=n(1001),g=i(m).default,y=function(e){function t(n){a(this,t);var r=u(this,e.call(this,n));r.setGuests=r.setGuests.bind(r),r.setRooms=r.setRooms.bind(r);var i=n.rooms,o=n.guests;return r.state={rooms:i,guests:o},r}return c(t,e),t.prototype.componentWillReceiveProps=function(e){var t=e.rooms,n=e.guests;this.setState({rooms:t,guests:n})},t.prototype.render=function(){var e=this.state,t=e.rooms,n=e.guests;return r("div",{className:g.stepperContainer},r(h,{label:"Rooms",value:t,min:1,max:4,onChange:this.setRooms}),r(h,{label:"Guests",value:n,min:1,max:16,onChange:this.setGuests}))},t.prototype.setGuests=function(e){var t=this.state.rooms,n=parseInt(e),r=Math.ceil(n/4);t>n&&(t=n),t<r&&(t=r),this.updateState({rooms:t,guests:n})},t.prototype.setRooms=function(e){var t=this.state.guests,n=parseInt(e),r=4*n;t<n&&(t=n),t>r&&(t=r),this.updateState({rooms:n,guests:t})},t.prototype.updateState=function(e){var t=e.rooms,n=e.guests;this.setState({rooms:t,guests:n});var r=this.props.onChange;"function"==typeof r&&r({rooms:t,guests:n})},t}(d);t.default=y,e.exports=t.default}).call(t,n(0).h)},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=n(546),h=i(f).default,m=n(1e3),g=i(m).default,y=function(e){function t(n){a(this,t);var r=u(this,e.call(this,n)),i=n.value;return r.state={labelId:h(),value:i},r}return c(t,e),t.prototype.render=function(e){var t=this,n=e.label,i=e.min,o=e.max,a=this.state,s=a.labelId,u=a.value;return r("div",{className:""+g.stepper},r("div",{className:g.subContainer},r("label",{className:g.detailsInputLabel,for:s},n),r("button",{type:"button",className:g.left,onClick:function(){return t.setValue(u-1)}},"-"),r("input",{type:"number",id:s,placeholder:"",min:i,max:o,value:u,onKeyUp:function(e){return t.setValue(e.target.value)},onChange:function(e){return t.setValue(e.target.value)},onBlur:function(){return t.resetValue()}}),r("button",{type:"button",className:g.right,onClick:function(){return t.setValue(u+1)}},"+")))},t.prototype.componentWillReceiveProps=function(e){var t=e.value,n=e.min,r=e.max,i=e.onChange;t=parseInt(t),t<n&&(t=n),t>r&&(t=r);var o=this.state.value;this.setState({value:t}),t!==o&&"function"==typeof i&&i(t)},t.prototype.setValue=function(e){var t=this.props,n=t.min,r=t.max,i=t.onChange,o=parseInt(e);""!=o&&o==e&&(o>r&&(o=r),o<n&&(o=n),this.setState({value:o}),"function"==typeof i&&i(o))},t.prototype.resetValue=function(){this.setState({value:this.state.value})},t}(d);t.default=y,e.exports=t.default}).call(t,n(0).h)},function(e,t){e.exports={stepper:"_0214b1d5",subContainer:"ab4c7d36",left:"_43e1e3b0",right:"_9035379c"}},function(e,t){e.exports={stepperContainer:"df64757a"}},function(e,t){e.exports={stayDetailsAndLowestRateContainer:"a7cec703",summaryRate:"fd645dfd",unavailable:"_98556dd9",spinner:"_9f4cb48d",spin:"_7b0f75fe",reservationTelephone:"dc67f6be"}},function(e,t){e.exports={stayDetailsContainer:"_223b3e28"}},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=n(1005),h=i(f).default,m=n(17),g=i(m).default,y=n(221),v=i(y).default,_=n(566),b=i(_).default,x=function(e){function t(){return a(this,t),u(this,e.apply(this,arguments))}return c(t,e),t.prototype.render=function(e){var t=this,n=e.hotel,i=n.lat,o=n.lng,a=n.name,s=n.address,u=s.line1,l=s.city,c=s.regionName,p=s.countryName;return r("div",{className:"rk-hotel-detail-page-map"},r(g,null,r("div",{className:"rk-hotel-detail-map-address-block"},a&&r("p",{className:"rk-hotel-detail-name"},a),p&&r("p",{className:"rk-hotel-detail-address"},u,", ",l,", ",c,", ",p))),i&&o&&r(b,{className:"map",onRender:function(e){return w(t,e)},options:{center:[o,i],zoom:16}}))},t}(d);t.default=x;var w=function(e,t){var n=e.props,r=n.parentEvent,i=n.hotel,o=i.lat,a=i.lng;r.createChildRenderEvent("map").record(),t.scrollZoom.disable(),t.addControl(new v.NavigationControl({showCompass:!1}));var s=document.createElement("div");s.style.backgroundImage="url("+h+")",s.style.width="20px",s.style.height="26px",new v.Marker(s).setLngLat([a,o]).addTo(t)};e.exports=t.default}).call(t,n(0).h)},function(e,t,n){e.exports=n.p+"apps/roomkey/hotel-details/img/pin.svg"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(185),i=function(e){return e&&e.__esModule?e:{default:e}}(r).default;t.default=i,e.exports=t.default},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=n(118),h=i(f).default,m=n(17),g=i(m).default,y=n(1008),v=i(y).default,_=n(1009),b=i(_).default,x=n(1010),w=i(x).default,S=function(e){function t(){return a(this,t),u(this,e.apply(this,arguments))}return c(t,e),t.prototype.componentWillMount=function(){this.renderEvent=this.props.parentEvent.createChildRenderEvent("page-not-found")},t.prototype.render=function(){return this.renderEvent.record(),r("div",{className:v.container},r(g,null,r(h,{parentEvent:this.renderEvent},r("img",{className:v.logo,src:w,alt:"Logo"}),r("img",{className:v.art,src:b,alt:"Art"}))))},t}(d);t.default=S,e.exports=t.default}).call(t,n(0).h)},function(e,t){e.exports={container:"_54c6f8fa",logo:"c193d88c",art:"_16e86a85"}},function(e,t,n){e.exports=n.p+"apps/roomkey/img/404_01.png"},function(e,t,n){e.exports=n.p+"apps/roomkey/img/logo-blue.svg"},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return e?(e=e.toJS(),e.id,"There was an error creating your profile."):null}Object.defineProperty(t,"__esModule",{value:!0}),t.Register=void 0;var o=n(1),a=r(o).default,s=n(2),u=r(s).default,l=n(3),c=r(l).default,p=n(0),d=p.Component,f=n(7),h=f.connect,m=n(39),g=r(m).default,y=n(14),v=r(y).default,_=n(40),b=_.register,x=_.clearError,w=n(411),S=r(w).default,k=n(425),E=r(k).default,T=n(205),M=r(T).default,C=n(116),O=r(C).default,A=n(71),P=r(A).default,R=n(68),D=r(R).default,I=n(567),N=r(I).default,L=n(412),z=r(L).default,j=n(232),H=r(j).default,B=n(17),F=r(B).default,U=t.Register=function(t){function n(e){a(this,n);var r=u(this,t.call(this,e));return r.state={isSubscribed:!0},r.handleIsSubscribedClick=r.handleIsSubscribedClick.bind(r),r.handleInputChange=r.handleInputChange.bind(r),r.handleInputFocus=r.handleInputFocus.bind(r),r.handleSubmit=r.handleSubmit.bind(r),r}return c(n,t),n.prototype.handleIsSubscribedClick=function(e){e.preventDefault(),this.handleInputFocus(),this.setState(function(e){return{isSubscribed:!e.isSubscribed}})},n.prototype.handleInputChange=function(e){var t,n=e.target,r=n.name,i=n.value;this.setState((t={},t[r]=i,t))},n.prototype.handleInputFocus=function(){this.setState({emailError:null,passwordError:null,repeatPasswordError:null})},n.prototype.handleSubmit=function(e,t){var n=this;e.preventDefault();var r=this.state,i=r.email,o=r.password,a=r.repeatPassword,s=r.isSubscribed,u=/(?:[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/i;if(this.setState({emailError:i?i.match(u)?null:"Enter a valid email":"Field required",passwordError:o?o.length<6?"Password must be at least 6 characters long":null:"Field required",repeatPasswordError:a?a!==o?"Passwords do not match":null:"Field required"}),!(this.state.emailError||this.state.passwordError||this.state.repeatPasswordError||this.props.processing)){var l=t.createChildEngagementEvent("register-form","submit");l.record().then(function(){n.props.register(i,o,s,l)})}},n.prototype.componentWillMount=function(){this.setState({renderEvent:this.props.parentEvent.createChildRenderEvent("regsiter")})},n.prototype.componentWillUnmount=function(){this.props.error&&this.props.clearError()},n.prototype.render=function(t,n){var r=this,o=t.previousLocation,a=t.nextLocation,s=t.processing,u=t.error,l=n.renderEvent,c=n.isSubscribed,p=n.email,d=n.password,f=n.repeatPassword,h=n.emailError,m=n.passwordError,y=n.repeatPasswordError,_=i(u),b=S(o);return l.record(),e(O,{redirect:a.toJS()},e("div",{className:H.container},e(P,{parentEvent:l}),e(F,null,e("div",{className:H.page,id:"register-page"},E.oauth&&e(N,{preposition:"up"}),e("form",{onSubmit:function(e){r.handleSubmit(e,l)},className:H.form},b&&e(v,{href:b,parentEvent:l,className:H.backToLink},e("img",{src:z}),e("span",null,"Back to previous page")),E.oauth?e("h3",null,e("span",null,"Or, sign up with your email address")):e("h1",null,"Register"),_&&e("p",{id:"error",className:H.errorMessage},_),e("p",null,e("label",{for:"email"},"Email address"),e("input",{id:"email",name:"email",type:"text",placeholder:"name@example.com",value:p,className:h&&H.inputError,onFocus:this.handleInputFocus,onChange:this.handleInputChange}),h&&e("span",{id:"emailError",className:H.inputErrorMessage},h)),e("p",null,e("label",{for:"password"},"Password"),e("input",{id:"password",name:"password",type:"password",value:d,className:m&&H.inputError,onFocus:this.handleInputFocus,onChange:this.handleInputChange}),m&&e("span",{id:"passwordError",className:H.inputErrorMessage},m)),e("p",null,e("label",{for:"repeatPassword"},"Repeat Password"),e("input",{id:"repeatPassword",name:"repeatPassword",type:"password",value:f,className:y&&H.inputError,onFocus:this.handleInputFocus,onChange:this.handleInputChange}),y&&e("span",{id:"repeatPasswordError",className:H.inputErrorMessage},y)),e("p",{className:H.switch+" "+(c?H.switchOn:"")},e("label",{for:"isSubscribed",onClick:this.handleIsSubscribedClick},e("input",{id:"isSubscribed",name:"isSubscribed",type:"checkbox",checked:c}),e("span",null,"Send me occasional emails informing me of hotel deals and other promotions."))),e("p",{className:H.lastrow},e("button",{type:"submit",id:"register-submit"},s?"Please wait":"Register",s&&e("img",{src:M})),e(v,{parentEvent:l,href:"/login",id:"register-link-login"},"Already have account? Log in")),e("p",{className:H.fineprint},e("span",null,"By registering, I agree to Room Key’s "),e(v,{parentEvent:l,href:"/termsofuse",target:"_blank",element:"register-link-terms",id:"register-link-terms"},"Terms of Use"),e("span",null," and "),g("uk")?e(v,{parentEvent:l,href:"/privacyuk",target:"_blank",element:"register-link-privacyuk",id:"register-link-privacyuk"},"Privacy Statement"):e(v,{parentEvent:l,href:"/privacystatement",target:"_blank",element:"register-link-privacy",id:"register-link-privacy"},"Privacy Statement"),e("span",null,"."))))),e(D,{parentEvent:l})))},n}(d);t.default=h(function(e){var t=e.get("session");return{previousLocation:t.get("previousLocation"),nextLocation:t.get("nextLocation"),processing:t.get("processing"),error:t.get("error")}},{register:b,clearError:x})(U)}).call(t,n(0).h)},function(e,t,n){e.exports=n.p+"apps/roomkey/img/icon-google.svg"},function(e,t,n){e.exports=n.p+"apps/roomkey/img/icon-facebook-white.svg"},function(e,t){e.exports={row:"a641450f",col:"_89c04475",link:"_5d804cc0",facebook_logo:"_0fe81f1d",google_logo:"fff1ef75",facebook_text:"be647a1f",google_text:"cad92e2c"}},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Registered=void 0;var i=n(1),o=r(i).default,a=n(2),s=r(a).default,u=n(3),l=r(u).default,c=n(0),p=c.Component,d=n(7),f=d.connect,h=n(37),m=h.login,g=h.profile,y=n(411),v=r(y).default,_=n(26),b=_.createRecordedEvent,x=_.setRenderParent,w=n(14),S=r(w).default,k=n(51),E=r(k).default,T=n(146),M=r(T).default,C=n(71),O=r(C).default,A=n(68),P=r(A).default,R=n(412),D=r(R).default,I=n(232),N=r(I).default,L=n(17),z=r(L).default,j=t.Registered=function(t){function n(){return o(this,n),s(this,t.apply(this,arguments))}return l(n,t),n.prototype.componentWillMount=function(){var e=this.props.identity&&this.props.identity.get("eventParentId");e&&x("registered",b(e)),this.setState({renderEvent:this.props.parentEvent.createChildRenderEvent("registered")})},n.prototype.render=function(t){var n=t.previousLocation,r=t.identity,i=this.state.renderEvent,o=v(n);return i.record(),e(E,{redirect:m},e(M,{redirect:g,push:!1},e("div",null,e(O,{parentEvent:i}),e("div",{className:N.form,id:"registered-page"},e(z,null,e("div",{className:N.page},e("h1",null,"Thank you for creating a Room Key account."),e("p",null,"We've sent you a message to ",e("em",null,r.get("emailAddress")),"."),e("p",null,"Please click the link in the email to confirm your account."),o&&e("p",null,e(S,{id:"registered-back-to-link",href:o,parentEvent:i,className:N.backToLink},e("img",{src:D}),e("span",null,"Back to previous page")))))),e(P,{parentEvent:i}))))},n}(p);t.default=f(function(e){var t=e.get("session");return{previousLocation:t.get("previousLocation"),identity:t.get("identity")}})(j)}).call(t,n(0).h)},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e)switch(e=e.toJS(),e.id){case 401:return"Incorrect username or password.";default:return"There was an error updating your profile."}return null}Object.defineProperty(t,"__esModule",{value:!0}),t.Profile=void 0;var o=n(1),a=r(o).default,s=n(2),u=r(s).default,l=n(3),c=r(l).default,p=n(0),d=p.Component,f=n(7),h=f.connect,m=n(38),g=r(m).default,y=n(40),v=y.load,_=y.updateEmailAddress,b=y.updatePassphrase,x=y.updateProfile,w=y.sendVerification,S=y.clearError,k=n(25),E=k.clearWorkflow,T=n(37),M=T.login,C=n(411),O=r(C).default,A=n(205),P=r(A).default,R=n(14),D=r(R).default,I=n(51),N=r(I).default,L=n(146),z=r(L).default,j=n(71),H=r(j).default,B=n(68),F=r(B).default,U=n(412),V=r(U).default,Y=n(232),W=r(Y).default,q=n(1017),G=r(q).default,Z=n(17),K=r(Z).default,J=t.Profile=function(t){function n(e){a(this,n);var r=u(this,t.call(this,e));return r.handleInputChange=r.handleInputChange.bind(r),r.handleInputFocus=r.handleInputFocus.bind(r),r.handleIsSubscribedClick=r.handleIsSubscribedClick.bind(r),r.handleEmailSubmit=r.handleEmailSubmit.bind(r),r.handlePasswordSubmit=r.handlePasswordSubmit.bind(r),r.handleSendVerification=r.handleSendVerification.bind(r),r.setState({loading:!0,sendingVerification:!1,resettingPassword:!1,email:e.emailAddress,isSubscribed:e.isSubscribed,passwordForEmail:null,oldPassword:null,password:null,repeatPassword:null,currentSubmit:"email",success:!1,hasRefMessage:null}),r}return c(n,t),n.prototype.handleIsSubscribedClick=function(e){var t=this;e.preventDefault(),this.props.processing||(this.handleInputFocus(),this.setState(function(e){var n=!e.isSubscribed;return t.props.updateProfile({isSubscribed:n}),{isSubscribed:n,currentSubmit:"subscription",success:!1}}))},n.prototype.handleInputFocus=function(){this.setState({emailError:null,oldPasswordError:null,passwordForEmailError:null,passwordError:null,repeatPasswordError:null})},n.prototype.handleInputChange=function(e){var t,n=e.target,r=n.name,i=n.value;this.setState((t={},t[r]=i,t))},n.prototype.handleEmailSubmit=function(e){if(e.preventDefault(),!this.props.processing){var t=this.props,n=t.emailAddress,r=t.requirePassword,i=this.state,o=i.passwordForEmail,a=i.email,s=!r||o&&0!==o.length?null:"Current password must be at least one character long",u=/(?:[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/i,l=a?a==n?"Same email entered":a.match(u)?null:"Enter a valid email":"Field required";this.setState({emailError:l,passwordForEmailError:s,currentSubmit:"email",success:!1}),l||s||this.props.updateEmailAddress(a,o)}},n.prototype.handlePasswordSubmit=function(e){if(e.preventDefault(),!this.props.processing){var t=this.props.requirePassword,n=this.state,r=n.oldPassword,i=n.password,o=n.repeatPassword,a=t&&(!r||r.length<6)?"Current password must be at least 6 characters long":null,s=!i||i.length<6?"Password must be at least 6 characters long":i==r?"New and current password are the same":null,u=o!==i?"Passwords do not match":null;this.setState({oldPasswordError:a,passwordError:s,repeatPasswordError:u,resettingPassword:!t,currentSubmit:"password",success:!1}),a||s||u||this.props.updatePassphrase(i,r)}},n.prototype.handleSendVerification=function(e){e.preventDefault(),this.props.processing||(this.setState({sendingVerification:!0,currentSubmit:"verification",success:!1}),this.props.sendVerification())},n.prototype.componentWillMount=function(){this.renderEvent=this.props.parentEvent.createChildRenderEvent("profile")},n.prototype.componentDidMount=function(){this.props.isLoggedIn&&this.props.load();var e=g(),t=e.ref;t&&this.setState({hasRefMessage:t})},n.prototype.componentWillReceiveProps=function(e){var t=e.emailAddress,n=e.processing,r=e.error,i=this.props.processing&&!n;r?this.setState({success:!1}):n?this.setState({success:!1}):i&&this.setState(function(e){var n=e.loading,r=e.sendingVerification,i=e.resettingPassword,o=e.isSubscribed,a={loading:!1,email:t,isSubscribed:o,oldPassword:null,passwordForEmail:null,password:null,repeatPassword:null,sendingVerification:!1,wasVerificationSent:r,wasPasswordReset:i};return n||(a.success=!0),a})},n.prototype.componentWillUnmount=function(){var e=this.props,t=e.isLoggedIn,n=e.error,r=e.clearError,i=e.clearWorkflow;t&&(n&&r(),i("verify-email"))},n.prototype.getSuccessMessage=function(){var e=this.state,t=e.success,n=e.currentSubmit,r=e.wasVerificationSent,i=e.wasPasswordReset,o=e.isSubscribed;if(t)switch(n){case"verification":case"email":return"Email "+(r?"sent":"changed")+".";case"password":return"Password "+(i?"saved":"changed")+".";case"subscription":return(o?"Subscribed":"Unsubscribed")+".";default:return null}},n.prototype.render=function(t,n){var r=t.requirePassword,o=t.emailAddress,a=t.processing,s=t.error,u=t.previousLocation,l=t.workflow,c=n.isSubscribed,p=n.email,d=n.oldPassword,f=n.password,h=n.repeatPassword,m=n.passwordForEmail,g=n.emailError,y=n.oldPasswordError,v=n.passwordError,_=n.repeatPasswordError,b=n.passwordForEmailError,x=n.success,w=n.hasRefMessage,S=i(s),k=this.getSuccessMessage(),E=this.renderEvent,T=O(u);return E.record(),e(N,{redirect:M},e("div",{className:W.container},e(H,{parentEvent:E}),e(K,null,e("div",{className:W.page,id:"profile-page"},"subscribed"===w&&e("div",null,e("h2",{className:G.emailAddress},p),e("div",{className:G.subscribeMessage},"Please select your contact preference below."),e("form",{className:W.form},e("p",{className:W.switch+" "+(c?W.switchOn:"")},e("label",{for:"isSubscribed",onClick:this.handleIsSubscribedClick},e("input",{id:"isSubscribed",name:"isSubscribed",type:"checkbox",checked:c}),e("span",null,"Send me occasional emails informing me of hotel deals and other promotions."))))),"unsubscribed"===w&&e("div",null,e("h2",{className:G.emailAddress},p),e("div",{className:G.unsubscribeMessage},"Please select your contact preference below."),e("form",{className:W.form},e("p",{className:W.switch+" "+(c?W.switchOn:"")},e("label",{for:"isSubscribed",onClick:this.handleIsSubscribedClick},e("input",{id:"isSubscribed",name:"isSubscribed",type:"checkbox",checked:c}),e("span",null,"Send me occasional emails informing me of hotel deals and other promotions."))))),!w&&[e("form",{className:W.form},T&&e(D,{href:T,parentEvent:E,className:W.backToLink},e("img",{src:V}),e("span",null,"Back to previous page")),e("h1",null,"Your Profile"),e(z,null,e("p",{className:W.message,id:"verify-email-message"},"We’ve sent an email to ",e("em",null,o),". Please click the link in the email to confirm your account. ",e("a",{href:"#",id:"send-verification",onClick:this.handleSendVerification},"Resend Link"))),"verify-email"===l&&e("p",{className:W.successMessage,id:"verified-email-message"},"Account confirmed."),"forgot-password"===l&&e("p",{className:W.successMessage,id:"password-reset-message"},"Your password has been reset. Enter a new password and click Save."),S?e("p",{id:"error",className:W.errorMessage},S):x&&e("p",{id:"success",className:W.successMessage},k),e("fieldset",{className:W.email},e("h2",null,"Email"),e("p",{className:W.editField},e("input",{id:"email",name:"email",type:"email",placeholder:"name@example.com",value:p,className:g&&W.inputError,onFocus:this.handleInputFocus,onChange:this.handleInputChange}),g&&e("span",{id:"emailError",className:W.inputErrorMessage},g)),e("p",{className:W.editField},e("input",{className:b&&W.inputPassforEmail,name:"passwordForEmail",id:"passwordForEmail",placeholder:"Enter your password",type:"password",value:m,onFocus:this.handleInputFocus,onChange:this.handleInputChange}),b&&e("span",{id:"passwordForEmailError",className:W.inputErrorMessage},b),e("button",{id:"emailSubmit",type:"submit",onClick:this.handleEmailSubmit},a?"Please wait":"Update",a&&e("img",{src:P}))))),e("form",{className:W.form},e("fieldset",{className:W.password},e("h2",null,"Password"),e("div",null,r&&e("p",{className:W.editField},e("label",{for:"oldPassword"},"Current Password"),e("input",{id:"oldPassword",name:"oldPassword",type:"password",value:d,className:y&&W.inputError,onFocus:this.handleInputFocus,onChange:this.handleInputChange}),y&&e("span",{id:"oldPasswordError",className:W.inputErrorMessage},y)),e("p",{className:W.editField},e("label",{for:"password"},"New Password"),e("input",{id:"password",name:"password",type:"password",value:f,className:v&&W.inputError,onFocus:this.handleInputFocus,onChange:this.handleInputChange}),v&&e("span",{id:"passwordError",className:W.inputErrorMessage},v)),e("p",{className:W.editField},e("label",{for:"repeatPassword"},"Repeat New Password"),e("input",{id:"repeatPassword",name:"repeatPassword",type:"password",value:h,className:_&&W.inputError,onFocus:this.handleInputFocus,onChange:this.handleInputChange}),_&&e("span",{id:"repeatPasswordError",className:W.inputErrorMessage},_),e("button",{id:"passwordSubmit",type:"submit",onClick:this.handlePasswordSubmit},a?"Please wait":r?"Change":"Save",a&&e("img",{src:P}))))),e("p",{className:W.switch+" "+(c?W.switchOn:"")},e("label",{for:"isSubscribed",onClick:this.handleIsSubscribedClick},e("input",{id:"isSubscribed",name:"isSubscribed",type:"checkbox",checked:c}),e("span",null,"Send me occasional emails informing me of hotel deals and other promotions."))))])),e(F,{parentEvent:E})))},n}(d);t.default=h(function(e){var t=e.get("session"),n=t.get("identity");return{previousLocation:t.get("previousLocation"),processing:t.get("processing"),error:t.get("error"),isLoggedIn:t.get("isLoggedIn"),workflow:t.get("workflow"),requirePassword:!n.get("isPassphraseLess"),emailAddress:n.get("emailAddress"),isSubscribed:n.get("isSubscribed")}},{load:v,updateEmailAddress:_,updatePassphrase:b,updateProfile:x,sendVerification:w,clearError:S,clearWorkflow:E})(J)}).call(t,n(0).h)},function(e,t){e.exports={emailAddress:"_773cfa18",subscribeMessage:"f5b9c1a2",unsubscribeMessage:"_30c154fb"}},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ManageAlerts=void 0;var i=n(1),o=r(i).default,a=n(2),s=r(a).default,u=n(3),l=r(u).default,c=n(0),p=c.Component,d=n(7),f=d.connect,h=n(37),m=h.login,g=n(14),y=r(g).default,v=n(1019),_=r(v).default,b=n(71),x=r(b).default,w=n(68),S=r(w).default,k=n(51),E=r(k).default,T=n(17),M=r(T).default,C=n(220),O=C.getPriceAlerts,A=n(501),P=r(A).default,R=t.ManageAlerts=function(t){function n(e){o(this,n);var r=s(this,t.call(this,e)),i=r.props,a=i.userId;return(0,i.getPriceAlerts)(a),r.renderEvent=r.props.parentEvent.createChildRenderEvent("manage-alerts"),r}return l(n,t),n.prototype.render=function(){var t=this,n=this.props.priceAlerts;return e(E,{redirect:m},e("div",{className:P.container},e(x,{parentEvent:this.renderEvent}),e(M,null,e(y,{element:"profile-link",href:"/profile",className:P.manageAlerts,parentEvent:this.renderEvent,useRouter:!0},"Profile"),e("div",null,"Manage Alerts"),e("div",{className:P.heading},"Your Price Alerts"),n.size?e("div",{className:P.alertContainer},n.toArray().map(function(n){return e(_,{key:n.get("id"),parentEvent:t.renderEvent,alert:n})})):e("div",null,"No price alerts set.")),e(S,{parentEvent:this.renderEvent})))},n}(p);t.default=f(function(e){return{userId:e.get("session").get("identity").get("id"),priceAlerts:e.get("priceAlerts")}},{getPriceAlerts:O})(R)}).call(t,n(0).h)},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ManageAlerts=void 0;var i=n(16),o=r(i).default,a=n(1),s=r(a).default,u=n(2),l=r(u).default,c=n(3),p=r(c).default,d=n(0),f=d.Component,h=n(7),m=h.connect,g=n(206),y=r(g).default,v=n(219),_=r(v).default,b=n(155),x=r(b).default,w=n(220),S=w.deletePriceAlert,k=n(501),E=r(k).default,T=t.ManageAlerts=function(t){function n(e){s(this,n);var r=l(this,t.call(this,e));return r.renderEvent=r.props.parentEvent.createChildRenderEvent("price-alert"),r}return p(n,t),n.prototype.render=function(){var t=this,n=this.props.alert.toJS(),r=n.id,i=n.lowerThresholdRate,a=n.stay,s=a.checkIn,u=a.checkOut,l=a.currencySymbol,c=a.hotel,p=c.name,d=c.udicode,f=c.primaryPhoto;return e("div",{className:E.property},e("img",{src:y(f),alt:p,title:p,className:E.photo}),e("div",null,e(_,o({parentEvent:this.renderEvent,hotel:{udicode:d}},{className:E.hotelLink}),p)),e("div",{style:"font-size: 16px;display:block;"},"Reserve for: ",s," – ",u),e("div",null,M(s)),e("form",{id:"stay-form",onSubmit:this.handleSubmit},e("p",{style:"font-size: 16px;display:block;"},e("label",{htmlFor:"price-alerts-label"},"Price Alert"),e("div",null,l),e("input",{id:"price-alerts-label",type:"number",value:i,onChange:this.handleAlertChange}),e("button",{type:"Submit"},"Set Alert"))),e("button",{className:E.button,onClick:function(e){return C(t,e,r)}},"Cancel this alert"))},n}(f),M=function(e){var t=x(e).diff(x(),"days",!0),n=Math.floor(t);t=24*(t-n);var r=Math.floor(t);t=60*(t-r);var i=Math.floor(t);return t=60*(t-i),n+":"+r+":"+i+":"+Math.floor(t)};t.default=m(function(e){return{userId:e.get("session").get("identity").get("id")}},{deletePriceAlert:S})(T);var C=function(e,t,n){t.preventDefault();var r=e.props,i=r.userId;(0,r.deletePriceAlert)(i,n)}}).call(t,n(0).h)},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(e)switch(e=e.toJS(),e.id){case 403:return"Could not log in. Email address or password incorrect.";case 401:switch(t){case"verify-email":return"Your link has expired. To confirm your account, log in then click Resend Link from your Profile page.";case"forgot-password":return"Your link has expired. Don't worry, just click Forgot Password and we'll send a new one.";default:return"Your link has expired. Please refer to your email for more explicit instructions."}default:return"There was an error while logging in."}return null}Object.defineProperty(t,"__esModule",{value:!0}),t.Login=void 0;var o=n(1),a=r(o).default,s=n(2),u=r(s).default,l=n(3),c=r(l).default,p=n(0),d=p.Component,f=n(7),h=f.connect,m=n(25),g=m.login,y=m.clearError,v=m.clearWorkflow,_=n(411),b=r(_).default,x=n(425),w=r(x).default,S=n(205),k=r(S).default,E=n(14),T=r(E).default,M=n(116),C=r(M).default,O=n(71),A=r(O).default,P=n(68),R=r(P).default,D=n(567),I=r(D).default,N=n(412),L=r(N).default,z=n(232),j=r(z).default,H=n(17),B=r(H).default,F=(new RegExp("^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$"),t.Login=function(t){function n(e){a(this,n);var r=u(this,t.call(this,e));return r.state={isPermAuth:!0},r.handleIsPermAuthClick=r.handleIsPermAuthClick.bind(r),r.handleInputChange=r.handleInputChange.bind(r),r.handleInputFocus=r.handleInputFocus.bind(r),r.handleSubmit=r.handleSubmit.bind(r),r}return c(n,t),n.prototype.handleIsPermAuthClick=function(e){e.preventDefault(),this.handleInputFocus(),this.setState(function(e){return{isPermAuth:!e.isPermAuth}})},n.prototype.handleInputChange=function(e){var t,n=e.target,r=n.name,i=n.value;this.setState((t={},t[r]=i,t))},n.prototype.handleInputFocus=function(){this.setState({emailError:null,passwordError:null})},n.prototype.handleSubmit=function(e){e.preventDefault();var t=this.state,n=t.email,r=t.password,i=t.isPermAuth,o=/(?:[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/i;this.setState({emailError:n?n.match(o)?null:"Enter a valid email":"Field required",passwordError:r?r.length<6?"Password must be at least 6 characters long":null:"Field required"}),this.state.emailError||this.state.passwordError||this.props.processing||this.props.login(n,r,i)},n.prototype.componentWillMount=function(){this.renderEvent=this.props.parentEvent.createChildRenderEvent("login")},n.prototype.componentWillUnmount=function(){var e=this.props,t=e.error,n=e.clearError,r=e.clearWorkflow;t&&n(),r()},n.prototype.render=function(t,n){var r=t.previousLocation,o=t.nextLocation,a=t.processing,s=t.error,u=t.workflow,l=n.email,c=n.password,p=n.isPermAuth,d=i(s,u),f=this.renderEvent,h=b(r);return f.record(),e(C,{redirect:o.toJS(),push:!1},e("div",{className:j.container},e(A,{parentEvent:f}),e(B,null,e("div",{className:j.page,id:"login-page"},w.oauth&&e(I,{preposition:"in"}),e("form",{className:j.form,onSubmit:this.handleSubmit},h&&e(T,{href:h,parentEvent:f,className:j.backToLink},e("img",{src:L}),e("span",null,"Back to previous page")),w.oauth?e("h3",null,e("span",null,"Or, log in with your email address")):e("h1",null,"Log in"),d&&e("p",{id:"error",className:j.errorMessage},d),e("p",null,e("label",{for:"email"},"Email Address"),e("input",{id:"email",name:"email",type:"text",placeholder:"name@example.com",className:this.state.emailError&&j.inputError,value:l,onFocus:this.handleInputFocus,onChange:this.handleInputChange}),this.state.emailError&&e("span",{id:"emailError",className:j.inputErrorMessage},this.state.emailError)),e("p",null,e("label",{for:"password"},"Password"),e("input",{id:"password",name:"password",type:"password",className:this.state.passwordError&&j.inputError,value:c,onFocus:this.handleInputFocus,onChange:this.handleInputChange}),this.state.passwordError&&e("span",{id:"passwordError",className:j.inputErrorMessage},this.state.passwordError)),e("p",{className:j.switch+" "+(p?j.switchOn:"")},e("label",{for:"isPermAuth",onClick:this.handleIsPermAuthClick},e("input",{id:"isPermAuth",name:"isPermAuth",type:"checkbox",checked:p}),e("span",null,"Keep me logged in on this computer"))),e("p",{className:j.lastrow},e("button",{type:"submit",id:"loginSubmit"},a?"Please wait":"Log In",a&&e("img",{src:k})),e(T,{parentEvent:f,href:"/register"},"Register"),e(T,{parentEvent:f,href:"/forgot-password",id:"forgot-password"},"Forgot Password"))))),e(R,{parentEvent:f})))},n}(d));t.default=h(function(e){var t=e.get("session");return{previousLocation:t.get("previousLocation"),nextLocation:t.get("nextLocation"),processing:t.get("processing"),error:t.get("error"),workflow:t.get("workflow")}},{login:g,clearError:y,clearWorkflow:v})(F)}).call(t,n(0).h)},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return e?(e=e.toJS(),e.id,"There was an error while signing out."):null}Object.defineProperty(t,"__esModule",{value:!0}),t.Logout=void 0;var o=n(1),a=r(o).default,s=n(2),u=r(s).default,l=n(3),c=r(l).default,p=n(0),d=p.Component,f=n(7),h=f.connect,m=n(25),g=m.logout,y=m.clearError,v=n(411),_=r(v).default,b=n(205),x=r(b).default,w=n(14),S=r(w).default,k=n(51),E=r(k).default,T=n(71),M=r(T).default,C=n(68),O=r(C).default,A=n(412),P=r(A).default,R=n(232),D=r(R).default,I=n(17),N=r(I).default,L=t.Logout=function(t){function n(e){a(this,n);var r=u(this,t.call(this,e));return r.handleSubmit=r.handleSubmit.bind(r),r}return c(n,t),n.prototype.handleSubmit=function(e){e.preventDefault(),this.props.processing||this.props.isLoggedIn&&this.props.logout()},n.prototype.componentWillMount=function(){this.renderEvent=this.props.parentEvent.createChildRenderEvent("signin")},n.prototype.componentDidMount=function(){this.props.isLoggedIn&&this.props.logout()},n.prototype.componentWillUnmount=function(){this.props.error&&this.props.clearError()},n.prototype.render=function(t){var n=t.previousLocation,r=t.nextLocation,o=t.processing,a=t.error,s=i(a),u=this.renderEvent,l=_(n);return u.record(),e(E,{redirect:r.toJS()},e("div",{className:D.container},e(M,{parentEvent:u}),e(N,null,e("div",{className:D.page,id:"logout-page"},e("form",{className:D.form,onSubmit:this.handleSubmit},l&&e(S,{href:l,parentEvent:u,className:D.backToLink},e("img",{src:P}),e("span",null,"Back to previous page")),e("h1",null,"Sign out"),s&&e("p",{id:"error",className:D.errorMessage},s),e("p",null,e("button",{type:"submit",onClick:this.handleSubmit},o?"Please wait":"Retry",o&&e("img",{src:x})))))),e(O,{parentEvent:u})))},n}(d);t.default=h(function(e){var t=e.get("session");return{isLoggedIn:t.get("isLoggedIn"),previousLocation:t.get("previousLocation"),nextLocation:t.get("nextLocation"),processing:t.get("processing"),error:t.get("error")}},{logout:g,clearError:y})(L)}).call(t,n(0).h)},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(5),d=p.Component,f=n(1023),h=i(f).default,m=function(e){function t(n){a(this,t);var r=u(this,e.call(this,n));return r.state={show:!1,disabled:!1},r}return c(t,e),t.prototype.componentDidMount=function(){var e=this;setTimeout(function(){e.setState({show:!0})},0)},t.prototype.render=function(){var e=this;return this.state.show&&!this.state.disabled&&r(h,{parentEvent:this.props.parentEvent,handleDisable:function(){return g(e)}})},t}(d);t.default=m;var g=function(e){e.setState({show:!1,disabled:!0})};e.exports=t.default}).call(t,n(0).h)},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SignupBarBlack=void 0;var i=n(1),o=r(i).default,a=n(2),s=r(a).default,u=n(3),l=r(u).default,c=n(5),p=c.Component,d=n(7),f=d.connect,h=n(40),m=h.register,g=h.clearError,y=n(17),v=r(y).default,_=n(413),b=r(_).default,x=n(568),w=r(x).default,S=n(146),k=r(S).default,E=n(116),T=r(E).default,M=n(569),C=r(M).default,O=n(570),A=r(O).default,P=n(205),R=r(P).default,D=n(1025),I=r(D).default,N=t.SignupBarBlack=function(t){function n(e){o(this,n);var r=s(this,t.call(this,e));return r.renderEvent=r.props.parentEvent.createChildRenderEvent("signup-promo-black-bar"),r.state={showError:!0},r}return l(n,t),n.prototype.render=function(){var t=this;this.renderEvent.record();var n=this.state,r=n.email,i=n.frontEndErrorMessage,o=n.showError,a=this.props,s=a.currentLocation,u=a.processing,l=a.sessionError,c=l?409===l.get("id")?"That email is already being used":"Something went wrong. Please try again.":null,p=i||c,d=e("div",null,e(T,null,e("div",{className:I.flexContainer},e("div",{className:I.description},"Sign up to receive updates on exclusive news and special deals"),e("form",{onSubmit:function(e){return L(t,t.renderEvent,e)}},o&&p&&e("div",{className:I.errorMessage},p),e("div",{className:I.field},e("input",{id:"email",name:"email",type:"text",placeholder:"name@example.com",value:r,className:I.input+" "+(p&&o&&I.inputError),onFocus:function(){return t.setState({showError:!1})},onChange:function(e){var n=e.target.value;return t.setState({email:n})}}),e("button",{type:"submit",className:I.button,disabled:u},u?e("span",null,e("img",{className:I.loading,src:R}),e("span",{className:I.pleaseWait},"Please wait")):e("span",null,"Sign up")))))),e(k,null,e("div",null,e(C,null,e("div",null,e("div",{className:I.title},"Thank you! You are signed up!"),e("div",{className:I.description},"Please check your inbox and verify your profile."))),e(A,null,e("div",null,e("div",{className:I.title},"Sign up to receive updates on exclusive news and special deals"),e("div",{className:I.description},"Go to your profile to subscribe."))))),e(w,null,e("div",null,e("div",{className:I.title},"Loyalty Rates"),e("div",{className:I.description},"Room Key keeps you informed about the best rates available by booking direct."))),e("button",{className:I.noThanks,onClick:function(e){return z(t,e)}},"No Thanks"));return e("div",{className:I.container},e("div",{className:I.slide},s&&"/locations/:id/hotels"===s.get("path")?e(b,null,d):e(v,null,d)))},n}(p);t.default=f(function(e){var t=e.get("routing").get("current"),n=e.get("session");return{currentLocation:t,email:n.get("session"),identity:n.get("identity"),emailAddress:n.get("emailAddress"),sessionError:n.get("error")}},{register:m,clearError:g})(N);var L=function(e,t,n){n.preventDefault();var r=e.state.email,i=e.props.register,o=/(?:[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/i;e.setState({showError:!0,frontEndErrorMessage:r?r.match(o)?null:"Enter a valid email":"Field required"}),e.state.frontEndErrorMessage||e.props.processing||t.createChildEngagementEvent("register-form","submit").record().then(function(){i(r,void 0,!0,e.renderEvent)})},z=function(e,t){t.preventDefault(),e.props.handleDisable(e)}}).call(t,n(0).h)},function(e,t){e.exports={container:"_79a2537c",gutter:"_0b70390e"}},function(e,t){e.exports={container:"_6739c35a",slide:"_62cbfebf",reveal:"eb54afaa",input:"f2138c83",inputError:"_1f08f472",pulse:"_253cb33f",errorMessage:"e958c1d9"}},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return e?(e=e.toJS(),e.id,"There was an error while sending the email."):null}Object.defineProperty(t,"__esModule",{value:!0}),t.ForgotPassword=void 0;var o=n(1),a=r(o).default,s=n(2),u=r(s).default,l=n(3),c=r(l).default,p=n(0),d=p.Component,f=n(7),h=f.connect,m=n(40),g=m.clearPassphrase,y=m.clearError,v=n(205),_=r(v).default,b=n(116),x=r(b).default,w=n(71),S=r(w).default,k=n(68),E=r(k).default,T=n(232),M=r(T).default,C=n(17),O=r(C).default,A=t.ForgotPassword=function(t){function n(e){a(this,n);var r=u(this,t.call(this,e));return r.handleSubmit=r.handleSubmit.bind(r),r.handleInputChange=r.handleInputChange.bind(r),r.handleInputFocus=r.handleInputFocus.bind(r),r}return c(n,t),n.prototype.handleInputChange=function(e){var t,n=e.target,r=n.name,i=n.value;this.setState((t={},t[r]=i,t))},n.prototype.handleInputFocus=function(){this.setState({emailError:null})},n.prototype.handleSubmit=function(e){if(e.preventDefault(),!this.props.processing){var t=this.state.email,n=/(?:[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/i,r=t?t.match(n)?null:"Enter a valid email":"Field required";this.setState({emailError:r,success:!1}),this.state.emailError||this.props.clearPassphrase(t)}},n.prototype.componentWillMount=function(){this.renderEvent=this.props.parentEvent.createChildRenderEvent("forgot-password")},n.prototype.componentWillReceiveProps=function(e){var t=e.processing,n=e.error,r=this.props.processing&&!t;n?this.setState({success:!1}):t?this.setState({success:!1}):r&&this.setState(function(e){return{email:null,sentToEmail:e.email,success:!0}})},n.prototype.componentWillUnmount=function(){this.props.error&&this.props.clearError()},n.prototype.render=function(t,n){var r=t.nextLocation,o=t.processing,a=t.error,s=n.email,u=n.sentToEmail,l=n.success,c=i(a),p=this.renderEvent;return p.record(),e(x,{redirect:r.toJS()},e("div",{className:M.container},e(S,{parentEvent:p}),e(O,null,e("div",{className:M.page,id:"forgot-password-page"},e("form",{className:M.form,onSubmit:this.handleSubmit},e("h1",null,"Forgot Password"),c?e("p",{id:"error",className:M.errorMessage},c):l&&e("p",{id:"success",className:M.successMessage},"A new password email was sent to ",e("em",null,u),"."),e("p",null,e("label",{for:"email"},"Email Address"),e("input",{id:"email",name:"email",type:"text",placeholder:"name@example.com",className:this.state.emailError&&M.inputError,value:s,onFocus:this.handleInputFocus,onChange:this.handleInputChange}),this.state.emailError&&e("span",{id:"emailError",className:M.inputErrorMessage},this.state.emailError)),e("p",{className:M.lastrow},e("button",{type:"submit",id:"forgot-password-submit"},o?"Please wait":"Request New Password",o&&e("img",{src:_})))))),e(E,{parentEvent:p})))},n}(d);t.default=h(function(e){var t=e.get("session");return{nextLocation:t.get("nextLocation"),processing:t.get("processing"),error:t.get("error")}},{clearPassphrase:g,clearError:y})(A)}).call(t,n(0).h)},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(5),d=p.Component,f=n(193),h=i(f).default,m=n(68),g=i(m).default,y=n(557),v=i(y).default,_=n(1028),b=i(_).default,x=n(1035),w=i(x).default,S=n(1045),k=i(S).default,E=n(1088),T=i(E).default,M=n(1092),C=M.container,O=void 0,A=void 0;O=n(410).ConnectedAdaraHomeTag,A=n(218).CriteoHomeTag;var P=function(e){function t(n){a(this,t);var r=u(this,e.call(this,n));return r.renderEvent=r.props.parentEvent.createChildRenderEvent("home-page"),r}return c(t,e),t.prototype.componentDidMount=function(){this.renderEvent.record()},t.prototype.render=function(){var e=this.renderEvent;return r("div",{id:"homepage-components",className:"page-home "+C},r(w,{parentEvent:e,loyaltyClickHandler:this.scrollToIntro}),r(k,{parentEvent:e}),r(T,null),r(v,null),h("home-page-promo")&&r(b,{parentEvent:e}),r(g,{parentEvent:e}),A&&r(A,null),O&&r(O,null))},t}(d);t.default=P,e.exports=t.default}).call(t,n(0).h)},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=n(17),h=i(f).default,m=n(1029),g=i(m).default,y=n(1030),v=i(y).default,_=n(1033),b=i(_).default,x=function(e){function t(){return a(this,t),u(this,e.apply(this,arguments))}return c(t,e),t.prototype.componentWillMount=function(){this.renderEvent=this.props.parentEvent.createChildRenderEvent("footer-tiles")},t.prototype.render=function(){return this.renderEvent.record(),r(h,null,r("div",{className:g.row},r("div",{className:g.tile},r(v,{parentEvent:this.renderEvent})),r("div",{className:g.tile},r(b,{parentEvent:this.renderEvent}))))},t}(d);t.default=x,e.exports=t.default}).call(t,n(0).h)},function(e,t){e.exports={row:"d6ecc691",tile:"_7a72e5b4"}},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=n(1031),h=i(f).default,m=n(14),g=i(m).default,y=n(1032),v=i(y).default,_=function(e){function t(n){a(this,t);var r=u(this,e.call(this,n));return r.renderEvent=r.props.parentEvent.createChildRenderEvent("footer-install-scout"),r}return c(t,e),t.prototype.render=function(){return this.renderEvent.record(),r("div",{className:h.card},r("div",{className:h.title},"Introducing Scout"),r("div",{className:h.description},"Automatically find better hotel deals while you browse other popular travel sites."),r("div",{className:h.logo},r("img",{src:v})),r(g,{className:h.button,parentEvent:this.renderEvent,useRouter:!1,href:"/scout",element:"footer-scout-promo",title:"Learn more about Scout by Room Key"},r("span",null,"Learn More")))},t}(d);t.default=_,e.exports=t.default}).call(t,n(0).h)},function(e,t){e.exports={card:"_3673ef72",title:"_740931be",description:"_2ecaff4c",logo:"fbaba0e2",button:"_9f41d914"}},function(e,t,n){e.exports=n.p+"apps/roomkey/home/footer-tiles/img/scout-logo.svg"},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.FooterSignup=void 0;var i=n(1),o=r(i).default,a=n(2),s=r(a).default,u=n(3),l=r(u).default,c=n(0),p=c.Component,d=n(7),f=d.connect,h=n(40),m=h.register,g=h.clearError,y=n(568),v=r(y).default,_=n(146),b=r(_).default,x=n(116),w=r(x).default,S=n(569),k=r(S).default,E=n(570),T=r(E).default,M=n(205),C=r(M).default,O=n(1034),A=r(O).default,P=n(14),R=r(P).default,D=t.FooterSignup=function(t){function n(e){o(this,n);var r=s(this,t.call(this,e));return r.renderEvent=r.props.parentEvent.createChildRenderEvent("footer-signup"),r}return l(n,t),n.prototype.componentDidUpdate=function(e){this.props.sessionError!==e.sessionError&&this.setState({errorMessage:this.props.sessionError?409===this.props.sessionError.get("id")?"That email is already being used":"Something went wrong. Please try again.":null})},n.prototype.render=function(t){var n=this,r=t.parentEvent,i=t.useRouter;this.renderEvent.record();var o=this.state.email,a=this.props.processing;return e("div",{className:A.card},e(w,null,e("div",{className:A.flexContainer},e("div",{className:A.description},"Sign up to receive updates on exclusive news and special deals"),e("form",{onSubmit:function(e){return I(n,n.renderEvent,e)}},this.state.errorMessage&&e("div",{className:A.errorMessage},this.state.errorMessage),e("div",{className:A.field},e("input",{id:"email",name:"email",type:"text",placeholder:"name@example.com",value:o,className:A.input+" "+(this.state.errorMessage&&A.inputError),onFocus:function(){return n.setState({errorMessage:null})},onChange:function(e){var t=e.target.value;return n.setState({email:t})}}),e("button",{type:"submit",className:A.button,disabled:a},a?e("span",null,e("img",{className:A.loading,src:C}),e("span",{className:A.pleaseWait},"Please wait")):e("span",null,"Sign up")))))),e(b,null,e("div",null,e(k,null,e("div",null,e("div",{className:A.title},"Thank you! You are signed up!"),e("div",{className:A.description},"Please check your inbox and verify your profile."))),e(T,null,e("div",null,e("div",{className:A.title},"Sign up to receive updates on exclusive news and special deals"),e("div",{className:A.description},"Go to your profile to subscribe."))))),e(v,null,e("div",null,e("div",{className:A.title},"Thank you for being a member of Roomkey.com"),e("div",{className:A.description},"You'll receive updates on exclusive news and special deals. ",e(R,{element:"footer-signup-profile-link",href:"/profile",parentEvent:r,useRouter:i},"Click here")," to view your profile and subscription status."))))},n}(p);t.default=f(function(e){var t=e.get("session");return{email:t.get("session"),identity:t.get("identity"),emailAddress:t.get("emailAddress"),sessionError:t.get("error"),processing:t.get("processing")}},{register:m,clearError:g})(D);var I=function(e,t,n){n.preventDefault();var r=e.state.email,i=e.props.register,o=/(?:[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/i;if(e.setState({errorMessage:r?r.match(o)?null:"Enter a valid email":"Field required"}),!e.state.errorMessage&&!e.props.processing){var a=t.createChildEngagementEvent("register-form","submit");a.record().then(function(){i(r,void 0,!0,a)})}}}).call(t,n(0).h)},function(e,t){e.exports={card:"_167da76b",flexContainer:"_626efa2a",title:"_1958c4a1",description:"f6c84987",field:"_0530ace9",input:"a0a31e10",inputError:"c77e4f87",pulse:"_8232631f",errorMessage:"a1398ba1",button:"ec2405a6",loading:"_3a6a98f7",spin:"b1ca7638",pleaseWait:"bc8240bf"}},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Hero=void 0;var i=n(1),o=r(i).default,a=n(2),s=r(a).default,u=n(3),l=r(u).default,c=n(0),p=c.Component,d=n(7),f=d.connect,h=n(17),m=r(h).default,g=n(153),y=r(g).default,v=n(14),_=r(v).default,b=n(1036),x=r(b).default,w=n(51),S=r(w).default,k=n(116),E=r(k).default,T=n(1042),M=r(T).default,C=n(1043),O=r(C).default;n(1044);var A=t.Hero=function(t){function n(e){o(this,n);var r=s(this,t.call(this,e));return r.handleClick=r.handleClick.bind(r),r}return l(n,t),n.prototype.componentWillMount=function(){this.renderEvent=this.props.parentEvent.createChildRenderEvent("hero")},n.prototype.handleClick=function(e){e.preventDefault(),this.props.loyaltyClickHandler()},n.prototype.render=function(t){var n=t.email;return this.renderEvent.record(),e("div",{id:"hero",className:M.container+" "+M.coverImage},e(m,null,e("div",{className:M.dropdown},e(y,{parentEvent:this.renderEvent,email:n,useRouter:!0})),e("img",{src:O,className:M.logo,alt:"Room Key"}),e(S,null,e("div",{className:M.content},e("h1",{className:M.title},"Unlock a lower rate"),e("h3",{className:M.subtitle},"Search low Loyalty Rates from 60+ hotel chains"))),e(E,null,e("div",{className:M.content},e("h1",{className:M.title},"Unlock a lower rate"),e("h3",{className:M.subtitle},e("span",null,"Sign up to receive updates on exclusive news and special deals, "),e(_,{parentEvent:this.renderEvent,href:"/register",className:M.signup,element:"hero-sign-up"},"sign up now")))),e(x,{parentEvent:this.renderEvent})))},n}(p);t.default=f(function(e){return{email:e.get("session").get("identity").get("emailAddress")}})(A)}).call(t,n(0).h)},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SearchForm=void 0;var i=n(16),o=r(i).default,a=n(1),s=r(a).default,u=n(2),l=r(u).default,c=n(3),p=r(c).default,d=n(5),f=r(d).default,h=n(7),m=h.connect,g=n(49),y=g.assignExistingRatesToHotels,v=n(195),_=r(v).default,b=n(571),x=r(b).default,w=n(239),S=w.setQuery,k=n(499),E=r(k).default,T=n(1040),M=r(T).default,C=n(1041),O=r(C).default,A=t.SearchForm=function(t){function n(e){s(this,n);var r=l(this,t.call(this,e));return r.state={place:null,stay:e.stay.toJS(),error:null,redirect:!1},r}return p(n,t),n.prototype.componentWillReceiveProps=function(e){var t=e.stay,n=e.assignExistingRatesToHotels;t!==this.props.stay&&(n(),this.setState({stay:t.toJS()}))},n.prototype.render=function(){var t=this,n=this.props.parentEvent,r=this.state,i=r.redirect,a=r.place,s=r.stay,u=r.datesSet;return e("div",{id:"search-input",className:M.searchInputForm},e("div",{className:M.placeInputContainer},e(x,{parentEvent:n,onChange:function(e){return t.setState({place:e})},onKeyUp:function(){return t.setState({error:null})},onSubmit:function(){return P(t)}})),e("div",{className:M.stayDetailsContainer},e(E,o({label:u?null:e("span",null,"Checkin ",e("span",{className:M.arrowContainer},e("img",{src:O}))," Checkout"),onChange:function(e){t.setState({stay:e,datesSet:!0})}},s))),e("button",{className:M.submitButton,type:"button",onClick:function(){return P(t)}},"Search"),i&&e(_,o({parentEvent:n,place:a},s,{redirect:i})))},n.prototype.componentWillMount=function(){this.props.clearPlaceInput()},n}(f.Component),P=function(e){e.state.place?e.setState({error:!1,redirect:!0},function(){return e.setState({redirect:!1})}):e.setState({error:"Please choose a valid city, airport, address, or landmark"})};t.default=m(function(e){return{stay:e.get("stay")}},function(e){return{clearPlaceInput:function(){return e(S(""))},assignExistingRatesToHotels:function(){return e(y())}}})(A)}).call(t,n(0).h)},function(e,t){e.exports={container:"_313c7fd6",hint:"_6b186b95",searchIcon:"_2338d724",dropdown:"_2659633a",place:"_463512db",selected:"_5b469c8f",resetButton:"_3007ec3d",resetIcon:"_98635600",screenreaderText:"_607806be"}},function(e,t,n){e.exports=n.p+"apps/roomkey/place-input/img/icon-search.svg"},function(e,t,n){e.exports=n.p+"apps/roomkey/place-input/img/icon-close.svg"},function(e,t){e.exports={searchInputForm:"_7ee46c19",placeInputContainer:"_7deb3e72",stayDetailsContainer:"d7715aa7",arrowContainer:"_072e11a6",submitButton:"_3d74dd26"}},function(e,t,n){e.exports=n.p+"apps/roomkey/home/img/icon-arrow-right.svg"},function(e,t){e.exports={coverImage:"_35dd0b27",container:"_0e214578",content:"_020684f9",dropdown:"a7896851",logo:"cf791653",title:"fd6c3218",subtitle:"d0326648",button:"_7e8cd91b",link:"_7d017a05",currency:"bc652c58",strike:"_066ddd84",signup:"_1bb4c298"}},function(e,t,n){e.exports=n.p+"apps/roomkey/home/img/logo-roomkey-white.svg"},function(e,t,n){function r(e){return n(i(e))}function i(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var o={"./chicago/drake.jpg":502,"./chicago/holiday-inn-mart-plaza.jpg":503,"./chicago/hyatt-regency.jpg":504,"./choice/cambria-dc.jpg":505,"./choice/cambria-times-square.jpg":506,"./london/andaz-liverpool-st.jpg":507,"./london/hilton-tower-bridge.jpg":508,"./london/intercontinental-london-park-lane.jpg":509,"./london/marriott-park-lane.jpg":510,"./new-york/gem-ascend-chelsea.jpg":511,"./new-york/grand-hyatt-new-york.jpg":512,"./new-york/hilton-garden-inn-park-ave.jpg":513,"./new-york/intercontinental-times-square.jpg":514,"./new-york/new-york-edition.jpg":515,"./new-york/wyndham-new-yorker.jpg":516,"./orlando/crowne-plaza-universal.jpg":517,"./orlando/gaylord-palms.jpg":518,"./orlando/hilton-orlando.jpg":519,"./orlando/hyatt-regency-orlando-intl-airport.jpg":520,"./orlando/wyndham-grand-orlando-resort.jpg":521,"./san-diego/wyndham-san-diego-bayside.jpg":522};r.keys=function(){return Object.keys(o)},r.resolve=i,e.exports=r,r.id=1044},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Deals=void 0;var i=n(1),o=r(i).default,a=n(2),s=r(a).default,u=n(3),l=r(u).default,c=n(0),p=c.Component,d=n(7),f=d.connect,h=n(1046),m=h.updateDealHotels,g=n(17),y=r(g).default,v=n(1047),_=r(v).default,b=n(1048),x=r(b).default,w=n(572),S=r(w).default,k=t.Deals=function(t){function n(){return o(this,n),s(this,t.apply(this,arguments))}return l(n,t),n.prototype.componentWillMount=function(){this.props.updateDealHotels(),this.renderEvent=this.props.parentEvent.createChildRenderEvent("deal-hotel-list")},n.prototype.render=function(t){var n=this,r=t.hotels;return e("div",{id:"deals-list"},e(y,null,e("h2",{className:S.title},"Search low loyalty rates from 60+ hotel chains"),e("p",{className:S.tagline},"Examples of Loyalty Member Rates"),e("div",{className:S.list},6===r.filter(function(e){return e.get("name")}).size?r.toJS().map(function(t){return e(x,{key:t.udicode,parentEvent:n.renderEvent,hotel:t})}):e("div",{className:S.loading}))),r.size?e(_,{hotels:r}):null)},n.prototype.componentWillReceiveProps=function(e){var t=e.currency;this.props.currency&&this.props.currency!==t&&this.props.updateDealHotels()},n}(p);t.default=f(function(e){return{currency:e.get("currency"),hotels:e.get("homePage").get("dealHotels")}},{updateDealHotels:m})(k)}).call(t,n(0).h)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateDealHotels=t.fetchCoverHotelRates=t.setCoverHotel=t.HOME_PAGE_SET_COVER_HOTEL=void 0;var r=n(4),i=r.fromJS,o=n(416),a=function(e){return e&&e.__esModule?e:{default:e}}(o).default,s=n(49),u=s.fetchRates,l=n(32),c=l.fetchHotels,p=l.updateHotels,d=t.HOME_PAGE_SET_COVER_HOTEL="HOME_PAGE_SET_COVER_HOTEL";t.setCoverHotel=function(e){return{type:d,hotel:e}},t.fetchCoverHotelRates=function(){return function(e,t){var n=t().get("homePage").get("coverHotel");e(p([n])),e(u(n))}},t.updateDealHotels=function(){return function(e){var t=i(a);e(p(t)),e(c(t,{fields:["address","brand","locationId","name","primaryPhoto"]})),e(u(t))}}},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.RateDisclaimer=void 0;var i=n(1),o=r(i).default,a=n(2),s=r(a).default,u=n(3),l=r(u).default,c=n(0),p=c.Component,d=n(7),f=d.connect,h=n(561),m=r(h).default,g=t.RateDisclaimer=function(t){function n(){return o(this,n),s(this,t.apply(this,arguments))}return l(n,t),n.prototype.render=function(t){var n=t.coverHotel,r=t.dealHotels;return e(m,{hotels:r.push(n)})},n}(p);t.default=f(function(e){return{coverHotel:e.get("homePage").get("coverHotel"),dealHotels:e.get("homePage").get("dealHotels")}})(g)}).call(t,n(0).h)},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(16),a=i(o).default,s=n(1),u=i(s).default,l=n(2),c=i(l).default,p=n(3),d=i(p).default,f=n(0),h=f.Component,m=n(26),g=m.getHotelAndRateData,y=n(206),v=i(y).default,_=n(219),b=i(_).default,x=n(195),w=i(x).default,S=n(572),k=i(S).default,E=n(1049),T=i(E).default;n(1050);var M=function(e){function t(){return u(this,t),c(this,e.apply(this,arguments))}return d(t,e),t.prototype.render=function(e){var t=e.hotel;this.renderEvent||(this.renderEvent=this.props.parentEvent.createChildRenderEvent("deal-hotel",g(t)),this.renderEvent.record());var n=this.renderEvent,i=t.address,o=t.brandLogo,s=t.locationId,u=t.name,l=t.primaryPhoto,c=t.rate,p=l&&(l.big[0]<500||l.big[1]<375)?"big":"500x375";return r("div",{className:k.card,id:"deal-card"},r(b,a({hotel:t,element:"deal-hotel"},{parentEvent:n}),r("div",{className:k.imageWrapper},r("div",{className:k.image,style:"background-image: url('"+v(l,p)+"')"}),r("div",{"data-element":"deal-hotel-name",className:k.hotelName},u)),r("div",{className:k.meta},o&&r("div",{className:k.logoContainer},r("div",{className:k.logo,style:"background-image: url('"+o+"')"})),r("div",{className:k.rate},c&&c.strikethrough&&r("span",{className:c&&c.strikethrough>999?k.long+" "+k.standard:k.standard},r("span",{className:k.label},"Other sites"),r("span",{className:k.sublabel},"Expect to pay"),r("span",{className:k.currency},c.currencySymbol),r("span",null,c.strikethrough)),c&&c.amount?r("span",{className:c&&c.amount>999?k.long+" "+k.loyalty:k.loyalty},r("span",{className:k.label},"Room Key rate"),r("span",{className:k.savings},r("span",null,"Save "),r("span",{className:k.savingsCurrency},c.currencySymbol),r("span",null,c.strikethrough-c.amount,"/night")),r("span",{className:k.currency},c.currencySymbol),r("span",null,c.amount)):r("span",{className:c&&c.amount>999?k.long+" "+k.loyalty:k.loyalty},r("span",{className:k.label},"Room Key rate"),r("span",{className:k.toolow},"Too Low to Show"))))),s&&r(w,a({parentEvent:n},{locationId:s,element:"more-link",events:"more-deals",className:k.link}),r("img",{src:T}),r("span",null,"More ",i.city," hotels")))},t}(h);t.default=M,e.exports=t.default}).call(t,n(0).h)},function(e,t,n){e.exports=n.p+"apps/roomkey/home/img/place-marker.svg"},function(e,t,n){function r(e){return n(i(e))}function i(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var o={"./ACSO.svg":1051,"./ACUO.svg":1052,"./AVID.svg":1053,"./CION.svg":1054,"./CPRL.svg":1055,"./DHOO.svg":1056,"./DIAN.svg":1057,"./HAYN.svg":1058,"./HCTC.svg":1059,"./HGII.svg":1060,"./HHIO.svg":1061,"./HIEO.svg":1062,"./HIHO.svg":1063,"./HIRO.svg":1064,"./HPYL.svg":1065,"./HRYE.svg":1066,"./HUAL.svg":1067,"./HYAT.svg":1068,"./JMWA.svg":1069,"./MHRA.svg":1070,"./MVCA.svg":1071,"./NANN.svg":1072,"./PHAY.svg":1073,"./QUAL.svg":1074,"./RAMA.svg":1075,"./RCHI.svg":1076,"./RENA.svg":1077,"./SSTU.svg":1078,"./TCRL.svg":1079,"./TRAV.svg":1080,"./UBCL.svg":1081,"./UNOI.svg":1082,"./WAAS.svg":1083,"./WBWI.svg":1084,"./WYAA.svg":1085,"./WYND.svg":1086,"./WYTQ.svg":1087};r.keys=function(){return Object.keys(o)},r.resolve=i,e.exports=r,r.id=1050},function(e,t,n){e.exports=n.p+"images/brands/white/ACSO.svg"},function(e,t,n){e.exports=n.p+"images/brands/white/ACUO.svg"},function(e,t,n){e.exports=n.p+"images/brands/white/AVID.svg"},function(e,t,n){e.exports=n.p+"images/brands/white/CION.svg"},function(e,t,n){e.exports=n.p+"images/brands/white/CPRL.svg"},function(e,t,n){e.exports=n.p+"images/brands/white/DHOO.svg"},function(e,t,n){e.exports=n.p+"images/brands/white/DIAN.svg"},function(e,t,n){e.exports=n.p+"images/brands/white/HAYN.svg"},function(e,t,n){e.exports=n.p+"images/brands/white/HCTC.svg"},function(e,t,n){e.exports=n.p+"images/brands/white/HGII.svg"},function(e,t,n){e.exports=n.p+"images/brands/white/HHIO.svg"},function(e,t,n){e.exports=n.p+"images/brands/white/HIEO.svg"},function(e,t,n){e.exports=n.p+"images/brands/white/HIHO.svg"},function(e,t,n){e.exports=n.p+"images/brands/white/HIRO.svg"},function(e,t,n){e.exports=n.p+"images/brands/white/HPYL.svg"},function(e,t,n){e.exports=n.p+"images/brands/white/HRYE.svg"},function(e,t,n){e.exports=n.p+"images/brands/white/HUAL.svg"},function(e,t,n){e.exports=n.p+"images/brands/white/HYAT.svg"},function(e,t,n){e.exports=n.p+"images/brands/white/JMWA.svg"},function(e,t,n){e.exports=n.p+"images/brands/white/MHRA.svg"},function(e,t,n){e.exports=n.p+"images/brands/white/MVCA.svg"},function(e,t,n){e.exports=n.p+"images/brands/white/NANN.svg"},function(e,t,n){e.exports=n.p+"images/brands/white/PHAY.svg"},function(e,t,n){e.exports=n.p+"images/brands/white/QUAL.svg"},function(e,t,n){e.exports=n.p+"images/brands/white/RAMA.svg"},function(e,t,n){e.exports=n.p+"images/brands/white/RCHI.svg"},function(e,t,n){e.exports=n.p+"images/brands/white/RENA.svg"},function(e,t,n){e.exports=n.p+"images/brands/white/SSTU.svg"},function(e,t,n){e.exports=n.p+"images/brands/white/TCRL.svg"},function(e,t,n){e.exports=n.p+"images/brands/white/TRAV.svg"},function(e,t,n){e.exports=n.p+"images/brands/white/UBCL.svg"},function(e,t,n){e.exports=n.p+"images/brands/white/UNOI.svg"},function(e,t,n){e.exports=n.p+"images/brands/white/WAAS.svg"},function(e,t,n){e.exports=n.p+"images/brands/white/WBWI.svg"},function(e,t,n){e.exports=n.p+"images/brands/white/WYAA.svg"},function(e,t,n){e.exports=n.p+"images/brands/white/WYND.svg"},function(e,t,n){e.exports=n.p+"images/brands/white/WYTQ.svg"},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=n(17),h=i(f).default,m=n(523),g=i(m).default,y=n(524),v=i(y).default,_=n(1089),b=i(_).default,x=n(1090),w=i(x).default,S=n(1091),k=i(S).default,E=function(e){function t(){return a(this,t),u(this,e.apply(this,arguments))}return c(t,e),t.prototype.render=function(){return r("div",{id:"homepage-marketing",className:w.container},r(h,null,r("div",{className:w.intro},r("h3",null,"Did you know?"),r("p",null,"Many hotel chains offer lower rates to members of their loyalty programs through their own websites."),r("p",null,"Room Key can access these low Loyalty Member Rates for thousands of hotels across more than 60 hotel chains – more than any other travel site – making it easy to shop the best rate."))),r("div",{className:w.logowall},r(h,null,r("picture",null,r("source",{media:"(max-width: 760px)",srcset:g}),r("img",{src:v,alt:"Founder Logos"})))),r(h,null,r("div",{className:w.more},r("p",null,"… and many more"))),r(h,null,r("div",{className:w.compare},r("div",{className:k.header},r("div",{className:k.col},r("img",{className:k.logo,src:b,alt:"Room Key",width:"260px"})),r("div",{className:k.col},r("h3",{className:k.subtitle},"Other Travel Sites"))),r("div",{className:k.table},r("h4",null,"Rates"),r("dl",null,r("dt",null,"Room Key"),r("dd",{className:k.check},"Lower Loyalty Member Rates."),r("dt",null,"Other Travel Sites"),r("dd",null,"Unable to access as many great deals.")),r("h4",null,"Loyalty points"),r("dl",null,r("dt",null,"Room Key"),r("dd",{className:k.check},"Get the loyalty points and perks with your favorite hotel loyalty program."),r("dt",null,"Other Travel Sites"),r("dd",null,"Bookings made through many other travel sites do not allow you to receive hotel loyalty points and perks.")),r("h4",null,"Customer care"),r("dl",null,r("dt",null,"Room Key"),r("dd",{className:k.check},"At Room Key you book directly with the hotel to ensure your reservation is secure and accurate."),r("dt",null,"Other Travel Sites"),r("dd",null,"Your booking goes through a third party, hopefully without any problems. You are the customer of a third party who may have little interest in offering the same level of after-sales care as the hotel.")),r("h4",null,"Hotel search"),r("dl",null,r("dt",null,"Room Key"),r("dd",{className:k.check},"Displays the hotels that will best suit your needs."),r("dt",null,"Other Travel Sites"),r("dd",null,"Display the hotels that will generate the highest commissions."))))))},t}(d);t.default=E,e.exports=t.default}).call(t,n(0).h)},function(e,t,n){e.exports=n.p+"apps/roomkey/home/img/logo-roomkey-blue.svg"},function(e,t){e.exports={container:"_874f8152",intro:"_62ffa90f",more:"_067c934e",logowall:"_3f3c5e4c",compare:"_7f49afb6"}},function(e,t){e.exports={header:"_8c47fe6c",col:"_37c3d42f",logo:"cf8b67d7",subtitle:"f449caca",table:"_948387fe",check:"_8bf85534",container:"f6abec2c",title:"_1552d30f"}},function(e,t){e.exports={container:"_53e6bfa7",section:"_861f971e"}},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SearchResults=void 0;var i=n(22),o=r(i).default,a=n(1),s=r(a).default,u=n(2),l=r(u).default,c=n(3),p=r(c).default,d=n(0),f=d.Component,h=n(4),m=h.fromJS,g=n(7),y=g.connect,v=n(38),_=r(v).default,b=n(415),x=r(b).default,w=n(1094),S=r(w).default,k=n(230),E=r(k).default,T=n(496),M=r(T).default,C=n(219),O=r(C).default,A=n(165),P=A.reset,R=A.setSearchParams,D=A.setMapParams,I=A.setPlace,N=A.loadMoreHotels,L=A.loadMapHotels,z=A.updateRates,j=n(1095),H=r(j).default,B=n(1097),F=r(B).default,U=n(1099),V=r(U).default,Y=n(1101),W=r(Y).default,q=n(413),G=r(q).default,Z=n(1103),K=r(Z).default,J=n(1108),X=r(J).default,$=n(1129),Q=r($).default,ee=n(1154),te=r(ee).default,ne=n(1157),re=r(ne).default,ie=void 0;ie=n(410).ConnectedAdaraSearchTag;var oe=t.SearchResults=function(t){function n(e){s(this,n);var r=l(this,t.call(this,e));return r.state={showMap:null},r.renderEvent=r.props.parentEvent.createChildRenderEvent("search-results"),r.setShowMapDebounced=E(function(){return se(r)},100),ae(r.props),r}return p(n,t),n.prototype.componentWillMount=function(){M()||(se(this),window.addEventListener("resize",this.setShowMapDebounced))},n.prototype.render=function(){var t=this,n=this.renderEvent,r=this.props,i=r.place,o=r.hotels,a=r.numHotelsToShow,s=this.state,u=s.showMap,l=s.clickedHotel,c=s.clickEvent,p=s.filterChanged,d=s.highlightedHotelUdicode;return e("div",{className:re.container+" "+(M()?re.ie10:"")},e("div",{className:u?re.tools:""},e(F,{parentEvent:this.renderEvent}),e(W,{parentEvent:n,place:i}),e(Q,{parentEvent:n})),e("div",{className:u?re.results:""},e("div",{className:re.list},e(G,null,e(X,{parentEvent:this.renderEvent,hotels:o,numHotelsToShow:a,showMap:u,highlightedHotelUdicode:d,handleClick:function(e,n){return fe(t,e,n)},handleCardMouseEnter:function(e){return ce(t,e)},handleCardMouseLeave:function(){return pe(t)}}),e(te,null),e(H,{hotels:o}),e(V,{parentEvent:this.renderEvent}))),u&&e("div",{className:re.map},e(K,{hotels:o,place:i,setHighlight:function(e){return t._highlight=e},parentEvent:this.renderEvent,filterChanged:p,onMapLoaded:function(e){return t._map=e},onChangeBounds:function(){return de(t)},onClickHotel:function(e,n){return fe(t,e,n)},highlightedHotelUdicode:d,setHighlightHotel:function(e){return ue(t,e)},removeHighlightHotel:function(){return le(t)}}),l&&e(O,{hotel:l,element:"search-results-hotel",parentEvent:c,highlightedHotelUdicode:d,redirect:!0,newTab:!0}))),ie&&e(ie,null))},n.prototype.componentWillReceiveProps=function(e){var t=this,n=e.place,r=e.mapParams,i=e.currency,o=e.maxPrice,a=e.sort,s=e.brands,u=e.amenities,l=e.route.location.key,c=this.state.showMap,p=this.props,d=!1;if(l!=p.route.location.key&&(d=ae(e,p)),!d){var f=!p.place||p.place.get("id")!==n.get("id"),h=S(r,p.mapParams)||r&&!r.equals(p.mapParams),m=o!==p.maxPrice||u!==p.amenities||s!==p.brands||a!==p.sort,g=i!==p.currency;(f||h||m||g)&&(this.setState({filterChanged:!0},function(){return t.setState({filterChanged:!1})}),f&&!r?c&&this._map?de(this):this.props.loadMoreHotels(!0):h?c&&this._map||this.props.loadMoreHotels(!0):m?c&&this._map?de(this):p.loadMoreHotels(!0):g&&p.updateRates())}},n.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.setShowMapDebounced),this.props.reset()},n}(f);t.default=y(function(e){var t=e.get("searchResults");return{stay:e.get("stay"),currency:e.get("currency"),maxPrice:t.get("maxPrice"),sort:t.get("sort"),brands:t.get("brands"),amenities:t.get("amenities"),hotels:t.get("hotels"),numHotelsToShow:t.get("numHotelsToShow"),place:t.get("place"),mapParams:t.get("mapParams")}},{reset:P,setSearchParams:R,setMapParams:D,setPlace:I,loadMoreHotels:N,loadMapHotels:L,updateRates:z})(oe);var ae=function(e,t){var n=e.setMapParams,r=e.setSearchParams,i=e.setPlace,o=e.route,a=o.location.search,s=o.match,u=s.path,l=s.params.id,c=u.match(/^\/([^\/]+)/)[1],p=_(a),d=he(p),f=me(p),h=ge(p),g=ye(p),y=ve(p),v=m({endpoint:c,id:l,name:p.query}),b=!0,x=!0,w=!0;if(t){var k=t.mapParams,E=t.maxPrice,T=t.sort,M=t.brands,C=t.amenities,O=t.place;b=S(d,k)||d&&k.mergeDeep(d)!==k,x=f!==E||h!==T||g&&g.join()!==M.toJS().join()||y&&y.join()!==C.toJS().join(),w=O.get("id")!==l}return b&&n(d),x&&r({maxPrice:f,sort:h,brands:g,amenities:y}),w&&i(v),b||x||w},se=function(e){window.matchMedia("(min-width: 850px)").matches?e.setState({showMap:!0}):e.setState({showMap:!1})},ue=function(e,t){e.state.highlightedHotelUdicode!==t&&e.setState({highlightedHotelUdicode:t})},le=function(e){e.state.highlightedHotelUdicode&&e.setState({highlightedHotelUdicode:null})},ce=function(e,t){var n=t.get("udicode");e.state.highlightedHotelUdicode!==n&&e.setState({highlightedHotelUdicode:n})},pe=function(e){e.state.highlightedHotelUdicode&&e.setState({highlightedHotelUdicode:null})},de=function(e){if(!e._map)throw new Error("map is not set");if(e._map){var t=e._map.getBounds(),n=t._ne,r=t._sw;e.props.loadMapHotels([n.lat,r.lng,n.lat,n.lng,r.lat,n.lng,r.lat,r.lng])}},fe=function(e,t,n){var r=e.props.hotels.find(function(e){return e.get("udicode")===t});e.setState({clickedHotel:r,clickEvent:n},function(){return e.setState({clickedHotel:null,clickEvent:null})}),e.forceUpdate()},he=function(e){var t=x(e,["lng","lat","zoom"]),n=o(t).reduce(function(e,n){var r=parseFloat(t[n]);return isNaN(r)||(e[n]=r),e},{});return 3===o(n).length?n:null},me=function(e){var t=e.maxPrice,n=void 0===t?null:t,r=parseInt(n);return isNaN(r)||(r=Math.abs(r)),isNaN(r)?null:r},ge=function(e){var t=e.sort;return void 0===t?"distance-asc":t},ye=function(e){var t=e.brands;return t instanceof Array?t.sort():[]},ve=function(e){var t=e.amenities;return t instanceof Array?t.sort():[]}}).call(t,n(0).h)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(e||t)&&!(e&&t)},e.exports=t.default},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=n(562),h=i(f).default,m=n(1096),g=m.container,y=function(e){function t(){return a(this,t),u(this,e.apply(this,arguments))}return c(t,e),t.prototype.render=function(e){var t=e.hotels;return 0===t.length||0===t.size?null:r("div",{className:g,id:"rate-disclaimer"},r(h,{hotels:t}))},t}(d);t.default=y,e.exports=t.default}).call(t,n(0).h)},function(e,t){e.exports={container:"ec01c08e"}},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Header=void 0;var i=n(1),o=r(i).default,a=n(2),s=r(a).default,u=n(3),l=r(u).default,c=n(0),p=c.Component,d=n(7),f=d.connect,h=n(118),m=r(h).default,g=n(413),y=r(g).default,v=n(153),_=r(v).default,b=n(1098),x=r(b).default,w=n(158),S=r(w).default,k=t.Header=function(t){function n(){return o(this,n),s(this,t.apply(this,arguments))}return l(n,t),n.prototype.render=function(t){var n=t.parentEvent,r=t.useRouter,i=t.email;return e("div",{id:"branded-header",className:x.header},e(y,null,e(m,{parentEvent:n,useRouter:r,element:"header-logo",id:"homelink-logo",itemprop:"url",className:x.logo},e("img",{src:S,alt:"Room Key"})),e("div",{className:x.tagline},"Unlock a lower rate"),e(_,{email:i,parentEvent:n,useRouter:r})))},n}(p);t.default=f(function(e){return{email:e.get("session").get("identity").get("emailAddress")}})(k)}).call(t,n(0).h)},function(e,t){e.exports={header:"ea2be677",logo:"_6242c251",tagline:"_7706cd76",dropdown:"_5b1c4d16",email:"_54b7dea7",toggle:"_3c282dba",toggle_active:"_35cfc9cd",icon:"_329afbe4",panel:"_4725f486",panel_description:"d6a88acf",verify:"_6f2fad90",panel_links:"_96819baa",panel_button:"_42c880dc"}},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=n(160),h=i(f).default,m=n(162),g=i(m).default,y=n(164),v=i(y).default,_=n(159),b=i(_).default,x=n(163),w=i(x).default,S=n(161),k=i(S).default,E=n(1100),T=E.footer,M=E.container,C=E.about,O=E.navigation,A=E.dropdown,P=function(e){function t(){return a(this,t),u(this,e.apply(this,arguments))}return c(t,e),t.prototype.render=function(e){var t=e.parentEvent;return r("div",{className:T},r("div",{id:"footer",className:M},r("div",{className:C},r(h,null),r(b,{parentEvent:t})),r("div",{className:O},r(k,{parentEvent:t}),r("div",{className:A},r(g,null)),r("div",{className:A},r(w,null))),r(v,null)))},t}(d);t.default=P,e.exports=t.default}).call(t,n(0).h)},function(e,t){e.exports={footer:"_8904862e",container:"_868e3e89",about:"_9d2bb902",dropdown:"f75a02c9",navigation:"e925f4f2"}},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SearchForm=void 0;var i=n(16),o=r(i).default,a=n(6),s=r(a).default,u=n(1),l=r(u).default,c=n(2),p=r(c).default,d=n(3),f=r(d).default,h=n(5),m=r(h).default,g=n(7),y=g.connect,v=n(165),_=v.updateRates,b=v.setPlace,x=n(195),w=r(x).default,S=n(413),k=r(S).default,E=n(571),T=r(E).default,M=n(499),C=r(M).default,O=n(1102),A=r(O).default,P=t.SearchForm=function(t){function n(e){l(this,n);var r=p(this,t.call(this,e));return r.state={place:e.place,stay:e.stay.toJS(),error:null,redirect:!1},r}return f(n,t),n.prototype.componentWillReceiveProps=function(e){var t=e.stay,n=e.updateRates;t!==this.props.stay&&(n(),this.setState({stay:t.toJS()}))},n.prototype.render=function(){var t=this,n=this.props.parentEvent,r=this.state,i=r.redirect,a=r.stay,u=r.place,l=void 0;return i&&(l=s({parentEvent:n,redirect:i,lng:null,lat:null,zoom:null},u&&a?o({place:u},a):u?{place:u}:a)),e("div",{className:A.banner},e(k,null,e("div",{className:A.container},e("div",{className:A.place},e(T,{parentEvent:n,onChange:function(e){e&&R(t,{place:e})}})),e("div",{className:A.stay},e(C,o({},a,{onChange:function(e){return R(t,{stay:e})}}))))),i&&e(w,l))},n}(m.Component),R=function(e,t){var n=t.place,r=t.stay,i={error:!1,redirect:!1};n&&(e.props.mapParams||e.props.place.get("id")!=n.get("id"))&&(e.props.place.get("id")!=n.get("id")&&(e.props.setPlace(n,!0),i.place=n),i.redirect=!0),r&&(i.stay=r,i.redirect=!0),e.setState(i,function(){return e.setState({redirect:!1})})};t.default=y(function(e){return{stay:e.get("stay"),mapParams:e.get("searchResults").get("mapParams")}},{updateRates:_,setPlace:b})(P)}).call(t,n(0).h)},function(e,t){e.exports={banner:"_88510eaa",container:"fbbfb031",place:"_0ea6a26d",stay:"b7bc07ad"}},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SearchMapbox=void 0;var i=n(22),o=r(i).default,a=n(1),s=r(a).default,u=n(2),l=r(u).default,c=n(3),p=r(c).default,d=n(0),f=d.Component,h=d.render,m=n(7),g=m.connect,y=n(230),v=r(y).default,_=n(38),b=r(_).default,x=n(193),w=r(x).default,S=n(154),k=r(S).default,E=n(221),T=r(E).default,M=n(566),C=r(M).default,O=n(1104),A=r(O).default,P=n(165),R=P.setMapParams,D=n(1106),I=r(D).default,N=n(1107),L=r(N).default,z=t.SearchMapbox=function(t){function n(e){s(this,n);var r=l(this,t.call(this,e)),i=e.place,o=e.mapParams;return r.state={},i&&i.has("lng")&&(r.state.place=i),o&&(r.state.mapParams=o.toJS()),r}return p(n,t),n.prototype.render=function(){var t=this;this.renderEvent||(this.renderEvent=this.props.parentEvent.createChildRenderEvent("search-map"),this.renderEvent.record());var n=this.state,r=n.place,i=n.redirect,o=n.mapParams,a=this.props.isLoadingRates,s=b(),u=s.lng||r&&r.get("lng").toString(),l=s.lat||r&&r.get("lat").toString();return u&&l?e("div",null,e(C,{style:"position:absolute; top:0; bottom:0; width:100%;",onRender:function(e){return W(t,e)},options:{center:[u,l],zoom:s.zoom||9,minZoom:9,pitchWithRotate:!1,dragRotate:!1,attributionControl:!1}}),a&&e("div",{className:L.loading},e("div",{className:L.spinner}),e("div",{className:L.message},"Finding rates")),i&&e(k,{params:o,push:!0})):e("div",null)},n.prototype.componentWillReceiveProps=function(e){var t=e.place,n=e.mapParams,r={};this.state.place!==t&&t.has("lng")&&(r.place=t),this.props.mapParams!==n&&(r.mapParams=n?n.toJS():n),o(r)&&this.setState(r)},n.prototype.componentDidUpdate=function(e,t){if(this.state.map){G(this);var n=t.place,r=t.mapParams;q(this,n,r),this.props.filterChanged?(this._processedHotels={},this._hotelFeaturesByUdicode={},this._hotelFeatures=this._hotelFeatures||{},this._hotelFeatures.features=[]):this.updateMarkers(!1),this.setMarkers()}},n.prototype.componentWillUnmount=function(){this.debouncedMoveEnd&&this.debouncedMoveEnd.cancel()},n.prototype.highlight=function(e){this.state.map&&(this.updateMarkers(e),this.setMarkers())},n.prototype.setMarkers=function(){var e=this.state.map.getSource("hotels");e&&e.setData(this._hotelFeatures)},n.prototype.updateMarkers=function(e){var t=this;this._hotelFeaturesByUdicode=this._hotelFeaturesByUdicode||{},this._processedHotels=this._processedHotels||{};var n=void 0;n=this.props.maxPrice?this.props.hotels.filter(function(e){return e.get("rate")}):this.props.hotels,this._hotelFeatures=n.reduce(function(n,r){var i=r.get("udicode"),o=t._hotelFeaturesByUdicode[i],a=r.get("rate"),s=a&&a.get("amount"),u=a&&a.get("lowestNonQualified"),l=o||{type:"Feature",geometry:{type:"Point",coordinates:[r.get("lng"),r.get("lat")]}};return l.properties={udicode:i,highlighted:i==e,isLoyalty:a&&a.get("isLoyalty"),loading:r.get("isLoadingRates"),currency:a&&a.get("currencySymbol"),unavailable:!a,rate:s||u||!1,tlts:s?"":"< "},o||(t._hotelFeaturesByUdicode[i]=l,n.features.push(l)),t._processedHotels[i]=r,n},this._hotelFeatures||{type:"FeatureCollection",features:[]})},n}(f);t.default=g(function(e){return{isLoadingRates:e.get("searchResults").get("isLoadingRates"),maxPrice:e.get("searchResults").get("maxPrice"),mapParams:e.get("searchResults").get("mapParams")}},{setMapParams:R})(z);var j=function(e){return e/180*Math.PI},H=function(e){return e/Math.PI*180},B=Math.PI/2,F=-B,U=Math.PI,V=-Math.PI,Y=2*Math.PI,W=function(e,t){var n=e.props,r=n.onClickHotel,i=n.onMapLoaded,o=n.setHighlightHotel,a=n.removeHighlightHotel;t.addControl(new T.NavigationControl({showCompass:!1})),t.addControl(new T.ScaleControl({maxWidth:80,unit:"imperial"})),t.on("click","hotels",function(t){var n=t.features,i=n[0].properties.udicode;r(i,e.renderEvent)}),e.debouncedMoveEnd=v(function(n){if(n.originalEvent||!e.codeDrivenMove){var r=t.getCenter(),i=r.lng,o=r.lat,a={lng:i,lat:o,zoom:t.getZoom()};e.props.setMapParams(a),e.setState({redirect:!0,mapParams:a},function(){return e.setState({redirect:!1})})}e.codeDrivenMove=!1},1e3),t.on("moveend",e.debouncedMoveEnd),t.on("load",function(){e.setState({map:t}),i(t),q(e),w("draw-polygon")&&K(t,e.state.place),Z(t)}),t.on("mousemove",function(n){if(e.state.map){var r=t.queryRenderedFeatures(n.point,{layers:["hotels"]});r.length?o(r[0].properties.udicode):a()}})},q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(e.state.place){var r=e.state,i=r.map,o=r.redirect,a=r.place,s=r.mapParams,u=!1;if(t!=a&&(s||(u=!0),e.setState(function(e){var t=e.mapCenterPin,n=e.removePreviousPolygon;return t&&t.remove(),t="geocircles"!=a.get("endpoint")?null:J(i,a),{mapCenterPin:t,removePreviousPolygon:n}})),!o)if(s)n&&n.lng==s.lng&&n.lat==s.lat&&n.zoom==s.zoom||(e.codeDrivenMove=!0,i.jumpTo({center:[s.lng,s.lat],zoom:s.zoom}),u=!0);else if(n||t!=a){var l=X(a);e.codeDrivenMove=!0,l?i.fitBounds(l,{linear:!0,duration:0,padding:20}):i.jumpTo({center:[a.get("lng"),a.get("lat")],zoom:9}),u=!0}(u||o)&&e.props.onChangeBounds()}},G=function(t){var n=t.state.map,r=t.props.highlightedHotelUdicode;t._toolTip&&t._toolTip.remove(),t._hotelFeatures&&t._hotelFeatures.features.forEach(function(i){i.properties.loading||i.properties.udicode!==r||(t._toolTip=new T.Marker(h(e(A,{marker:i}))).setLngLat(i.geometry.coordinates).addTo(n))})},Z=function(e){e.addSource("hotels",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),e.addLayer({id:"unavailable",type:"circle",source:"hotels",filter:["all",["==","unavailable",!0],["==","loading",!1]],paint:{"circle-color":"#929aa1","circle-radius":8,"circle-stroke-width":2,"circle-stroke-color":"#ffffff"}}),e.addLayer({id:"hotels",type:"circle",source:"hotels",filter:["==","unavailable",!1],paint:{"circle-color":"#2980b9","circle-radius":8,"circle-stroke-width":2,"circle-stroke-color":"#ffffff"}})},K=function(e,t){e.addLayer({id:"maine",type:"fill",source:{type:"geojson",data:{type:"Feature",geometry:{type:t.get("geometry").get("type"),coordinates:t.get("geometry").get("coordinates")}}},layout:{},paint:{"fill-color":"#088","fill-opacity":.3}})},J=function(e,t){var n=document.createElement("div");return n.style.backgroundImage="url("+I+")",n.style.width="20px",n.style.height="26px",new T.Marker(n).setLngLat([t.get("lng"),t.get("lat")]).addTo(e)},X=function(e){var t=e.get("geometry").toJS(),n=t.type,r=t.coordinates,i=t.radius;switch(n){case"MultiPolygon":case"Polygon":return $(r);case"Circle":return Q(r,i);default:return null}},$=function e(t){return t.reduce(function(t,n){var r=t[0],i=r[0],o=r[1],a=t[1],s=a[0],u=a[1],l=void 0,c=void 0,p=void 0,d=void 0;if(2!=n.length||"number"!=typeof n[0]){var f=e(n),h=f[0];l=h[0],c=h[1];var m=f[1];p=m[0],d=m[1]}else l=p=n[0],c=d=n[1];return[[Math.min(i,l),Math.min(o,c)],[Math.max(s,p),Math.max(u,d)]]},[[1/0,1/0],[-1/0,-1/0]])},Q=function(e,t){var n=e[0],r=e[1],i=t/6371;n=j(n),r=j(r);var o=r+i,a=r-i,s=void 0,u=void 0;if(a>F&&o<B){var l=Math.asin(Math.sin(i)/Math.cos(r));u=n-l,u<V&&(u+=Y),(s=n+l)>U&&(s-=Y)}else a=Math.max(a,F),o=Math.min(o,B),u=V,s=U;return a=H(a),o=H(o),u=H(u),s=H(s),[[u,a],[s,o]]}}).call(t,n(0).h)},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=n(1105),h=f.container,m=f.tooltip,g=f.dot,y=function(e){function t(){return a(this,t),u(this,e.apply(this,arguments))}return c(t,e),t.prototype.render=function(){var e=this.props.marker.properties,t=e.tlts,n=e.currency,i=e.rate;return r("div",{"data-element":"map-tooltip",className:h},r("div",{className:g}),i?r("div",{className:m},t,n,i):r("div",{className:m},"unavailable"))},t}(d);t.default=y,e.exports=t.default}).call(t,n(0).h)},function(e,t){e.exports={container:"_47033462",tooltip:"_6cb10b13",dot:"f426baab"}},function(e,t,n){e.exports=n.p+"apps/roomkey/search-results/img/pin.svg"},function(e,t){e.exports={loading:"a1d643dc",spinner:"_1ad1b278","keep-rotating":"dc52447f",message:"c7bb42a5"}},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Cards=void 0;var i=n(1),o=r(i).default,a=n(2),s=r(a).default,u=n(3),l=r(u).default,c=n(0),p=c.Component,d=n(7),f=d.connect,h=n(1109),m=r(h).default,g=n(1128),y=r(g).default,v=n(496),_=r(v).default,b=t.Cards=function(t){function n(){return o(this,n),s(this,t.apply(this,arguments))}return l(n,t),n.prototype.render=function(t){var n=t.hotels,r=t.parentEvent,i=t.numHotelsToShow,o=t.maxPrice,a=t.handleClick,s=t.handleCardMouseEnter,u=t.handleCardMouseLeave,l=t.highlightedHotelUdicode,c=t.showMap;return o&&(n=n.filter(function(e){return e.get("rate")})),e("div",{className:y.cards+" "+(_()?y.ie10:""),id:"search-results-hotel-list"},n.slice(0,i).toArray().map(function(t){return e("div",{className:y.card,key:t.get("udicode")},e(m,{hotel:t,parentEvent:r,handleClick:a,handleCardMouseEnter:s,handleCardMouseLeave:u,highlightedHotelUdicode:l,showMap:c}))}))},n}(p);t.default=f(function(e){return{maxPrice:e.get("searchResults").get("maxPrice")}})(b)}).call(t,n(0).h)},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(16),a=i(o).default,s=n(1),u=i(s).default,l=n(2),c=i(l).default,p=n(3),d=i(p).default,f=n(0),h=f.Component,m=n(206),g=i(m).default,y=n(26),v=y.getHotelAndRateData,_=n(219),b=i(_).default,x=n(1110),w=i(x).default,S=n(1116),k=i(S).default,E=n(1127),T=i(E).default,M=function(e){function t(){return u(this,t),c(this,e.apply(this,arguments))}return d(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.hotel,i=t.handleClick,o=t.handleCardMouseEnter,s=t.handleCardMouseLeave,u=t.highlightedHotelUdicode,l=t.showMap;this.renderEvent||(this.renderEvent=this.props.parentEvent.createChildRenderEvent("search-result-hotel",v(n)),this.renderEvent.record());var c=this.renderEvent,p=n.toJS(),d=p.name,f=p.rate,h=p.brand,m=p.brandLogo,y=p.primaryPhoto,_=p.userRating,x=p.isLoadingRates,S=p.udicode,E=u===S,M=r("div",null,r("div",{className:T.photo,style:"background-image: url('"+g(y)+"')"}),r("div",{className:T.info},m?r("div",null,r("div",{className:T.logoContainer},r("div",{className:T.logo,style:"background-image: url('"+m+"')"})),r("div",{className:T.nameContainer},r("div",{className:T.name,title:d},d),h&&r("div",{className:T.class},h.scale),_&&r(w,{rating:_}))):r("div",{className:T.noLogoNameContainer},r("div",{className:T.name},d),_&&r(w,{rating:_}),h&&r("div",{className:T.class},h.scale))));return r("div",{"data-element":"hotel-card",className:E?T.container+" "+T.highlight:""+T.container},l?r("div",{className:T.detailsLink,onClick:function(){return i(S,e.renderEvent)},onMouseEnter:function(){return o(n)},onMouseLeave:function(){return s()}},M):r(b,{hotel:n,parentEvent:c,className:T.detailsLink,element:"hotel-card",newTab:!0},M),r(k,a({isLoadingRates:x,rate:f,hotel:n},{parentEvent:c})))},t}(h);t.default=M,e.exports=t.default}).call(t,n(0).h)},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=n(1111),h=i(f).default,m=n(1112),g=i(m).default,y=n(1113),v=i(y).default,_=n(1114),b=i(_).default,x=n(1115),w=x.container,S=x.logo,k=x.dot,E=function(e){function t(){return a(this,t),u(this,e.apply(this,arguments))}return c(t,e),t.prototype.render=function(e){for(var t=e.rating,n=[],i=[],o=0;o<Math.floor(t);o++)n.push(r("img",{className:k,src:g}));for(var a=0;a<Math.floor(5-t);a++)i.push(r("img",{className:k,src:b}));return r("div",{className:w},r("img",{className:S,src:h}),n,t%1>0&&r("img",{className:k,src:v}),i)},t}(d);t.default=E,e.exports=t.default}).call(t,n(0).h)},function(e,t,n){e.exports=n.p+"apps/roomkey/search-results/cards/user-rating/img/tripadvisor-logo.svg"},function(e,t,n){e.exports=n.p+"apps/roomkey/search-results/cards/user-rating/img/tripadvisor-filled.svg"},function(e,t,n){e.exports=n.p+"apps/roomkey/search-results/cards/user-rating/img/tripadvisor-half.svg"},function(e,t,n){e.exports=n.p+"apps/roomkey/search-results/cards/user-rating/img/tripadvisor-empty.svg"},function(e,t){e.exports={container:"_8abe3a03",logo:"_08eeb6ad",dot:"_779c612c"}},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=n(1117),h=i(f).default,m=n(1119),g=i(m).default,y=n(1121),v=i(y).default,_=n(1123),b=i(_).default,x=n(1124),w=i(x).default,S=n(1125),k=i(S).default,E=n(1126),T=i(E).default,M=n(233),C=i(M).default,O=function(e){function t(){return a(this,t),u(this,e.apply(this,arguments))}return c(t,e),t.prototype.render=function(e){var t=e.isLoadingRates,n=e.rate,i=e.parentEvent,o=e.hotel;return t?r(g,null):n?r("div",{className:C.row},n.lowestNonQualified&&r("div",{className:C.column},r(b,{rate:n})),r("div",{className:n.lowestNonQualified?C.column:C.twoColumn},n.isLoyalty?n.amount?n.savings?r(w,{rate:n}):r(T,{rate:n}):r(k,null):r(T,{rate:n})),r("div",{className:C.column},r(h,{rate:n,parentEvent:i,hotel:o}))):r(v,null)},t}(d);t.default=O,e.exports=t.default}).call(t,n(0).h)},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=n(204),h=i(f).default,m=n(1118),g=i(m).default,y=n(233),v=i(y).default,_=function(e){function t(){return a(this,t),u(this,e.apply(this,arguments))}return c(t,e),t.prototype.render=function(e){var t=e.rate,n=e.parentEvent,i=e.hotel;return r("div",null,r("div",{className:v.title},t.roomType.charAt(0).toUpperCase()+t.roomType.slice(1)),r(h,{hotel:i,className:v.button,element:"search-result-hotel",parentEvent:n},r(b,{rate:t})))},t}(d);t.default=_;var b=function(e){function t(){return a(this,t),u(this,e.apply(this,arguments))}return c(t,e),t.prototype.render=function(e){var t=e.rate;return r("div",null,t.isLoyalty&&!t.amount?[r("div",{className:v.buttonCTA+" "+v.small},"See lower rate"),r("div",{className:v.buttonLabel},r("span",null,t.partnerBookButtonLabel||t.partnerCode)," ",r("img",{src:g}))]:[r("div",{className:v.buttonCTA},"Book it"),r("div",{className:v.buttonLabel},r("span",null,t.partnerBookButtonLabel||t.partnerCode)," ",r("img",{src:g}))])},t}(d);e.exports=t.default}).call(t,n(0).h)},function(e,t,n){e.exports=n.p+"apps/roomkey/search-results/cards/rate/img/external-link.svg"},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=n(1120),h=i(f).default,m=function(e){function t(){return a(this,t),u(this,e.apply(this,arguments))}return c(t,e),t.prototype.render=function(){return r("div",{className:h.container},r("div",{className:h.dancer},r("div",{className:h.danceBar+" "+h.first}),r("div",{className:h.danceBar+" "+h.second}),r("div",{className:h.danceBar+" "+h.third})),r("span",null,"Finding the best rate…"))},t}(d);t.default=m,e.exports=t.default}).call(t,n(0).h)},function(e,t){e.exports={container:"_43bc47cc",dancer:"_60a75d7f",danceBar:"_1c6358b9",dance:"eb38732f",first:"e6973a1e",second:"e458e289",third:"d9c8f718"}},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=n(1122),h=f.container,m=function(e){function t(){return a(this,t),u(this,e.apply(this,arguments))}return c(t,e),t.prototype.render=function(){return r("div",{className:h},"Booking Unavailable")},t}(d);t.default=m,e.exports=t.default}).call(t,n(0).h)},function(e,t){e.exports={container:"f0fd0ac8"}},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=n(233),h=i(f).default,m=function(e){function t(){return a(this,t),u(this,e.apply(this,arguments))}return c(t,e),t.prototype.render=function(e){var t=e.rate,n=t.lowestNonQualified&&t.currencySymbol.length>1||t.amount>999;return r("div",null,r("div",{className:h.title},"Other Sites"),r("div",{className:h.intro},"Expect to pay"),r("div",{className:h.amount+" "+(n&&h.long)},r("span",{className:h.sup},t.currencySymbol),r("span",null,t.lowestNonQualified)),r("div",{className:h.caption},r("span",{className:h.sup},t.currencySymbol),r("span",null,t.lowestNonQualifiedInclusive," w/ taxes & fees")))},t}(d);t.default=m,e.exports=t.default}).call(t,n(0).h)},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=n(233),h=i(f).default,m=function(e){function t(){return a(this,t),u(this,e.apply(this,arguments))}return c(t,e),t.prototype.render=function(e){var t=e.rate,n=t.amount&&t.currencySymbol.length>1||t.amount>999;return r("div",null,r("div",{className:h.title},"Room Key"),r("div",{className:h.intro+" "+h.savings},r("span",null,"Save")," ",r("span",{className:h.sup},t.currencySymbol),r("span",null,t.savings,"/night")),r("div",{className:h.amount+" "+h.loyalty+" "+(n&&h.long)},r("span",{className:h.sup},t.currencySymbol),r("span",null,t.amount)),r("div",{className:h.caption},r("span",{className:h.sup},t.currencySymbol),r("span",null,t.inclusive," w/ taxes & fees")))},t}(d);t.default=m,e.exports=t.default}).call(t,n(0).h)},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=n(233),h=i(f).default,m=function(e){function t(){return a(this,t),u(this,e.apply(this,arguments))}return c(t,e),t.prototype.render=function(){return r("div",null,r("div",{className:h.title},"Room Key"),r("div",null,r("div",{className:h.amount+" "+h.tooLow},r("span",null,"Too Low"),r("br",null),r("span",null,"to Show"))))},t}(d);t.default=m,e.exports=t.default}).call(t,n(0).h)},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=n(233),h=i(f).default,m=function(e){function t(){return a(this,t),u(this,e.apply(this,arguments))}return c(t,e),t.prototype.render=function(e){var t=e.rate,n=t.amount&&t.currencySymbol.length>1||t.amount>999;return r("div",null,r("div",{className:h.title},"Room Key"),r("div",{className:h.intro},"Same low rate"),r("div",{className:h.amount+" "+(n&&h.long)},r("span",{className:h.sup},t.currencySymbol),r("span",null,t.amount)),r("div",{className:h.caption},r("span",{className:h.sup},t.currencySymbol),r("span",null,t.inclusive," w/ taxes & fees")))},t}(d);t.default=m,e.exports=t.default}).call(t,n(0).h)},function(e,t){e.exports={container:"beea49af",highlight:"_7092a5bb",detailsLink:"_9832f15f",photo:"a78faeb1",info:"_9529e087",logoContainer:"ccce0d56",logo:"_8ff3662a",noLogoNameContainer:"_6111b9d0",nameContainer:"_2f58b1a9",name:"_1ad68ec0",class:"c928a1da"}},function(e,t){e.exports={cards:"_302f7d54",card:"_6cf13685",ie10:"_58b9117f"}},function(e,t,n){"use strict";(function(r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),a=i(o).default,s=n(2),u=i(s).default,l=n(3),c=i(l).default,p=n(0),d=p.Component,f=n(413),h=i(f).default,m=n(151),g=i(m).default,y=n(1130),v=i(y).default,_=n(1139),b=i(_).default,x=n(1142),w=i(x).default,S=n(1147),k=i(S).default,E=n(1151),T=i(E).default,M=n(1152),C=i(M).default,O=n(1153),A=i(O).default,P=function(e){function t(n){a(this,t);var r=u(this,e.call(this,n));return r.state={open:!1},r.handleClickOutside=r.handleClickOutside.bind(r),r.handleToggleClick=r.handleToggleClick.bind(r),r}return c(t,e),t.prototype.render=function(){var e=this.props.parentEvent,t=this.state.open;return r("div",{className:A.container},r(h,null,r(g,{onClickOutside:this.handleClickOutside},r("button",{className:A.toggle,onClick:this.handleToggleClick},r("span",null,r("span",null,"Filters"),r("img",{src:t?C:T,className:A.chevron}))),r("div",{className:A.sort},r(k,{parentEvent:e})),r("div",{className:A.filters+" "+(t?A.open:"")},r(b,{parentEvent:e}),r(w,{parentEvent:e}),r(v,{parentEvent:e})))))},t.prototype.handleToggleClick=function(){this.setState({open:!this.state.open})},t.prototype.handleClickOutside=function(){this.state.open&&this.handleToggleClick()},t}(d);t.default=P,e.exports=t.default}).call(t,n(0).h)},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.BrandFilter=void 0;var i=n(1),o=r(i).default,a=n(2),s=r(a).default,u=n(3),l=r(u).default,c=n(0),p=c.Component,d=n(7),f=d.connect,h=n(195),m=r(h).default,g=n(165),y=g.setSearchParams,v=n(525),_=r(v).default,b=n(573),x=r(b).default,w=n(526),S=r(w).default,k=n(574),E=r(k).default,T=n(575),M=r(T).default,C=t.BrandFilter=function(t){function n(e){o(this,n);var r=s(this,t.call(this,e));return r.state={brands:e.brands.toJS()},r}return l(n,t),n.prototype.componentWillMount=function(){this.renderEvent=this.props.parentEvent.createChildRenderEvent("brand-filter")},n.prototype.render=function(){var t=this,n=this.props.metaBrands,r=this.state,i=r.redirect,o=r.brands,a=r.changed,s=this.renderEvent;if(i)return e(m,{parentEvent:s,redirect:i,push:!0});var u=n?this.props.brands.filter(function(e){return n.find(function(t){return t.get("id")==e})}):this.props.brands,l=u.size,c=!n||0===n.size;n&&l!==this.props.brands.size&&this.props.setSearchParams({brands:u});var p=1===l&&n?n.find(function(e){return e.get("id")==u.first()}).get("name"):(0===l||c?"Any":l)+" "+(1===l?"brand":"brands");return e(_,{selected:l,label:p,disabled:c,onClickOutside:function(){return a?P(t):t.filter.toggle(!1)},ref:function(e){return t.filter=e}},!c&&e("form",{onSubmit:function(e){return P(t,e)}},e(E,null,e(S,null,"Show Only"),n&&n.map(function(n){return e(x,{name:n.get("name"),hotelCount:n.get("hotelCount"),checked:o.indexOf(n.get("id"))>-1,value:n.get("id"),key:"brand-"+n.get("id"),onChange:function(e){return O(t,e)}})}).toJS()),e(M,{onNegativeAction:function(e){return A(t,e)},negativeLabel:"Clear"})))},n}(p),O=function(e,t){var n=t.target,r=n.value,i=n.checked,o=e.state.brands,a=o.indexOf(r),s=(i?o.concat(r):o.slice(0,a).concat(o.slice(a+1))).sort(),u=e.props.brands.toJS().join()!=s.join();e.setState({changed:u,brands:s})},A=function(e,t){var n=Boolean(e.props.brands.size);e.setState({changed:n,brands:[]}),P(e,t)},P=function(e,t){t&&t.preventDefault(),e.state.changed&&(e.props.setSearchParams({brands:e.state.brands}),e.setState({redirect:!0,changed:!1},function(){return e.setState({redirect:!1})})),e.filter.toggle(!1)};t.default=f(function(e){var t=e.get("searchResults"),n=t.get("metadata");return{metaBrands:n&&n.get("brands"),brands:t.get("brands")}},{setSearchParams:y})(C)}).call(t,n(0).h)},function(e,t,n){e.exports=n.p+"apps/roomkey/search-results/filters/img/icon-chevron-down-white.svg"},function(e,t,n){e.exports=n.p+"apps/roomkey/search-results/filters/img/icon-chevron-down-grey.svg"},function(e,t,n){e.exports=n.p+"apps/roomkey/search-results/filters/img/icon-chevron-up-grey.svg"},function(e,t){e.exports={container:"b3eb979f",toggle:"_05a9926b",selected:"_36590c7d",open:"a495be39",content:"_71e40eb9",chevron:"e2adb1b3"}},function(e,t){e.exports={row:"_2aa1d147",name:"_3dcb3bec",count:"_61f74218"}},function(e,t){e.exports={header:"_94634026"}},function(e,t){e.exports={scroll:"_4c755f0c"}},function(e,t){e.exports={row:"c53e2169",clear:"_0d0df8f8",apply:"aff6b3d9"}},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.MaxPriceFilter=void 0;var i=n(1),o=r(i).default,a=n(2),s=r(a).default,u=n(3),l=r(u).default;n(1140);var c=n(0),p=c.Component,d=n(7),f=d.connect,h=n(195),m=r(h).default,g=n(165),y=g.setSearchParams,v=n(525),_=r(v).default,b=n(526),x=r(b).default,w=n(41),S=r(w).default,k=n(1141),E=r(k).default,T=t.MaxPriceFilter=function(t){function n(e){o(this,n);var r=s(this,t.call(this,e));return r.handleValueClick=r.handleValueClick.bind(r),r.handleAnyPriceClick=r.handleAnyPriceClick.bind(r),r}return l(n,t),n.prototype.componentWillMount=function(){this.renderEvent=this.props.parentEvent.createChildRenderEvent("max-price-filter")},n.prototype.handleValueClick=function(e){this._apply(parseInt(e.target.value))},n.prototype.handleAnyPriceClick=function(){this._apply(null)},n.prototype._apply=function(e){var t=this;this.filter.toggle(!1),this.props.setSearchParams({maxPrice:e}),this.setState({redirect:!0},function(){return t.setState({redirect:!1})})},n.prototype.render=function(){var t=this,n=this.props,r=n.metadata,i=n.currency,o=n.maxPrice,a=this.state.redirect,s=this.renderEvent;if(a)return e(m,{parentEvent:s,redirect:a,push:!0});var u=r&&M(r.get("aggregatedBestRates").get("highest")),l=S[i].symbol;return e(_,{selected:Boolean(o),label:o?"Up to "+l+o:"Any price",ref:function(e){return t.filter=e},disabled:!r||0===u.length},e("div",{className:E.select},e(x,null,"Up to"),e("button",{className:E.option+(o?"":" "+E.selected),onClick:this.handleAnyPriceClick,type:"button"},"Any price"),r&&u.map(function(n){return e("button",{key:"max-price-"+n,className:E.option+(n==o?" "+E.selected:""),onClick:function(e){return t.handleValueClick(e)},value:n,type:"button"},l,n)})))},n}(p),M=function(e){var t=e>1e4?1e4*Math.ceil(e/1e4)/10:e>5e3?5e3*Math.ceil(e/5e3)/10:e>1e3?250:e<500?50:100,n=Math.ceil(e/t);return Array(n).fill(0).map(function(e,n){return(n+1)*t})};t.default=f(function(e){return{currency:e.get("currency"),metadata:e.get("searchResults").get("metadata"),maxPrice:e.get("searchResults").get("maxPrice")}},{setSearchParams:y})(T)}).call(t,n(0).h)},function(e,t){!function(){if(!Array.prototype.fill){var e=function(e){if(null==this)throw new TypeError("this is null or not defined");for(var t=Object(this),n=t.length>>>0,r=arguments[1],i=r>>0,o=i<0?Math.max(n+i,0):Math.min(i,n),a=arguments[2],s=void 0===a?n:a>>0,u=s<0?Math.max(n+s,0):Math.min(s,n);o<u;)t[o]=e,o++;return t};if(Object.defineProperty)try{Object.defineProperty(Array.prototype,"fill",{value:e,configurable:!0,enumerable:!1,writable:!0})}catch(e){}Array.prototype.fill||(Array.prototype.fill=e)}}()},function(e,t){e.exports={select:"_701c9ebf",option:"_8fafaf71",selected:"d5c6e63f"}},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.AmenitiyTypeFilter=void 0;var i=n(1143),o=r(i).default,a=n(1),s=r(a).default,u=n(2),l=r(u).default,c=n(3),p=r(c).default,d=n(0),f=d.Component,h=n(7),m=h.connect,g=n(195),y=r(g).default,v=n(165),_=v.setSearchParams,b=n(525),x=r(b).default,w=n(573),S=r(w).default,k=n(526),E=r(k).default,T=n(574),M=r(T).default,C=n(575),O=r(C).default,A=t.AmenitiyTypeFilter=function(t){function n(e){s(this,n);var r=l(this,t.call(this,e));return r.state={amenities:r.props.amenities.toJS()},r}return p(n,t),n.prototype.componentWillMount=function(){this.renderEvent=this.props.parentEvent.createChildRenderEvent("amenity-filter")},n.prototype.render=function(){var t=this,n=this.state.redirect,r=this.props,i=r.amenities,a=r.metaAmenities;if(n)return e(y,{parentEvent:this.renderEvent,redirect:n,push:!0});var s=a?i.filter(function(e){return a.find(function(t){return t.get("code")==e})}):i;s.size!==i.size&&this.props.setSearchParams({amenities:s});var u=a&&a.toJS(),l=i.filter(function(e){return a&&a.get(e)}).size,c=function(n){return n.map(function(n){var r=u[n]||{},i=r.name,o=r.hotelCount;return i&&e(S,{value:n,name:i,hotelCount:o,checked:t.state.amenities.indexOf(n)>-1,onChange:function(e){return R(t,e)}})})};return e(x,{label:1===l?a.get(i.first()).get("name"):(0===l?"Any":l)+" amenities",selected:Boolean(l),disabled:!a||0===a.size,ref:function(e){return t.filter=e},onCancel:function(){return t.setState({amenities:t.props.amenities.toJS()})},onClickOutside:function(){return P(t)}},a&&e("form",{onSubmit:function(e){return P(t,e)}},e(M,null,e(E,null,"Popular Amenities"),c(["FRWI","FBKFST","ASHUT","FIT","IPOOL","PKG"]),e(E,null,"All Amenities"),c(o(a.sort(function(e,t){return e.get("name")<t.get("name")?-1:e.get("name")>t.get("name")?1:0}).keys()))),e(O,{onNegativeAction:function(e){return D(t,e)},negativeLabel:"Clear"})))},n}(f),P=function(e,t){t&&t.preventDefault(),e.state.changed&&(e.props.setSearchParams({amenities:e.state.amenities}),e.setState({redirect:!0,changed:!1},function(){return e.setState({redirect:!1})})),e.filter.toggle(!1)},R=function(e,t){var n=t.target,r=n.value,i=n.checked,o=e.state.amenities,a=o.indexOf(r),s=(i?o.concat(r):o.slice(0,a).concat(o.slice(a+1))).sort(),u=e.props.amenities.toJS().join()!=s.join();e.setState({changed:u,amenities:s})},D=function(e,t){var n=Boolean(e.props.amenities.size);e.setState({changed:n,amenities:[]}),P(e,t)};t.default=m(function(e){var t=e.get("searchResults"),n=t.get("metadata");return{metaAmenities:n&&n.get("amenities"),amenities:t.get("amenities")}},{setSearchParams:_})(A)}).call(t,n(0).h)},function(e,t,n){e.exports={default:n(1144),__esModule:!0}},function(e,t,n){n(455),n(1145),e.exports=n(63).Array.from},function(e,t,n){"use strict";var r=n(201),i=n(69),o=n(210),a=n(538),s=n(539),u=n(222),l=n(1146),c=n(540);i(i.S+i.F*!n(545)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,i,p,d=o(e),f="function"==typeof this?this:Array,h=arguments.length,m=h>1?arguments[1]:void 0,g=void 0!==m,y=0,v=c(d);if(g&&(m=r(m,h>2?arguments[2]:void 0,2)),void 0==v||f==Array&&s(v))for(t=u(d.length),n=new f(t);t>y;y++)l(n,y,g?m(d[y],y):d[y]);else for(p=v.call(d),n=new f;!(i=p.next()).done;y++)l(n,y,g?a(p,m,[i.value,y],!0):i.value);return n.length=y,n}})},function(e,t,n){"use strict";var r=n(207),i=n(241);e.exports=function(e,t,n){t in e?r.f(e,t,i(0,n)):e[t]=n}},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SortFilter=void 0;var i=n(22),o=r(i).default,a=n(1),s=r(a).default,u=n(2),l=r(u).default,c=n(3),p=r(c).default,d=n(0),f=d.Component,h=n(7),m=h.connect,g=n(195),y=r(g).default,v=n(165),_=v.setSearchParams,b=n(1148),x=r(b).default,w=n(1149),S=r(w).default,k=n(1150),E=r(k).default,T=t.SortFilter=function(t){function n(e){s(this,n);var r=l(this,t.call(this,e));return r.state={sort:r.props.sort?r.props.sort:"distance-asc"},r.handleSortSelect=r.handleSortSelect.bind(r),r}return p(n,t),n.prototype.componentWillMount=function(){this.renderEvent=this.props.parentEvent.createChildRenderEvent("sort-filter")},n.prototype.handleSortSelect=function(e){var t=this;this.props.setSearchParams({sort:e.target.value}),this.setState({redirect:!0},function(){return t.setState({redirect:!1})})},n.prototype.render=function(){var t=this,n=this.state.redirect,r=this.renderEvent,i={"distance-asc":"Recommended","rate-asc":"Lowest rate","rate-desc":"Highest rate"};return n?e(y,{parentEvent:r,redirect:n,push:!0}):e("div",{className:E.container},e("div",{className:E.fakeSelect},e("img",{className:E.iconSort,src:S}),e("span",null,i[this.props.sort]),e("img",{className:E.chevron,src:x})),e("select",{className:E.select,onChange:function(e){return t.handleSortSelect(e)}},o(i).map(function(n){return e("option",{selected:t.props.sort===n,value:n},i[n])})))},n}(f);t.default=m(function(e){return{sort:e.get("searchResults").get("sort")}},{setSearchParams:_})(T)}).call(t,n(0).h)},function(e,t,n){e.exports=n.p+"apps/roomkey/search-results/filters/img/icon-chevron-down.svg"},function(e,t,n){e.exports=n.p+"apps/roomkey/search-results/filters/img/icon-sort.svg"},function(e,t){e.exports={container:"_134ae8f3",select:"c373488e",fakeSelect:"f92726bb",chevron:"ab07c596",iconSort:"a9b47d0c"}},function(e,t,n){e.exports=n.p+"apps/roomkey/search-results/filters/img/icon-chevron-down-blue.svg"},function(e,t,n){e.exports=n.p+"apps/roomkey/search-results/filters/img/icon-chevron-up-blue.svg"},function(e,t){e.exports={container:"d7a83cb2",filters:"_09c75568",sort:"_44f199aa",toggle:"_403017e0",chevron:"_914645c5",open:"f1ec38ff"}},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SeeMoreHotels=void 0;var i=n(1),o=r(i).default,a=n(2),s=r(a).default,u=n(3),l=r(u).default,c=n(0),p=c.Component,d=n(7),f=d.connect,h=n(165),m=h.loadMoreHotels,g=n(528),y=r(g).default,v=n(1155),_=r(v).default,b=n(1156),x=b.container,w=b.spinner,S=b.button,k=b.arrow,E=b.results,T=t.SeeMoreHotels=function(t){function n(){return o(this,n),s(this,t.apply(this,arguments))}return l(n,t),n.prototype.render=function(t){var n=t.isLoadingHotels,r=t.moreHotelsToShow,i=t.loadMoreHotels;return e("div",{className:x},n?e("span",null,e("img",{className:w,src:y}),"Loading hotels..."):r?e("button",{"data-element":"see-more-button",type:"button",className:S,onClick:function(){return i()}},e("span",null,"See More Hotels"),e("img",{src:_,className:k})):e("div",{className:E},"No more hotels match your search criteria"))},n}(p);t.default=f(function(e){var t=e.get("searchResults");return{isLoadingHotels:t.get("isLoadingHotels"),moreHotelsToShow:t.get("moreHotelsToShow")}},{loadMoreHotels:m})(T)}).call(t,n(0).h)},function(e,t,n){e.exports=n.p+"apps/roomkey/search-results/img/icon-arrow-down.svg"},function(e,t){e.exports={container:"_3d7b5cfe",spinner:"b2ddf506",spin:"a4a68ec6",button:"e30ac036",arrow:"_3854316e",results:"_8d40d2f9"}},function(e,t){e.exports={container:"_9e9129b5",tools:"_30ba05fc",results:"f7aa4489",list:"_7e0bb005",ie10:"_99e498f3",map:"fcc5d75c"}},function(e,t){},function(e,t){e.exports={container:"_08c0a553"}},function(e,t){},function(e,t,n){function r(e){return n(i(e))}function i(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var o={"./about-us-execs-bg.png":1162,"./about-us-partners-divider.png":1163,"./account-benefits-sprite.png":1164,"./amenities-provided-sm.png":1165,"./amenities-unprovided-sm.png":1166,"./calendar-icon-grey.png":1167,"./calendar-icon-white.png":1168,"./careers-cover.jpg":1169,"./carousel-arrow.png":1170,"./clear-button.svg":1171,"./clear_button.png":1172,"./close-icon-dark.png":1173,"./close-icon.png":1174,"./close-x.png":1175,"./cover-images/chicago/drake.jpg":502,"./cover-images/chicago/holiday-inn-mart-plaza.jpg":503,"./cover-images/chicago/hyatt-regency.jpg":504,"./cover-images/choice/cambria-dc.jpg":505,"./cover-images/choice/cambria-times-square.jpg":506,"./cover-images/london/andaz-liverpool-st.jpg":507,"./cover-images/london/hilton-tower-bridge.jpg":508,"./cover-images/london/intercontinental-london-park-lane.jpg":509,"./cover-images/london/marriott-park-lane.jpg":510,"./cover-images/new-york/gem-ascend-chelsea.jpg":511,"./cover-images/new-york/grand-hyatt-new-york.jpg":512,"./cover-images/new-york/hilton-garden-inn-park-ave.jpg":513,"./cover-images/new-york/intercontinental-times-square.jpg":514,"./cover-images/new-york/new-york-edition.jpg":515,"./cover-images/new-york/wyndham-new-yorker.jpg":516,"./cover-images/orlando/crowne-plaza-universal.jpg":517,"./cover-images/orlando/gaylord-palms.jpg":518,"./cover-images/orlando/hilton-orlando.jpg":519,"./cover-images/orlando/hyatt-regency-orlando-intl-airport.jpg":520,"./cover-images/orlando/wyndham-grand-orlando-resort.jpg":521,"./cover-images/san-diego/wyndham-san-diego-bayside.jpg":522,"./crosshairs.png":1176,"./custom_checkbox.png":1177,"./favicon.ico":576,"./fb-share/rk-r-20180527.png":1178,"./filter-user.png":1179,"./hexagon-tile-horizontal.png":1180,"./hexagon-tile-vertical.png":1181,"./hexagon-tile.png":1182,"./homepage-ads/find-deals.png":1183,"./homepage-ads/link-rewards.gif":1184,"./homepage-ads/summer-deals.gif":1185,"./homepage-ads/todays-top-deals.gif":1186,"./ie-leaflet-popup-tip.png":1187,"./logo-blue-sm.png":1188,"./logo-blue.png":1189,"./minimal-scrim.png":1190,"./photo-icon.png":1191,"./scrim.png":1192,"./solar-eclipse-2017/carbondale-il.jpg":1193,"./solar-eclipse-2017/casper-wy.jpg":1194,"./solar-eclipse-2017/charleston-sc.jpg":1195,"./solar-eclipse-2017/clayton-ga.jpg":1196,"./solar-eclipse-2017/idaho-falls.jpg":1197,"./solar-eclipse-2017/lincoln-ne.jpg":1198,"./solar-eclipse-2017/nashville.jpg":1199,"./solar-eclipse-2017/nebraska.jpg":1200,"./solar-eclipse-2017/oregon.jpg":1201,"./solar-eclipse-2017/paducah-ky.jpg":1202,"./solar-eclipse-2017/portland.jpg":1203,"./solar-eclipse-2017/st-louis-mo.jpg":1204,"./svg/about-us-map.svg":577,"./svg/arrow-down.svg":578,"./svg/arrow-left.svg":579,"./svg/arrow-right.svg":580,"./svg/bubble-arrow-up.svg":581,"./svg/calendar-icon-grey.svg":582,"./svg/calendar-icon-white.svg":583,"./svg/calendar-icon.svg":584,"./svg/checkbox.svg":585,"./svg/close-x-dark-blue.svg":586,"./svg/close-x-white.svg":587,"./svg/extenal-link-icon.svg":498,"./svg/flags/au.svg":588,"./svg/flags/ca.svg":589,"./svg/flags/nz.svg":590,"./svg/flags/uk.svg":591,"./svg/flags/us.svg":592,"./svg/founders-logos-2-up.svg":593,"./svg/founders-logos-3-up.svg":594,"./svg/founders-logos.svg":595,"./svg/hotel-chain-founder-logos.svg":596,"./svg/hotel-chain-logos.svg":597,"./svg/hotel-pin-hover.svg":598,"./svg/hotel-pin.svg":599,"./svg/line-arrow-dark-blue.svg":600,"./svg/line-arrow-sky-blue-hover.svg":601,"./svg/line-arrow-sky-blue.svg":602,"./svg/line-arrow-white.svg":603,"./svg/loading-spin-blue.svg":604,"./svg/loading-spin-white.svg":205,"./svg/location-arrow-blue.svg":605,"./svg/location-arrow-sky-blue.svg":606,"./svg/location-arrow-white.svg":607,"./svg/logo-blue.svg":427,"./svg/logo-white.svg":608,"./svg/map-pin-sky-blue.svg":609,"./svg/msnbc-logo.svg":610,"./svg/pin.svg":611,"./svg/reset.svg":612,"./svg/right-arrow-sky-blue.svg":613,"./svg/roomkey-logo-white.svg":614,"./svg/search-mag-glass.svg":615,"./svg/star.svg":616,"./svg/techcrunch-logo.svg":617,"./svg/tick.svg":618,"./svg/top.svg":619,"./svg/trip_logo.svg":620,"./svg/twp-logo.svg":621,"./svg/usa-today-logo.svg":622,"./svg/white-arrow-down.svg":623,"./svg/white-arrow.svg":624,"./svg/wifi.svg":625,"./svg/x.svg":529,"./tripadvisor-logo.png":1205,"./tripadvisor-sprite.png":1206,"./white-arrow-down.png":1207};r.keys=function(){return Object.keys(o)},r.resolve=i,e.exports=r,r.id=1161},function(e,t,n){e.exports=n.p+"images/roomkey/about-us-execs-bg.png"},function(e,t,n){e.exports=n.p+"images/roomkey/about-us-partners-divider.png"},function(e,t,n){e.exports=n.p+"images/roomkey/account-benefits-sprite.png"},function(e,t,n){e.exports=n.p+"images/roomkey/amenities-provided-sm.png"},function(e,t,n){e.exports=n.p+"images/roomkey/amenities-unprovided-sm.png"},function(e,t,n){e.exports=n.p+"images/roomkey/calendar-icon-grey.png"},function(e,t,n){e.exports=n.p+"images/roomkey/calendar-icon-white.png"},function(e,t,n){e.exports=n.p+"images/roomkey/careers-cover.jpg"},function(e,t,n){e.exports=n.p+"images/roomkey/carousel-arrow.png"},function(e,t,n){e.exports=n.p+"images/roomkey/clear-button.svg"},function(e,t,n){e.exports=n.p+"images/roomkey/clear_button.png"},function(e,t,n){e.exports=n.p+"images/roomkey/close-icon-dark.png"},function(e,t,n){e.exports=n.p+"images/roomkey/close-icon.png"},function(e,t,n){e.exports=n.p+"images/roomkey/close-x.png"},function(e,t,n){e.exports=n.p+"images/roomkey/crosshairs.png"},function(e,t,n){e.exports=n.p+"images/roomkey/custom_checkbox.png"},function(e,t,n){e.exports=n.p+"images/roomkey/fb-share/rk-r-20180527.png"},function(e,t,n){e.exports=n.p+"images/roomkey/filter-user.png"},function(e,t,n){e.exports=n.p+"images/roomkey/hexagon-tile-horizontal.png"},function(e,t,n){e.exports=n.p+"images/roomkey/hexagon-tile-vertical.png"},function(e,t,n){e.exports=n.p+"images/roomkey/hexagon-tile.png"},function(e,t,n){e.exports=n.p+"images/roomkey/homepage-ads/find-deals.png"},function(e,t,n){e.exports=n.p+"images/roomkey/homepage-ads/link-rewards.gif"},function(e,t,n){e.exports=n.p+"images/roomkey/homepage-ads/summer-deals.gif"},function(e,t,n){e.exports=n.p+"images/roomkey/homepage-ads/todays-top-deals.gif"},function(e,t,n){e.exports=n.p+"images/roomkey/ie-leaflet-popup-tip.png"},function(e,t,n){e.exports=n.p+"images/roomkey/logo-blue-sm.png"},function(e,t,n){e.exports=n.p+"images/roomkey/logo-blue.png"},function(e,t,n){e.exports=n.p+"images/roomkey/minimal-scrim.png"},function(e,t,n){e.exports=n.p+"images/roomkey/photo-icon.png"},function(e,t,n){e.exports=n.p+"images/roomkey/scrim.png"},function(e,t,n){e.exports=n.p+"images/roomkey/solar-eclipse-2017/carbondale-il.jpg"},function(e,t,n){e.exports=n.p+"images/roomkey/solar-eclipse-2017/casper-wy.jpg"},function(e,t,n){e.exports=n.p+"images/roomkey/solar-eclipse-2017/charleston-sc.jpg"},function(e,t,n){e.exports=n.p+"images/roomkey/solar-eclipse-2017/clayton-ga.jpg"},function(e,t,n){e.exports=n.p+"images/roomkey/solar-eclipse-2017/idaho-falls.jpg"},function(e,t,n){e.exports=n.p+"images/roomkey/solar-eclipse-2017/lincoln-ne.jpg"},function(e,t,n){e.exports=n.p+"images/roomkey/solar-eclipse-2017/nashville.jpg"},function(e,t,n){e.exports=n.p+"images/roomkey/solar-eclipse-2017/nebraska.jpg"},function(e,t,n){e.exports=n.p+"images/roomkey/solar-eclipse-2017/oregon.jpg"},function(e,t,n){e.exports=n.p+"images/roomkey/solar-eclipse-2017/paducah-ky.jpg"},function(e,t,n){e.exports=n.p+"images/roomkey/solar-eclipse-2017/portland.jpg"},function(e,t,n){e.exports=n.p+"images/roomkey/solar-eclipse-2017/st-louis-mo.jpg"},function(e,t,n){e.exports=n.p+"images/roomkey/tripadvisor-logo.png"},function(e,t,n){e.exports=n.p+"images/roomkey/tripadvisor-sprite.png"},function(e,t,n){e.exports=n.p+"images/roomkey/white-arrow-down.png"},function(e,t,n){function r(e){return n(i(e))}function i(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var o={"./chicago/drake.jpg":502,"./chicago/holiday-inn-mart-plaza.jpg":503,"./chicago/hyatt-regency.jpg":504,"./choice/cambria-dc.jpg":505,"./choice/cambria-times-square.jpg":506,"./london/andaz-liverpool-st.jpg":507,"./london/hilton-tower-bridge.jpg":508,"./london/intercontinental-london-park-lane.jpg":509,"./london/marriott-park-lane.jpg":510,"./new-york/gem-ascend-chelsea.jpg":511,"./new-york/grand-hyatt-new-york.jpg":512,"./new-york/hilton-garden-inn-park-ave.jpg":513,"./new-york/intercontinental-times-square.jpg":514,"./new-york/new-york-edition.jpg":515,"./new-york/wyndham-new-yorker.jpg":516,"./orlando/crowne-plaza-universal.jpg":517,"./orlando/gaylord-palms.jpg":518,"./orlando/hilton-orlando.jpg":519,"./orlando/hyatt-regency-orlando-intl-airport.jpg":520,"./orlando/wyndham-grand-orlando-resort.jpg":521,"./san-diego/wyndham-san-diego-bayside.jpg":522};r.keys=function(){return Object.keys(o)},r.resolve=i,e.exports=r,r.id=1208},function(e,t,n){function r(e){return n(i(e))}function i(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var o={"./about-us-map.svg":577,"./arrow-down.svg":578,"./arrow-left.svg":579,"./arrow-right.svg":580,"./bubble-arrow-up.svg":581,"./calendar-icon-grey.svg":582,"./calendar-icon-white.svg":583,"./calendar-icon.svg":584,"./checkbox.svg":585,"./close-x-dark-blue.svg":586,"./close-x-white.svg":587,"./extenal-link-icon.svg":498,"./flags/au.svg":588,"./flags/ca.svg":589,"./flags/nz.svg":590,"./flags/uk.svg":591,"./flags/us.svg":592,"./founders-logos-2-up.svg":593,"./founders-logos-3-up.svg":594,"./founders-logos.svg":595,"./hotel-chain-founder-logos.svg":596,"./hotel-chain-logos.svg":597,"./hotel-pin-hover.svg":598,"./hotel-pin.svg":599,"./line-arrow-dark-blue.svg":600,"./line-arrow-sky-blue-hover.svg":601,"./line-arrow-sky-blue.svg":602,"./line-arrow-white.svg":603,"./loading-spin-blue.svg":604,"./loading-spin-white.svg":205,"./location-arrow-blue.svg":605,"./location-arrow-sky-blue.svg":606,"./location-arrow-white.svg":607,"./logo-blue.svg":427,"./logo-white.svg":608,"./map-pin-sky-blue.svg":609,"./msnbc-logo.svg":610,"./pin.svg":611,"./reset.svg":612,"./right-arrow-sky-blue.svg":613,"./roomkey-logo-white.svg":614,"./search-mag-glass.svg":615,"./star.svg":616,"./techcrunch-logo.svg":617,"./tick.svg":618,"./top.svg":619,"./trip_logo.svg":620,"./twp-logo.svg":621,"./usa-today-logo.svg":622,"./white-arrow-down.svg":623,"./white-arrow.svg":624,"./wifi.svg":625,"./x.svg":529};r.keys=function(){return Object.keys(o)},r.resolve=i,e.exports=r,r.id=1209},function(e,t,n){function r(e){return n(i(e))}function i(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var o={"./au.svg":1211,"./ca.svg":1212,"./nz.svg":1213,"./uk.svg":1214,"./us.svg":1215};r.keys=function(){return Object.keys(o)},r.resolve=i,e.exports=r,r.id=1210},function(e,t,n){e.exports=n.p+"images/_base/svg/flags/au.svg"},function(e,t,n){e.exports=n.p+"images/_base/svg/flags/ca.svg"},function(e,t,n){e.exports=n.p+"images/_base/svg/flags/nz.svg"},function(e,t,n){e.exports=n.p+"images/_base/svg/flags/uk.svg"},function(e,t,n){e.exports=n.p+"images/_base/svg/flags/us.svg"}],[728]);
//# sourceMappingURL=roomkey.js.map